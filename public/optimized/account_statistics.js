define(["i18n!accounts.statistics","jquery","jquery.ajaxJSON","jqueryui/dialog","jquery.instructure_misc_helpers"],function(a,b){b(document).ready(function(){function c(c,d){b("#over_time_dialog").dialog("close").dialog({autoOpen:!1,width:630,height:330}).dialog("open").dialog("option","title",a.t("title_data_point_over_time","%{data_point} Over Time",{data_point:d}));var e=new google.visualization.DataTable;e.addColumn("date",a.t("heading_date","Date")),e.addColumn("number",d||a.t("heading_value","Value")),e.addColumn("string","title1"),e.addColumn("string","text1");var f=[];b.each(c,function(){var a=new Date;a.setTime(this[0]),f.push([a,this[1],undefined,undefined])}),e.addRows(f);var g=new google.visualization.AnnotatedTimeLine(document.getElementById("over_time"));g.draw(e,{displayAnnotations:!1})}b(".over_time_link").live("click",function(d){d.preventDefault();var e=b(this).attr("data-name"),f=b.replaceTags(b(".over_time_url").attr("href"),"attribute",b(this).attr("data-key")),g=b(this);g.text(a.t("loading_text","loading...")),b.ajaxJSON(f,"GET",{},function(d){g.text(a.t("over_time_link","over time")),b("#over_time_dialog .csv_url").attr("href",f+".csv"),c(d,e)},function(b){g.text(a.t("loading_error","error"))})})})})