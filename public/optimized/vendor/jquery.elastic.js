define(["jquery"],function(a){a.fn.extend({elastic:function(b){var c=a.extend({},b),d=["paddingTop","paddingRight","paddingBottom","paddingLeft","borderLeftWidth","borderLeftStyle","borderRightWidth","borderRightStyle","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function b(a,b){var c=Math.floor(parseInt(a,10));f.height()!=c&&f.css({height:c+"px",overflow:b})}function e(){var d=f.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),e=g.html().replace(/<br>/ig,"<br />");if(d+"&nbsp;"!=e){g[0].innerHTML=d+"&nbsp;",g.width(f.width());var k=g.height();if(Math.abs(k+h-f.height())>3){var l=k+h;l<j?l>i?b(l,"hidden"):b(i,"hidden"):b(j,"auto"),a.isFunction(c.callback)&&c.callback()}}}if(this.type!="textarea")return!1;var f=a(this),g=a("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}).prependTo(f.parent()),h=parseInt(f.css("line-height"),10)||parseInt(f.css("font-size"),"10"),i=parseInt(f.css("height"),10)||h*3,j=parseInt(f.css("max-height"),10)||Number.MAX_VALUE,k=0;j<0&&(j=Number.MAX_VALUE),a.each(d,function(a,b){g.css(b,f.css(b))}),f.css({overflow:"hidden"}).bind("keyup change cut paste",e).bind("input paste",function(a){setTimeout(e,250)}),e()})}})})