define(["jquery","vendor/jquery.template"],function(a){window.requiredFieldValidator=function(b){return b==null||b==undefined||!a.trim(b+"").length?{valid:!1,msg:"This is a required field"}:{valid:!0,msg:null}},window.TextCellEditor=function(b,c,d,e){var f,g=d,h=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />"),d!=null&&(f[0].defaultValue=d,f.val(g)),f.appendTo(b),f.focus().select()},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a),g=a},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()},window.GradeCellEditor=function(b,c,d,e){if(e.active){d=d||{};var f,g=d.grade,h=this;this.init=function(){switch(c.grading_type){case"letter_grade":var e=[{text:"--",value:""},{text:"A",value:"A"},{text:"A-",value:"A-"},{text:"B+",value:"B+"},{text:"B",value:"B"},{text:"B-",value:"B-"},{text:"C+",value:"C+"},{text:"C-",value:"C-"},{text:"D+",value:"D+"},{text:"D",value:"D"},{text:"D-",value:"D-"},{text:"F",value:"F"}],h="";a.each(e,function(){h+='<option value="'+this.value+'" '+(this.value==d.grade?"selected":"")+">"+this.text+"</option>"}),f=a("<select>"+h+"</select>");break;default:f=a("<INPUT type=text class='editor-text' />")}typeof d.grade!="undefined"&&d.grade+""!=""&&(f[0].defaultValue=d.grade,f.val(g)),f.appendTo(b),f.focus().select(),typeof d.uploaded_grade=="undefined"&&(d.uploaded_grade=d.grade);var i={originalScore:d.original_grade||"--",uploadedScore:d.uploaded_grade||"--"},j='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all">  <table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></table></div> </div>';a(a.template(j,i)).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a.grade},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()}else{var f;this.init=function(){var a=d?d.grade:"";b.removeClass("selected editable").html(a)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return d},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()}},window.StudentNameEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.name:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.StudentNameFormatter=function(a,b,c,d,e){return c?c.name:""},window.NullEditor=function(a,b,c,d){var e,f=c,g=this;this.init=function(){a.removeClass("selected editable").html(c)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.NullGradeEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.grade:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.simpleGradeCellFormatter=function(a,b,c,d,e){return c?c.grade:""},window.PassFailCellFormatter=function(a,b,c,d,e){c=c||{};switch(c.grade){case"pass":return"<span class='pass_fail pass' />";case"fail":return"<span class='pass_fail fail' />";default:return""}},window.PassFailSelectCellEditor=function(b,c,d,e){d=d||{};var f,g=d,h=this;this.init=function(){f=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value=''>---</OPTION><OPTION value='pass'>Pass</OPTION><OPTION value='fail'>Fail</OPTION></SELECT>"),f.val(g.grade),f.appendTo(b),f.focus(),f.change(function(){d.grade=a(this).val()});var c='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all"><table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></tbody></table></div> </div>';a(a.template(c,{originalScore:10,uploadedScore:15})).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a},this.getValue=function(){return d},this.isValueChanged=function(){return f.val()!=g},this.validate=function(){return{valid:!0,msg:null}},this.init()}})