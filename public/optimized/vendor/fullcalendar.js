define(["jquery"],function(a,b){function c(b){a.extend(!0,br,b)}function d(c,d,j){function k(a){bb?(y(),x(),G(),t(a)):l()}function l(){bc=d.theme?"ui":"fc",c.addClass("fc"),d.isRTL&&c.addClass("fc-rtl"),d.theme&&c.addClass("ui-widget"),bb=a("<div class='fc-content' style='position:relative'/>").prependTo(c),_=new e(X,d),ba=_.render(),ba&&c.prepend(ba),s(d.defaultView),a(window).resize(A),r()||n()}function n(){setTimeout(function(){!bd.start&&r()&&t()},0)}function o(){a(window).unbind("resize",A),_.destroy(),bb.remove(),c.removeClass("fc fc-rtl ui-widget")}function p(){return $.offsetWidth!==0}function r(){return a("body")[0].offsetWidth!==0}function s(b){if(!bd||b!=bd.name){bj++,I();var c=bd,d;c?((c.beforeHide||O)(),N(bb,bb.height()),c.element.hide()):N(bb,1),bb.css("overflow","hidden"),bd=be[b],bd?bd.element.show():bd=be[b]=new bu[b](d=bh=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo(bb),X),c&&_.deactivateButton(c.name),_.activateButton(b),t(),bb.css("overflow",""),c&&N(bb,1),d||(bd.afterShow||O)(),bj--}}function t(a){if(p()){bj++,I(),bg===b&&y();var d=!1;!bd.start||a||bk<bd.start||bk>=bd.end?(bd.render(bk,a||0),z(!0),d=!0):bd.sizeDirty?(bd.clearEvents(),z(),d=!0):bd.eventsDirty&&(bd.clearEvents(),d=!0),bd.sizeDirty=!1,bd.eventsDirty=!1,B(d),bf=c.outerWidth(),_.updateTitle(bd.title);var e=new Date;e>=bd.start&&e<bd.end?_.disableButton("today"):_.enableButton("today"),bj--,bd.trigger("viewDisplay",$)}}function w(){x(),p()&&(y(),z(),I(),bd.clearEvents(),bd.renderEvents(bl),bd.sizeDirty=!1)}function x(){a.each(be,function(a,b){b.sizeDirty=!0})}function y(){d.contentHeight?bg=d.contentHeight:d.height?bg=d.height-(ba?ba.height():0)-J(bb):bg=Math.round(bb.width()/Math.max(d.aspectRatio,.5))}function z(a){bj++,bd.setHeight(bg,a),bh&&(bh.css("position","relative"),bh=null),bd.setWidth(bb.width(),a),bj--}function A(){if(!bj)if(bd.start){var a=++bi;setTimeout(function(){a==bi&&!bj&&p()&&bf!=(bf=c.outerWidth())&&(bj++,w(),bd.trigger("windowResize",$),bj--)},200)}else n()}function B(a){!d.lazyFetching||Y(bd.visStart,bd.visEnd)?C():a&&F()}function C(){Z(bd.visStart,bd.visEnd)}function D(a){bl=a,F()}function E(a){F(a)}function F(a){G(),p()&&(bd.clearEvents(),bd.renderEvents(bl,a),bd.eventsDirty=!1)}function G(){a.each(be,function(a,b){b.eventsDirty=!0})}function H(a,c,d){bd.select(a,c,d===b?!0:d)}function I(){bd&&bd.unselect()}function K(){t(-1)}function L(){t(1)}function M(){g(bk,-1),t()}function P(){g(bk,1),t()}function Q(){bk=new Date,t()}function R(a,b,c){a instanceof Date?bk=m(a):q(bk,a,b,c),t()}function S(a,c,d){a!==b&&g(bk,a),c!==b&&h(bk,c),d!==b&&i(bk,d),t()}function T(){return m(bk)}function U(){return bd}function V(a,c){if(c===b)return d[a];if(a=="height"||a=="contentHeight"||a=="aspectRatio")d[a]=c,w()}function W(a,b){if(d[a])return d[a].apply(b||$,Array.prototype.slice.call(arguments,2))}var X=this;X.options=d,X.render=k,X.destroy=o,X.refetchEvents=C,X.reportEvents=D,X.reportEventChange=E,X.rerenderEvents=F,X.changeView=s,X.select=H,X.unselect=I,X.prev=K,X.next=L,X.prevYear=M,X.nextYear=P,X.today=Q,X.gotoDate=R,X.incrementDate=S,X.formatDate=function(a,b){return u(a,b,d)},X.formatDates=function(a,b,c){return v(a,b,c,d)},X.getDate=T,X.getView=U,X.option=V,X.trigger=W,f.call(X,d,j);var Y=X.isFetchNeeded,Z=X.fetchEvents,$=c[0],_,ba,bb,bc,bd,be={},bf,bg,bh,bi=0,bj=0,bk=new Date,bl=[],bm;q(bk,d.year,d.month,d.date),d.droppable&&a(document).bind("dragstart",function(b,c){var e=b.target,f=a(e);if(!f.parents(".fc").length){var g=d.dropAccept;if(a.isFunction(g)?g.call(e,f):f.is(g))bm=e,bd.dragStart(bm,b,c)}}).bind("dragstop",function(a,b){bm&&(bd.dragStop(bm,a,b),bm=null)})}function e(b,c){function d(){n=c.theme?"ui":"fc";var b=c.header;if(b)return m=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(f("left")).append(f("center")).append(f("right"))),m}function e(){m.remove()}function f(d){var e=a("<td class='fc-header-"+d+"'/>"),f=c.header[d];return f&&a.each(f.split(" "),function(d){d>0&&e.append("<span class='fc-header-space'/>");var f;a.each(this.split(","),function(d,g){if(g=="title")e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(n+"-corner-right"),f=null;else{var h;b[g]?h=b[g]:bu[g]&&(h=function(){k.removeClass(n+"-state-hover"),b.changeView(g)});if(h){var i=c.theme?S(c.buttonIcons,g):null,j=S(c.buttonText,g),k=a("<span class='fc-button fc-button-"+g+" "+n+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(i?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+i+"'/>"+"</span>":j)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");k&&(k.click(function(){k.hasClass(n+"-state-disabled")||h()}).mousedown(function(){k.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-down")}).mouseup(function(){k.removeClass(n+"-state-down")}).hover(function(){k.not("."+n+"-state-active").not("."+n+"-state-disabled").addClass(n+"-state-hover")},function(){k.removeClass(n+"-state-hover").removeClass(n+"-state-down")}).appendTo(e),f||k.addClass(n+"-corner-left"),f=k)}}}),f&&f.addClass(n+"-corner-right")}),e}function g(a){m.find("h2").html(a)}function h(a){m.find("span.fc-button-"+a).addClass(n+"-state-active")}function i(a){m.find("span.fc-button-"+a).removeClass(n+"-state-active")}function j(a){m.find("span.fc-button-"+a).addClass(n+"-state-disabled")}function k(a){m.find("span.fc-button-"+a).removeClass(n+"-state-disabled")}var l=this;l.render=d,l.destroy=e,l.updateTitle=g,l.activateButton=h,l.deactivateButton=i,l.disableButton=j,l.enableButton=k;var m=a([]),n}function f(c,d){function e(a,b){return!D||a<D||b>E}function f(a,b){D=a,E=b,I=[];var c=++F,d=C.length;G=d;for(var e=0;e<d;e++)g(C[e],c)}function g(a,b){h(a,function(c){if(b==F){if(c){for(var d=0;d<c.length;d++)c[d].source=a,t(c[d]);I=I.concat(c)}G--,G||A(I)}})}function h(b,d){var e,f=bt.sourceFetchers,g;for(e=0;e<f.length;e++){g=f[e](b,D,E,d);if(g===!0)return;if(typeof g=="object"){h(g,d);return}}var i=b.events;if(i)a.isFunction(i)?(q(),i(m(D),m(E),function(a){d(a),s()})):a.isArray(i)?d(i):d();else{var j=b.url;if(j){var k=b.success,l=b.error,n=b.complete,o=a.extend({},b.data||{}),p=$(b.startParam,c.startParam),r=$(b.endParam,c.endParam);p&&(o[p]=Math.round(+D/1e3)),r&&(o[r]=Math.round(+E/1e3)),q(),a.ajax(a.extend({},bv,b,{data:o,success:function(b){b=b||[];var c=Z(k,this,arguments);a.isArray(c)&&(b=c),d(b)},error:function(){Z(l,this,arguments),d()},complete:function(){Z(n,this,arguments),s()}}))}else d()}}function i(a){a=j(a),a&&(G++,g(a,F))}function j(b){a.isFunction(b)||a.isArray(b)?b={events:b}:typeof b=="string"&&(b={url:b});if(typeof b=="object")return u(b),C.push(b),b}function k(b){C=a.grep(C,function(a){return!v(a,b)}),I=a.grep(I,function(a){return!v(a.source,b)}),A(I)}function l(a){var b,c=I.length,d,e=z().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=I[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+f),a.end?d.end?d.end=new Date(+d.end+g):d.end=new Date(+e(d)+g):d.end=null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroudColor=a.backgroudColor,d.borderColor=a.borderColor,d.textColor=a.textColor,t(d));t(a),A(I)}function n(a,b){t(a),a.source||(b&&(B.events.push(a),a.source=B),I.push(a)),A(I)}function o(b){if(!b){I=[];for(var c=0;c<C.length;c++)a.isArray(C[c].events)&&(C[c].events=[])}else{if(!a.isFunction(b)){var d=b+"";b=function(a){return a._id==d}}I=a.grep(I,b,!0);for(var c=0;c<C.length;c++)a.isArray(C[c].events)&&(C[c].events=a.grep(C[c].events,b,!0))}A(I)}function p(b){return a.isFunction(b)?a.grep(I,b):b?(b+="",a.grep(I,function(a){return a._id==b})):I}function q(){H++||y("loading",null,!0)}function s(){--H||y("loading",null,!1)}function t(a){var d=a.source||{},e=$(d.ignoreTimezone,c.ignoreTimezone);a._id=a._id||(a.id===b?"_fc"+bw++:a.id+""),a.date&&(a.start||(a.start=a.date),delete a.date),a._start=m(a.start=r(a.start,e)),a.end=r(a.end,e),a.end&&a.end<=a.start&&(a.end=null),a._end=a.end?m(a.end):null,a.allDay===b&&(a.allDay=$(d.allDayDefault,c.allDayDefault)),a.className?typeof a.className=="string"&&(a.className=a.className.split(/\s+/)):a.className=[]}function u(a){a.className?typeof a.className=="string"&&(a.className=a.className.split(/\s+/)):a.className=[];var b=bt.sourceNormalizers;for(var c=0;c<b.length;c++)b[c](a)}function v(a,b){return a&&b&&w(a)==w(b)}function w(a){return(typeof a=="object"?a.events||a.url:"")||a}var x=this;x.isFetchNeeded=e,x.fetchEvents=f,x.addEventSource=i,x.removeEventSource=k,x.updateEvent=l,x.renderEvent=n,x.removeEvents=o,x.clientEvents=p,x.normalizeEvent=t;var y=x.trigger,z=x.getView,A=x.reportEvents,B={events:[]},C=[B],D,E,F=0,G=0,H=0,I=[];for(var J=0;J<d.length;J++)j(d[J])}function g(a,b,c){return a.setFullYear(a.getFullYear()+b),c||l(a),a}function h(a,b,c){if(+a){var d=a.getMonth()+b,e=m(a);e.setDate(1),e.setMonth(d),a.setMonth(d),c||l(a);while(a.getMonth()!=e.getMonth())a.setDate(a.getDate()+(a<e?1:-1))}return a}function i(a,b,c){if(+a){var d=a.getDate()+b,e=m(a);e.setHours(9),e.setDate(d),a.setDate(d),c||l(a),j(a,e)}return a}function j(a,b){if(+a)while(a.getDate()!=b.getDate())a.setTime(+a+(a<b?1:-1)*bz)}function k(a,b){return a.setMinutes(a.getMinutes()+b),a}function l(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function m(a,b){return b?l(new Date(+a)):new Date(+a)}function n(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function o(a,b,c){b=b||1;while(!a.getDay()||c&&a.getDay()==1||!c&&a.getDay()==6)i(a,b);return a}function p(a,b){return Math.round((m(a,!0)-m(b,!0))/by)}function q(a,c,d,e){c!==b&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c)),d!==b&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d)),e!==b&&a.setDate(e)}function r(a,c){return typeof a=="object"?a:typeof a=="number"?new Date(a*1e3):typeof a=="string"?a.match(/^\d+(\.\d+)?$/)?new Date(parseFloat(a)*1e3):(c===b&&(c=!0),s(a,c)||(a?new Date(a):null)):null}function s(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1)),c[5]&&(d.setDate(c[5]),e.setDate(c[5])),j(d,e),c[7]&&d.setHours(c[7]),c[8]&&d.setMinutes(c[8]),c[10]&&d.setSeconds(c[10]),c[12]&&d.setMilliseconds(Number("0."+c[12])*1e3),j(d,e)}else{d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?Number("0."+c[12])*1e3:0);if(c[14]){var f=Number(c[16])*60+(c[18]?Number(c[18]):0);f*=c[15]=="-"?1:-1,d=new Date(+d+f*60*1e3)}}return d}function t(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();var b=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(b){var c=parseInt(b[1],10);return b[3]&&(c%=12,b[3].toLowerCase().charAt(0)=="p"&&(c+=12)),c*60+(b[2]?parseInt(b[2],10):0)}}function u(a,b,c){return v(a,null,b,c)}function v(a,b,c,d){d=d||br;var e=a,f=b,g,h=c.length,i,j,k,l="";for(g=0;g<h;g++){i=c.charAt(g);if(i=="'"){for(j=g+1;j<h;j++)if(c.charAt(j)=="'"){e&&(j==g+1?l+="'":l+=c.substring(g+1,j),g=j);break}}else if(i=="("){for(j=g+1;j<h;j++)if(c.charAt(j)==")"){var m=u(e,c.substring(g+1,j),d);parseInt(m.replace(/\D/,""),10)&&(l+=m),g=j;break}}else if(i=="["){for(j=g+1;j<h;j++)if(c.charAt(j)=="]"){var n=c.substring(g+1,j),m=u(e,n,d);m!=u(f,n,d)&&(l+=m),g=j;break}}else if(i=="{")e=b,f=a;else if(i=="}")e=a,f=b;else{for(j=h;j>g;j--)if(k=bB[c.substring(g,j)]){e&&(l+=k(e,d)),g=j-1;break}j==g&&e&&(l+=i)}}return l}function w(a){return a.end?x(a.end,a.allDay):i(m(a.start),1)}function x(a,b){return a=m(a),b||a.getHours()||a.getMinutes()?i(a,1):l(a)}function y(a,b){return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function z(a,b){return a.end>b.start&&a.start<b.end}function A(a,b,c,d){var e=[],f,g=a.length,h,i,j,k,l,n,o;for(f=0;f<g;f++)h=a[f],i=h.start,j=b[f],j>c&&i<d&&(i<c?(k=m(c),n=!1):(k=i,n=!0),j>d?(l=m(d),o=!1):(l=j,o=!0),e.push({event:h,start:k,end:l,isStart:n,isEnd:o,msLength:l-k}));return e.sort(y)}function B(a){var b=[],c,d=a.length,e,f,g,h;for(c=0;c<d;c++){e=a[c],f=0;for(;;){g=!1;if(b[f])for(h=0;h<b[f].length;h++)if(z(b[f][h],e)){g=!0;break}if(g)f++;else break}b[f]?b[f].push(e):b[f]=[e]}return b}function C(c,d,e){c.unbind("mouseover").mouseover(function(c){var f=c.target,g,h,i;while(f!=this)g=f,f=f.parentNode;(h=g._fci)!==b&&(g._fci=b,i=d[h],e(i.event,i.element,i),a(c.target).trigger(c)),c.stopPropagation()})}function D(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.width(Math.max(0,c-F(f,d)))}function E(b,c,d){for(var e=0,f;e<b.length;e++)f=a(b[e]),f.height(Math.max(0,c-J(f,d)))}function F(a,b){return G(a)+I(a)+(b?H(a):0)}function G(b){return(parseFloat(a.curCSS(b[0],"paddingLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingRight",!0))||0)}function H(b){return(parseFloat(a.curCSS(b[0],"marginLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"marginRight",!0))||0)}function I(b){return(parseFloat(a.curCSS(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderRightWidth",!0))||0)}function J(a,b){return K(a)+M(a)+(b?L(a):0)}function K(b){return(parseFloat(a.curCSS(b[0],"paddingTop",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingBottom",!0))||0)}function L(b){return(parseFloat(a.curCSS(b[0],"marginTop",!0))||0)+(parseFloat(a.curCSS(b[0],"marginBottom",!0))||0)}function M(b){return(parseFloat(a.curCSS(b[0],"borderTopWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderBottomWidth",!0))||0)}function N(a,b){b=typeof b=="number"?b+"px":b,a.each(function(a,c){c.style.cssText+=";min-height:"+b+";_height:"+b})}function O(){}function P(a,b){return a-b}function Q(a){return Math.max.apply(Math,a)}function R(a){return(a<10?"0":"")+a}function S(a,c){if(a[c]!==b)return a[c];var d=c.split(/(?=[A-Z])/),e=d.length-1,f;for(;e>=0;e--){f=a[d[e].toLowerCase()];if(f!==b)return f}return a[""]}function T(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function U(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function V(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function W(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function X(a,b){a.each(function(a,c){c.className=c.className.replace(/^fc-\w*/,"fc-"+bx[b.getDay()])})}function Y(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,h=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,i=a.textColor||c.textColor||b("eventTextColor"),j=[];return g&&j.push("background-color:"+g),h&&j.push("border-color:"+h),i&&j.push("color:"+i),j.join(";")}function Z(b,c,d){a.isFunction(b)&&(b=[b]);if(b){var e,f;for(e=0;e<b.length;e++)f=b[e].apply(c,d)||f;return f}}function $(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==b)return arguments[a]}function _(a,b){function c(a,b){b&&(h(a,b),a.setDate(1));var c=m(a,!0);c.setDate(1);var j=h(m(c),1),k=m(c),l=m(j),n=e("firstDay"),p=e("weekends")?0:1;p&&(o(k),o(l,-1,!0)),i(k,-((k.getDay()-Math.max(n,p)+7)%7)),i(l,(7-l.getDay()+Math.max(n,p))%7);var q=Math.round((l-k)/(by*7));e("weekMode")=="fixed"&&(i(l,(6-q)*7),q=6),d.title=g(c,e("titleFormat")),d.start=c,d.end=j,d.visStart=k,d.visEnd=l,f(6,q,p?5:7,!0)}var d=this;d.render=c,bc.call(d,a,b,"month");var e=d.opt,f=d.renderBasic,g=b.formatDate}function ba(a,b){function c(a,b){b&&i(a,b*7);var c=i(m(a),-((a.getDay()-e("firstDay")+7)%7)),h=i(m(c),7),j=m(c),k=m(h),l=e("weekends");l||(o(j),o(k,-1,!0)),d.title=g(j,i(m(k),-1),e("titleFormat")),d.start=c,d.end=h,d.visStart=j,d.visEnd=k,f(1,1,l?7:5,!1)}var d=this;d.render=c,bc.call(d,a,b,"basicWeek");var e=d.opt,f=d.renderBasic,g=b.formatDates}function bb(a,b){function c(a,b){b&&(i(a,b),e("weekends")||o(a,b<0?-1:1)),d.title=g(a,e("titleFormat")),d.start=d.visStart=m(a,!0),d.end=d.visEnd=i(m(d.start),1),f(1,1,1,!1)}var d=this;d.render=c,bc.call(d,a,b,"basicDay");var e=d.opt,f=d.renderBasic,g=b.formatDate}function bc(b,c,d){function e(a,b,c,d){bg=b,bh=c,f();var e=!Y;e?g(a,d):O(),h(e)}function f(){br=L("isRTL"),br?(bs=-1,bt=bh-1):(bs=1,bt=0),bu=L("firstDay"),bv=L("weekends")?0:1,bw=L("theme")?"ui":"fc",bx=L("columnFormat")}function g(c,d){var e,f=bw+"-widget-header",g=bw+"-widget-content",h,i,j;e="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(h=0;h<bh;h++)e+="<th class='fc- "+f+"'/>";e+="</tr></thead><tbody>";for(h=0;h<c;h++){e+="<tr class='fc-week"+h+"'>";for(i=0;i<bh;i++)e+="<td class='fc- "+g+" fc-day"+(h*bh+i)+"'>"+"<div>"+(d?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";e+="</tr>"}e+="</tbody></table>",j=a(e).appendTo(b),T=j.find("thead"),U=T.find("th"),Y=j.find("tbody"),Z=Y.find("tr"),$=Y.find("td"),_=$.filter(":first-child"),ba=Z.eq(0).find("div.fc-day-content div"),W(T.add(T.find("tr"))),W(Z),Z.eq(0).addClass("fc-first"),n($),bb=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}function h(b){var c=b||bg==1,d=K.start.getMonth(),e=l(new Date),f,g,h;c&&U.each(function(b,c){f=a(c),g=F(b),f.html(S(g,bx)),X(f,g)}),$.each(function(b,h){f=a(h),g=F(b),g.getMonth()==d?f.removeClass("fc-other-month"):f.addClass("fc-other-month"),+g==+e?f.addClass(bw+"-state-highlight fc-today"):f.removeClass(bw+"-state-highlight fc-today"),f.find("div.fc-day-number").text(g.getDate()),c&&X(f,g)}),Z.each(function(b,c){h=a(c),b<bg?(h.show(),b==bg-1?h.addClass("fc-last"):h.removeClass("fc-last")):h.hide()})}function j(b){be=b;var c=be-T.height(),d,e,f;L("weekMode")=="variable"?d=e=Math.floor(c/(bg==1?2:6)):(d=Math.floor(c/bg),e=c-d*(bg-1)),_.each(function(b,c){b<bg&&(f=a(c),N(f.find("> div"),(b==bg-1?e:d)-J(f)))})}function k(a){bc=a,bp.clear(),bf=Math.floor(bc/bh),D(U.slice(0,-1),bf)}function n(a){a.click(o).mousedown(R)}function o(a){if(!L("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),c=F(b);M("dayClick",this,c,!0,a)}}function q(a,b,c){c&&bi.build();var d=m(K.visStart),e=i(m(d),bh);for(var f=0;f<bg;f++){var g=new Date(Math.max(d,a)),h=new Date(Math.min(e,b));if(g<h){var j,k;br?(j=p(h,d)*bs+bt+1,k=p(g,d)*bs+bt+1):(j=p(g,d),k=p(h,d)),n(r(f,j,f,k-1))}i(d,7),i(e,7)}}function r(a,c,d,e){var f=bi.rect(a,c,d,e,b);return P(f,b)}function s(a,b){return m(a)}function t(a,b,c){q(a,i(m(b),1),!0)}function u(){Q()}function v(a,b,c){var d=B(a),e=$[d.row*bh+d.col];M("dayClick",e,a,b,c)}function w(a,b,c){bk.start(function(a){Q(),a&&r(a.row,a.col,a.row,a.col)},b)}function x(a,b,c){var d=bk.stop();Q();if(d){var e=C(d);M("drop",a,e,!0,b,c)}}function y(a){return m(a.start)}function z(a){return bp.left(a)}function A(a){return bp.right(a)}function B(a){return{row:Math.floor(p(a,K.visStart)/7),col:G(a.getDay())}}function C(a){return E(a.row,a.col)}function E(a,b){return i(m(K.visStart),a*7+b*bs+bt)}function F(a){return E(Math.floor(a/bh),a%bh)}function G(a){return(a-Math.max(bu,bv)+bh)%bh*bs+bt}function H(a){return Z.eq(a)}function I(a){return{left:0,right:bc}}var K=this;K.renderBasic=e,K.setHeight=j,K.setWidth=k,K.renderDayOverlay=q,K.defaultSelectionEnd=s,K.renderSelection=t,K.clearSelection=u,K.reportDayClick=v,K.dragStart=w,K.dragStop=x,K.defaultEventEnd=y,K.getHoverListener=function(){return bk},K.colContentLeft=z,K.colContentRight=A,K.dayOfWeekCol=G,K.dateCell=B,K.cellDate=C,K.cellIsAllDay=function(){return!0},K.allDayRow=H,K.allDayBounds=I,K.getRowCnt=function(){return bg},K.getColCnt=function(){return bh},K.getColWidth=function(){return bf},K.getDaySegmentContainer=function(){return bb},bj.call(K,b,c,d),bm.call(K),bl.call(K),bd.call(K);var L=K.opt,M=K.trigger,O=K.clearEvents,P=K.renderOverlay,Q=K.clearOverlays,R=K.daySelectionMousedown,S=c.formatDate,T,U,Y,Z,$,_,ba,bb,bc,be,bf,bg,bh,bi,bk,bp,br,bs,bt,bu,bv,bw,bx;V(b.addClass("fc-grid")),bi=new bn(function(b,c){var d,e,f;U.each(function(b,g){d=a(g),e=d.offset().left,b&&(f[1]=e),f=[e],c[b]=f}),f[1]=e+d.outerWidth(),Z.each(function(c,g){c<bg&&(d=a(g),e=d.offset().top,c&&(f[1]=e),f=[e],b[c]=f)}),f[1]=e+d.outerHeight()}),bk=new bo(bi),bp=new bq(function(a){return ba.eq(a)})}function bd(){function b(a,b){n(a),C(d(a),b)}function c(){o(),t().empty()}function d(b){var c=y(),d=z(),e=m(g.visStart),f=i(m(e),d),h=a.map(b,w),j,k,l,n,o,p,q=[];for(j=0;j<c;j++){k=B(A(b,h,e,f));for(l=0;l<k.length;l++){n=k[l];for(o=0;o<n.length;o++)p=n[o],p.row=j,p.level=l,q.push(p)}i(e,7),i(f,7)}return q}function e(a,b,c){k(a)&&f(a,b),c.isEnd&&l(a)&&D(a,b,c),p(a,b)}function f(a,b){var c=u(),d;b.draggable({zIndex:9,delay:50,opacity:h("dragOpacity"),revertDuration:h("dragRevertDuration"),start:function(e,f){j("eventDragStart",b,a,e,f),r(a,b),c.start(function(c,e,f,g){b.draggable("option","revert",!c||!f&&!g),x(),c?(d=f*7+g*(h("isRTL")?-1:1),v(i(m(a.start),d),i(w(a),d))):d=0},e,"drag")},stop:function(e,f){c.stop(),x(),j("eventDragStop",b,a,e,f),d?s(this,a,d,0,a.allDay,e,f):(b.css("filter",""),q(a,b))}})}var g=this;g.renderEvents=b,g.compileDaySegs=d,g.clearEvents=c,g.bindDaySeg=e,bk.call(g);var h=g.opt,j=g.trigger,k=g.isEventDraggable,l=g.isEventResizable,n=g.reportEvents,o=g.reportEventClear,p=g.eventElementHandlers,q=g.showEvents,r=g.hideEvents,s=g.eventDrop,t=g.getDaySegmentContainer,u=g.getHoverListener,v=g.renderDayOverlay,x=g.clearOverlays,y=g.getRowCnt,z=g.getColCnt,C=g.renderDaySegs,D=g.resizableDayEvent}function be(a,b){function c(a,b){b&&i(a,b*7);var c=i(m(a),-((a.getDay()-e("firstDay")+7)%7)),h=i(m(c),7),j=m(c),k=m(h),l=e("weekends");l||(o(j),o(k,-1,!0)),d.title=g(j,i(m(k),-1),e("titleFormat")),d.start=c,d.end=h,d.visStart=j,d.visEnd=k,f(l?7:5)}var d=this;d.render=c,bg.call(d,a,b,"agendaWeek");var e=d.opt,f=d.renderAgenda,g=b.formatDates}function bf(a,b){function c(a,b){b&&(i(a,b),e("weekends")||o(a,b<0?-1:1));var c=m(a,!0),h=i(m(c),1);d.title=g(a,e("titleFormat")),d.start=d.visStart=c,d.end=d.visEnd=h,f(1)}var d=this;d.render=c,bg.call(d,a,b,"agendaDay");var e=d.opt,f=d.renderAgenda,g=b.formatDate}function bg(c,d,e){function f(a){bS=a,g(),br?bc():h(),j()}function g(){bY=ba("theme")?"ui":"fc",b$=ba("weekends")?0:1,bZ=ba("firstDay"),(b_=ba("isRTL"))?(ca=-1,cb=bS-1):(ca=1,cb=0),cc=t(ba("minTime")),cd=t(ba("maxTime")),ce=ba("columnFormat")}function h(){var b=bY+"-widget-header",d=bY+"-widget-content",e,f,g,h,i,j=ba("slotMinutes")%15==0;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<bS;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(f=0;f<bS;f++)e+="<td class='fc- fc-col"+f+" "+d+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";e+="<td class='fc-agenda-gutter "+d+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",br=a(e).appendTo(c),bs=br.find("thead"),bt=bs.find("th").slice(1,-1),bu=br.find("tbody"),bv=bu.find("td").slice(0,-1),bw=bv.find("div.fc-day-content div"),bx=bv.eq(0),by=bx.find("> div"),W(bs.add(bs.find("tr"))),W(bu.add(bu.find("tr"))),bI=bs.find("th:first"),bJ=br.find(".fc-agenda-gutter"),bz=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(c),ba("allDaySlot")?(bA=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bz),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+ba("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+b+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",bB=a(e).appendTo(bz),bC=bB.find("tr"),v(bC.find("td")),bI=bI.add(bB.find("th:first")),bJ=bJ.add(bB.find("th.fc-agenda-gutter")),bz.append("<div class='fc-agenda-divider "+b+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):bA=a([]),bD=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(bz),bE=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bD),bF=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(bE),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",g=n(),h=k(m(g),cd),k(g,cc),bT=0;for(f=0;g<h;f++)i=g.getMinutes(),e+="<tr class='fc-slot"+f+" "+(i?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+b+"'>"+(!j||!i?bp(g,ba("axisFormat")):"&nbsp;")+"</th>"+"<td class='"+d+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",k(g,ba("slotMinutes")),bT++;e+="</tbody></table>",bG=a(e).appendTo(bE),bH=bG.find("div:first"),w(bG.find("td")),bI=bI.add(bG.find("th:first"))}function j(){var a,b,c,d,e=l(new Date);for(a=0;a<bS;a++)d=H(a),b=bt.eq(a),b.html(bp(d,ce)),c=bv.eq(a),+d==+e?c.addClass(bY+"-state-highlight fc-today"):c.removeClass(bY+"-state-highlight fc-today"),X(b.add(c),d)}function o(a,c){a===b&&(a=bM),bM=a,bX={};var d=bu.position().top,e=bD.position().top,f=Math.min(a-d,bG.height()+e+1);by.height(f-J(bx)),bz.css("top",d),bD.height(f-e-1),bQ=bH.height()+1,c&&r()}function q(b){bL=b,bW.clear(),bN=0,D(bI.width("").each(function(b,c){bN=Math.max(bN,a(c).outerWidth())}),bN);var c=bD[0].clientWidth;bP=bD.width()-c,bP?(D(bJ,bP),bJ.show().prev().removeClass("fc-last")):bJ.hide().prev().addClass("fc-last"),bO=Math.floor((c-bN)/bS),D(bt.slice(0,-1),bO)}function r(){function a(){bD.scrollTop(d)}var b=n(),c=m(b);c.setHours(ba("firstHour"));var d=L(b,c)+1;a(),setTimeout(a,0)}function s(){bR=bD.scrollTop()}function u(){bD.scrollTop(bR)}function v(a){a.click(x).mousedown(bi)}function w(a){a.click(x).mousedown(U)}function x(a){if(!ba("selectable")){var b=Math.min(bS-1,Math.floor((a.pageX-br.offset().left-bN)/bO)),c=H(b),d=this.parentNode.className.match(/fc-slot(\d+)/);if(d){var e=parseInt(d[1])*ba("slotMinutes"),f=Math.floor(e/60);c.setHours(f),c.setMinutes(e%60+cc),bb("dayClick",bv[b],c,!1,a)}else bb("dayClick",bv[b],c,!0,a)}}function y(a,b,c){c&&bU.build();var d=m(_.visStart),e,f;b_?(e=p(b,d)*ca+cb+1,f=p(a,d)*ca+cb+1):(e=p(a,d),f=p(b,d)),e=Math.max(0,e),f=Math.min(bS,f),e<f&&v(z(0,e,0,f-1))}function z(a,b,c,d){var e=bU.rect(a,b,c,d,bz);return bd(e,bz)}function A(a,b){var c=m(_.visStart),d=i(m(c),1);for(var e=0;e<bS;e++){var f=new Date(Math.max(c,a)),g=new Date(Math.min(d,b));if(f<g){var h=e*ca+cb,j=bU.rect(0,h,0,h,bE),k=L(c,f),l=L(c,g);j.top=k,j.height=l-k,w(bd(j,bE))}i(c,1),i(d,1)}}function B(a){return bW.left(a)}function C(a){return bW.right(a)}function F(a){return{row:Math.floor(p(a,_.visStart)/7),col:K(a.getDay())}}function G(a){var b=H(a.col),c=a.row;return ba("allDaySlot")&&c--,c>=0&&k(b,cc+c*ba("slotMinutes")),b}function H(a){return i(m(_.visStart),a*ca+cb)}function I(a){return ba("allDaySlot")&&!a.row}function K(a){return(a-Math.max(bZ,b$)+bS)%bS*ca+cb}function L(a,c){a=m(a,!0);if(c<k(m(a),cc))return 0;if(c<k(m(a),cd)){var d=ba("slotMinutes"),e=c.getHours()*60+c.getMinutes()-cc,f=Math.floor(e/d),g=bX[f];return g===b&&(g=bX[f]=bG.find("tr:eq("+f+") td div")[0].offsetTop),Math.max(0,Math.round(g-1+bQ*(e%d/d)))}return bG.height()}function M(){return{left:bN,right:bL-bP}}function N(a){return bC}function O(a){var b=m(a.start);return a.allDay?b:k(b,ba("defaultEventMinutes"))}function Q(a,b){return b?m(a):k(m(a),ba("slotMinutes"))}function R(a,b,c){c?ba("allDaySlot")&&y(a,i(m(b),1),!0):S(a,b)}function S(b,c){var d=ba("selectHelper");bU.build();if(d){var e=p(b,_.visStart)*ca+cb;if(e>=0&&e<bS){var f=bU.rect(0,e,0,e,bE),g=L(b,b),h=L(b,c);if(h>g){f.top=g,f.height=h-g,f.left+=2,f.width-=5;if(a.isFunction(d)){var i=d(b,c);i&&(f.position="absolute",f.zIndex=8,bK=a(i).css(f).appendTo(bE))}else f.isStart=!0,f.isEnd=!0,bK=a(bk({title:"",start:b,end:c,className:["fc-select-helper"],editable:!1},f)),bK.css("opacity",ba("dragOpacity"));bK&&(w(bK),bE.append(bK),D(bK,f.width,!0),E(bK,f.height,!0))}}}else A(b,c)}function T(){be(),bK&&(bK.remove(),bK=null)}function U(b){if(b.which==1&&ba("selectable")){bg(b);var c;bV.start(function(a,b){T();if(a&&a.col==b.col&&!I(a)){var d=G(b),e=G(a);c=[d,k(m(d),ba("slotMinutes")),e,k(m(e),ba("slotMinutes"))].sort(P),S(c[0],c[3])}else c=null},b),a(document).one("mouseup",function(a){bV.stop(),c&&(+c[0]==+c[1]&&Y(c[0],!1,a),bf(c[0],c[3],!1,a))})}}function Y(a,b,c){bb("dayClick",bv[K(a.getDay())],a,b,c)}function Z(a,b,c){bV.start(function(a){be();if(a)if(I(a))z(a.row,a.col,a.row,a.col);else{var b=G(a),c=k(m(b),ba("defaultEventMinutes"));A(b,c)}},b)}function $(a,b,c){var d=bV.stop();be(),d&&bb("drop",a,G(d),I(d),b,c)}var _=this;_.renderAgenda=f,_.setWidth=q,_.setHeight=o,_.beforeHide=s,_.afterShow=u,_.defaultEventEnd=O,_.timePosition=L,_.dayOfWeekCol=K,_.dateCell=F,_.cellDate=G,_.cellIsAllDay=I,_.allDayRow=N,_.allDayBounds=M,_.getHoverListener=function(){return bV},_.colContentLeft=B,_.colContentRight=C,_.getDaySegmentContainer=function(){return bA},_.getSlotSegmentContainer=function(){return bF},_.getMinMinute=function(){return cc},_.getMaxMinute=function(){return cd},_.getBodyContent=function(){return bE},_.getRowCnt=function(){return 1},_.getColCnt=function(){return bS},_.getColWidth=function(){return bO},_.getSlotHeight=function(){return bQ},_.defaultSelectionEnd=Q,_.renderDayOverlay=y,_.renderSelection=R,_.clearSelection=T,_.reportDayClick=Y,_.dragStart=Z,_.dragStop=$,bj.call(_,c,d,e),bm.call(_),bl.call(_),bh.call(_);var ba=_.opt,bb=_.trigger,bc=_.clearEvents,bd=_.renderOverlay,be=_.clearOverlays,bf=_.reportSelection,bg=_.unselect,bi=_.daySelectionMousedown,bk=_.slotSegHtml,bp=d.formatDate,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX={},bY,bZ,b$,b_,ca,cb,cc,cd,ce;V(c.addClass("fc-agenda")),bU=new bn(function(b,c){function d(a){return Math.max(i,Math.min(j,a))}var e,f,g;bt.each(function(b,d){e=a(d),f=e.offset().left,b&&(g[1]=f),g=[f],c[b]=g}),g[1]=f+e.outerWidth(),ba("allDaySlot")&&(e=bC,f=e.offset().top,b[0]=[f,f+e.outerHeight()]);var h=bE.offset().top,i=bD.offset().top,j=i+bD.outerHeight();for(var k=0;k<bT;k++)b.push([d(h+bQ*k),d(h+bQ*(k+1))])}),bV=new bo(bU),bW=new bq(function(a){return bw.eq(a)})}function bh(){function c(a,b){y(a);var c,d=a.length,g=[],i=[];for(c=0;c<d;c++)a[c].allDay?g.push(a[c]):i.push(a[c]);s("allDaySlot")&&(Q(e(g),b),G()),h(f(i),b)}function d(){z(),H().empty(),I().empty()}function e(b){var c=B(A(b,a.map(b,w),r.visStart,r.visEnd)),d,e=c.length,f,g,h,i=[];for(d=0;d<e;d++){f=c[d];for(g=0;g<f.length;g++)h=f[g],h.row=0,h.level=d,i.push(h)}return i}function f(b){var c=S(),d=M(),e=L(),f=k(m(r.visStart),d),h=a.map(b,g),j,l,n,o,p,q,s=[];for(j=0;j<c;j++){l=B(A(b,h,f,k(m(f),e-d))),bi(l);for(n=0;n<l.length;n++){o=l[n];for(p=0;p<o.length;p++)q=o[p],q.col=j,q.level=n,s.push(q)}i(f,1,!0)}return s}function g(a){return a.end?m(a.end):k(m(a.start),s("defaultEventMinutes"))}function h(c,d){var e,f=c.length,g,h,i,k,l,m,o,p,q,r,u,v,w="",x,y,z,A={},B={},D,E,G,H,K=I(),L,M,Q,R=S();(L=s("isRTL"))?(M=-1,Q=R-1):(M=1,Q=0);for(e=0;e<f;e++)g=c[e],h=g.event,k=N(g.start,g.start),l=N(g.start,g.end),m=g.col,o=g.level,p=g.forward||0,q=O(m*M+Q),r=P(m*M+Q)-q,r=Math.min(r-6,r*.95),o?u=r/(o+p+1):p?u=(r/(p+1)-6)*2:u=r,v=q+r/(o+p+1)*o*M+(L?r-u:0),g.top=k,g.left=v,g.outerWidth=u,g.outerHeight=l-k,w+=j(h,g);K[0].innerHTML=w,x=K.children();for(e=0;e<f;e++)g=c[e],h=g.event,y=a(x[e]),z=t("eventRender",h,h,y),z===!1?y.remove():(z&&z!==!0&&(y.remove(),y=a(z).css({position:"absolute",top:g.top,left:g.left}).appendTo(K)),g.element=y,h._id===d?n(h,y,g):y[0]._fci=e,Z(h,y));C(K,c,n);for(e=0;e<f;e++){g=c[e];if(y=g.element)E=A[D=g.key=U(y[0])],g.vsides=E===b?A[D]=J(y,!0):E,E=B[D],g.hsides=E===b?B[D]=F(y,!0):E,G=y.find("div.fc-event-content"),G.length&&(g.contentTop=G[0].offsetTop)}for(e=0;e<f;e++){g=c[e];if(y=g.element)y[0].style.width=Math.max(0,g.outerWidth-g.hsides)+"px",H=Math.max(0,g.outerHeight-g.vsides),y[0].style.height=H+"px",h=g.event,g.contentTop!==b&&H-g.contentTop<10&&(y.find("div.fc-event-time").text(bf(h.start,s("timeFormat"))+" - "+h.title),y.find("div.fc-event-title").remove()),t("eventAfterRender",h,h,y)}}function j(a,b){var c="<",d=a.url,e=Y(a,s),f=e?" style='"+e+"'":"",g=["fc-event","fc-event-skin","fc-event-vert"];return u(a)&&g.push("fc-event-draggable"),b.isStart&&g.push("fc-corner-top"),b.isEnd&&g.push("fc-corner-bottom"),g=g.concat(a.className),a.source&&(g=g.concat(a.source.className||[])),d?c+="a href='"+T(a.url)+"'":c+="div",c+=" class='"+g.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+e+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+f+">"+"<div class='fc-event-head fc-event-skin'"+f+">"+"<div class='fc-event-time'>"+T(bg(a.start,a.end,s("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+T(a.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",b.isEnd&&v(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),c+="</"+(d?"a":"div")+">",c}function l(a,b,c){u(a)&&o(a,b,c.isStart),c.isEnd&&v(a)&&R(a,b,c),D(a,b)}function n(a,b,c){var d=b.find("div.fc-event-time");u(a)&&p(a,b,d),c.isEnd&&v(a)&&q(a,b,d),D(a,b)}function o(a,b,c){function d(){g||(b.width(e).height("").draggable("option","grid",null),g=!0)}var e,f,g=!0,h,j=s("isRTL")?-1:1,k=K(),l=V(),n=W(),o=M();b.draggable({zIndex:9,opacity:s("dragOpacity","month"),revertDuration:s("dragRevertDuration"),start:function(o,p){t("eventDragStart",b,a,o,p),_(a,b),e=b.width(),k.start(function(e,k,o,p){bd(),e?(f=!1,h=p*j,e.row?c?g&&(b.width(l-10),E(b,n*Math.round((a.end?(a.end-a.start)/bA:s("defaultEventMinutes"))/s("slotMinutes"))),b.draggable("option","grid",[l,1]),g=!1):f=!0:(bc(i(m(a.start),h),i(w(a),h)),d()),f=f||g&&!h):(d(),f=!0),b.draggable("option","revert",f)},o,"drag")},stop:function(c,e){k.stop(),bd(),t("eventDragStop",b,a,c,e);if(f)d(),b.css("filter",""),$(a,b);else{var i=0;g||(i=Math.round((b.offset().top-X().offset().top)/n)*s("slotMinutes")+o-(a.start.getHours()*60+a.start.getMinutes())),ba(this,a,h,i,g,c,e)}}})}function p(a,b,c){function d(b){var d=k(m(a.start),b),e;a.end&&(e=k(m(a.end),b)),c.text(bg(d,e,s("timeFormat")))}function e(){g&&(c.css("display",""),b.draggable("option","grid",[q,r]),g=!1)}var f,g=!1,h,j,l,n=s("isRTL")?-1:1,o=K(),p=S(),q=V(),r=W();b.draggable({zIndex:9,scroll:!1,grid:[q,r],axis:p==1?"y":!1,opacity:s("dragOpacity"),revertDuration:s("dragRevertDuration"),start:function(d,k){t("eventDragStart",b,a,d,k),_(a,b),f=b.position(),j=l=0,o.start(function(d,f,j,k){b.draggable("option","revert",!d),bd(),d&&(h=k*n,s("allDaySlot")&&!d.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),bc(i(m(a.start),h),i(w(a),h))):e())},d,"drag")},drag:function(a,b){j=Math.round((b.position.top-f.top)/r)*s("slotMinutes"),j!=l&&(g||d(j),l=j)},stop:function(c,i){var k=o.stop();bd(),t("eventDragStop",b,a,c,i),k&&(h||j||g)?ba(this,a,h,g?0:j,g,c,i):(e(),b.css("filter",""),b.css(f),d(0),$(a,b))}})}function q(a,b,c){var d,e,f=W();b.resizable({handles:{s:"div.ui-resizable-s"},grid:f,start:function(c,f){d=e=0,_(a,b),b.css("z-index",9),t("eventResizeStart",this,a,c,f)},resize:function(g,h){d=Math.round((Math.max(f,b.height())-h.originalSize.height)/f),d!=e&&(c.text(bg(a.start,!d&&!a.end?null:k(x(a),s("slotMinutes")*d),s("timeFormat"))),e=d)},stop:function(c,e){t("eventResizeStop",this,a,c,e),d?bb(this,a,0,s("slotMinutes")*d,c,e):(b.css("z-index",8),$(a,b))}})}var r=this;r.renderEvents=c,r.compileDaySegs=e,r.clearEvents=d,r.slotSegHtml=j,r.bindDaySeg=l,bk.call(r);var s=r.opt,t=r.trigger,u=r.isEventDraggable,v=r.isEventResizable,x=r.eventEnd,y=r.reportEvents,z=r.reportEventClear,D=r.eventElementHandlers,G=r.setHeight,H=r.getDaySegmentContainer,I=r.getSlotSegmentContainer,K=r.getHoverListener,L=r.getMaxMinute,M=r.getMinMinute,N=r.timePosition,O=r.colContentLeft,P=r.colContentRight,Q=r.renderDaySegs,R=r.resizableDayEvent,S=r.getColCnt,V=r.getColWidth,W=r.getSlotHeight,X=r.getBodyContent,Z=r.reportEventElement,$=r.showEvents,_=r.hideEvents,ba=r.eventDrop,bb=r.eventResize,bc=r.renderDayOverlay,bd=r.clearOverlays,be=r.calendar,bf=be.formatDate,bg=be.formatDates}function bi(a){var b,c,d,e,f,g;for(b=a.length-1;b>0;b--){e=a[b];for(c=0;c<e.length;c++){f=e[c];for(d=0;d<a[b-1].length;d++)g=a[b-1][d],z(f,g)&&(g.forward=Math.max(g.forward||0,(f.forward||0)+1))}}}function bj(a,c,d){function e(a,b){var c=F[a];return typeof c=="object"?S(c,b||d):c}function f(a,b){return c.trigger.apply(c,[a,b||y].concat(Array.prototype.slice.call(arguments,2),[y]))}function g(a){return j(a)&&!e("disableDragging")}function h(a){return j(a)&&!e("disableResizing")}function j(a){return $(a.editable,(a.source||{}).editable,e("editable"))}function l(a){C={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],C[d._id]?C[d._id].push(d):C[d._id]=[d]}function n(a){return a.end?m(a.end):z(a)}function o(a,b){D.push(b),E[a._id]?E[a._id].push(b):E[a._id]=[b]}function p(){D=[],E={}}function q(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return f("eventClick",this,a,c)}).hover(function(b){f("eventMouseover",this,a,b)},function(b){f("eventMouseout",this,a,b)})}function r(a,b){t(a,b,"show")}function s(a,b){t(a,b,"hide")}function t(a,b,c){var d=E[a._id],e,f=d.length;for(e=0;e<f;e++)(!b||d[e][0]!=b[0])&&d[e][c]()}function u(a,b,c,d,e,g,h){var i=b.allDay,j=b._id;w(C[j],c,d,e),f("eventDrop",a,b,c,d,e,function(){w(C[j],-c,-d,i),B(j)},g,h),B(j)}function v(a,b,c,d,e,g){var h=b._id;x(C[h],c,d),f("eventResize",a,b,c,d,function(){x(C[h],-c,-d),B(h)},e,g),B(h)}function w(a,c,d,e){d=d||0;for(var f,g=a.length,h=0;h<g;h++)f=a[h],e!==b&&(f.allDay=e),k(i(f.start,c,!0),d),f.end&&(f.end=k(i(f.end,c,!0),d)),A(f,F)}function x(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=k(i(n(d),b,!0),c),A(d,F)}var y=this;y.element=a,y.calendar=c,y.name=d,y.opt=e,y.trigger=f,y.isEventDraggable=g,y.isEventResizable=h,y.reportEvents=l,y.eventEnd=n,y.reportEventElement=o,y.reportEventClear=p,y.eventElementHandlers=q,y.showEvents=r,y.hideEvents=s,y.eventDrop=u,y.eventResize=v;var z=y.defaultEventEnd,A=c.normalizeEvent,B=c.reportEventChange,C={},D=[],E={},F=c.options}function bk(){function c(a,b){var c=O(),d,i=B(),m=D(),q=0,r,s,t,u,v=a.length,w,x,y;c[0].innerHTML=e(a),f(a,c.children()),g(a),h(a,c,b),j(a),k(a),l(a),d=n();for(r=0;r<i;r++){s=0,t=[];for(u=0;u<m;u++)t[u]=0;while(q<v&&(w=a[q]).row==r){x=Q(t.slice(w.startCol,w.endCol)),w.top=x,x+=w.outerHeight;for(y=w.startCol;y<w.endCol;y++)t[y]=x;q++}d[r].height(Q(t))}p(a,o(d))}function d(b,c,d){var g=a("<div/>"),h,i=O(),m,q=b.length,r;g[0].innerHTML=e(b),h=g.children(),i.append(h),f(b,h),j(b),k(b),l(b),p(b,o(n())),h=[];for(m=0;m<q;m++)r=b[m].element,r&&(b[m].row===c&&r.css("top",d),h.push(r[0]));return a(h)}function e(a){var b=s("isRTL"),c,d=a.length,e,f,g,h,i=H(),j=i.left,k=i.right,l,m,n,o,p,q="";for(c=0;c<d;c++)e=a[c],f=e.event,h=["fc-event","fc-event-skin","fc-event-hori"],u(f)&&h.push("fc-event-draggable"),b?(e.isStart&&h.push("fc-corner-right"),e.isEnd&&h.push("fc-corner-left"),l=K(e.end.getDay()-1),m=K(e.start.getDay()),n=e.isEnd?I(l):j,o=e.isStart?J(m):k):(e.isStart&&h.push("fc-corner-left"),e.isEnd&&h.push("fc-corner-right"),l=K(e.start.getDay()),m=K(e.end.getDay()-1),n=e.isStart?I(l):j,o=e.isEnd?J(m):k),h=h.concat(f.className),f.source&&(h=h.concat(f.source.className||[])),g=f.url,p=Y(f,s),g?q+="<a href='"+T(g)+"'":q+="<div",q+=" class='"+h.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+n+"px;"+p+"'"+">"+"<div"+" class='fc-event-inner fc-event-skin'"+(p?" style='"+p+"'":"")+">",!f.allDay&&e.isStart&&(q+="<span class='fc-event-time'>"+T(R(f.start,f.end,s("timeFormat")))+"</span>"),q+="<span class='fc-event-title'>"+T(f.title)+"</span>"+"</div>",e.isEnd&&v(f)&&(q+="<div class='ui-resizable-handle ui-resizable-"+(b?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),q+="</"+(g?"a":"div")+">",e.left=n,e.outerWidth=o-n,e.startCol=l,e.endCol=m+1;return q}function f(b,c){var d,e=b.length,f,g,h,i;for(d=0;d<e;d++)f=b[d],g=f.event,h=a(c[d]),i=t("eventRender",g,g,h),i===!1?h.remove():(i&&i!==!0&&(i=a(i).css({position:"absolute",left:f.left}),h.replaceWith(i),h=i),f.element=h)}function g(a){var b,c=a.length,d,e;for(b=0;b<c;b++)d=a[b],e=d.element,e&&x(d.event,e)}function h(a,b,c){var d,e=a.length,f,g,h;for(d=0;d<e;d++)f=a[d],g=f.element,g&&(h=f.event,h._id===c?P(h,g,f):g[0]._fci=d);C(b,a,P)}function j(a){var c,d=a.length,e,f,g,h,i={};for(c=0;c<d;c++)e=a[c],f=e.element,f&&(g=e.key=U(f[0]),h=i[g],h===b&&(h=i[g]=F(f,!0)),e.hsides=h)}function k(a){var b,c=a.length,d,e;for(b=0;b<c;b++)d=a[b],e=d.element,e&&(e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px")}function l(a){var c,d=a.length,e,f,g,h,i={};for(c=0;c<d;c++)e=a[c],f=e.element,f&&(g=e.key,h=i[g],h===b&&(h=i[g]=L(f)),e.outerHeight=f[0].offsetHeight+h)}function n(){var a,b=B(),c=[];for(a=0;a<b;a++)c[a]=G(a).find("td:first div.fc-day-content > div");return c}function o(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function p(a,b){var c,d=a.length,e,f,g;for(c=0;c<d;c++)e=a[c],f=e.element,f&&(f[0].style.top=b[e.row]+(e.top||0)+"px",g=e.event,t("eventAfterRender",g,g,f))}function q(b,c,e){var f=s("isRTL"),g=f?"w":"e",h=c.find("div.ui-resizable-"+g),j=!1;V(c),c.mousedown(function(a){a.preventDefault()}).click(function(a){j&&(a.preventDefault(),a.stopImmediatePropagation())}),h.mousedown(function(h){function k(c){t("eventResizeStop",this,b,c),a("body").css("cursor",""),l.stop(),W(),u&&A(this,b,u,0,c),setTimeout(function(){j=!1},0)}if(h.which!=1)return;j=!0;var l=r.getHoverListener(),n=B(),o=D(),p=f?-1:1,q=f?o-1:0,s=c.css("top"),u,v,x=a.extend({},b),C=M(b.start);X(),a("body").css("cursor",g+"-resize").one("mouseup",k),t("eventResizeStart",this,b,h),l.start(function(a,c){if(a){var h=Math.max(C.row,a.row),j=a.col;n==1&&(h=0),h==C.row&&(f?j=Math.min(C.col,j):j=Math.max(C.col,j)),u=h*7+j*p+q-(c.row*7+c.col*p+q);var k=i(w(b),u,!0);if(u){x.end=k;var l=v;v=d(N([x]),e.row,s),v.find("*").css("cursor",g+"-resize"),l&&l.remove(),z(b)}else v&&(y(b),v.remove(),v=null);W(),S(b.start,i(m(k),1))}},h)})}var r=this;r.renderDaySegs=c,r.resizableDayEvent=q;var s=r.opt,t=r.trigger,u=r.isEventDraggable,v=r.isEventResizable,w=r.eventEnd,x=r.reportEventElement,y=r.showEvents,z=r.hideEvents,A=r.eventResize,B=r.getRowCnt,D=r.getColCnt,E=r.getColWidth,G=r.allDayRow,H=r.allDayBounds,I=r.colContentLeft,J=r.colContentRight,K=r.dayOfWeekCol,M=r.dateCell,N=r.compileDaySegs,O=r.getDaySegmentContainer,P=r.bindDaySeg,R=r.calendar.formatDates,S=r.renderDayOverlay,W=r.clearOverlays,X=r.clearSelection}function bl(){function b(a,b,e){c(),b||(b=i(a,e)),j(a,b,e),d(a,b,e)}function c(a){l&&(l=!1,k(),h("unselect",null,a))}function d(a,b,c,d){l=!0,h("select",null,a,b,c,d)}function e(b){var e=f.cellDate,h=f.cellIsAllDay,i=f.getHoverListener(),l=f.reportDayClick;if(b.which==1&&g("selectable")){c(b);var m=this,n;i.start(function(a,b){k(),a&&h(a)?(n=[e(b),e(a)].sort(P),j(n[0],n[1],!0)):n=null},b),a(document).one("mouseup",function(a){i.stop(),n&&(+n[0]==+n[1]&&l(n[0],!0,a),d(n[0],n[1],!0,a))})}}var f=this;f.select=b,f.unselect=c,f.reportSelection=d,f.daySelectionMousedown=e;var g=f.opt,h=f.trigger,i=f.defaultSelectionEnd,j=f.renderSelection,k=f.clearSelection,l=!1;g("selectable")&&g("unselectAuto")&&a(document).mousedown(function(b){var d=g("unselectCancel");if(d&&a(b.target).parents(d).length)return;c(b)})}function bm(){function b(b,c){var d=f.shift();return d||(d=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),d[0].parentNode!=c[0]&&d.appendTo(c),e.push(d.css(b).show()),d}function c(){var a;while(a=e.shift())f.push(a.hide().unbind())}var d=this;d.renderOverlay=b,d.clearOverlays=c;var e=[],f=[]}function bn(a){var b=this,c,d;b.build=function(){c=[],d=[],a(c,d)},b.cell=function(a,b){var e=c.length,f=d.length,g,h=-1,i=-1;for(g=0;g<e;g++)if(b>=c[g][0]&&b<c[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=d[g][0]&&a<d[g][1]){i=g;break}return h<0||i<0?null:{row:h,col:i}},b.rect=function(a,b,e,f,g){var h=g.offset();return{top:c[a][0]-h.top,left:d[b][0]-h.left,width:d[f][1]-d[b][0],height:c[e][1]-c[a][0]}}}function bo(b){function c(a){bp(a);var c=b.cell(a.pageX,a.pageY);if(!c!=!h||c&&(c.row!=h.row||c.col!=h.col))c?(g||(g=c),f(c,g,c.row-g.row,c.col-g.col)):f(c,g),h=c}var d=this,e,f,g,h;d.start=function(d,i,j){f=d,g=h=null,b.build(),c(i),e=j||"mousemove",a(document).bind(e,c)},d.stop=function(){return a(document).unbind(e,c),h}}function bp(a){a.pageX===b&&(a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY)}function bq(a){function c(b){return e[b]=e[b]||a(b)}var d=this,e={},f={},g={};d.left=function(a){return f[a]=f[a]===b?c(a).position().left:f[a]},d.right=function(a){return g[a]=g[a]===b?d.left(a)+c(a).width():g[a]},d.clear=function(){e={},f={},g={}}}var br={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},bs={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},bt=a.fullCalendar={version:"1.5.2"},bu=bt.views={};a.fn.fullCalendar=function(c){if(typeof c=="string"){var e=Array.prototype.slice.call(arguments,1),f;return this.each(function(){var d=a.data(this,"fullCalendar");if(d&&a.isFunction(d[c])){var g=d[c].apply(d,e);f===b&&(f=g),c=="destroy"&&a.removeData(this,"fullCalendar")}}),f!==b?f:this}var g=c.eventSources||[];return delete c.eventSources,c.events&&(g.push(c.events),delete c.events),c=a.extend(!0,{},br,c.isRTL||c.isRTL===b&&br.isRTL?bs:{},c),this.each(function(b,e){var f=a(e),h=new d(f,c,g);f.data("fullCalendar",h),h.render()}),this},bt.sourceNormalizers=[],bt.sourceFetchers=[];var bv={dataType:"json",cache:!1},bw=1;bt.addDays=i,bt.cloneDate=m,bt.parseDate=r,bt.parseISO8601=s,bt.parseTime=t,bt.formatDate=u,bt.formatDates=v;var bx=["sun","mon","tue","wed","thu","fri","sat"],by=864e5,bz=36e5,bA=6e4,bB={s:function(a){return a.getSeconds()},ss:function(a){return R(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return R(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return R(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return R(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return R(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return R(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return u(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){var b=a.getDate();return b>10&&b<20?"th":["st","nd","rd"][b%10-1]||"th"}};bt.applyAll=Z,bu.month=_,bu.basicWeek=ba,bu.basicDay=bb,c({weekMode:"fixed"}),bu.agendaWeek=be,bu.agendaDay=bf,c({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})