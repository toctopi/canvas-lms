(function(a){function b(b){function c(c){u=a.extend(!0,{},v,b),p=c,s.subscribe(p.onActiveCellChanged,e(m)),s.subscribe(p.onKeyDown,e(n)),s.subscribe(p.onClick,e(o))}function d(){s.unsubscribeAll()}function e(a){return function(){t||(t=!0,a.apply(this,arguments),t=!1)}}function f(a){var b=[];for(var c=0;c<a.length;c++)for(var d=a[c].fromRow;d<=a[c].toRow;d++)b.push(d);return b}function g(a){var b=[],c=p.getColumns().length-1;for(var d=0;d<a.length;d++)b.push(new Slick.Range(a[d],0,a[d],c));return b}function h(a,b){var c,d=[];for(c=a;c<=b;c++)d.push(c);for(c=b;c<a;c++)d.push(c);return d}function i(){return f(q)}function j(a){k(g(a))}function k(a){q=a,r.onSelectedRangesChanged.notify(q)}function l(){return q}function m(a,b){u.selectActiveRow&&k([new Slick.Range(b.row,0,b.row,p.getColumns().length-1)])}function n(a){var b=p.getActiveCell();if(b&&a.shiftKey&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&(a.which==38||a.which==40)){var c=i();c.sort(function(a,b){return a-b}),c.length||(c=[b.row]);var d=c[0],e=c[c.length-1],f;a.which==40?f=b.row<e||d==e?++e:++d:f=b.row<e?--e:--d,f>=0&&f<p.getDataLength()&&(p.scrollRowIntoView(f),q=g(h(d,e)),k(q)),a.preventDefault(),a.stopPropagation()}}function o(b){var c=p.getCellFromEvent(b);if(!c||!p.canCellBeActive(c.row,c.cell))return!1;var d=f(q),e=a.inArray(c.row,d);if(!b.ctrlKey&&!b.shiftKey&&!b.metaKey)return!1;if(p.getOptions().multiSelect)if(e===-1&&(b.ctrlKey||b.metaKey))d.push(c.row),p.setActiveCell(c.row,c.cell);else if(e!==-1&&(b.ctrlKey||b.metaKey))d=a.grep(d,function(a,b){return a!==c.row}),p.setActiveCell(c.row,c.cell);else if(d.length&&b.shiftKey){var h=d.pop(),i=Math.min(c.row,h),j=Math.max(c.row,h);d=[];for(var l=i;l<=j;l++)l!==h&&d.push(l);d.push(h),p.setActiveCell(c.row,c.cell)}return q=g(d),k(q),b.stopImmediatePropagation(),!0}var p,q=[],r=this,s=new Slick.EventHandler,t,u,v={selectActiveRow:!0};a.extend(this,{getSelectedRows:i,setSelectedRows:j,getSelectedRanges:l,setSelectedRanges:k,init:c,destroy:d,onSelectedRangesChanged:new Slick.Event})}a.extend(!0,window,{Slick:{RowSelectionModel:b}})})(jQuery)