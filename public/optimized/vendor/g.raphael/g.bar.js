/*!
 * g.Raphael 0.5 - Charting library, based on RaphaÃ«l
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){function a(a,b,c,f,g,h,i,j){var k,l={round:"round",sharp:"sharp",soft:"soft",square:"square"};if(g&&!f||!g&&!c)return i?"":j.path();h=l[h]||"square",f=Math.round(f),c=Math.round(c),a=Math.round(a),b=Math.round(b);switch(h){case"round":if(!g){var m=~~(f/2);c<m?(m=c,k=["M",a+.5,b+.5-~~(f/2),"l",0,0,"a",m,~~(f/2),0,0,1,0,f,"l",0,0,"z"]):k=["M",a+.5,b+.5-m,"l",c-m,0,"a",m,m,0,1,1,0,f,"l",m-c,0,"z"]}else m=~~(c/2),f<m?(m=f,k=["M",a-~~(c/2),b,"l",0,0,"a",~~(c/2),m,0,0,1,c,0,"l",0,0,"z"]):k=["M",a-m,b,"l",0,m-f,"a",m,m,0,1,1,c,0,"l",0,f-m,"z"];break;case"sharp":if(!g){var n=~~(f/2);k=["M",a,b+n,"l",0,-f,e(c-n,0),0,d(n,c),n,-d(n,c),n+(n*2<f),"z"]}else n=~~(c/2),k=["M",a+n,b,"l",-c,0,0,-e(f-n,0),n,-d(n,f),n,d(n,f),n,"z"];break;case"square":g?k=["M",a+~~(c/2),b,"l",1-c,0,0,-f,c-1,0,"z"]:k=["M",a,b+~~(f/2),"l",0,-f,c,0,0,f,"z"];break;case"soft":g?(m=d(Math.round(c/5),f),k=["M",a-~~(c/2),b,"l",0,m-f,"a",m,m,0,0,1,m,-m,"l",c-2*m,0,"a",m,m,0,0,1,m,m,"l",0,f-m,"z"]):(m=d(c,Math.round(f/5)),k=["M",a+.5,b+.5-~~(f/2),"l",c-m,0,"a",m,m,0,0,1,m,m,"l",0,f-m*2,"a",m,m,0,0,1,-m,m,"l",m-c,0,"z"])}return i?k.join(","):j.path(k)}function b(b,c,d,e,f,g,h){h=h||{};var i=this,j=h.type||"square",k=parseFloat(h.gutter||"20%"),l=b.set(),m=b.set(),n=b.set(),o=b.set(),p=Math.max.apply(Math,g),q=[],r=0,s=h.colors||i.colors,t=g.length;if(Raphael.is(g[0],"array")){p=[],r=t,t=0;for(var u=g.length;u--;)m.push(b.set()),p.push(Math.max.apply(Math,g[u])),t=Math.max(t,g[u].length);if(h.stacked)for(var u=t;u--;){var v=0;for(var w=g.length;w--;)v+=+g[w][u]||0;q.push(v)}for(var u=g.length;u--;)if(g[u].length<t)for(var w=t;w--;)g[u].push(0);p=Math.max.apply(Math,h.stacked?q:p)}p=h.to||p;var x=e/(t*(100+k)+k)*100,y=x*k/100,z=h.vgutter==null?20:h.vgutter,A=[],B=c+y,C=(f-2*z)/p;h.stretch||(y=Math.round(y),x=Math.floor(x)),!h.stacked&&(x/=r||1);for(var u=0;u<t;u++){A=[];for(var w=0;w<(r||1);w++){var D=Math.round((r?g[w][u]:g[u])*C),E=d+f-z-D,F=a(Math.round(B+x/2),E+D,x,D,!0,j,null,b).attr({stroke:"none",fill:s[r?w:u]});r?m[w].push(F):m.push(F),F.y=E,F.x=Math.round(B+x/2),F.w=x,F.h=D,F.value=r?g[w][u]:g[u],h.stacked?A.push(F):B+=x}if(h.stacked){var G;o.push(G=b.rect(A[0].x-A[0].w/2,d,x,f).attr(i.shim)),G.bars=b.set();var H=0;for(var I=A.length;I--;)A[I].toFront();for(var I=0,J=A.length;I<J;I++){var F=A[I],K,D=(H+F.value)*C,L=a(F.x,d+f-z-!!H*.5,x,D,!0,j,1,b);G.bars.push(F),H&&F.attr({path:L}),F.h=D,F.y=d+f-z-!!H*.5-D,n.push(K=b.rect(F.x-F.w/2,F.y,x,F.value*C).attr(i.shim)),K.bar=F,K.value=F.value,H+=F.value}B+=x}B+=y}o.toFront(),B=c+y;if(!h.stacked)for(var u=0;u<t;u++){for(var w=0;w<(r||1);w++){var K;n.push(K=b.rect(Math.round(B),d+z,x,f-z).attr(i.shim)),K.bar=r?m[w][u]:m[u],K.value=K.bar.value,B+=x}B+=y}return l.label=function(a,c){a=a||[],this.labels=b.set();var e,i=-Infinity;if(h.stacked)for(var j=0;j<t;j++){var k=0;for(var l=0;l<(r||1);l++){k+=r?g[l][j]:g[j];if(l==r-1){var o=b.labelise(a[j],k,p);e=b.text(m[j*(r||1)+l].x,d+f-z/2,o).attr(txtattr).insertBefore(n[j*(r||1)+l]);var q=e.getBBox();q.x-7<i?e.remove():(this.labels.push(e),i=q.x+q.width)}}}else for(var j=0;j<t;j++)for(var l=0;l<(r||1);l++){var o=b.labelise(r?a[l]&&a[l][j]:a[j],r?g[l][j]:g[j],p);e=b.text(m[j*(r||1)+l].x,c?d+f-z/2:m[j*(r||1)+l].y-10,o).attr(txtattr).insertBefore(n[j*(r||1)+l]);var q=e.getBBox();q.x-7<i?e.remove():(this.labels.push(e),i=q.x+q.width)}return this},l.hover=function(a,b){return o.hide(),n.show(),n.mouseover(a).mouseout(b),this},l.hoverColumn=function(a,b){return n.hide(),o.show(),b=b||function(){},o.mouseover(a).mouseout(b),this},l.click=function(a){return o.hide(),n.show(),n.click(a),this},l.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=n.length;b--;)a.call(n[b]);return this},l.eachColumn=function(a){if(!Raphael.is(a,"function"))return this;for(var b=o.length;b--;)a.call(o[b]);return this},l.clickColumn=function(a){return n.hide(),o.show(),o.click(a),this},l.push(m,n,o),l.bars=m,l.covers=n,l}function c(b,c,d,e,f,g,h){h=h||{};var i=this,j=h.type||"square",k=parseFloat(h.gutter||"20%"),l=b.set(),m=b.set(),n=b.set(),o=b.set(),p=Math.max.apply(Math,g),q=[],r=0,s=h.colors||i.colors,t=g.length;if(Raphael.is(g[0],"array")){p=[],r=t,t=0;for(var u=g.length;u--;)m.push(b.set()),p.push(Math.max.apply(Math,g[u])),t=Math.max(t,g[u].length);if(h.stacked)for(var u=t;u--;){var v=0;for(var w=g.length;w--;)v+=+g[w][u]||0;q.push(v)}for(var u=g.length;u--;)if(g[u].length<t)for(var w=t;w--;)g[u].push(0);p=Math.max.apply(Math,h.stacked?q:p)}p=h.to||p;var x=Math.floor(f/(t*(100+k)+k)*100),y=Math.floor(x*k/100),z=[],A=d+y,B=(e-1)/p;!h.stacked&&(x/=r||1);for(var u=0;u<t;u++){z=[];for(var w=0;w<(r||1);w++){var C=r?g[w][u]:g[u],D=a(c,A+x/2,Math.round(C*B),x-1,!1,j,null,b).attr({stroke:"none",fill:s[r?w:u]});r?m[w].push(D):m.push(D),D.x=c+Math.round(C*B),D.y=A+x/2,D.w=Math.round(C*B),D.h=x,D.value=+C,h.stacked?z.push(D):A+=x}if(h.stacked){var E=b.rect(c,z[0].y-z[0].h/2,e,x).attr(i.shim);o.push(E),E.bars=b.set();var F=0;for(var G=z.length;G--;)z[G].toFront();for(var G=0,H=z.length;G<H;G++){var D=z[G],I,C=Math.round((F+D.value)*B),J=a(c,D.y,C,x-1,!1,j,1,b);E.bars.push(D),F&&D.attr({path:J}),D.w=C,D.x=c+C,n.push(I=b.rect(c+F*B,D.y-D.h/2,D.value*B,x).attr(i.shim)),I.bar=D,F+=D.value}A+=x}A+=y}o.toFront(),A=d+y;if(!h.stacked)for(var u=0;u<t;u++){for(var w=0;w<(r||1);w++){var I=b.rect(c,A,e,x).attr(i.shim);n.push(I),I.bar=r?m[w][u]:m[u],I.value=I.bar.value,A+=x}A+=y}return l.label=function(a,d){a=a||[],this.labels=b.set();for(var e=0;e<t;e++)for(var f=0;f<r;f++){var h=b.labelise(r?a[f]&&a[f][e]:a[e],r?g[f][e]:g[e],p),i=d?m[e*(r||1)+f].x-x/2+3:c+5,j=d?"end":"start",k;this.labels.push(k=b.text(i,m[e*(r||1)+f].y,h).attr(txtattr).attr({"text-anchor":j}).insertBefore(n[0])),k.getBBox().x<c+5?k.attr({x:c+5,"text-anchor":"start"}):m[e*(r||1)+f].label=k}return this},l.hover=function(a,b){return o.hide(),n.show(),b=b||function(){},n.mouseover(a).mouseout(b),this},l.hoverColumn=function(a,b){return n.hide(),o.show(),b=b||function(){},o.mouseover(a).mouseout(b),this},l.each=function(a){if(!Raphael.is(a,"function"))return this;for(var b=n.length;b--;)a.call(n[b]);return this},l.eachColumn=function(a){if(!Raphael.is(a,"function"))return this;for(var b=o.length;b--;)a.call(o[b]);return this},l.click=function(a){return o.hide(),n.show(),n.click(a),this},l.clickColumn=function(a){return n.hide(),o.show(),o.click(a),this},l.push(m,n,o),l.bars=m,l.covers=n,l}var d=Math.min,e=Math.max,f=function(){};f.prototype=Raphael.g,c.prototype=b.prototype=new f,Raphael.fn.hbarchart=function(a,b,d,e,f,g){return new c(this,a,b,d,e,f,g)},Raphael.fn.barchart=function(a,c,d,e,f,g){return new b(this,a,c,d,e,f,g)}})()