define(["jquery","vendor/jquery.ui.menu-1.9"],function(a,b){var c=a.ui.menu.prototype,d=c.refresh;a.extend(c,{refresh:function(){d.call(this);var b=this,c=this.element.find("li.ui-menu-item"),e=!1;this.element.bind("click.menu",function(a){(new RegExp(/^a$/i)).test(a.target.tagName)||a.preventDefault()});var f=0;this.element.find("input[type='checkbox'], input[type='radio']").each(function(){var b=a(this).closest("label");b.length&&(a(this).insertBefore(b),a(this).attr("id")||a(this).attr("id","ui-input-"+f++),b.attr("for",a(this).attr("id")))}),c.children("a").each(function(b,c){var d=a(c),f=d.parent();d.children().is("input[type='checkbox'], input[type='radio']")&&(d.closest("ul").addClass("ui-menu-icons"),d.children("input[type='checkbox']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-check"></span>'),f.attr({role:"menuitemcheckbox","aria-checked":"true"})):d.children("input[type='radio']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-radio-on"></span>'),f.attr({role:"menuitemradio","aria-checked":"true"})):d.children("input[type='radio']").length?(d.prepend('<span class="ui-icon ui-icon-radio-off"></span>'),f.attr({role:"menuitemradio","aria-checked":"false"})):f.attr({role:"menuitemcheckbox","aria-checked":"false"}),d.children().is("input[type='radio']")&&f.attr("radio-group",d.children("input[type='radio']").attr("name")),f.prev().length&&!f.prev().children("a").length?(f.prev().addClass("ui-state-disabled").html("<span class='ui-menu-input-group'>"+f.prev().text()+"</span>").bind("click.menu",!1).after('<li class="ui-menu-item"><hr /></li>'),e=!0):f.prev().length&&!f.prev().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.before("<li><hr /></li>"),e&&f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")?(f.after("<li><hr /></li>"),e=!1):f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.after("<li><hr /></li>"),d.children("input[type='checkbox'], input[type='radio']").hide())}),c.bind("keydown.menu",function(c){c.keyCode===a.ui.keyCode.SPACE&&(b.active.children("a").children().is("input[type='checkbox'], input[type='radio']")&&(b.select(c),c.stopImmediatePropagation()),c.preventDefault())})},select:function(b){var c={item:this.active};this.active.children("a").children().is("input[type='checkbox']")&&(this.active.attr("aria-checked")==="false"?(this.active.children("a").prepend('<span class="ui-icon ui-icon-check"></span>'),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='checkbox']").prop("checked","checked").trigger("change")):this.active.attr("aria-checked")==="true"&&(this.active.children("a").children("span.ui-icon-check").remove(),this.active.attr("aria-checked","false"),this.active.children("a").children("input[type='checkbox']").removeAttr("checked").trigger("change"))),this.active.children("a").children().is("input[type='radio']")&&this.active.attr("aria-checked")==="false"&&(this.active.children("a").children("span.ui-icon-radio-off").toggleClass("ui-icon-radio-on ui-icon-radio-off"),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='radio']").prop("checked","checked").trigger("change"),this.active.siblings("[radio-group="+a(this.active).attr("radio-group")+"]").each(function(){a(this).attr("aria-checked","false"),a(this).children("a").children("span.ui-icon-radio-on").toggleClass("ui-icon-radio-on ui-icon-radio-off"),a(this).children("a").children("input[type='radio']").removeAttr("checked")})),this.active.children("a").children().is("input[type='checkbox'], input[type='radio']")||this.collapseAll(),this._trigger("select",b,c)}})})