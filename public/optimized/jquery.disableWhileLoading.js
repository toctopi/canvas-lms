define(["i18n!instructure","compiled/util/objectCollection","jquery","jquery.ajaxJSON","vendor/jquery.spin"],function(a,b,c){c.fn.disableWhileLoading=function(d,e){return this.each(function(){var f=c.extend(!0,{},c.fn.disableWhileLoading.defaults,e),g=c(this),h=g.data(),i=h.disabledWhileLoadingDeferreds||(h.disabledWhileLoadingDeferreds=b([])),j=c.Deferred();c.when.apply(c,i).done(function(){var b="disabled_"+c.guid++,h=g.add(g.nextAll(".ui-dialog-buttonpane")),k=h.find("*").andSelf().filter(":input").not(":disabled,[type=file]"),l=g.find(".spin_holder"),m=l.length?l:g,n=m.css("display"),o=!1,p=setTimeout(function(){o=!0,k.prop("disabled",!0),m.show().spin(e),h.css("opacity",function(a,d){return c(this).data(b+"opacityBefore",this.style.opacity),f.opacity}),c.each(f.buttons,function(d,e){c.isArray(f.buttons)&&(d=e,e=null),h.find(d).text(function(d,f){return c(this).data(b,f),e||c(this).data("textWhileLoading")||c(this).is(".ui-button-text")&&c(this).closest(".ui-button").data("textWhileLoading")||a.t("loading","Loading...")})})},13);c.when(d).always(function(){clearTimeout(p),o&&(m.css("display",n).spin(!1),h.css("opacity",function(){return c(this).data(b+"opacityBefore")}),k.prop("disabled",!1),c.each(f.buttons,function(){h.find(""+this).text(function(){return c(this).data(b)})}),i.erase(j),j.resolve())})}),i.push(j)})},c.fn.disableWhileLoading.defaults={opacity:.5,buttons:['button[type="submit"], .ui-dialog-buttonpane .ui-button .ui-button-text']}})