tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(a){var b=this,c=document.forms[0],d=tinyMCEPopup.getWindowArg("mode");b.switchMode(d),c[d+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string"),c[d+"_panel_searchstring"].focus(),mcTabs.onChange.add(function(a,c){b.switchMode(a.substring(0,a.indexOf("_")))})},switchMode:function(a){var b,c=this.lastMode;c!=a&&(b=document.forms[0],c&&(b[a+"_panel_searchstring"].value=b[c+"_panel_searchstring"].value,b[a+"_panel_backwardsu"].checked=b[c+"_panel_backwardsu"].checked,b[a+"_panel_backwardsd"].checked=b[c+"_panel_backwardsd"].checked,b[a+"_panel_casesensitivebox"].checked=b[c+"_panel_casesensitivebox"].checked),mcTabs.displayTab(a+"_tab",a+"_panel"),document.getElementById("replaceBtn").style.display=a=="replace"?"inline":"none",document.getElementById("replaceAllBtn").style.display=a=="replace"?"inline":"none",this.lastMode=a)},searchNext:function(a){function b(){f=e.getRng().cloneRange(),d.getDoc().execCommand("SelectAll",!1,null),e.setRng(f)}function c(){d.selection.setContent(rs)}var d=tinyMCEPopup.editor,e=d.selection,f=e.getRng(),g,h=this.lastMode,i,j,k=0,l=d.getWin(),m=d.windowManager,n=0;g=document.forms[0],i=g[h+"_panel_searchstring"].value,j=g[h+"_panel_backwardsu"].checked,ca=g[h+"_panel_casesensitivebox"].checked,rs=g.replace_panel_replacestring.value,tinymce.isIE&&(f=d.getDoc().selection.createRange());if(i=="")return;ca&&(k|=4);switch(a){case"all":d.execCommand("SelectAll"),d.selection.collapse(!0);if(tinymce.isIE){d.focus(),f=d.getDoc().selection.createRange();while(f.findText(i,j?-1:1,k))f.scrollIntoView(),f.select(),c(),n=1,j&&f.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else while(l.find(i,ca,j,!1,!1,!1,!1))c(),n=1;n?tinyMCEPopup.alert(d.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(d.getLang("searchreplace_dlg.notfound"));return;case"current":d.selection.isCollapsed()||c()}e.collapse(j),f=e.getRng();if(!i)return;tinymce.isIE?(d.focus(),f=d.getDoc().selection.createRange(),f.findText(i,j?-1:1,k)?(f.scrollIntoView(),f.select()):tinyMCEPopup.alert(d.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):l.find(i,ca,j,!1,!1,!1,!1)?b():tinyMCEPopup.alert(d.getLang("searchreplace_dlg.notfound"))}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog)