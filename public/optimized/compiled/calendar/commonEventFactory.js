(function(){define(["jquery","compiled/calendar/CommonEvent","compiled/calendar/CommonEvent.Assignment","compiled/calendar/CommonEvent.CalendarEvent","compiled/str/splitAssetString"],function(a,b,c,d,e){return function(a,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(a===null)return n=new b,n.allPossibleContexts=f,n;g=a.context_code,j=a.effective_context_code||g,p=null,a.assignment||a.assignment_group_id?p="assignment":p="calendar_event",a=a.assignment||a.calendar_event||a;if(a.hidden)return null;g==null&&(g=a.context_code),j==null&&(j=a.effective_context_code||a.context_code),k=null;for(q=0,r=f.length;q<r;q++){i=f[q];if(i.asset_string===j){k=i;break}}return k===null?null:(g!==j&&(o=e(g)),h=o&&(m=k[o[0]])?function(){var a,b,c;c=[];for(a=0,b=m.length;a<b;a++)l=m[a],l.id===o[1]&&c.push(l);return c}()[0]:void 0,p==="assignment"?n=new c(a,k):n=new d(a,k,h),n.can_edit=!1,n.can_delete=!1,k.can_create_calendar_events&&(n.can_edit=!0,n.can_delete=!0),n.object.workflow_state==="locked"&&(n.can_edit=!1),n.object.appointment_group_id&&k.can_create_calendar_events&&(n.can_edit=!0),n)}})}).call(this)