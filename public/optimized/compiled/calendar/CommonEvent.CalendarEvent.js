(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["i18n!calendar","compiled/util/semanticDateRange","compiled/calendar/CommonEvent","jquery.instructure_date_and_time","jquery.instructure_misc_helpers"],function(b,d,e){var f,g;return g=b.t("prompts.delete_event","Are you sure you want to delete this event?"),f=function(b){function e(b,c,d){this.saveDates=a(this.saveDates,this),this.copyDataFromObject=a(this.copyDataFromObject,this),e.__super__.constructor.call(this,b,c,d),this.eventType="calendar_event",this.deleteConfirmation=g,this.deleteURL=c.calendar_event_url,this.copyDataFromObject(b)}return c(e,b),e.name="CalendarEvent",e.prototype.copyDataFromObject=function(a){return a.calendar_event&&(a=a.calendar_event),this.object=this.calendarEvent=a,this.id="calendar_event_"+a.id,this.title=a.title||"Untitled",this.start=a.start_at?$.parseFromISO(a.start_at).time:null,this.end=a.end_at?$.parseFromISO(a.end_at).time:null,this.allDay=a.all_day,this.editable=!0,this.lockedTitle=this.object.parent_event_id!=null,this.addClass("group_"+this.contextCode()),this.isAppointmentGroupEvent()&&(this.addClass("scheduler-event"),this.object.reserved&&this.addClass("scheduler-reserved"),this.object.available_slots===0&&this.addClass("scheduler-full"),(this.object.available_slots===void 0||this.object.available_slots>0)&&this.addClass("scheduler-available"),this.editable=!1),this.description=a.description},e.prototype.startDate=function(){return this.calendarEvent.start_at?$.parseFromISO(this.calendarEvent.start_at).time:null},e.prototype.endDate=function(){return this.calendarEvent.end_at?$.parseFromISO(this.calendarEvent.end_at).time:null},e.prototype.fullDetailsURL=function(){var a;return this.isAppointmentGroupEvent()?"/appointment_groups/"+this.object.appointment_group_id:$.replaceTags(this.contextInfo.calendar_event_url,"id",(a=this.calendarEvent.parent_event_id)!=null?a:this.calendarEvent.id)},e.prototype.displayTimeString=function(){return d(this.calendarEvent.start_at,this.calendarEvent.end_at)},e.prototype.saveDates=function(a,b){return this.save({"calendar_event[start_at]":this.start?$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.start)):"","calendar_event[end_at]":this.end?$.dateToISO8601UTC($.unfudgeDateForProfileTimezone(this.end)):""},a,b)},e.prototype.methodAndURLForSave=function(){var a,b;return this.isNewEvent()?(a="POST",b="/api/v1/calendar_events"):(a="PUT",b=this.calendarEvent.url),[a,b]},e}(e)})}).call(this)