(function(){define(["jquery"],function(a){var b;return b=function(){function a(a){var b,c,d,e,f,g;this.blocks=[];if(a)for(e=0,f=a.length;e<f;e++)g=a[e],d=g[0],b=g[1],c=g[2],this.add(d,b,c)}return a.name="TimeBlockListManager",a.prototype.add=function(a,b,c){return this.blocks.push({start:a,end:b,locked:c})},a.prototype.consolidate=function(){var a,b,c,d,e,f;this.sort(),b=[],b.last=function(){return this[this.length-1]},f=this.blocks;for(d=0,e=f.length;d<e;d++){a=f[d];if(!b.last()){b.push(a);continue}c=b.last(),c.end.getTime()===a.start.getTime()&&!c.locked&&!a.locked?c.end=a.end:b.push(a)}return this.blocks=b},a.prototype.split=function(a){var b,c,d,e,f,g,h;this.consolidate(),e=a*60*1e3,h=this.blocks;for(f=0,g=h.length;f<g;f++){b=h[f];if(b.locked)continue;while(b.end-b.start>a*60*1e3)d=b.start,c=new Date(b.start.getTime()+e),b.start=new Date(b.start.getTime()+e),this.add(d,c)}return this.sort()},a.prototype.sort=function(){return this.blocks=this.blocks.sort(function(a,b){return a.end>b.start?1:-1})},a.prototype["delete"]=function(a){if(a!=null&&this.blocks.length>a&&!this.blocks[a].locked)return this.blocks.splice(a,1)},a.prototype.reset=function(){return this.blocks=[]},a}()})}).call(this)