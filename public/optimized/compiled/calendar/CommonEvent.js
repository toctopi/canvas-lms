(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["jquery","jquery.ajaxJSON","vendor/jquery.ba-tinypubsub"],function(b){return function(){function c(b,c,d){this.save=a(this.save,this),this.removeClass=a(this.removeClass,this),this.addClass=a(this.addClass,this),this.isUndated=a(this.isUndated,this),this.contextCode=a(this.contextCode,this),this.isAppointmentGroupEvent=a(this.isAppointmentGroupEvent,this),this.isAppointmentGroupFilledEvent=a(this.isAppointmentGroupFilledEvent,this),this.isNewEvent=a(this.isNewEvent,this),this.eventType="generic",this.contextInfo=c,this.actualContextInfo=d,this.allPossibleContexts=null,this.className=[],this.object={}}return c.prototype.isNewEvent=function(){var a;return this.eventType==="generic"||((a=this.object)!=null?!a.id:!void 0)},c.prototype.isAppointmentGroupFilledEvent=function(){var a,b;return((a=this.object)!=null?(b=a.child_events)!=null?b.length:void 0:void 0)>0},c.prototype.isAppointmentGroupEvent=function(){var a;return(a=this.object)!=null?a.appointment_group_url:void 0},c.prototype.contextCode=function(){var a,b,c;return((a=this.object)!=null?a.effective_context_code:void 0)||((b=this.object)!=null?b.context_code:void 0)||((c=this.contextInfo)!=null?c.asset_string:void 0)},c.prototype.isUndated=function(){return this.start===null},c.prototype.displayTimeString=function(){return""},c.prototype.readableType=function(){return""},c.prototype.fullDetailsURL=function(){return null},c.prototype.startDate=function(){return this.date},c.prototype.endDate=function(){return this.startDate()},c.prototype.possibleContexts=function(){return this.allPossibleContexts||[this.contextInfo]},c.prototype.addClass=function(a){var b,c,d,e,f;c=!1,f=this.className;for(d=0,e=f.length;d<e;d++){b=f[d];if(b===a){c=!0;break}}if(!c)return this.className.push(a)},c.prototype.removeClass=function(a){var b,c,d,e,f,g;c=0,f=this.className,g=[];for(d=0,e=f.length;d<e;d++)b=f[d],b===a?g.push(this.className.splice(c,1)):g.push(c+=1);return g},c.prototype.save=function(a,c,d){var e,f,g,h,i,j=this;return g=function(a){return j.copyDataFromObject(a),b.publish("CommonEvent/eventSaved",j),typeof c=="function"?c():void 0},f=function(a){return b.publish("CommonEvent/eventSaveFailed",j),typeof d=="function"?d():void 0},i=this.methodAndURLForSave(),e=i[0],h=i[1],b.publish("CommonEvent/eventSaving",this),b.ajaxJSON(h,e,a,g,f)},c}()})}).call(this)