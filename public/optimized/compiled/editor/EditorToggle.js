(function(){define(["i18n!editor","jquery","tinymce.editor_box"],function(a,b){var c;return c=function(){function c(a,c){this.el=a,this.options=b.extend({},this.options,c),this.textArea=this.createTextArea(),this.done=this.createDone(),this.content=this.getContent(),this.editing=!1}return c.name="EditorToggle",c.prototype.options={doneText:a.t("done_as_in_finished","Done")},c.prototype.toggle=function(){return this.editing?this.display():this.edit()},c.prototype.edit=function(){return this.textArea.val(this.getContent()),this.textArea.insertBefore(this.el),this.el.detach(),this.done.insertAfter(this.textArea),this.textArea.editorBox(),this.editing=!0},c.prototype.display=function(){return this.content=this.textArea._justGetCode(),this.textArea.val(this.content),this.el.html(this.content),this.el.insertBefore(this.textArea),this.textArea._removeEditor(),this.textArea.detach(),this.done.detach(),this.textArea.attr("id",""),this.editing=!1},c.prototype.getContent=function(){return b.trim(this.el.html())},c.prototype.createTextArea=function(){return b("<textarea/>").css("width","100%").addClass("editor-toggle")},c.prototype.createDone=function(){var a=this;return b("<a/>").html(this.options.doneText).addClass("button edit-html-done edit_html_done").click(function(){return a.display()})},c}()})}).call(this)