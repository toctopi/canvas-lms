(function(){define("compiled/editor/markScriptsLoaded",[],function(){var a;return a=function(a){var b,c,d,e,f;f=[];for(d=0,e=a.length;d<e;d++)c=a[d],b=tinymce.baseURI.toAbsolute(c)+".js",f.push(tinymce.ScriptLoader.markDone(b));return f}})}).call(this),function(){var a=[].slice;define("compiled/fn/punch",[],function(){var b;return b=function(b,c,d){var e;return e=b[c],b[c]=function(){var c;return c=1>arguments.length?[]:a.call(arguments,0),c.unshift(function(){return e.apply(b,arguments)}),d.apply(b,c)}}})}.call(this),window.tinyMCEPreInit={base:"/javascripts/tinymce/jscripts/tiny_mce",suffix:"",query:""},define("tricktiny",function(){}),function(a){var b=/^\s*|\s*$/g,c,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.7",releaseDate:"2011-11-03",_init:function(){function b(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(c.suffix="_src"),(k=a.src.indexOf("?"))!=-1&&(c.query=a.src.substring(k+1)),c.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),j&&c.baseURL.indexOf("://")==-1&&c.baseURL.indexOf("/")!==0&&(c.baseURL=j+c.baseURL),c.baseURL):null}var c=this,d=document,e=navigator,f=e.userAgent,g,h,i,j,k,l;c.isOpera=a.opera&&opera.buildNumber,c.isWebKit=/WebKit/.test(f),c.isIE=!c.isWebKit&&!c.isOpera&&/MSIE/gi.test(f)&&/Explorer/gi.test(e.appName),c.isIE6=c.isIE&&/MSIE [56]/.test(f),c.isIE7=c.isIE&&/MSIE [7]/.test(f),c.isIE8=c.isIE&&/MSIE [8]/.test(f),c.isIE9=c.isIE&&/MSIE [9]/.test(f),c.isGecko=!c.isWebKit&&/Gecko/.test(f),c.isMac=f.indexOf("Mac")!=-1,c.isAir=/adobeair/i.test(f),c.isIDevice=/(iPad|iPhone)/.test(f),c.isIOS5=c.isIDevice&&f.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){c.suffix=tinyMCEPreInit.suffix,c.baseURL=tinyMCEPreInit.base,c.query=tinyMCEPreInit.query;return}c.suffix="",h=d.getElementsByTagName("base");for(g=0;g<h.length;g++)if(l=h[g].href)/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),j=l?l.match(/.*\//)[0]:"";h=d.getElementsByTagName("script");for(g=0;g<h.length;g++)if(b(h[g]))return;i=d.getElementsByTagName("head")[0];if(i){h=i.getElementsByTagName("script");for(g=0;g<h.length;g++)if(b(h[g]))return}return},is:function(a,b){return b?b=="array"&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==b:a!==c},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,b,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==c){for(e=0,f=a.length;e<f;e++)if(b.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&b.call(d,a[e],e,a)===!1)return 0;return 1},map:function(a,b){var c=[];return e.each(a,function(a){c.push(b(a))}),c},grep:function(a,b){var c=[];return e.each(a,function(a){(!b||b(a))&&c.push(a)}),c},inArray:function(a,b){var c,d;if(a)for(c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},extend:function(a,b){var d,f,g=arguments;for(d=1,f=g.length;d<f;d++)b=g[d],e.each(b,function(b,d){b!==c&&(a[d]=b)});return a},trim:function(a){return(a?""+a:"").replace(b,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,f){if(b.call(d,a,f,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,g;if(b){for(g in b)c=b[g],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,b,e){return d?e.replace(a,function(){var a=b,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===c?a=a.replace(new RegExp("\\$"+e,"g"),""):a=a.replace(new RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,b)}};e._init(),a.tinymce=a.tinyMCE=e}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b=arguments,c,d=this.listeners,e;for(c=0;c<d.length;c++){e=d[c],a=e.cb.apply(e.scope,b);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d=this,e,f,g,h;b=tinymce.trim(b),c=d.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){d.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(h=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+d.toAbsPath(h,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var e=b[c];e&&(e=e.replace(/\(mce_at\)/g,"@@")),d[a]=e});if(g=c.base_uri){d.protocol||(d.protocol=g.protocol),d.userInfo||(d.userInfo=g.userInfo),!d.port&&d.host=="mce_host"&&(d.port=g.port);if(!d.host||d.host=="mce_host")d.host=g.host;d.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b=this,c;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:b}),a.host!="mce_host"&&b.host!=a.host&&a.host||b.port!=a.port||b.protocol!=a.protocol?a.getURI():(c=b.toRelPath(b.path,a.path),a.query&&(c+="?"+a.query),a.anchor&&(c+="#"+a.anchor),c))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d=0,e="",f,g;a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(f=0,g=a.length;f<g;f++)if(f>=c.length||a[f]!=c[f]){d=f+1;break}if(a.length<c.length)for(f=0,g=c.length;f<g;f++)if(f>=a.length||a[f]!=c[f]){d=f+1;break}if(d==1)return b;for(f=0,g=a.length-(d-1);f<g;f++)e+="../";for(f=d-1,g=c.length;f<g;f++)f!=d-1?e+="/"+c[f]:e+=c[f];return e},toAbsPath:function(b,c){var d,e=0,f=[],g,h;g=/\/$/.test(c)?"/":"",b=b.split("/"),c=c.split("/"),a(b,function(a){a&&f.push(a)}),b=f;for(d=c.length-1,f=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){e++;continue}if(e>0){e--;continue}f.push(c[d])}return d=b.length-e,d>0?h=b.slice(0,d).join("/")+"/"+f.reverse().join("/"):h=f.reverse().join("/"),h.indexOf("/")!==0&&(h="/"+h),g&&h.lastIndexOf("/")!==h.length-1&&(h+=g),h},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c=this.get(b),d;return c&&a(c.split("&"),function(a){a=a.split("="),d=d||{},d[unescape(a[0])]=unescape(a[1])}),d},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b=document.cookie,c,d=a+"=",e;if(!b)return;e=b.indexOf("; "+d);if(e==-1){e=b.indexOf(d);if(e!=0)return null}else e+=2;return c=b.indexOf(";",e),c==-1&&(c=b.length),unescape(b.substring(e+d.length,c))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb\tt\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function b(a){c=0;try{c=new ActiveXObject(a)}catch(b){}return c}var c,d,e=window,f=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",c=e.XMLHttpRequest?new XMLHttpRequest:b("Microsoft.XMLHTTP")||b("Msxml2.XMLHTTP");if(c){c.overrideMimeType&&c.overrideMimeType(a.content_type),c.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&c.setRequestHeader("Content-Type",a.content_type),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(a.data);function g(){!a.async||c.readyState==4||f++>1e4?(a.success&&f<1e4&&c.status==200?a.success.call(a.success_scope,""+c.responseText,c,a):a.error&&a.error.call(a.error_scope,f>1e4?"TIMED_OUT":"GENERAL",c,a),c=null):e.setTimeout(g,10)}if(!a.async)return g();d=e.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40}}(tinymce),function(a){function b(b){var c=b.dom,d=b.selection;b.onKeyDown.add(function(b,e){var f,g,h,i,j;j=e.keyCode==l;if(j||e.keyCode==k){e.preventDefault(),f=d.getRng(),g=c.getParent(f.startContainer,c.isBlock),j&&(g=c.getNext(g,c.isBlock));if(g){h=g.firstChild;while(h&&h.nodeType==3&&h.nodeValue.length==0)h=h.nextSibling;h&&h.nodeName==="SPAN"&&(i=h.cloneNode(!1))}b.getDoc().execCommand(j?"ForwardDelete":"Delete",!1,null),g=c.getParent(f.startContainer,c.isBlock),a.each(c.select("span.Apple-style-span,font.Apple-style-span",g),function(a){var b=d.getBookmark();i?c.replace(i.cloneNode(!1),a,!0):c.remove(a,!0),d.moveToBookmark(b)})}})}function c(a){a.onKeyUp.add(function(a,b){var c=b.keyCode;if(c==l||c==k)if(a.dom.isEmpty(a.getBody())){a.setContent("",{format:"raw"}),a.nodeChanged();return}})}function d(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function e(b){b.onKeyDown.add(function(b,c){if(c.keyCode===k&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0){var d=b.selection.getNode(),e=d.previousSibling;e&&e.nodeName&&e.nodeName.toLowerCase()==="hr"&&(b.dom.remove(e),a.dom.Event.cancel(c))}})}function f(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var c=a.getBody();c.blur(),setTimeout(function(){c.focus()},0)}})}function g(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function h(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function i(a){document.body.setAttribute("role","application")}var j=a.VK,k=j.BACKSPACE,l=j.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(j){a.isWebKit&&(b(j),c(j),d(j),g(j),a.isIDevice&&h(j)),a.isIE&&(e(j),c(j),i(j)),a.isGecko&&(e(j),f(j))}})}(tinymce),function(a){function b(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.textContent||b.innerText||a}function c(a,b){var c,d,f,g={};if(a){a=a.split(","),b=b||10;for(c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),e[d]||(f="&"+a[c+1]+";",g[d]=f,g[f]=d);return g}}var d,e,f,g=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,i=/[<>&\"\']/g,j=/&(#x|#)?([\w]+);/g,k={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};e={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},f={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},d=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?g:h,function(a){return e[a]||a})},encodeAllRaw:function(a){return(""+a).replace(i,function(a){return e[a]||a})},encodeNumeric:function(a,b){return a.replace(b?g:h,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":e[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,b,c){return c=c||d,a.replace(b?g:h,function(a){return e[a]||c[a]||a})},getEncodeFunc:function(b,f){function i(a,b){return a.replace(b?g:h,function(a){return e[a]||f[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return k.encodeNamed(a,b,f)}var k=a.html.Entities;return f=c(f)||d,b=a.makeMap(b.replace(/\+/g,",")),b.named&&b.numeric?i:b.named?f?j:k.encodeNamed:b.numeric?k.encodeNumeric:k.encodeRaw},decode:function(a){return a.replace(j,function(a,c,e){return c?(e=parseInt(e,c.length===2?16:10),e>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(e&1023))):k[e]||String.fromCharCode(e)):f[a]||d[a]||b(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function c(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var d=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,e=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,f=/\s*([^:]+):\s*([^;]+);?/g,g=/\s+$/,h=/rgb/,i,j,k={},l;a=a||{},l="\\\" \\' \\; \\: ; : ﻿".split(" ");for(j=0;j<l.length;j++)k[l[j]]="﻿"+j,k["﻿"+j]=l[j];return{toHex:function(a){return a.replace(d,c)},parse:function(b){function h(a,b){var c,d,e,f;c=n[a+"-top"+b];if(!c)return;d=n[a+"-right"+b];if(c!=d)return;e=n[a+"-bottom"+b];if(d!=e)return;f=n[a+"-left"+b];if(e!=f)return;n[a+b]=f,delete n[a+"-top"+b],delete n[a+"-right"+b],delete n[a+"-bottom"+b],delete n[a+"-left"+b]}function i(a){var b=n[a],c;if(!b||b.indexOf(" ")<0)return;b=b.split(" "),c=b.length;while(c--)if(b[c]!==b[0])return!1;return n[a]=b[0],!0}function j(a,b,c,d){if(!i(b))return;if(!i(c))return;if(!i(d))return;n[a]=n[b]+" "+n[c]+" "+n[d],delete n[b],delete n[c],delete n[d]}function l(a){return r=!0,k[a]}function m(a,b){return r&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var n={},o,p,q,r,s=a.url_converter,t=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,l).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,l)});while(o=f.exec(b)){p=o[1].replace(g,"").toLowerCase(),q=o[2].replace(g,"");if(p&&q.length>0){if(p==="font-weight"&&q==="700")q="bold";else if(p==="color"||p==="background-color")q=q.toLowerCase();q=q.replace(d,c),q=q.replace(e,function(a,b,c,d,e,f){return e=e||f,e?(e=m(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=m(b||c||d),s&&(b=s.call(t,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),n[p]=r?m(q,!0):q}f.lastIndex=o.index+o[0].length}h("border",""),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),j("border","border-width","border-style","border-color"),n.border==="medium none"&&delete n.border}return n},serialize:function(a,c){function d(c){var d,f,g,h;d=b.styles[c];if(d)for(f=0,g=d.length;f<g;f++)c=d[f],h=a[c],h!==i&&h.length>0&&(e+=(e.length>0?" ":"")+c+": "+h+";")}var e="",f,g;if(c&&b&&b.styles)d("*"),d(c);else for(f in a)g=a[f],g!==i&&g.length>0&&(e+=(e.length>0?" ":"")+f+": "+g+";");return e}}},function(a){function b(a,b){return a.split(b||",")}function c(a,c){function d(b){return b.replace(/[A-Z]+/g,function(b){return d(a[b])})}var e,f={};for(e in a)a.hasOwnProperty(e)&&(a[e]=d(a[e]));return d(c).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,c,d,e){d=b(d,"|"),f[c]={attributes:l(d),attributesOrder:d,children:l(e,"|",{"#comment":{}})}}),f}var d={},e,f,g,h,i={},j,k,l=a.makeMap,m=a.each;f="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",f=l(f,",",l(f.toUpperCase())),d=c({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),e=l("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),g=l("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),h=a.extend(l("td,th,iframe,video,audio,object"),g),j=l("pre,script,style,textarea"),k=l("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(c){function n(a){return new RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function o(c){var d,e,f,g,h,i,j,k,m,o,p,q,r,s,t,v,x,y,z,A,B,C,D=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,E=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,F=/[*?+]/;if(c){c=b(c),u["@"]&&(x=u["@"].attributes,y=u["@"].attributesOrder);for(d=0,e=c.length;d<e;d++){i=D.exec(c[d]);if(i){t=i[1],o=i[2],v=i[3],m=i[4],r={},s=[],j={attributes:r,attributesOrder:s},t==="#"&&(j.paddEmpty=!0),t==="-"&&(j.removeEmpty=!0);if(x){for(A in x)r[A]=x[A];s.push.apply(s,y)}if(m){m=b(m,"|");for(f=0,g=m.length;f<g;f++){i=E.exec(m[f]);if(i){k={},q=i[1],p=i[2].replace(/::/g,":"),t=i[3],C=i[4],q==="!"&&(j.attributesRequired=j.attributesRequired||[],j.attributesRequired.push(p),k.required=!0);if(q==="-"){delete r[p],s.splice(a.inArray(s,p),1);continue}t&&(t==="="&&(j.attributesDefault=j.attributesDefault||[],j.attributesDefault.push({name:p,value:C}),k.defaultValue=C),t===":"&&(j.attributesForced=j.attributesForced||[],j.attributesForced.push({name:p,value:C}),k.forcedValue=C),t==="<"&&(k.validValues=l(C,"?"))),F.test(p)?(j.attributePatterns=j.attributePatterns||[],k.pattern=n(p),j.attributePatterns.push(k)):(r[p]||s.push(p),r[p]=k)}}}!x&&o=="@"&&(x=r,y=s),v&&(j.outputName=o,u[v]=j),F.test(o)?(j.pattern=n(o),w.push(j)):u[o]=j}}}}function p(a){u={},w=[],o(a),m(d,function(a,b){v[b]=a.children})}function q(a){var c=/^(~)?(.+)$/;a&&m(b(a),function(a){var b=c.exec(a),d=b[1]==="~",e=d?"span":"div",g=b[2];v[g]=v[e],i[g]=e,d||(f[g]={}),m(v,function(a,b){a[e]&&(a[g]=a[e])})})}function r(a){var c=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&m(b(a),function(a){var d=c.exec(a),e,f;d&&(f=d[1],f?e=v[d[2]]:e=v[d[2]]={"#comment":{}},e=v[d[2]],m(b(d[3],"|"),function(a){f==="-"?delete e[a]:e[a]={}}))})}function s(a){var b=u[a],c;if(b)return b;c=w.length;while(c--){b=w[c];if(b.pattern.test(a))return b}}var t=this,u={},v={},w=[],x,y;c=c||{},c.verify_html===!1&&(c.valid_elements="*[*]"),c.valid_styles&&(x={},m(c.valid_styles,function(b,c){x[c]=a.explode(b)})),y=c.whitespace_elements?l(c.whitespace_elements):j,c.valid_elements?p(c.valid_elements):(m(d,function(a,b){u[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},v[b]=a.children}),m(b("strong/b,em/i"),function(a){a=b(a,"/"),u[a[1]].outputName=a[0]}),u.img.attributesDefault=[{name:"alt",value:""}],m(b("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){u[a].removeEmpty=!0}),m(b("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){u[a].paddEmpty=!0})),q(c.custom_elements),r(c.valid_children),o(c.extended_valid_elements),r("+ol[ul|ol],+ul[ul|ol]"),s("span")||o("span[!data-mce-type|*]"),c.invalid_elements&&a.each(a.explode(c.invalid_elements),function(a){u[a]&&delete u[a]}),t.children=v,t.styles=x,t.getBoolAttrs=function(){return e},t.getBlockElements=function(){return f},t.getShortEndedElements=function(){return g},t.getSelfClosingElements=function(){return k},t.getNonEmptyElements=function(){return h},t.getWhiteSpaceElements=function(){return y},t.isValidChild=function(a,b){var c=v[a];return!!c&&!!c[b]},t.getElementRule=s,t.getCustomElements=function(){return i},t.addValidElements=o,t.setValidElements=p,t.addCustomElements=q,t.addValidChildren=r},a.html.Schema.boolAttrMap=e,a.html.Schema.blockElementsMap=f}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function e(a){var b,c;b=k.length;while(b--)if(k[b].name===a)break;if(b>=0){for(c=k.length-1;c>=b;c--)a=k[c],a.valid&&f.end(a.name);k.length=b}}var f=this,g,h=0,i,j,k=[],l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=0,L=a.html.Entities.decode,M,N;G=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,I={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},r=c.getShortEndedElements(),F=c.getSelfClosingElements(),s=c.getBoolAttrs(),u=b.validate,q=b.remove_internals,M=b.fix_self_closing,N=a.isIE,z=/^:/;while(g=G.exec(d)){h<g.index&&f.text(L(d.substr(h,g.index-h)));if(i=g[6])i=i.toLowerCase(),N&&z.test(i)&&(i=i.substr(1)),e(i);else if(i=g[7]){i=i.toLowerCase(),N&&z.test(i)&&(i=i.substr(1)),t=i in r,M&&F[i]&&k.length>0&&k[k.length-1].name===i&&e(i);if(!u||(v=c.getElementRule(i))){w=!0,u&&(A=v.attributes,B=v.attributePatterns),(y=g[8])?(p=y.indexOf("data-mce-type")!==-1,p&&q&&(w=!1),l=[],l.map={},y.replace(H,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in s?b:L(c||d||e||"");if(u&&!p&&b.indexOf("data-")!==0){f=A[b];if(!f&&B){g=B.length;while(g--){f=B[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}l.map[b]=c,l.push({name:b,value:c})})):(l=[],l.map={});if(u&&!p){C=v.attributesRequired,D=v.attributesDefault,E=v.attributesForced;if(E){m=E.length;while(m--)x=E[m],o=x.name,J=x.value,J==="{$uid}"&&(J="mce_"+K++),l.map[o]=J,l.push({name:o,value:J})}if(D){m=D.length;while(m--)x=D[m],o=x.name,o in l.map||(J=x.value,J==="{$uid}"&&(J="mce_"+K++),l.map[o]=J,l.push({name:o,value:J}))}if(C){m=C.length;while(m--)if(C[m]in l.map)break;m===-1&&(w=!1)}l.map["data-mce-bogus"]&&(w=!1)}w&&f.start(i,l,t)}else w=!1;if(j=I[i]){j.lastIndex=h=g.index+g[0].length,(g=j.exec(d))?(w&&(n=d.substr(h,g.index-h)),h=g.index+g[0].length):(n=d.substr(h),h=d.length),w&&n.length>0&&f.text(n,!0),w&&f.end(i),G.lastIndex=h;continue}t||(!y||y.indexOf("/")!=y.length-1?k.push({name:i,valid:w}):w&&f.end(i))}else(i=g[1])?f.comment(i):(i=g[2])?f.cdata(i):(i=g[3])?f.doctype(i):(i=g[4])&&f.pi(i,g[5]);h=g.index+g[0].length}h<d.length&&f.text(L(d.substr(h)));for(m=k.length-1;m>=0;m--)i=k[m],i.valid&&f.end(i.name)}}}(tinymce),function(a){function b(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function c(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var d=/^[ \t\r\n]*$/,e={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(c.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c=this,d,e,f;if(typeof a!="string"){for(e in a)c.attr(e,a[e]);return c}if(d=c.attributes){if(b!==f){if(b===null){if(a in d.map){delete d.map[a],e=d.length;while(e--)if(d[e].name===a)return d=d.splice(e,1),c}return c}if(a in d.map){e=d.length;while(e--)if(d[e].name===a){d[e].value=b;break}}else d.push({name:a,value:b});return d.map[a]=b,c}return d.map[a]}},clone:function(){var a=this,b=new c(a.name,a.type),d,e,f,g,h;if(f=a.attributes){h=[],h.map={};for(d=0,e=f.length;d<e;d++)g=f[d],g.name!=="id"&&(h[h.length]={name:g.name,value:g.value},h.map[g.name]=g.value);b.attributes=h}return b.value=a.value,b.shortEnded=a.shortEnded,b},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a=this,b,c;for(b=a.firstChild;b;)c=b.next,a.insert(b,a,!0),b=c;a.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b=this,c;return a.parent&&a.remove(),c=b.lastChild,c?(c.next=a,a.prev=c,b.lastChild=a):b.lastChild=b.firstChild=a,a.parent=b,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var c=this,d,e=[];for(d=c.firstChild;d;d=b(d,c))d.name===a&&e.push(d);return e},empty:function(){var a=this,c,d,e;if(a.firstChild){c=[];for(e=a.firstChild;e;e=b(e,a))c.push(e);d=c.length;while(d--)e=c[d],e.parent=e.firstChild=e.lastChild=e.next=e.prev=null}return a.firstChild=a.lastChild=null,a},isEmpty:function(a){var c=this,e=c.firstChild,f,g;if(e)do{if(e.type===1){if(e.attributes.map["data-mce-bogus"])continue;if(a[e.name])return!1;f=e.attributes.length;while(f--){g=e.attributes[f].name;if(g==="name"||g.indexOf("data-")===0)return!1}}if(e.type===3&&!d.test(e.value))return!1}while(e=b(e,c));return!0},walk:function(a){return b(this,null,a)}}),a.extend(c,{create:function(a,b){var d,f;d=new c(a,e[a]||1);if(b)for(f in b)d.attr(f,b[f]);return d}}),a.html.Node=c}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function e(c){var e,g,h,i,j,k,l,m,n,o,p,q,r,s;q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=d.getNonEmptyElements();for(e=0;e<c.length;e++){g=c[e];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=f.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=f.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)s=m.next,l.append(m),m=s;k=l}j.isEmpty(p)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(p)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){r=g.prev;if(!r||r.name!=="ul"&&r.name!=="ul"){r=g.next;if(!r||r.name!=="ul"&&r.name!=="ul"){g.wrap(f.filterNode(new b("ul",1)));continue}r.insert(g,r.firstChild,!0);continue}r.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(f.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var f=this,g={},h=[],i={},j={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",f.schema=d=d||new a.html.Schema,f.filterNode=function(a){var b,c,d;c in g&&(d=i[c],d?d.push(a):i[c]=[a]),b=h.length;while(b--)c=h[b].name,c in a.attributes.map&&(d=j[c],d?d.push(a):j[c]=[a]);return a},f.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=g[a];b||(g[a]=b=[]),b.push(c)})},f.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<h.length;b++)if(h[b].name===a){h[b].callbacks.push(c);return}h.push({name:a,callbacks:[c]})})},f.parse=function(f,k){function l(){var a=p.firstChild,b,c;while(a)b=a.next,a.type==3||a.type==1&&a.name!=="p"&&!z[a.name]&&!a.attr("data-mce-type")?c?c.append(a):(c=m(H,1),p.insert(c,a),c.append(a)):c=null,a=b}function m(a,c){var d=new b(a,c),e;return a in g&&(e=i[a],e?e.push(d):i[a]=[d]),d}function n(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(C,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var o,p,q,r,s,t,u,v,w,x,y,z,A,B=[],C,D,E,F,G,H;k=k||{},i={},j={},z=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),G=d.getNonEmptyElements(),F=d.children,y=c.validate,H="forced_root_block"in k?k.forced_root_block:c.forced_root_block,E=d.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,C=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,o=new a.html.SaxParser({validate:y,fix_self_closing:!y,cdata:function(a){q.append(m("#cdata",4)).value=a},text:function(a,b){var c;E[q.name]||(a=a.replace(D," "),q.lastChild&&z[q.lastChild.name]&&(a=a.replace(A,""))),a.length!==0&&(c=m("#text",3),c.raw=!!b,q.append(c).value=a)},comment:function(a){q.append(m("#comment",8)).value=a},pi:function(a,b){q.append(m(a,7)).value=b,n(q)},doctype:function(a){var b;b=q.append(m("#doctype",10)),b.value=a,n(q)},start:function(a,b,c){var e,f,g,i,k,l,o,p;g=y?d.getElementRule(a):{};if(g){e=m(g.outputName||a,1),e.attributes=b,e.shortEnded=c,q.append(e),p=F[q.name],p&&F[e.name]&&!p[e.name]&&B.push(e),f=h.length;while(f--)k=h[f].name,k in b.map&&(w=j[k],w?w.push(e):j[k]=[e]);z[a]&&n(e),c||(q=e)}},end:function(a){var c,e,f,g,h;e=y?d.getElementRule(a):{};if(e){if(z[a]){if(!E[q.name]){for(c=q.firstChild;c&&c.type===3;)f=c.value.replace(A,""),f.length>0?(c.value=f,c=c.next):(g=c.next,c.remove(),c=g);for(c=q.lastChild;c&&c.type===3;)f=c.value.replace(C,""),f.length>0?(c.value=f,c=c.prev):(g=c.prev,c.remove(),c=g)}c=q.prev,c&&c.type===3&&(f=c.value.replace(A,""),f.length>0?c.value=f:c.remove())}if(e.removeEmpty||e.paddEmpty)if(q.isEmpty(G))if(e.paddEmpty)q.empty().append(new b("#text","3")).value=" ";else if(!q.attributes.map.name){h=q.parent,q.empty().remove(),q=h;return}q=q.parent}}},d),p=q=new b(k.context||c.root_name,11),o.parse(f),y&&B.length&&(k.context?k.invalid=!0:e(B)),H&&p.name=="body"&&l();if(!k.invalid){for(x in i){w=g[x],r=i[x],u=r.length;while(u--)r[u].parent||r.splice(u,1);for(s=0,t=w.length;s<t;s++)w[s](r,x,k)}for(s=0,t=h.length;s<t;s++){w=h[s];if(w.name in j){r=j[w.name],u=r.length;while(u--)r[u].parent||r.splice(u,1);for(u=0,v=w.callbacks.length;u<v;u++)w.callbacks[u](r,w.name,k)}}}return p},c.remove_trailing_brs&&f.addNodeFilter("br",function(b,c){var e,f=b.length,g,h=d.getBlockElements(),i=d.getNonEmptyElements(),j,k,l;h.body=1;for(e=0;e<f;e++){g=b[e],j=g.parent;if(h[g.parent.name]&&g===j.lastChild){k=g.prev;while(k){l=k.name;if(l!=="span"||k.attr("data-mce-type")!=="bookmark"){if(l!=="br")break;if(l==="br"){g=null;break}}k=k.prev}g&&(g.remove(),j.isEmpty(i)&&(elementRule=d.getElementRule(j.name),elementRule&&(elementRule.removeEmpty?j.remove():elementRule.paddEmpty&&(j.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b=[],c,d,e,f,g;return a=a||{},c=a.indent,d=tinymce.makeMap(a.indent_before||""),e=tinymce.makeMap(a.indent_after||""),f=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),g=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;c&&d[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n")),b.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],b.push(" ",l.name,'="',f(l.value,!0),'"');!i||g?b[b.length]=">":b[b.length]=" />",i&&c&&e[a]&&b.length>0&&(m=b[b.length-1],m.length>0&&m!=="\n"&&b.push("\n"))},end:function(a){var d;b.push("</",a,">"),c&&e[a]&&b.length>0&&(d=b[b.length-1],d.length>0&&d!=="\n"&&b.push("\n"))},text:function(a,c){a.length>0&&(b[b.length]=c?a:f(a))},cdata:function(a){b.push("<![CDATA[",a,"]]>")},comment:function(a){b.push("<!--",a,"-->")},pi:function(a,d){d?b.push("<?",a," ",d,"?>"):b.push("<?",a,"?>"),c&&b.push("\n")},doctype:function(a){b.push("<!DOCTYPE",a,">",c?"\n":"")},reset:function(){b.length=0},getContent:function(){return b.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function d(a){var b=f[a.type],h,i,j,k,l,m,n,o,p;if(!b){h=a.name,i=a.shortEnded,j=a.attributes;if(g&&j&&j.length>1){m=[],m.map={},p=c.getElementRule(a.name);for(n=0,o=p.attributesOrder.length;n<o;n++)k=p.attributesOrder[n],k in j.map&&(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));for(n=0,o=j.length;n<o;n++)k=j[n].name,k in m.map||(l=j.map[k],m.map[k]=l,m.push({name:k,value:l}));j=m}e.start(a.name,j,i);if(!i){if(a=a.firstChild)do d(a);while(a=a.next);e.end(h)}}else b(a)}var f,g;return g=b.validate,f={3:function(a,b){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do d(a);while(a=a.next)}},e.reset(),a.type==1&&!b.inner?d(a):f[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d=this,f,g;d.doc=b,d.win=window,d.files={},d.cssFlicker=!1,d.counter=0,d.stdMode=!a.isIE||b.documentMode>=8,d.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||d.stdMode,d.hasOuterHTML="outerHTML"in b.createElement("a"),d.settings=c=a.extend({keep_values:!1,hex_colors:1},c),d.schema=c.schema,d.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(h){d.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(g in c.schema.getCustomElements())b.createElement(g)}a.addUnload(d.destroy,d)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c=this,d;return a=c.get(a),b=c.getPos(a),d=c.getSize(a),{x:b.x,y:b.y,w:d.w,h:d.h}},getSize:function(a){var b=this,c,d;return a=b.get(a),c=b.getStyle(a,"width"),d=b.getStyle(a,"height"),c.indexOf("px")===-1&&(c=0),d.indexOf("px")===-1&&(d=0),{w:parseInt(c)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f=this,g,h=f.settings,i=[];a=f.get(a),e=e===undefined,h.strict_root&&(d=d||f.getRoot()),c(b,"string")&&(g=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return f.is(a,g)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a))if(e)i.push(a);else return a;a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(b,c){var d=this;return a.dom.Sizzle(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){var d;if(b.length===undefined){if(c==="*")return b.nodeType==1;if(g.test(c)){c=c.toLowerCase().split(/,/),b=b.nodeName.toLowerCase();for(d=c.length-1;d>=0;d--)if(c[d]==b)return!0;return!1}}return a.dom.Sizzle.matches(c,b.nodeType?[b]:b).length>0},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h,i;return h=c(b,"string")?g.doc.createElement(b):b,g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d="",e=this,f;d+="<"+a;for(f in b)b.hasOwnProperty(f)&&(d+=" "+f+'="'+e.encode(b[f])+'"');return typeof c!="undefined"?d+">"+c+"</"+a+">":d+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h,i;h=g.style,c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f;f=e.update_styles,e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g=f.settings;if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}g.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":g.keep_values&&(g.url_converter&&(e=g.url_converter.call(g.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2)})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i=this,j;b=i.get(b);if(!b||b.nodeType!==1)return g===j?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&i.props[f]&&(h=b[i.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[i.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=i.serializeStyle(i.parseStyle(h),b.nodeName),i.settings.keep_values&&!i._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==j&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c=this,d=0,e=0,f,g=c.doc,h;a=c.get(a),b=b||g.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),f=c.boxModel?g.documentElement:g.body,d=a.left+(g.documentElement.scrollLeft||g.body.scrollLeft)-f.clientTop,e=a.top+(g.documentElement.scrollTop||g.body.scrollTop)-f.clientLeft,{x:d,y:e};h=a;while(h&&h!=b&&h.nodeType)d+=h.offsetLeft||0,e+=h.offsetTop||0,h=h.offsetParent;h=a.parentNode;while(h&&h!=b&&h.nodeType)d-=h.scrollLeft||0,e-=h.scrollTop||0,h=h.parentNode}return{x:d,y:e}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d=this,f=d.doc,g;c||(c=""),g=d.select("head")[0],b(c.split(","),function(b){var c;if(d.files[b])return;d.files[b]=!0,c=d.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&f.documentMode&&f.recalc&&(c.onload=function(){f.recalc&&f.recalc(),c.onload=null}),g.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d=this,e;return d.run(b,function(b){var f;return d.hasClass(b,c)?(e||(e=new RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(e," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function d(a,b,c){var d,e;e=c.createElement("body"),e.innerHTML=b,d=e.lastChild;while(d)f.insertAfter(d.cloneNode(!0),a),d=d.previousSibling;f.remove(a)}var f=this;return this.run(a,function(a){a=f.get(a);if(a.nodeType==1){c=c||a.ownerDocument||f.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:d(a,b,c)}catch(g){d(a,b,c)}else d(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c,d;return c=b.parentNode,d=b.nextSibling,d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d=this,e;return a.nodeName!=c.toUpperCase()&&(e=d.create(c),b(d.getAttribs(a),function(b){d.setAttrib(e,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(e,a,1)),e||a},findCommonAncestor:function(a,b){var c=a,d;while(c){d=b;while(d&&c!=d)d=d.parentNode;if(c==d)break;c=c.parentNode}return!c&&a.ownerDocument?a.ownerDocument.documentElement:c},toHex:function(a){function b(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var c=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return c?(a="#"+b(c[1])+b(c[2])+b(c[3]),a):a},getClasses:function(){function c(d){b(d.imports,function(a){c(a)}),b(d.cssRules||d.rules,function(d){switch(d.type||1){case 1:d.selectorText&&b(d.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;i=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(h&&!(b=h(b,i)))return;g[b]||(e.push({"class":b}),g[b]=1)});break;case 3:c(d.styleSheet)}})}var d=this,e=[],f,g={},h=d.settings.class_filter,i;if(d.classes)return d.classes;try{b(d.doc.styleSheets,c)}catch(j){}return e.length>0&&(d.classes=e),e},run:function(a,c,d){var e=this,f;return e.doc&&typeof a=="string"&&(a=e.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(f=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=e.doc.getElementById(a)),f.push(c.call(d,a,b)))}),f):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d=this,e,f,g,h,j,k;b=b.firstChild;if(b){h=new a.dom.TreeWalker(b),c=c||d.schema?d.schema.getNonEmptyElements():null;do{g=b.nodeType;if(g===1){if(b.getAttribute("data-mce-bogus"))continue;j=b.nodeName.toLowerCase();if(c&&c[j]){k=b.parentNode;if(j==="br"&&d.isBlock(k)&&k.firstChild===b&&k.lastChild===b)continue;return!1}f=d.getAttribs(b),e=b.attributes.length;while(e--){j=b.attributes[e].nodeName;if(j==="name"||j==="data-mce-bookmark")return!1}}if(g===3&&!i.test(b.nodeValue))return!1}while(b=h.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c=0,d,e,f;if(a)for(d=a.nodeType,a=a.previousSibling,e=a;a;a=a.previousSibling){f=a.nodeType;if(b&&f==3)if(f==d||!a.nodeValue.length)continue;c++,d=f}return c},split:function(b,c,d){function e(b){var c,d=b.childNodes,g=b.nodeType;if(g==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=d.length-1;c>=0;c--)e(d[c]);if(g!=9){if(g==3&&b.nodeValue.length>0){if(!f.isBlock(b.parentNode)||a.trim(b.nodeValue).length>0)return}else if(g==1){d=b.childNodes,d.length==1&&d[0]&&d[0].nodeType==1&&d[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(d[0],b);if(d.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}f.remove(b)}return b}var f=this,g=f.createRng(),h,i,j;if(b&&c)return g.setStart(b.parentNode,f.nodeIndex(b)),g.setEnd(c.parentNode,f.nodeIndex(c)),h=g.extractContents(),g=f.createRng(),g.setStart(c.parentNode,f.nodeIndex(c)+1),g.setEnd(b.parentNode,f.nodeIndex(b)+1),i=g.extractContents(),j=b.parentNode,j.insertBefore(e(h),b),d?j.replaceChild(d,c):j.insertBefore(c,b),j.insertBefore(e(i),b),f.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function c(a,b){v(K,a,b)}function d(a,b){v(L,a,b)}function e(a){c(a.parentNode,R(a))}function f(a){c(a.parentNode,R(a)+1)}function g(a){d(a.parentNode,R(a))}function h(a){d(a.parentNode,R(a)+1)}function i(a){a?(F[O]=F[N],F[P]=F[M]):(F[N]=F[O],F[M]=F[P]),F.collapsed=K}function j(a){e(a),h(a)}function k(a){c(a,0),d(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function l(a,b){var c=F[N],d=F[M],e=F[O],f=F[P],g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset;if(a===0)return u(c,d,g,h);if(a===1)return u(e,f,g,h);if(a===2)return u(e,f,i,j);if(a===3)return u(c,d,i,j)}function m(){w(J)}function n(){return w(H)}function o(){return w(I)}function p(b){var c=this[N],d=this[M],e,f;c.nodeType!==3&&c.nodeType!==4||!c.nodeValue?(c.childNodes.length>0&&(f=c.childNodes[d]),f?c.insertBefore(b,f):c.appendChild(b)):d?d<c.nodeValue.length?(e=c.splitText(d),c.parentNode.insertBefore(b,e)):a.insertAfter(b,c):c.parentNode.insertBefore(b,c)}function q(a){var b=F.extractContents();F.insertNode(a),a.appendChild(b),F.selectNode(a)}function r(){return Q(new b(a),{startContainer:F[N],startOffset:F[M],endContainer:F[O],endOffset:F[P],collapsed:F.collapsed,commonAncestorContainer:F.commonAncestorContainer})}function s(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function t(){return F[N]==F[O]&&F[M]==F[P]}function u(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c>g?1:-1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function v(b,c,d){var e,f;b?(F[N]=c,F[M]=d):(F[O]=c,F[P]=d),e=F[O];while(e.parentNode)e=e.parentNode;f=F[N];while(f.parentNode)f=f.parentNode;f==e?u(F[N],F[M],F[O],F[P])>0&&F.collapse(b):F.collapse(b),F.collapsed=t(),F.commonAncestorContainer=a.findCommonAncestor(F[N],F[O])}function w(a){var b,c=0,d=0,e,f,g,h,i,j;if(F[N]==F[O])return x(a);for(b=F[O],e=b.parentNode;e;b=e,e=e.parentNode){if(e==F[N])return y(b,a);++c}for(b=F[N],e=b.parentNode;e;b=e,e=e.parentNode){if(e==F[O])return z(b,a);++d}f=d-c,g=F[N];while(f>0)g=g.parentNode,f--;h=F[O];while(f<0)h=h.parentNode,f++;for(i=g.parentNode,j=h.parentNode;i!=j;i=i.parentNode,j=j.parentNode)g=i,h=j;return A(g,h,a)}function x(a){var b,c,d,e,f,g,h;a!=J&&(b=G.createDocumentFragment());if(F[M]==F[P])return b;if(F[N].nodeType==3){c=F[N].nodeValue,d=c.substring(F[M],F[P]),a!=I&&(F[N].deleteData(F[M],F[P]-F[M]),F.collapse(K));if(a==J)return;return b.appendChild(G.createTextNode(d)),b}e=s(F[N],F[M]),f=F[P]-F[M];while(f>0)g=e.nextSibling,h=E(e,a),b&&b.appendChild(h),--f,e=g;return a!=I&&F.collapse(K),b}function y(a,b){var c,d,e,f,g,h;b!=J&&(c=G.createDocumentFragment()),d=B(a,b),c&&c.appendChild(d),e=R(a),f=e-F[M];if(f>0){d=a.previousSibling;while(f>0)g=d.previousSibling,h=E(d,b),c&&c.insertBefore(h,c.firstChild),--f,d=g;return b!=I&&(F.setEndBefore(a),F.collapse(L)),c}return b!=I&&(F.setEndBefore(a),F.collapse(L)),c}function z(a,b){var c,d,e,f,g,h;b!=J&&(c=G.createDocumentFragment()),e=C(a,b),c&&c.appendChild(e),d=R(a),++d,f=F[P]-d,e=a.nextSibling;while(f>0)g=e.nextSibling,h=E(e,b),c&&c.appendChild(h),--f,e=g;return b!=I&&(F.setStartAfter(a),F.collapse(K)),c}function A(a,b,c){var d,e,f,g,h,i,j,k;c!=J&&(e=G.createDocumentFragment()),d=C(a,c),e&&e.appendChild(d),f=a.parentNode,g=R(a),h=R(b),++g,i=h-g,j=a.nextSibling;while(i>0)k=j.nextSibling,d=E(j,c),e&&e.appendChild(d),j=k,--i;return d=B(b,c),e&&e.appendChild(d),c!=I&&(F.setStartAfter(a),F.collapse(K)),e}function B(a,b){var c=s(F[O],F[P]-1),d,e,f,g,h,i=c!=F[O];if(c==a)return D(c,i,L,b);d=c.parentNode,e=D(d,L,L,b);while(d){while(c)f=c.previousSibling,g=D(c,i,L,b),b!=J&&e.insertBefore(g,e.firstChild),i=K,c=f;if(d==a)return e;c=d.previousSibling,d=d.parentNode,h=D(d,L,L,b),b!=J&&h.appendChild(e),e=h}}function C(a,b){var c=s(F[N],F[M]),d=c!=F[N],e,f,g,h,i;if(c==a)return D(c,d,K,b);e=c.parentNode,f=D(e,L,K,b);while(e){while(c)g=c.nextSibling,h=D(c,d,K,b),b!=J&&f.appendChild(h),d=K,c=g;if(e==a)return f;c=e.nextSibling,e=e.parentNode,i=D(e,L,K,b),b!=J&&i.appendChild(f),f=i}}function D(a,b,c,d){var e,f,g,h,i;if(b)return E(a,d);if(a.nodeType==3){e=a.nodeValue,c?(h=F[M],f=e.substring(h),g=e.substring(0,h)):(h=F[P],f=e.substring(0,h),g=e.substring(h)),d!=I&&(a.nodeValue=g);if(d==J)return;return i=a.cloneNode(L),i.nodeValue=f,i}if(d==J)return;return a.cloneNode(L)}function E(a,b){if(b!=J)return b==I?a.cloneNode(K):a;a.parentNode.removeChild(a)}var F=this,G=a.doc,H=0,I=1,J=2,K=!0,L=!1,M="startOffset",N="startContainer",O="endContainer",P="endOffset",Q=tinymce.extend,R=a.nodeIndex;Q(F,{startContainer:G,startOffset:0,endContainer:G,endOffset:0,collapsed:K,commonAncestorContainer:G,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:c,setEnd:d,setStartBefore:e,setStartAfter:f,setEndBefore:g,setEndAfter:h,collapse:i,selectNode:j,selectNodeContents:k,compareBoundaryPoints:l,deleteContents:m,extractContents:n,cloneContents:o,insertNode:p,surroundContents:q,cloneRange:r})}a.Range=b}(tinymce.dom),function(){function a(a){function b(b,c){var d,e=0,f,g,h,i,j,k,l=-1,m;d=b.duplicate(),d.collapse(c),m=d.parentElement();if(m.ownerDocument!==a.dom.doc)return;while(m.contentEditable==="false")m=m.parentNode;if(!m.hasChildNodes())return{node:m,inside:1};h=m.children,f=h.length-1;while(e<=f){k=Math.floor((e+f)/2),i=h[k],d.moveToElementText(i),l=d.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)f=k-1;else if(l<0)e=k+1;else return{node:i}}if(l<0){i?d.collapse(!1):(d.moveToElementText(m),d.collapse(!0),i=m,g=!0),d.setEndPoint(c?"EndToStart":"EndToEnd",b);if(d.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){d=b.duplicate(),d.collapse(c),j=-1;while(m==d.parentElement()){if(d.move("character",-1)==0)break;j++}}j=j||d.text.replace("\r\n"," ").length}else d.collapse(!0),d.setEndPoint(c?"StartToStart":"StartToEnd",b),j=d.text.replace("\r\n"," ").length;return{node:i,position:l,offset:j,inside:g}}function c(){function c(a){var c=b(f,a),d,e,h=0,i,j,k;d=c.node,e=c.offset;if(c.inside&&!d.hasChildNodes()){g[a?"setStart":"setEnd"](d,0);return}if(e===j){g[a?"setStartBefore":"setEndAfter"](d);return}if(c.position<0){i=c.inside?d.firstChild:d.nextSibling;if(!i){g[a?"setStartAfter":"setEndAfter"](d);return}if(!e){i.nodeType==3?g[a?"setStart":"setEnd"](i,0):g[a?"setStartBefore":"setEndBefore"](i);return}while(i){k=i.nodeValue,h+=k.length;if(h<e)i=i.nextSibling;else{d=i,h-=e,h=k.length-h;break}}}else{i=d.previousSibling;if(!i)return g[a?"setStartBefore":"setEndBefore"](d);if(!e){d.nodeType==3?g[a?"setStart":"setEnd"](i,d.nodeValue.length):g[a?"setStartAfter":"setEndAfter"](i);return}while(i){h+=i.nodeValue.length;if(h<e)i=i.previousSibling;else{d=i,h-=e;break}}}g[a?"setStart":"setEnd"](d,h)}var f=a.getRng(),g=e.createRng(),h,i,j,k,l,m;h=f.item?f.item(0):f.parentElement();if(h.ownerDocument!=e.doc)return g;i=a.isCollapsed();if(f.item)return g.setStart(h.parentNode,e.nodeIndex(h)),g.setEnd(g.startContainer,g.startOffset+1),g;try{c(!0),i||c()}catch(n){if(n.number==-2147024809)l=d.getBookmark(2),j=f.duplicate(),j.collapse(!0),h=j.parentElement(),i||(j=f.duplicate(),j.collapse(!1),k=j.parentElement(),k.innerHTML=k.innerHTML),h.innerHTML=h.innerHTML,d.moveToBookmark(l),f=a.getRng(),c(!0),i||c();else throw n}return g}var d=this,e=a.dom,f=!0,g=!1;this.getBookmark=function(c){function d(a){var a,b,c,d,f,g=[];b=a.parentNode,c=e.getRoot().parentNode;while(b!=c&&b.nodeType!==9){d=b.children,f=d.length;while(f--)if(a===d[f]){g.push(f);break}a=b,b=b.parentNode}return g}function f(a){var c;c=b(g,a);if(c)return{position:c.position,offset:c.offset,indexes:d(c.node),inside:c.inside}}var g=a.getRng(),h,i,j={};return c===2&&(g.item?j.start={ctrl:!0,indexes:d(g.item(0))}:(j.start=f(!0),a.isCollapsed()||(j.end=f()))),j},this.moveToBookmark=function(a){function b(a){var b,c,d,f;b=e.getRoot();for(c=a.length-1;c>=0;c--)f=b.children,d=a[c],d<=f.length-1&&(b=f[d]);return b}function c(c){var e=a[c?"start":"end"],g,h,i;e&&(g=e.position>0,h=f.createTextRange(),h.moveToElementText(b(e.indexes)),offset=e.offset,offset!==i?(h.collapse(e.inside||g),h.moveStart("character",g?-offset:offset)):h.collapse(c),d.setEndPoint(c?"StartToStart":"EndToStart",h),c&&d.collapse(!0))}var d,f=e.doc.body;a.start&&(a.start.ctrl?(d=f.createControlRange(),d.addElement(b(a.start.indexes)),d.select()):(d=f.createTextRange(),c(!0),c(),d.select()))},this.addRange=function(b){function c(a){var b,c,g,n,o;g=e.create("a"),b=a?h:j,c=a?i:k,n=d.duplicate();if(b==l||b==l.documentElement)b=m,c=0;b.nodeType==3?(b.parentNode.insertBefore(g,b),n.moveToElementText(g),n.moveStart("character",c),e.remove(g),d.setEndPoint(a?"StartToStart":"EndToEnd",n)):(o=b.childNodes,o.length?(c<o.length?b.insertBefore(g,o[c]):e.insertAfter(g,o[o.length-1]),n.moveToElementText(g)):(g=l.createTextNode("﻿"),b.appendChild(g),n.moveToElementText(g.parentNode),n.collapse(f)),d.setEndPoint(a?"StartToStart":"EndToEnd",n),e.remove(g))}var d,g,h,i,j,k,l=a.dom.doc,m=l.body;h=b.startContainer,i=b.startOffset,j=b.endContainer,k=b.endOffset,d=m.createTextRange();if(h==j&&h.nodeType==1&&i==k-1&&i==k-1)try{g=m.createControlRange(),g.addElement(h.childNodes[i]),g.select();return}catch(n){}c(!0),c(),d.select()},this.getRangeAt=c}tinymce.dom.TridentSelection=a}(),function(){function a(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;g++){var i=d[g];if(i){i=i[a];var j=!1;while(i){if(i.sizcache===c){j=d[i.sizset];break}i.nodeType===1&&!f&&(i.sizcache=c,i.sizset=g);if(i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}function b(a,b,c,d,e,f){for(var g=0,i=d.length;g<i;g++){var j=d[g];if(j){j=j[a];var k=!1;while(j){if(j.sizcache===c){k=d[j.sizset];break}if(j.nodeType===1){f||(j.sizcache=c,j.sizset=g);if(typeof b!="string"){if(j===b){k=!0;break}}else if(h.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[g]=k}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,g=!0;[0,0].sort(function(){return g=!1,0});var h=function(a,b,d,f){d=d||[],b=b||document;var g=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return d;var k=[],l,n,o,q,r=!0,s=h.isXML(b),t=a,u,v,w,x;do{c.exec(""),l=c.exec(t);if(l){t=l[3],k.push(l[1]);if(l[2]){q=l[3];break}}}while(l);if(k.length>1&&j.exec(a))if(k.length===2&&i.relative[k[0]])n=p(k[0]+k[1],b);else{n=i.relative[k[0]]?[b]:h(k.shift(),b);while(k.length)a=k.shift(),i.relative[a]&&(a+=k.shift()),n=p(a,n)}else{!f&&k.length>1&&b.nodeType===9&&!s&&i.match.ID.test(k[0])&&!i.match.ID.test(k[k.length-1])&&(u=h.find(k.shift(),b,s),b=u.expr?h.filter(u.expr,u.set)[0]:u.set[0]);if(b){u=f?{expr:k.pop(),set:m(f)}:h.find(k.pop(),k.length!==1||k[0]!=="~"&&k[0]!=="+"||!b.parentNode?b:b.parentNode,s),n=u.expr?h.filter(u.expr,u.set):u.set,k.length>0?o=m(n):r=!1;while(k.length)v=k.pop(),w=v,i.relative[v]?w=k.pop():v="",w==null&&(w=b),i.relative[v](o,w,s)}else o=k=[]}o||(o=n),o||h.error(v||a);if(e.call(o)==="[object Array]")if(!r)d.push.apply(d,o);else if(b&&b.nodeType===1)for(x=0;o[x]!=null;x++)o[x]&&(o[x]===!0||o[x].nodeType===1&&h.contains(b,o[x]))&&d.push(n[x]);else for(x=0;o[x]!=null;x++)o[x]&&o[x].nodeType===1&&d.push(n[x]);else m(o,d);return q&&(h(q,g,d,f),h.uniqueSort(d)),d};h.uniqueSort=function(a){if(o){f=g,a.sort(o);if(f)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},h.matches=function(a,b){return h(a,null,null,b)},h.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=i.order.length;e<f;e++){var g=i.order[e],h;if(h=i.leftMatch[g].exec(a)){var j=h[1];h.splice(1,1);if(j.substr(j.length-1)!=="\\"){h[1]=(h[1]||"").replace(/\\/g,""),d=i.find[g](h,b,c);if(d!=null){a=a.replace(i.match[g],"");break}}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},h.filter=function(a,b,c,d){var e=a,f=[],g=b,j,k,l=b&&b[0]&&h.isXML(b[0]);while(a&&b.length){for(var m in i.filter)if((j=i.leftMatch[m].exec(a))!=null&&j[2]){var n=i.filter[m],o,p,q=j[1];k=!1,j.splice(1,1);if(q.substr(q.length-1)==="\\")continue;g===f&&(f=[]);if(i.preFilter[m]){j=i.preFilter[m](j,g,c,f,d,l);if(!j)k=o=!0;else if(j===!0)continue}if(j)for(var r=0;(p=g[r])!=null;r++)if(p){o=n(p,j,r,g);var s=d^!!o;c&&o!=null?s?k=!0:g[r]=!1:s&&(f.push(p),k=!0)}if(o!==undefined){c||(g=f),a=a.replace(i.match[m],"");if(!k)return[];break}}if(a===e)if(k==null)h.error(a);else break;e=a}return g},h.error=function(a){throw"Syntax error, unrecognized expression: "+a};var i=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,i;f<g;f++)if(i=a[f]){while((i=i.previousSibling)&&i.nodeType!==1);a[f]=e||i&&i.nodeName.toLowerCase()===b?i||!1:i===b}e&&h.filter(b,a,!0)},">":function(a,b){var c=typeof b=="string",d,e=0,f=a.length;if(c&&!/\W/.test(b)){b=b.toLowerCase();for(;e<f;e++){d=a[e];if(d){var g=d.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)d=a[e],d&&(a[e]=c?d.parentNode:d.parentNode===b);c&&h.filter(b,a,!0)}},"":function(c,e,f){var g=d++,h=b,i;typeof e=="string"&&!/\W/.test(e)&&(e=e.toLowerCase(),i=e,h=a),h("parentNode",e,g,c,i,f)},"~":function(c,e,f){var g=d++,h=b,i;typeof e=="string"&&!/\W/.test(e)&&(e=e.toLowerCase(),i=e,h=a),h("previousSibling",e,g,c,i,f)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(/\\/g,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a,b){return a[1].toLowerCase()},CHILD:function(a){if(a[1]==="nth"){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1].replace(/\\/g,"");return!f&&i.attrMap[g]&&(a[1]=i.attrMap[g]),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,d,e,f){if(a[1]==="not")if((c.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=h(a[3],null,null,b);else{var g=h.filter(a[3],b,d,!0^f);return d||e.push.apply(e,g),!1}else if(i.match.POS.test(a[0])||i.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!h(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||a.nodeName.toLowerCase()==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=i.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||h.getText([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var j=0,k=g.length;j<k;j++)if(g[j]===a)return!1;return!0}h.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":while(d=d.previousSibling)if(d.nodeType===1)return!1;if(c==="first")return!0;d=a;case"last":while(d=d.nextSibling)if(d.nodeType===1)return!1;return!0;case"nth":var e=b[2],f=b[3];if(e===1&&f===0)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)d.nodeType===1&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return e===0?j===0:j%e===0&&j/e>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=i.attrHandle[c]?i.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=i.setFilters[e];if(f)return f(a,c,b,d)}}},j=i.match.POS,k=function(a,b){return"\\"+(b-0+1)};for(var l in i.match)i.match[l]=new RegExp(i.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),i.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[l].source.replace(/\\(\d+)/g,k));var m=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(n){m=function(a,b){var c=b||[],d=0;if(e.call(a)==="[object Array]")Array.prototype.push.apply(c,a);else if(typeof a.length=="number")for(var f=a.length;d<f;d++)c.push(a[d]);else for(;a[d];d++)c.push(a[d]);return c}}var o;document.documentElement.compareDocumentPosition?o=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(f=!0),a.compareDocumentPosition?-1:1;var c=a.compareDocumentPosition(b)&4?-1:a===b?0:1;return c===0&&(f=!0),c}:"sourceIndex"in document.documentElement?o=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(f=!0),a.sourceIndex?-1:1;var c=a.sourceIndex-b.sourceIndex;return c===0&&(f=!0),c}:document.createRange&&(o=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(f=!0),a.ownerDocument?-1:1;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0);var e=c.compareBoundaryPoints(Range.START_TO_END,d);return e===0&&(f=!0),e}),h.getText=function(a){var b="",c;for(var d=0;a[d];d++)c=a[d],c.nodeType===3||c.nodeType===4?b+=c.nodeValue:c.nodeType!==8&&(b+=h.getText(c.childNodes));return b},function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var c=document.documentElement;c.insertBefore(a,c.firstChild),document.getElementById(b)&&(i.find.ID=function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||typeof d.getAttributeNode!="undefined"&&d.getAttributeNode("id").nodeValue===a[1]?[d]:undefined:[]}},i.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(i.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(i.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&function(){var a=h,b=document.createElement("div");b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;h=function(b,c,d,e){c=c||document;if(!e&&c.nodeType===9&&!h.isXML(c))try{return m(c.querySelectorAll(b),d)}catch(f){}return a(b,c,d,e)};for(var c in a)h[c]=a[c];b=null}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;i.order.splice(1,0,"CLASS"),i.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),h.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},h.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var p=function(a,b){var c=[],d="",e,f=b.nodeType?[b]:b;while(e=i.match.PSEUDO.exec(a))d+=e[0],a=a.replace(i.match.PSEUDO,"");a=i.relative[a]?a+"*":a;for(var g=0,j=f.length;g<j;g++)h(a,f[g],c);return h.filter(d,c)};window.tinymce.dom.Sizzle=h}(),function(a){var b=a.each,c=a.DOM,d=a.isIE,e=a.isWebKit,f;a.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(e,f,g,h){var i,j=this,k=j.events,l;if(f instanceof Array)return l=[],b(f,function(a){l.push(j.add(e,a,g,h))}),l;if(e&&e.hasOwnProperty&&e instanceof Array)return l=[],b(e,function(a){a=c.get(a),l.push(j.add(a,f,g,h))}),l;e=c.get(e);if(!e)return;return i=function(b){if(j.disabled)return;return b=b||window.event,b&&d&&(b.target||(b.target=b.srcElement),a.extend(b,j._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(j.domLoaded?i():j.inits.push(i),i):(k.push({obj:e,name:f,func:g,cfunc:i,scope:h}),j._add(e,f,i),g)},remove:function(a,d,e){var f=this,g=f.events,h=!1,i;return a&&a.hasOwnProperty&&a instanceof Array?(i=[],b(a,function(a){a=c.get(a),i.push(f.remove(a,d,e))}),i):(a=c.get(a),b(g,function(b,c){if(b.obj==a&&b.name==d&&(!e||b.func==e||b.cfunc==e))return g.splice(c,1),f._remove(a,d,b.cfunc),h=!0,!1}),h)},clear:function(a){var b=this,d=b.events,e,f;if(a){a=c.get(a);for(e=d.length-1;e>=0;e--)f=d[e],f.obj===a&&(b._remove(f.obj,f.name,f.cfunc),f.obj=f.cfunc=null,d.splice(e,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;b(a.events,function(b,c){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(a){var c=this;if(c.domLoaded)return;c.domLoaded=!0,b(c.inits,function(a){a()}),c.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}if(c.readyState==="complete"){b._pageInit(a);return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),f=a.dom.Event=new a.dom.EventUtils,f._wait(window),a.addUnload(function(){f.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d=this,e,f;d.settings=c=c||{},d.id=b,d.dom=e=c.dom||a.DOM,a.isIE||(f=e.get(d.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){d[a]=function(){var c=[b],f;for(f=0;f<arguments.length;f++)c.push(arguments[f]);return c=e[a].apply(e,c),d.update(a),c}}),a.extend(d,{on:function(b,c,e){return a.dom.Event.add(d.id,b,c,e)},getXY:function(){return{x:parseInt(d.getStyle("left")),y:parseInt(d.getStyle("top"))}},getSize:function(){var a=e.get(d.id);return{w:parseInt(d.getStyle("width")||a.clientWidth),h:parseInt(d.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){d.setStyles({left:a,top:b})},moveBy:function(a,b){var c=d.getXY();d.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){d.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=d.getSize();d.resizeTo(c.w+a,c.h+b)},update:function(b){var f;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){e.remove(d.blocker);return}d.blocker?f=e.get(d.blocker):(d.blocker=e.uniqueId(),f=e.add(c.container||e.getRoot(),"iframe",{id:d.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),e.setStyle(f,"opacity",0)),e.setStyles(f,{left:d.getStyle("left",1),top:d.getStyle("top",1),width:d.getStyle("width",1),height:d.getStyle("height",1),display:d.getStyle("display",1),zIndex:parseInt(d.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){function b(a){return a.replace(/[\n\r]+/g,"")}var c=a.is,d=a.isIE,e=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,d){var f=this;f.dom=b,f.win=c,f.serializer=d,e(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var b=this,d=b.getRng(),e=b.dom.create("body"),f=b.getSel(),g,h,i;return a=a||{},g=h="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",b.onBeforeGetContent.dispatch(b,a),a.format=="text"?b.isCollapsed()?"":d.text||(f.toString?f.toString():""):(d.cloneContents?(i=d.cloneContents(),i&&e.appendChild(i)):c(d.item)||c(d.htmlText)?(e.innerHTML="<br>"+(d.item?d.item(0).outerHTML:d.htmlText),e.removeChild(e.firstChild)):e.innerHTML=d.toString(),/^\s/.test(e.innerHTML)&&(g=" "),/\s+$/.test(e.innerHTML)&&(h=" "),a.getInner=!0,a.content=b.isCollapsed()?"":g+b.serializer.serialize(e,a)+h,b.onGetContent.dispatch(b,a),a.content)},setContent:function(a,b){var c=this,d=c.getRng(),e,f=c.win.document,g,h;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||c.onBeforeSetContent.dispatch(c,b),a=b.content;if(d.insertNode){a+='<span id="__caret">_</span>',d.startContainer==f&&d.endContainer==f?f.body.innerHTML=a:(d.deleteContents(),f.body.childNodes.length==0?f.body.innerHTML=a:d.createContextualFragment?d.insertNode(d.createContextualFragment(a)):(g=f.createDocumentFragment(),h=f.createElement("div"),g.appendChild(h),h.outerHTML=a,d.insertNode(g))),e=c.dom.get("__caret"),d=f.createRange(),d.setStartBefore(e),d.setEndBefore(e),c.setRng(d),c.dom.remove("__caret");try{c.setRng(d)}catch(i){}}else d.item&&(f.execCommand("Delete",!1,null),d=c.getRng()),/^\s+/.test(a)?(d.pasteHTML('<span id="__mce_tmp">_</span>'+a),c.dom.remove("__mce_tmp")):d.pasteHTML(a);b.no_events||c.onSetContent.dispatch(c,b)},getStart:function(){var a=this.getRng(),b,c,d,e;if(a.duplicate||a.item){if(a.item)return a.item(0);d=a.duplicate(),d.collapse(1),b=d.parentElement(),c=e=a.parentElement();while(e=e.parentNode)if(e==b){b=c;break}return b}return b=a.startContainer,b.nodeType==1&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,a.startOffset)]),b&&b.nodeType==3?b.parentNode:b},getEnd:function(){var a=this,b=a.getRng(),c,d;return b.duplicate||b.item?b.item?b.item(0):(b=b.duplicate(),b.collapse(0),c=b.parentElement(),c&&c.nodeName=="BODY"?c.lastChild||c:c):(c=b.endContainer,d=b.endOffset,c.nodeType==1&&c.hasChildNodes()&&(c=c.childNodes[d>0?d-1:d]),c&&c.nodeType==3?c.parentNode:c)},getBookmark:function(a,b){function c(a,b){var c=0;return e(f.select(a),function(a,d){a==b&&(c=d)}),c}var d=this,f=d.dom,g,h,i,j,k,l,m,n="﻿",o;if(a==2){function p(){function a(a,c){var f=a[c?"startContainer":"endContainer"],g=a[c?"startOffset":"endOffset"],h=[],i,j,k=0;if(f.nodeType==3){if(b)for(i=f.previousSibling;i&&i.nodeType==3;i=i.previousSibling)g+=i.nodeValue.length;h.push(g)}else j=f.childNodes,g>=j.length&&j.length&&(k=1,g=Math.max(0,j.length-1)),h.push(d.dom.nodeIndex(j[g],b)+k);for(;f&&f!=e;f=f.parentNode)h.push(d.dom.nodeIndex(f,b));return h}var c=d.getRng(!0),e=f.getRoot(),g={};return g.start=a(c,!0),d.isCollapsed()||(g.end=a(c)),g}return d.tridentSel?d.tridentSel.getBookmark(a):p()}if(a)return{rng:d.getRng()};g=d.getRng(),i=f.uniqueId(),j=tinyMCE.activeEditor.selection.isCollapsed(),o="overflow:hidden;line-height:0px";if(g.duplicate||g.item){if(!!g.item)return l=g.item(0),k=l.nodeName,{name:k,index:c(k,l)};h=g.duplicate();try{g.collapse(),g.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_start" style="'+o+'">'+n+"</span>"),j||(h.collapse(!1),g.moveToElementText(h.parentElement()),g.compareEndPoints("StartToEnd",h)==0&&h.move("character",-1),h.pasteHTML('<span data-mce-type="bookmark" id="'+i+'_end" style="'+o+'">'+n+"</span>"))}catch(q){return null}}else{l=d.getNode(),k=l.nodeName;if(k=="IMG")return{name:k,index:c(k,l)};h=g.cloneRange(),j||(h.collapse(!1),h.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_end",style:o},n))),g.collapse(!0),g.insertNode(f.create("span",{"data-mce-type":"bookmark",id:i+"_start",style:o},n))}return d.moveToBookmark({id:i,keep:1}),{id:i}},moveToBookmark:function(b){var c=this,f=c.dom,g,h,i,j,k,l,m,n;if(b)if(b.start){i=f.createRng(),j=f.getRoot();function o(a){var c=b[a?"start":"end"],d,e,f,g;if(c){f=c[0];for(e=j,d=c.length-1;d>=1;d--){g=e.childNodes;if(c[d]>g.length-1)return;e=g[c[d]]}e.nodeType===3&&(f=Math.min(c[0],e.nodeValue.length)),e.nodeType===1&&(f=Math.min(c[0],e.childNodes.length)),a?i.setStart(e,f):i.setEnd(e,f)}return!0}if(c.tridentSel)return c.tridentSel.moveToBookmark(b);o(!0)&&o()&&c.setRng(i)}else if(b.id){function p(c){var d=f.get(b.id+"_"+c),g,h,i,j,o=b.keep;if(d){g=d.parentNode,c=="start"?(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),k=l=g,m=n=h):(o?(g=d.firstChild,h=1):h=f.nodeIndex(d),l=g,n=h);if(!o){j=d.previousSibling,i=d.nextSibling,e(a.grep(d.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(d=f.get(b.id+"_"+c))f.remove(d,1);j&&i&&j.nodeType==i.nodeType&&j.nodeType==3&&!a.isOpera&&(h=j.nodeValue.length,j.appendData(i.nodeValue),f.remove(i),c=="start"?(k=l=j,m=n=h):(l=j,n=h))}}}function q(a){return f.isBlock(a)&&!a.innerHTML&&(a.innerHTML=d?" ":'<br data-mce-bogus="1" />'),a}p("start"),p("end"),k&&(i=f.createRng(),i.setStart(q(k),m),i.setEnd(q(l),n),c.setRng(i))}else b.name?c.select(f.select(b.name)[b.index]):b.rng&&c.setRng(b.rng)},select:function(b,c){var d=this,e=d.dom,f=e.createRng(),g;if(b){g=e.nodeIndex(b),f.setStart(b.parentNode,g),f.setEnd(b.parentNode,g+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?f.setStart(b,0):f.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?f.setStartBefore(b):f.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}d.setRng(f)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b=this,c=b.getRng(),d;c.item&&(d=c.item(0),c=b.win.document.body.createTextRange(),c.moveToElementText(d)),c.collapse(!!a),b.setRng(c)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c=this,d,e,f,g=c.win.document;if(b&&c.tridentSel)return c.tridentSel.getRangeAt(0);try{if(d=c.getSel())e=d.rangeCount>0?d.getRangeAt(0):d.createRange?d.createRange():g.createRange()}catch(h){}return a.isIE&&e&&e.setStart&&g.selection.createRange().item&&(f=g.selection.createRange().item(0),e=g.createRange(),e.setStartBefore(f),e.setEndAfter(f)),e||(e=g.createRange?g.createRange():g.body.createTextRange()),c.selectedRange&&c.explicitRange&&(e.compareBoundaryPoints(e.START_TO_START,c.selectedRange)===0&&e.compareBoundaryPoints(e.END_TO_END,c.selectedRange)===0?e=c.explicitRange:(c.selectedRange=null,c.explicitRange=null)),e},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.getRangeAt(0)}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a=this,b=a.getRng(),c=a.getSel(),d,e=b.startContainer,f=b.endContainer;if(!b)return a.dom.getRoot();if(b.setStart){d=b.commonAncestorContainer;if(!b.collapsed){b.startContainer==b.endContainer&&b.endOffset-b.startOffset<2&&b.startContainer.hasChildNodes()&&(d=b.startContainer.childNodes[b.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===b.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,b.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return d&&d.nodeType==3?d.parentNode:d}return b.item?b.item(0):b.parentElement()},getSelectedBlocks:function(b,c){var d=this,e=d.dom,f,g,h,i=[];f=e.getParent(b||d.getStart(),e.isBlock),g=e.getParent(c||d.getEnd(),e.isBlock),f&&i.push(f);if(f&&g&&f!=g){h=f;var j=new a.dom.TreeWalker(f,e.getRoot());while((h=j.next())&&h!=g)e.isBlock(h)&&i.push(h)}return g&&f!=g&&i.push(g),i},normalize:function(){function b(b){var f,g,h,i=c.dom,j=i.getRoot(),k;f=d[(b?"start":"end")+"Container"],g=d[(b?"start":"end")+"Offset"],f.nodeType===9&&(f=f.body,g=0);if(f===j&&f.hasChildNodes()){f=f.childNodes[Math.min(!b&&g>0?g-1:g,f.childNodes.length-1)],g=0;if(f.hasChildNodes()){k=f,h=new a.dom.TreeWalker(f,j);do{if(k.nodeType===3){g=b?0:k.nodeValue.length-1,f=k;break}if(k.nodeName==="BR"){g=i.nodeIndex(k),f=k.parentNode;break}}while(k=b?h.next():h.prev());e=!0}}e&&d["set"+(b?"Start":"End")](f,g)}var c=this,d,e;if(a.isIE)return;d=c.getRng(),b(!0),d.collapsed&&b(),e&&c.setRng(d)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function a(a,b){var c=f.createTextRange();try{c.moveToPoint(a,b)}catch(d){c=null}return c}function b(b){var d;b.button?(d=a(b.x,b.y),d&&(d.compareEndPoints("StartToStart",h)>0?d.setEndPoint("StartToStart",h):d.setEndPoint("EndToEnd",h),d.select())):c()}function c(){var a=e.selection.createRange();h&&!a.item&&a.compareEndPoints("StartToEnd",a)===0&&h.select(),d.unbind(e,"mouseup",c),d.unbind(e,"mousemove",b),h=g=0}var d=this.dom,e=d.doc,f=e.body,g,h,i;e.documentElement.unselectable=!0,d.bind(e,["mousedown","contextmenu"],function(f){if(f.target.nodeName==="HTML"){g&&c(),i=e.documentElement;if(i.scrollHeight>i.clientHeight)return;g=1,h=a(f.x,f.y),h&&(d.bind(e,"mouseup",c),d.bind(e,"mousemove",b),d.win.focus(),h.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g=a.isIE,h=a.each,i;return b.apply_source_formatting||(b.indent=!1),b.remove_trailing_brs=!0,c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),i=new a.html.DomParser(b,d),i.addAttributeFilter("src,href,style",function(a,d){var e=a.length,f,g,h="data-mce-"+d,i=b.url_converter,j=b.url_converter_scope,k;while(e--)f=a[e],g=f.attributes.map[h],g!==k?(f.attr(d,g.length>0?g:null),f.attr(h,null)):(g=f.attributes.map[d],d==="style"?g=c.serializeStyle(c.parseStyle(g),f.name):i&&(g=i.call(j,g,d,f.name)),f.attr(d,g.length>0?g:null))}),i.addAttributeFilter("class",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),d.attr("class",e.length>0?e:null)}),i.addAttributeFilter("data-mce-type",function(a,b,c){var d=a.length,e;while(d--)e=a[d],e.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&e.remove()}),i.addNodeFilter("script,style",function(a,b){function c(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"").replace(/\s*(\/\/\s*\]\]>|\/\/\s*-->|\]\]>|-->|\]\]-->)\s*$/g,"")}var d=a.length,e,f;while(d--)e=a[d],f=e.firstChild?e.firstChild.value:"",b==="script"?(e.attr("type",(e.attr("type")||"text/javascript").replace(/^mce\-/,"")),f.length>0&&(e.firstChild.value="// <![CDATA[\n"+c(f)+"\n// ]]>")):f.length>0&&(e.firstChild.value="<!--\n"+c(f)+"\n-->")}),i.addNodeFilter("#comment",function(a,b){var c=a.length,d;while(c--)d=a[c],d.value.indexOf("[CDATA[")===0?(d.name="#cdata",d.type=4,d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")):d.value.indexOf("mce:protected ")===0&&(d.name="#text",d.type=3,d.raw=!0,d.value=unescape(d.value).substr(14))}),i.addNodeFilter("xml:namespace,input",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type===7?d.remove():d.type===1&&b==="input"&&!("type"in d.attributes.map)&&d.attr("type","text")}),b.fix_list_elements&&i.addNodeFilter("ul,ol",function(a,b){var c=a.length,d,e;while(c--)d=a[c],e=d.parent,(e.name==="ul"||e.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}),i.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return g&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),h(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(i.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(b){function c(b,c){function d(){g.remove(k),h&&(h.onreadystatechange=h.onload=h=null),c()}function e(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var f=this,g=a.DOM,h,i,j,k;k=g.uniqueId();if(a.isIE6){i=new a.util.URI(b),j=location;if(i.host==j.hostname&&i.port==j.port&&i.protocol+":"==j.protocol&&i.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(i.getURI()),success:function(a){var b=g.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),g.remove(b),d()},error:e});return}}h=g.create("script",{id:k,type:"text/javascript",src:a._addVer(b)}),a.isIE||(h.onload=d),h.onerror=e,a.isOpera||(h.onreadystatechange=function(){var a=h.readyState;(a=="complete"||a=="loaded")&&d()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(h)}var d=0,e=1,f=2,g={},h=[],i={},j=[],k=0,l;this.isDone=function(a){return g[a]==f},this.markDone=function(a){g[a]=f},this.add=this.load=function(a,b,c){var e,f=g[a];f==l&&(h.push(a),g[a]=d),b&&(i[a]||(i[a]=[]),i[a].push({func:b,scope:c||this}))},this.loadQueue=function(a,b){this.loadScripts(h,a,b)},this.loadScripts=function(b,d,h){function m(b){a.each(i[b],function(a){a.func.call(a.scope)}),i[b]=l}var n;j.push({func:d,scope:h||this}),n=function(){var d=a.grep(b);b.length=0,a.each(d,function(a){if(g[a]==f){m(a);return}g[a]!=e&&(g[a]=e,k++,c(a,function(){g[a]=f,k--,m(a),n()}))}),k||(a.each(j,function(a){a.func.call(a.scope)}),j.length=0)},n()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function c(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var d=a;this.current=function(){return d},this.next=function(a){return d=c(d,"firstChild","nextSibling",a)},this.prev=function(a){return d=c(d,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function e(a){var b;return b=a[0],b.nodeType===3&&b===i&&j>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],l===0&&a.length>0&&b===k&&b.nodeType===3&&a.splice(a.length-1,1),a}function f(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function g(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function h(a,b,c){var g=c?"nextSibling":"previousSibling";for(p=a,q=p.parentNode;p&&p!=b;p=q)q=p.parentNode,r=f(p==a?p:p[g],g),r.length&&(c||r.reverse(),d(e(r)))}var i=c.startContainer,j=c.startOffset,k=c.endContainer,l=c.endOffset,m,n,o,p,q,r,s;s=b.select("td.mceSelected,th.mceSelected");if(s.length>0){a.each(s,function(a){d([a])});return}i.nodeType==1&&i.hasChildNodes()&&(i=i.childNodes[j]),k.nodeType==1&&k.hasChildNodes()&&(k=k.childNodes[Math.min(l-1,k.childNodes.length-1)]);if(i==k)return d(e([i]));m=b.findCommonAncestor(i,k);for(p=i;p;p=p.parentNode){if(p===k)return h(i,m,!0);if(p===m)break}for(p=k;p;p=p.parentNode){if(p===i)return h(k,m);if(p===m)break}n=g(i,m)||i,o=g(k,m)||k,h(i,n,!0),r=f(n==i?n:n.nextSibling,"nextSibling",o==k?o.nextSibling:o),r.length&&d(e(r)),h(k,o)},this.split=function(a){function b(a,b){return a.splitText(b)}var c=a.startContainer,d=a.startOffset,e=a.endContainer,f=a.endOffset;return c==e&&c.nodeType==3?d>0&&d<c.nodeValue.length&&(e=b(c,d),c=e.previousSibling,f>d?(f-=d,c=e=b(e,f).previousSibling,f=e.nodeValue.length,d=0):f=0):(c.nodeType==3&&d>0&&d<c.nodeValue.length&&(c=b(c,d),d=0),e.nodeType==3&&f>0&&f<e.nodeValue.length&&(e=b(e,f).previousSibling,f=e.nodeValue.length)),{startContainer:c,startOffset:d,endContainer:e,endOffset:f}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f=this,g=d.root,h=d.items,i=d.enableUpDown,j=d.enableLeftRight||!d.enableUpDown,k=d.excludeFromTabOrder,l,m,n,o,p;e=e||a.DOM,l=function(a){p=a.target.id},m=function(a){e.setAttrib(a.target.id,"tabindex","-1")},o=function(a){var b=e.get(p);e.setAttrib(b,"tabindex","0"),b.focus()},f.focus=function(){e.get(p).focus()},f.destroy=function(){c(h,function(a){e.unbind(e.get(a.id),"focus",l),e.unbind(e.get(a.id),"blur",m)}),e.unbind(e.get(g),"focus",o),e.unbind(e.get(g),"keydown",n),h=e=g=f.focus=l=m=n=o=null,f.destroy=function(){}},f.moveFocus=function(a,g){var i=-1,j=f.controls,k;if(!p)return;c(h,function(a,b){if(a.id===p)return i=b,!1}),i+=a,i<0?i=h.length-1:i>=h.length&&(i=0),k=h[i],e.setAttrib(p,"tabindex","-1"),e.setAttrib(k.id,"tabindex","0"),e.get(k.id).focus(),d.actOnFocus&&d.onAction(k.id),g&&b.cancel(g)},n=function(a){var c=37,e=39,g=38,h=40,k=27,l=14,m=13,n=32;switch(a.keyCode){case c:j&&f.moveFocus(-1);break;case e:j&&f.moveFocus(1);break;case g:i&&f.moveFocus(-1);break;case h:i&&f.moveFocus(1);break;case k:d.onCancel&&(d.onCancel(),b.cancel(a));break;case l:case m:case n:d.onAction&&(d.onAction(p),b.cancel(a))}},c(h,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),k?(e.bind(a.id,"blur",m),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",l)}),h[0]&&(p=h[0].id),e.setAttrib(g,"tabindex","-1"),e.bind(e.get(g),"focus",o),e.bind(e.get(g),"keydown",n)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a=this,b;c(a.disabled)&&(b=a.disabled,a.disabled=-1,a.setDisabled(b)),c(a.active)&&(b=a.active,a.active=-1,a.setActive(b))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d=this,e=d.settings,f;return b.container=b.container||e.container,b.parent=d,b.constrain=b.constrain||e.constrain,b["class"]=b["class"]||e["class"],b.vp_offset_x=b.vp_offset_x||e.vp_offset_x,b.vp_offset_y=b.vp_offset_y||e.vp_offset_y,b.keyboard_focus=e.keyboard_focus,f=new a.ui.DropMenu(b.id||c.uniqueId(),b),f.onAddItem.add(d.onAddItem.dispatch,d.onAddItem),f},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f,g;f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight,c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i=this,j=i.settings,k,l=c.getViewPort(),m,n,o,p,q=2,r,s,t=i.classPrefix;i.collapse(1);if(i.isMenuVisible)return;i.rendered?k=c.get("menu_"+i.id):(k=c.add(i.settings.container,i.renderNode()),d(i.items,function(a){a.postRender()}),i.element=new f("menu_"+i.id,{blocker:1,container:j.container})),a.isOpera||c.setStyles(k,{left:-65535,top:-65535}),c.show(k),i.update(),b+=j.offset_x||0,g+=j.offset_y||0,l.w-=4,l.h-=4,j.constrain&&(m=k.clientWidth-q,n=k.clientHeight-q,o=l.x+l.w,p=l.y+l.h,b+j.vp_offset_x+m>o&&(b=h?h-m:Math.max(0,o-j.vp_offset_x-m)),g+j.vp_offset_y+n>p&&(g=Math.max(0,p-j.vp_offset_y-n))),c.setStyles(k,{left:b,top:g}),i.element.update(),i.isMenuVisible=1,i.mouseClickFunc=e.add(k,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,t+"ItemSub")){b=i.items[a.id];if(b.isDisabled())return;r=i;while(r)r.hideMenu&&r.hideMenu(),r=r.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),i.hasMenus()&&(i.mouseOverFunc=e.add(k,"mouseover",function(a){var b,d,e;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=i.items[a.id],i.lastMenu&&i.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,t+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-q,d.y-q,d.x),i.lastMenu=b,c.addClass(c.get(b.id).firstChild,t+"ItemActive"))}})),e.add(k,"keydown",i._keyHandler,i),i.onShowMenu.dispatch(i),j.keyboard_focus&&i._setupKeyboardNav()},hideMenu:function(a){var b=this,d=c.get("menu_"+b.id),f;if(!b.isMenuVisible)return;b.keyboardNav&&b.keyboardNav.destroy(),e.remove(d,"mouseover",b.mouseOverFunc),e.remove(d,"click",b.mouseClickFunc),e.remove(d,"keydown",b._keyHandler),c.hide(d),b.isMenuVisible=0,a||b.collapse(1),b.element&&b.element.hide(),(f=c.get(b.id))&&c.removeClass(f.firstChild,b.classPrefix+"ItemActive"),b.onHideMenu.dispatch(b)},add:function(a){var b=this,d;return a=b.parent(a),b.isRendered&&(d=c.get("menu_"+b.id))&&b._add(c.select("tbody",d)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a=this,b=a.settings,e,g,h,i;return i=c.create("div",{role:"listbox",id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),a.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+a.settings.parent.id),h=c.add(i,"div",{role:"presentation",id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")}),a.element=new f("menu_"+a.id,{blocker:1,container:b.container}),b.menu_line&&c.add(h,"span",{"class":a.classPrefix+"Line"}),e=c.add(h,"table",{role:"presentation",id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),g=c.add(e,"tbody"),d(a.items,function(b){a._add(g,b)}),a.rendered=!0,i},_setupKeyboardNav:function(){var b,d,e=this;b=c.select("#menu_"+e.id)[0],d=c.select("a[role=option]","menu_"+e.id),d.splice(0,0,b),e.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+e.id,items:d,onCancel:function(){e.hideMenu()},enableUpDown:!0}),b.focus()},_keyHandler:function(a){var b=this,c;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e=b.settings,f,g,h,i=this.classPrefix,j;if(e.separator){g=c.add(a,"tr",{id:b.id,"class":i+"ItemSeparator"}),c.add(g,"td",{"class":i+"ItemSeparator"}),(d=g.previousSibling)&&c.addClass(d,"mceLast");return}d=g=c.add(a,"tr",{id:b.id,"class":i+"Item "+i+"ItemEnabled"}),d=h=c.add(d,e.titleItem?"th":"td"),d=f=c.add(d,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(c.setAttrib(f,"aria-haspopup","true"),c.setAttrib(f,"aria-owns","menu_"+b.id)),c.addClass(h,e["class"]),j=c.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&c.add(j,"img",{src:e.icon_src}),d=c.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(g,"mceFirst"),(d=g.previousSibling)&&c.hasClass(d,i+"ItemSeparator")&&c.addClass(g,"mceFirst"),b.collapse&&c.addClass(g,i+"ItemSub"),(d=g.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(g,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d,e;return e=b.encode(c.label||""),d='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(e?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+b.encode(c.title)+'">',c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?d+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+e:d+='<span class="mceIcon '+c["class"]+'"></span>'+(e?'<span class="'+a+'Label">'+e+"</span>":""),d+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",d+="</a>",d},postRender:function(){var b=this,c=b.settings;a.dom.Event.add(b.id,"click",function(a){if(!b.isDisabled())return c.onclick.call(c.scope,a)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){var c=this,d,e,f;a!=c.selectedIndex&&(d=b.get(c.id+"_text"),f=b.get(c.id+"_voiceDesc"),e=c.items[a],e?(c.selectedValue=e.value,c.selectedIndex=a,b.setHTML(d,b.encode(e.title)),b.setHTML(f,c.settings.title+" - "+e.title),b.removeClass(d,"mceTitle"),b.setAttrib(c.id,"aria-valuenow",e.title)):(b.setHTML(d,b.encode(c.settings.title)),b.setHTML(f,b.encode(c.settings.title)),b.addClass(d,"mceTitle"),c.selectedValue=c.selectedIndex=null,b.setAttrib(c.id,"aria-valuenow",c.settings.title)),d=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e=this,f,g=b.get(this.id),h;if(e.isDisabled()||e.items.length==0)return;if(e.menu&&e.menu.isMenuVisible)return e.hideMenu();e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0),f=b.getPos(g),h=e.menu,h.settings.offset_x=f.x,h.settings.offset_y=f.y,h.settings.keyboard_focus=!a.isOpera,e.oldID&&h.items[e.oldID].setSelected(0),d(e.items,function(a){a.value===e.selectedValue&&(h.items[a.id].setSelected(1),e.oldID=a.id)}),h.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",e.hideMenu,e),b.addClass(e.id,e.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c;c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150}),c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b=this,c,e;if(a==undefined)return b.selectByIndex(-1);a&&a.call?e=a:e=function(b){return b==a},a!=b.selectedValue&&(d(b.items,function(a,d){if(e(a.value))return c=1,b.selectByIndex(d),!1}),c||b.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a,c=this;return a=b.createHTML("option",{value:""},"-- "+c.settings.title+" --"),d(c.items,function(c){a+=b.createHTML("option",{value:c.value},c.title)}),a=b.createHTML("select",{id:c.id,"class":"mceNativeListBox","aria-labelledby":c.id+"_aria"},a),a+=b.createHTML("span",{id:c.id+"_aria",style:"display: none"},c.settings.title),a},postRender:function(){function d(a){var b=e.items[a.target.selectedIndex-1];b&&(b=b.value)&&(e.onChange.dispatch(e,b),e.settings.onselect&&e.settings.onselect(b))}var e=this,f,g=!0;e.rendered=!0,c.add(e.id,"change",d),c.add(e.id,"keydown",function(b){var h;c.remove(e.id,"change",f),g=!1,h=c.add(e.id,"blur",function(){if(g)return;g=!0,c.add(e.id,"change",d),c.remove(e.id,"blur",h)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return d(b),c.cancel(b)}),e.onPostRender.dispatch(e,b.get(e.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a=this,d,e,f=b.get(a.id),g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=b.getPos(a.settings.menu_container),e=b.getPos(f),g=a.menu,g.settings.offset_x=e.x,g.settings.offset_y=e.y,g.settings.vp_offset_x=e.x,g.settings.vp_offset_y=e.y,g.settings.keyboard_focus=a._focused,g.showMenu(0,f.clientHeight),c.add(b.doc,"mousedown",a.hideMenu,a),a.setState("Selected",1),a.isMenuVisible=1},renderMenu:function(){var a=this,b;b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons}),b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e;return a="<tbody><tr>",d.image?e=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):e=b.createHTML("span",{"class":"mceAction "+d["class"]},""),e+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",e=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),a+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},e)+"</td>",a+="</tr></tbody>",a=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},a),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},a)},postRender:function(){var d=this,e=d.settings,f;e.onclick&&(f=function(a){d.isDisabled()||(e.onclick(d.value),c.cancel(a))},c.add(d.id+"_action","click",f),c.add(d.id,["click","keydown"],function(a){var b=32,e=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)f(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)d.showMenu(),c.cancel(a)})),c.add(d.id+"_open","click",function(a){d.showMenu(),c.cancel(a)}),c.add([d.id,d.id+"_open"],"focus",function(){d._focused=1}),c.add([d.id,d.id+"_open"],"blur",function(){d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.addClass(d.id,"mceSplitButtonHover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,"mceSplitButtonDisabled")||b.removeClass(d.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a=this,d,e,f,g;if(a.isDisabled())return;a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();f=b.get(a.id),b.show(a.id+"_menu"),b.addClass(f,"mceSplitButtonSelected"),g=b.getPos(f),b.setStyles(a.id+"_menu",{left:g.x,top:g.y+f.clientHeight,zIndex:2e5}),f=0,c.add(b.doc,"mousedown",a.hideMenu,a),a.onShowMenu.dispatch(a),a._focused&&(a._keyHandler=c.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),b.select("a",a.id+"_menu")[0].focus()),a.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f=this,g,h=0,i=f.settings,j,k,l,m,n;return m=b.add(i.menu_container,"div",{role:"listbox",id:f.id+"_menu","class":i.menu_class+" "+i["class"],style:"position:absolute;left:0;top:-1000px;"}),g=b.add(m,"div",{"class":i["class"]+" mceSplitButtonMenu"}),b.add(g,"span",{"class":"mceMenuLine"}),j=b.add(g,"table",{role:"presentation","class":"mceColorSplitMenu"}),k=b.add(j,"tbody"),h=0,e(d(i.colors,"array")?i.colors:i.colors.split(","),function(a){a=a.replace(/^#/,""),h--||(l=b.add(k,"tr"),h=i.grid_width-1),j=b.add(l,"td"),j=b.add(j,"a",{role:"option",href:"javascript:;",style:{backgroundColor:"#"+a},title:f.editor.getLang("colors."+a,a),"data-mce-color":"#"+a}),f.editor.forcedHighContrastMode&&(j=b.add(j,"canvas",{width:16,height:16,"aria-hidden":"true"}),j.getContext&&(n=j.getContext("2d"))?(n.fillStyle="#"+a,n.fillRect(0,0,16,16)):b.remove(j))}),i.more_colors_func&&(j=b.add(k,"tr"),j=b.add(j,"td",{colspan:i.grid_width,"class":"mceMoreColors"}),j=b.add(j,"a",{role:"option",id:f.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},i.more_colors_title),c.add(j,"click",function(a){return i.more_colors_func.call(i.more_colors_scope||this),c.cancel(a)})),b.addClass(g,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:f.id+"_menu",items:b.select("a",f.id+"_menu"),onCancel:function(){f.hideMenu(),f.focus()}}),c.add(f.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(f.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",k),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&f.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a=this,c="",d,e,f=a.settings,g,h,i,j;j=a.controls;for(g=0;g<j.length;g++)e=j[g],h=j[g-1],i=j[g+1],g===0&&(d="mceToolbarStart",e.Button?d+=" mceToolbarStartButton":e.SplitButton?d+=" mceToolbarStartSplitButton":e.ListBox&&(d+=" mceToolbarStartListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->"))),h&&e.ListBox&&(h.Button||h.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?c+='<td style="position: relative">'+e.renderHTML()+"</td>":c+="<td>"+e.renderHTML()+"</td>",i&&e.ListBox&&(i.Button||i.SplitButton)&&(c+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return d="mceToolbarEnd",e.Button?d+=" mceToolbarEndButton":e.SplitButton?d+=" mceToolbarEndSplitButton":e.ListBox&&(d+=" mceToolbarEndListBox"),c+=b.createHTML("td",{"class":d},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:a.id,"class":"mceToolbar"+(f["class"]?" "+f["class"]:""),cellpadding:"0",cellspacing:"0",align:a.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function f(){var f=g.dependencies(b);a.each(f,function(a){var b=g.createUrl(c,a);g.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var g=this,h=c;if(g.urls[b])return;typeof c=="object"&&(h=c.prefix+c.resource+c.suffix),h.indexOf("/")!=0&&h.indexOf("://")==-1&&(h=a.baseURL+"/"+h),g.urls[b]=h.substring(0,h.lastIndexOf("/")),g.lookup[b]?f():a.ScriptLoader.add(h,f,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b=a.each,c=a.extend,d=a.DOM,e=a.dom.Event,f=a.ThemeManager,g=a.PluginManager,h=a.explode,i=a.util.Dispatcher,j,k=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new i(a),e.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new i(a),a.onRemoveEditor=new i(a),a.EditorManager=c(a,{editors:[],i18n:{},activeEditor:null,init:function(f){function g(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var i=this,j,l=a.ScriptLoader,m,n=[],o;f=c({theme:"simple",language:"en"},f),i.settings=f,e.add(document,"init",function(){var c,e;g(f,"onpageload");switch(f.mode){case"exact":c=f.elements||"",c.length>0&&b(h(c),function(c){d.get(c)?(o=new a.Editor(c,f),n.push(o),o.render(1)):b(document.forms,function(e){b(e.elements,function(b){b.name===c&&(c="mce_editor_"+k++,d.setAttrib(b,"id",c),o=new a.Editor(c,f),n.push(o),o.render(1))})})});break;case"textareas":case"specific_textareas":function j(a,b){return b.constructor===RegExp?b.test(a.className):d.hasClass(a,b)}b(d.select("textarea"),function(b){if(f.editor_deselector&&j(b,f.editor_deselector))return;if(!f.editor_selector||j(b,f.editor_selector)){m=d.get(b.name),!b.id&&!m&&(b.id=b.name);if(!b.id||i.get(b.id))b.id=d.uniqueId();o=new a.Editor(b.id,f),n.push(o),o.render(1)}})}f.oninit&&(c=e=0,b(n,function(a){e++,a.initialized?c++:a.onInit.add(function(){c++,c==e&&g(f,"oninit")}),c==e&&g(f,"oninit")}))})},get:function(a){return a===j?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this,c=b.editors;return c[a.id]=a,c.push(a),b._setActive(a),b.onAddEditor.dispatch(b,a),a},remove:function(a){var b=this,c,d=b.editors;if(!d[a.id])return null;delete d[a.id];for(c=0;c<d.length;c++)if(d[c]==a){d.splice(c,1);break}return b.activeEditor==a&&b._setActive(d[0]),a.destroy(),b.onRemoveEditor.dispatch(b,a),a},execCommand:function(b,c,d){var e=this,f=e.get(d),g;switch(b){case"mceFocus":return f.focus(),!0;case"mceAddEditor":case"mceAddControl":return e.get(d)||(new a.Editor(d,e.settings)).render(),!0;case"mceAddFrameControl":g=d.window,g.tinyMCE=tinyMCE,g.tinymce=a,a.DOM.doc=g.document,a.DOM.win=g,f=new a.Editor(d.element_id,d),f.render();if(a.isIE){function h(){f.destroy(),g.detachEvent("onunload",h),g=g.tinyMCE=g.tinymce=null}g.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return f&&f.remove(),!0;case"mceToggleEditor":if(!f)return e.execCommand("mceAddControl",0,d),!0;return f.isHidden()?f.show():f.hide(),!0}return e.activeEditor?e.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){b(this.editors,function(a){a.save()})},addI18n:function(c,d){var e,f=this.i18n;a.is(c,"string")?b(d,function(a,b){f[c+"."+b]=a}):b(c,function(a,c){b(a,function(a,d){b(a,function(a,b){d==="common"?f[c+"."+b]=a:f[c+"."+d+"."+b]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(d){function e(){h.language&&h.language_load!==!1&&j.add(a.baseURL+"/langs/"+h.language+".js"),h.theme&&h.theme.charAt(0)!="-"&&!k.urls[h.theme]&&k.load(h.theme,"themes/"+h.theme+"/editor_template"+a.suffix+".js"),f(o(h.plugins),function(b){if(b&&!l.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);var c=l.dependencies(b);f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)})}else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),j.loadQueue(function(){g.removed||g.init()})}var g=this,h=g.settings,i=g.id,j=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){g.render()});return}tinyMCE.settings=h;if(!g.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(g.getElement().nodeName)&&h.hidden_input&&b.getParent(i,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:i}),i),a.WindowManager&&(g.windowManager=new a.WindowManager(g)),h.encoding=="xml"&&g.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),h.add_form_submit_trigger&&g.onSubmit.addToTop(function(){g.initialized&&(g.save(),g.isNotDirty=1)}),h.add_unload_trigger&&(g._beforeUnload=tinyMCE.onBeforeUnload.add(function(){g.initialized&&!g.destroyed&&!g.isHidden()&&g.save({format:"raw",no_events:!0})})),a.addUnload(g.destroy,g),h.submit_patch&&g.onBeforeRenderUI.add(function(){var b=g.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(g.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),g.isNotDirty=1,g.formElement._mceOldSubmit(g.formElement)}),b=null}),e()},init:function(){function c(b){var d=l.get(b),g=l.urls[b]||a.documentBaseURL.replace(/\/$/,""),h;d&&a.inArray(w,b)===-1&&(f(l.dependencies(b),function(a){c(a)}),h=new d(e,g),e.plugins[b]=h,h.init&&(h.init(e,g),w.push(b)))}var d,e=this,i=e.settings,j,m,n=e.getElement(),p,q,r,s,t,u,v,w=[];a.add(e),i.aria_label=i.aria_label||b.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area")),i.theme&&(i.theme=i.theme.replace(/-/,""),p=k.get(i.theme),e.theme=new p,e.theme.init&&i.init_theme&&e.theme.init(e,k.urls[i.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(i.plugins.replace(/\-/g,"")),c),i.popup_css!==!1&&(i.popup_css?i.popup_css=e.documentBaseURI.toAbsolute(i.popup_css):i.popup_css=e.baseURI.toAbsolute("themes/"+i.theme+"/skins/"+i.skin+"/dialog.css")),i.popup_css_add&&(i.popup_css+=","+e.documentBaseURI.toAbsolute(i.popup_css_add)),e.controlManager=new a.ControlManager(e),i.custom_undo_redo&&(e.onBeforeExecCommand.add(function(a,b,c,d,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&e.undoManager.beforeChange()}),e.onExecCommand.add(function(a,b,c,d,f){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!f||!f.skip_undo)&&e.undoManager.add()})),e.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||e.nodeChanged()});if(g){function x(a,b){(!b||!b.initial)&&e.execCommand("mceRepaint")}e.onUndo.add(x),e.onRedo.add(x),e.onSetContent.add(x)}e.onBeforeRenderUI.dispatch(e,e.controlManager),i.render_ui&&(j=i.width||n.style.width||n.offsetWidth,m=i.height||n.style.height||n.offsetHeight,e.orgDisplay=n.style.display,u=/^[0-9\.]+(|px)$/i,u.test(""+j)&&(j=Math.max(parseInt(j)+(p.deltaWidth||0),100)),u.test(""+m)&&(m=Math.max(parseInt(m)+(p.deltaHeight||0),100)),p=e.theme.renderUI({targetNode:n,width:j,height:m,deltaWidth:i.delta_width,deltaHeight:i.delta_height}),e.editorContainer=p.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(p.sizeContainer||p.editorContainer,{width:j,height:m}),i.content_css&&a.each(o(i.content_css),function(a){e.contentCSS.push(e.documentBaseURI.toAbsolute(a))}),m=(p.iframeHeight||m)+(typeof m=="number"?p.deltaHeight||0:""),m<100&&(m=100),e.iframeHTML=i.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',i.document_base_url!=a.documentBaseURL&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),i.ie7_compat?e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(v=0;v<e.contentCSS.length;v++)e.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+e.contentCSS[v]+'" />';s=i.body_id||"tinymce",s.indexOf("=")!=-1&&(s=e.getParam("body_id","","hash"),s=s[e.id]||s),t=i.body_class||"",t.indexOf("=")!=-1&&(t=e.getParam("body_class","","hash"),t=t[e.id]||""),e.iframeHTML+='</head><body id="'+s+'" class="mceContentBody '+t+'"><br></body></html>',a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),d=b.add(p.iframeContainer,"iframe",{id:e.id+"_ifr",src:r||'javascript:""',frameBorder:"0",allowTransparency:"true",title:i.aria_label,style:{width:"100%",height:m,display:"block"}}),e.contentAreaContainer=p.iframeContainer,b.get(p.editorContainer).style.display=e.orgDisplay,b.get(e.id).style.display="none",b.setAttrib(e.id,"aria-hidden",!0),(!a.relaxedDomain||!r)&&e.setupIframe(),n=d=p=null},setupIframe:function(){var d=this,e=d.settings,i=b.get(d.id),j=d.getDoc(),k,l;if(!h||!a.relaxedDomain)j.open(),j.write(d.iframeHTML),j.close(),a.relaxedDomain&&(j.domain=a.relaxedDomain);l=d.getBody(),l.disabled=!0,e.readonly||(l.contentEditable=!0),l.disabled=!1,d.schema=new a.html.Schema(e),d.dom=new a.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:e.force_hex_style_colors,class_filter:e.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:d.schema}),d.parser=new a.html.DomParser(e,d.schema),d.settings.allow_html_in_named_anchor||d.parser.addAttributeFilter("name",function(a,b){var c=a.length,d,e,f,g;while(c--){g=a[c];if(g.name==="a"&&g.firstChild){f=g.parent,d=g.lastChild;do e=d.prev,f.insert(d,g),d=e;while(d)}}}),d.parser.addAttributeFilter("src,href,style",function(a,b){var c=a.length,e,f=d.dom,g,h;while(c--)e=a[c],g=e.attr(b),h="data-mce-"+b,e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,d.convertURL(g,b,e.name)))}),d.parser.addNodeFilter("script",function(a,b){var c=a.length,d;while(c--)d=a[c],d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}),d.parser.addNodeFilter("#cdata",function(a,b){var c=a.length,d;while(c--)d=a[c],d.type=8,d.name="#comment",d.value="[CDATA["+d.value+"]]"}),d.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b,c){var e=b.length,f,g=d.schema.getNonEmptyElements();while(e--)f=b[e],f.isEmpty(g)&&(f.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),d.serializer=new a.dom.Serializer(e,d.dom,d.schema),d.selection=new a.dom.Selection(d.dom,d.getWin(),d.serializer),d.formatter=new a.Formatter(this),d.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(a){return!0},onformat:function(a,b,c){f(c,function(b,c){d.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){d.formatter.register(a,{block:a,remove:"all"})}),d.formatter.register(d.settings.formats),d.undoManager=new a.UndoManager(d),d.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return d.onChange.dispatch(d,b,a)}),d.undoManager.onUndo.add(function(a,b){return d.onUndo.dispatch(d,b,a)}),d.undoManager.onRedo.add(function(a,b){return d.onRedo.dispatch(d,b,a)}),d.forceBlocks=new a.ForceBlocks(d,{forced_root_block:e.forced_root_block}),d.editorCommands=new a.EditorCommands(d),d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)}),d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)}),d.onPreInit.dispatch(d),e.gecko_spellcheck||(d.getBody().spellcheck=0),e.readonly||d._addEvents(),d.controlManager.onPostRender.dispatch(d,d.controlManager),d.onPostRender.dispatch(d),d.quirks=new a.util.Quirks(this),e.directionality&&(d.getBody().dir=e.directionality),e.nowrap&&(d.getBody().style.whiteSpace="nowrap"),e.handle_node_change_callback&&d.onNodeChange.add(function(a,b,c){d.execCallback("handle_node_change_callback",d.id,c,-1,-1,!0,d.selection.isCollapsed())}),e.save_callback&&d.onSaveContent.add(function(a,b){var c=d.execCallback("save_callback",d.id,b.content,d.getBody());c&&(b.content=c)}),e.onchange_callback&&d.onChange.add(function(a,b){d.execCallback("onchange_callback",d,b)}),e.protect&&d.onBeforeSetContent.add(function(a,b){e.protect&&f(e.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),e.convert_newlines_to_brs&&d.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),e.preformatted&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),e.verify_css_classes&&(d.serializer.attribValueFilter=function(a,b){var c,e;return a=="class"?(d.classesRE||(e=d.dom.getClasses(),e.length>0&&(c="",f(e,function(a){c+=(c?"|":"")+a["class"]}),d.classesRE=new RegExp("("+c+")","gi"))),!d.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||d.classesRE.test(b)?b:""):b}),e.cleanup_callback&&(d.onBeforeSetContent.add(function(a,b){b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),d.onPreProcess.add(function(a,b){b.set&&d.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&d.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),d.onPostProcess.add(function(a,b){b.set&&(b.content=d.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=d.execCallback("cleanup_callback","get_from_editor",b.content,b))})),e.save_callback&&d.onGetContent.add(function(a,b){b.save&&(b.content=d.execCallback("save_callback",d.id,b.content,d.getBody()))}),e.handle_event_callback&&d.onEvent.add(function(a,b,e){d.execCallback("handle_event_callback",b,a,e)===!1&&c.cancel(b)}),d.onSetContent.add(function(){d.addVisual(d.getBody())}),e.padd_empty_editor&&d.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function m(a,b){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}d.onExecCommand.add(function(a,b){b==="CreateLink"&&m(a)}),d.onSetContent.add(d.selection.onSetContent.add(m))}d.load({initial:!0,format:"html"}),d.startContent=d.getContent({format:"raw"}),d.undoManager.add(),d.initialized=!0,d.onInit.dispatch(d),d.execCallback("setupcontent_callback",d.id,d.getBody(),d.getDoc()),d.execCallback("init_instance_callback",d),d.focus(!0),d.nodeChanged({initial:1}),f(d.contentCSS,function(a){d.dom.loadCSS(a)}),e.auto_focus&&setTimeout(function(){var b=a.get(e.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),i=null},focus:function(b){var c,d=this,e=d.selection,f=d.settings.content_editable,g,h,i=d.getDoc();b||(g=e.getRng(),g.item&&(h=g.item(0)),d._refreshContentEditable(),e.normalize(),f||d.getWin().focus(),a.isGecko&&d.getBody().focus(),h&&h.ownerDocument==i&&(g=i.body.createControlRange(),g.addElement(h),g.select())),a.activeEditor!=d&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,d),d.onActivate.dispatch(d,c)),a._setActive(d)},execCallback:function(b){var c=this,d=c.settings[b],e;if(!d)return;return c.callbackLookup&&(e=c.callbackLookup[b])&&(d=e.func,e=e.scope),j(d,"string")&&(e=d.replace(/\.\w+$/,""),e=e?a.resolve(e):0,d=a.resolve(d),c.callbackLookup=c.callbackLookup||{},c.callbackLookup[b]={func:d,scope:e}),d.apply(e||c,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e=a.trim,g=j(this.settings[b])?this.settings[b]:c,h;return d==="hash"?(h={},j(g,"string")?f(g.indexOf("=")>0?g.split(/[;,](?![^=;,]*(?:[;,]|$))/):g.split(","),function(a){a=a.split("="),a.length>1?h[e(a[0])]=e(a[1]):h[e(a[0])]=e(a)}):h=g,h):g},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e=this,g;return e.settings.custom_shortcuts?(e.shortcuts=e.shortcuts||{},j(c,"string")&&(g=c,c=function(){e.execCommand(g,!1,null)}),j(c,"object")&&(g=c,c=function(){e.execCommand(g[0],g[1],g[2])}),f(o(a),function(a){var g={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":g[a]=!0;break;default:g.charCode=a.charCodeAt(0),g.keyCode=a.toUpperCase().charCodeAt(0)}}),e.shortcuts[(g.ctrl?"ctrl":"")+","+(g.alt?"alt":"")+","+(g.shift?"shift":"")+","+g.keyCode]=g}),!0):!1},execCommand:function(a,b,c,d){var e=this,g=0,h,i;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!d||!d.skip_focus)&&e.focus(),h={},e.onBeforeExecCommand.dispatch(e,a,b,c,h);if(h.terminate)return!1;if(e.execCallback("execcommand_callback",e.id,e.selection.getNode(),a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(h=e.execCommands[a]){i=h.func.call(h.scope,b,c);if(i!==!0)return e.onExecCommand.dispatch(e,a,b,c,d),i}f(e.plugins,function(f){if(f.execCommand&&f.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),g=1,!1});if(g)return!0;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;if(e.editorCommands.execCommand(a,b,c))return e.onExecCommand.dispatch(e,a,b,c,d),!0;e.getDoc().execCommand(a,b,c),e.onExecCommand.dispatch(e,a,b,c,d)},queryCommandState:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryStateCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandState(a);if(c!==-1)return c;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b=this,c,d;if(b._isHidden())return;if(c=b.queryValueCommands[a]){d=c.func.call(c.scope);if(d!==!0)return d}c=b.editorCommands.queryCommandValue(a);if(j(c))return c;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b=this,c=b.getElement(),d;if(c)return a=a||{},a.load=!0,d=b.setContent(j(c.value)?c.value:c.innerHTML,a),a.element=c,a.no_events||b.onLoadContent.dispatch(b,a),a.element=c=null,d},save:function(a){var c=this,d=c.getElement(),e,g;if(!d||!c.initialized)return;return a=a||{},a.save=!0,a.no_events||(c.undoManager.typing=!1,c.undoManager.add()),a.element=d,e=a.content=c.getContent(a),a.no_events||c.onSaveContent.dispatch(c,a),e=a.content,/TEXTAREA|INPUT/i.test(d.nodeName)?d.value=e:(d.innerHTML=e,(g=b.getParent(c.id,"form"))&&f(g.elements,function(a){if(a.name==c.id)return a.value=e,!1})),a.element=d=null,e},setContent:function(b,c){var d=this,e,f=d.getBody(),g;c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||d.onBeforeSetContent.dispatch(d,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){g=d.settings.forced_root_block,g?b="<"+g+'><br data-mce-bogus="1"></'+g+">":b='<br data-mce-bogus="1">',f.innerHTML=b,d.selection.select(f,!0),d.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},d.schema)).serialize(d.parser.parse(b))),c.content=a.trim(b),d.dom.setHTML(f,c.content),c.no_events||d.onSetContent.dispatch(d,c),d.selection.normalize(),c.content},getContent:function(b){var c=this,d;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||c.onBeforeGetContent.dispatch(c,b),b.format=="raw"?d=c.getBody().innerHTML:d=c.serializer.serialize(c.getBody(),b),b.content=a.trim(d),b.no_events||c.onGetContent.dispatch(c,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a=this,c;return a.contentWindow||(c=b.get(a.id+"_ifr"),c&&(a.contentWindow=c.contentWindow)),a.contentWindow},getDoc:function(){var a=this,b;return a.contentDocument||(b=a.getWin(),b&&(a.contentDocument=b.document)),a.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function d(a,b){var c=a.type;if(e.removed)return;e.onEvent.dispatch(e,a,b)!==!1&&e[k[a.fakeType||a.type]].dispatch(e,a,b)}var e=this,h,i=e.settings,j=e.dom,k={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(k,function(a,c){switch(c){case"contextmenu":j.bind(e.getDoc(),c,d);break;case"paste":j.bind(e.getBody(),c,function(a){d(a)});break;case"submit":case"reset":j.bind(e.getElement().form||b.getParent(e.id,"form"),c,d);break;default:j.bind(i.content_editable?e.getBody():e.getDoc(),c,d)}}),j.bind(i.content_editable?e.getBody():g?e.getDoc():e.getWin(),"focus",function(a){e.focus(!0)}),a.isGecko&&j.bind(e.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=e.documentBaseURI.toAbsolute(b))});if(g){function l(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}e.onBeforeExecCommand.add(l),e.onMouseDown.add(l)}e.onMouseUp.add(e.nodeChanged),e.onKeyUp.add(function(b,c){var d=c.keyCode;(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45||d==46||d==8||a.isMac&&(d==91||d==93)||c.ctrlKey)&&e.nodeChanged()}),e.onKeyDown.add(function(a,b){if(b.keyCode!=8)return;var c=a.selection.getRng().startContainer,d=a.selection.getRng().startOffset;while(c&&c.nodeType&&c.nodeType!=1&&c.parentNode)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&d==0){a.formatter.toggle("blockquote",null,c.parentNode);var e=a.selection.getRng();e.setStart(c,0),e.setEnd(c,0),a.selection.setRng(e),a.selection.collapse(!1)}}),e.onReset.add(function(){e.setContent(e.startContent,{format:"raw"})});if(i.custom_shortcuts){i.custom_undo_redo_keyboard_shortcuts&&(e.addShortcut("ctrl+z",e.getLang("undo_desc"),"Undo"),e.addShortcut("ctrl+y",e.getLang("redo_desc"),"Redo")),e.addShortcut("ctrl+b",e.getLang("bold_desc"),"Bold"),e.addShortcut("ctrl+i",e.getLang("italic_desc"),"Italic"),e.addShortcut("ctrl+u",e.getLang("underline_desc"),"Underline");for(h=1;h<=6;h++)e.addShortcut("ctrl+"+h,"",["FormatBlock",!1,"h"+h]);e.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),e.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),e.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function m(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(e.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}e.onKeyUp.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),e.onKeyPress.add(function(a,b){var d=m(b);if(d)return c.cancel(b)}),e.onKeyDown.add(function(a,b){var d=m(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&j.bind(e.getDoc(),"controlselect",function(a){var b=e.resizeInfo,d;a=a.target;if(a.nodeName!=="IMG")return;b&&j.unbind(b.node,b.ev,b.cb),j.hasClass(a,"mceItemNoResize")?(ev="resizestart",d=j.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",d=j.bind(a,ev,function(a){var b;a=a.target;if(b=j.getStyle(a,"width"))j.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"width","");if(b=j.getStyle(a,"height"))j.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"height","")})),b=e.resizeInfo={node:a,ev:ev,cb:d}}),a.isOpera&&e.onClick.add(function(a,b){c.prevent(b)});if(i.custom_undo_redo){function n(){e.undoManager.typing=!1,e.undoManager.add()}j.bind(e.getDoc(),"focusout",function(a){!e.removed&&e.undoManager.typing&&n()}),e.dom.bind(e.dom.getRoot(),"dragend",function(a){n()}),e.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&n()}),e.onKeyDown.add(function(b,d){var f=d.keyCode,g;if(f==8){g=e.getDoc().selection;if(g&&g.createRange&&g.createRange().item)return e.undoManager.beforeChange(),b.dom.remove(g.createRange().item(0)),n(),c.cancel(d)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&e.undoManager.beforeChange(),e.undoManager.typing&&n();return}(f<16||f>20)&&f!=224&&f!=91&&!e.undoManager.typing&&(e.undoManager.beforeChange(),e.undoManager.typing=!0,e.undoManager.add())}),e.onMouseDown.add(function(){e.undoManager.typing&&n()})}if(a.isGecko){function o(){var a=e.dom.getAttribs(e.selection.getStart().cloneNode(!1));return function(){var b=e.selection.getStart();b!==e.getBody()&&(e.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function p(){var a=e.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}e.onKeyPress.add(function(a,b){var d;if((b.keyCode==8||b.keyCode==46)&&p())return d=o(),e.getDoc().execCommand("delete",!1,null),d(),c.cancel(b)}),e.dom.bind(e.getDoc(),"cut",function(a){var b;p()&&(b=o(),e.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){b(),e.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a=this,b,c;a._isHidden()&&(b=a.getBody(),c=b.parentNode,c.removeChild(b),c.appendChild(b),b.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b=a.each,c,d=!0,e=!1;a.EditorCommands=function(f){function g(a,b,c){var f;return a=a.toLowerCase(),(f=r.exec[a])?(f(a,b,c),d):e}function h(a){var b;return a=a.toLowerCase(),(b=r.state[a])?b(a):-1}function i(a){var b;return a=a.toLowerCase(),(b=r.value[a])?b(a):e}function j(a,c){c=c||"exec",b(a,function(a,d){b(d.toLowerCase().split(","),function(b){r[c][b]=a})})}function k(a,b,d){return b===c&&(b=e),d===c&&(d=null),f.getDoc().execCommand(a,b,d)}function l(a){return t.match(a)}function m(a,b){t.toggle(a,b?{value:b}:c)}function n(a){u=q.getBookmark(a)}function o(){q.moveToBookmark(u)}var p=f.dom,q=f.selection,r={state:{},exec:{},value:{}},s=f.settings,t=f.formatter,u;a.extend(this,{execCommand:g,queryCommandState:h,queryCommandValue:i,addCommands:j}),j({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c=f.getDoc(),e;try{k(b)}catch(g){e=d}if(e||!c.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){q.isCollapsed()&&q.select(q.getNode()),k(a),q.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var c=a.substring(7);b("left,center,right,full".split(","),function(a){c!=a&&t.remove("align"+a)}),m("align"+c),g("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;k(a),b=p.getParent(q.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(n(),p.split(c,b),o()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){m(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){m(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(s.font_size_style_values),e=a.explode(s.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),m(b,d)},RemoveFormat:function(a){t.remove(a)},mceBlockQuote:function(a){m("blockquote")},FormatBlock:function(a,b,c){return m(c||"p")},mceCleanup:function(){var a=q.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),q.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||q.getNode();e!=f.getBody()&&(n(),f.dom.remove(e,d),o())},mceSelectNodeDepth:function(a,b,c){var d=0;p.getParent(q.getNode(),function(a){if(a.nodeType==1&&d++==c)return q.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){q.select(c)},mceInsertContent:function(b,c,d){var e,g,h,i,j,k,l,m,n,o,r,s,t,u;e=f.parser,g=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',k={content:d,format:"html"},q.onBeforeSetContent.dispatch(q,k),d=k.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),q.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),h=q.getNode(),k={context:h.nodeName.toLowerCase()},j=e.parse(d,k),r=j.lastChild;if(r.attr("id")=="mce_marker"){l=r;for(r=r.prev;r;r=r.walk(!0))if(r.type==3||!p.isBlock(r.name)){r.parent.insert(l,r,r.name==="br");break}}if(!k.invalid)d=g.serialize(j),r=h.firstChild,s=h.lastChild,!r||r===s&&r.nodeName==="BR"?p.setHTML(h,d):q.setContent(d);else{q.setContent(t),h=f.selection.getNode(),i=f.getBody(),h.nodeType==9?h=r=i:r=h;while(r!==i)h=r,r=r.parentNode;d=h==i?i.innerHTML:p.getOuterHTML(h),d=g.serialize(e.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(j)}))),h==i?p.setHTML(i,d):p.setOuterHTML(h,d)}l=p.get("mce_marker"),m=p.getRect(l),n=p.getViewPort(f.getWin());if(m.y+m.h>n.y+n.h||m.y<n.y||m.x>n.x+n.w||m.x<n.x)u=a.isIE?f.getDoc().documentElement:f.getBody(),u.scrollLeft=m.x,u.scrollTop=m.y-n.h+25;o=p.createRng(),r=l.previousSibling,r&&r.nodeType==3?o.setStart(r,r.nodeValue.length):(o.setStartBefore(l),o.setEndBefore(l)),p.remove(l),q.setRng(o),q.onSetContent.dispatch(q,k),f.addVisual()},mceInsertRawHTML:function(a,b,c){q.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var c,d,e;c=s.indentation,d=/[a-z%]+$/i.exec(c),c=parseInt(c),!h("InsertUnorderedList")&&!h("InsertOrderedList")?b(q.getSelectedBlocks(),function(b){a=="outdent"?(e=Math.max(0,parseInt(b.style.paddingLeft||0)-c),p.setStyle(b,"paddingLeft",e?e+d:"")):p.setStyle(b,"paddingLeft",parseInt(b.style.paddingLeft||0)+c+d)}):k(a)},mceRepaint:function(){var b;if(a.isGecko)try{n(d),q.getSel()&&q.getSel().selectAllChildren(f.getBody()),q.collapse(d),o()}catch(c){}},mceToggleFormat:function(a,b,c){t.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,q.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=p.getParent(q.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&t.remove("link"),c.href&&t.apply("link",c,d)},selectAll:function(){var a=p.getRoot(),b=p.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),j({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){return l("align"+a.substring(7))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return l(a)},mceBlockQuote:function(){return l("blockquote")},Outdent:function(){var a;if(s.inline_styles){if((a=p.getParent(q.getStart(),p.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=p.getParent(q.getEnd(),p.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return h("InsertUnorderedList")||h("InsertOrderedList")||!s.inline_styles&&!!p.getParent(q.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return p.getParent(q.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),j({"FontSize,FontName":function(a){var b=0,c;if(c=p.getParent(q.getNode(),"span"))a=="fontsize"?b=c.style.fontSize:b=c.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value"),s.custom_undo_redo&&j({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function d(){return a.trim(c.getContent({format:"raw",no_events:1}))}var e,f=0,g=[],h;return e={typing:!1,onAdd:new b(e),onUndo:new b(e),onRedo:new b(e),beforeChange:function(){h=c.selection.getBookmark(2,!0)},add:function(a){var b,i=c.settings,j;a=a||{},a.content=d(),j=g[f];if(j&&j.content==a.content)return null;g[f]&&(g[f].beforeBookmark=h);if(i.custom_undo_redo_levels&&g.length>i.custom_undo_redo_levels){for(b=0;b<g.length-1;b++)g[b]=g[b+1];g.length--,f=g.length}return a.bookmark=c.selection.getBookmark(2,!0),f<g.length-1&&(g.length=f+1),g.push(a),f=g.length-1,e.onAdd.dispatch(e,a),c.isNotDirty=0,a},undo:function(){var a,b;return e.typing&&(e.add(),e.typing=!1),f>0&&(a=g[--f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),e.onUndo.dispatch(e,a)),a},redo:function(){var a;return f<g.length-1&&(a=g[++f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),e.onRedo.dispatch(e,a)),a},clear:function(){g=[],f=0,e.typing=!1},hasUndo:function(){return f>0||this.typing},hasRedo:function(){return f<g.length-1&&!this.typing}}}}(tinymce),function(a){function b(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function c(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function d(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),l):k}var e=a.dom.Event,f=a.isIE,g=a.isGecko,h=a.isOpera,i=a.each,j=a.extend,k=!0,l=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=this,c=a.settings,d;b.editor=a,b.dom=a.dom,d=(c.forced_root_block||"p").toLowerCase(),c.element=d.toUpperCase(),a.onPreInit.add(b.setup,b)},setup:function(){var c=this,d=c.editor,h=d.settings,i=d.dom,j=d.selection,l=d.schema.getBlockElements();if(h.forced_root_block){function m(){var a=j.getStart(),b=d.getBody(),c,e,f,g,k,m,n,o=-16777215;if(!a||a.nodeType!==1)return;while(a!=b){if(l[a.nodeName])return;a=a.parentNode}c=j.getRng(),c.setStart?(e=c.startContainer,f=c.startOffset,g=c.endContainer,k=c.endOffset):(c.item&&(c=d.getDoc().body.createTextRange(),c.moveToElementText(c.item(0))),tmpRng=c.duplicate(),tmpRng.collapse(!0),f=tmpRng.move("character",o)*-1,tmpRng.collapsed||(tmpRng=c.duplicate(),tmpRng.collapse(!1),k=tmpRng.move("character",o)*-1-f));for(a=b.firstChild;a;a)a.nodeType===3||a.nodeType==1&&!l[a.nodeName]?(m||(m=i.create(h.forced_root_block),a.parentNode.insertBefore(m,a)),n=a,a=a.nextSibling,m.appendChild(n)):(m=null,a=a.nextSibling);if(c.setStart)c.setStart(e,f),c.setEnd(g,k),j.setRng(c);else try{c=d.getDoc().body.createTextRange(),c.moveToElementText(b),c.collapse(!0),c.moveStart("character",f),k>0&&c.moveEnd("character",k),c.select()}catch(p){}d.nodeChanged()}d.onKeyUp.add(m),d.onClick.add(m)}h.force_br_newlines&&f&&d.onKeyPress.add(function(a,b){var c;if(b.keyCode==13&&j.getNode().nodeName!="LI")return j.setContent('<br id="__" /> ',{format:"raw"}),c=i.get("__"),c.removeAttribute("id"),j.select(c),j.collapse(),e.cancel(b)}),h.force_p_newlines&&(f?(a.addUnload(function(){c._previousFormats=0}),d.onKeyPress.add(function(a,d){c._previousFormats=0,d.keyCode==13&&!d.shiftKey&&a.selection.isCollapsed()&&h.keep_styles&&(c._previousFormats=b(a.selection.getStart()))}),d.onKeyUp.add(function(a,b){if(b.keyCode==13&&!b.shiftKey){var d=a.selection.getStart(),e=c._previousFormats;!d.hasChildNodes()&&e&&(d=i.getParent(d,i.isBlock),d&&d.nodeName!="LI"&&(d.innerHTML="",c._previousFormats?(d.appendChild(e.wrapper),e.inner.innerHTML="﻿"):d.innerHTML="﻿",j.select(d,1),j.collapse(!0),a.getDoc().execCommand("Delete",!1,null),c._previousFormats=0))}})):d.onKeyPress.add(function(a,b){b.keyCode==13&&!b.shiftKey&&!c.insertPara(b)&&e.cancel(b)}),g&&d.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&c.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b=j.getRng(),c,d=i.create("div",null," "),e,f=i.getViewPort(a.getWin()).h;b.insertNode(c=i.create("br")),b.setStartAfter(c),b.setEndAfter(c),j.setRng(b),j.getSel().focusNode==c.previousSibling&&(j.select(i.insertAfter(i.doc.createTextNode(" "),c)),j.collapse(k)),i.insertAfter(d,c),e=i.getPos(d).y,i.remove(d),e>f&&a.getWin().scrollTo(0,e)}d.onKeyPress.add(function(a,b){b.keyCode==13&&(b.shiftKey||h.force_br_newlines&&!i.getParent(j.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),e.cancel(b))})}f&&h.element!="P"&&(d.onKeyPress.add(function(a,b){c.lastElm=j.getNode().nodeName}),d.onKeyUp.add(function(a,b){var d,e=j.getNode(),f=a.getBody();f.childNodes.length===1&&e.nodeName=="P"?(e=i.rename(e,h.element),j.select(e),j.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&c.lastElm!="P"&&(d=i.getParent(e,"p"),d&&(i.rename(d,h.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(a){function b(a,b){var c=[],d,e,f;a.innerHTML="";if(j.keep_styles){e=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(e.nodeName)&&(d=e.cloneNode(l),g.setAttrib(d,"id",""),c.push(d));while(e=e.parentNode)}if(c.length>0){for(f=c.length-1,d=a;f>=0;f--)d=d.appendChild(c[f]);return c[0].innerHTML=h?" ":"<br />",c[0]}a.innerHTML=h?" ":"<br />"}var e=this,f=e.editor,g=f.dom,i=f.getDoc(),j=f.settings,m=f.selection.getSel(),n=m.getRangeAt(0),o=i.body,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=g.getViewPort(f.getWin()),F,G,H;f.undoManager.beforeChange(),p=i.createRange(),p.setStart(m.anchorNode,m.anchorOffset),p.collapse(k),q=i.createRange(),q.setStart(m.focusNode,m.focusOffset),q.collapse(k),r=p.compareBoundaryPoints(p.START_TO_END,q)<0,s=r?m.anchorNode:m.focusNode,t=r?m.anchorOffset:m.focusOffset,u=r?m.focusNode:m.anchorNode,v=r?m.focusOffset:m.anchorOffset;if(s===u&&/^(TD|TH)$/.test(s.nodeName))return s.firstChild.nodeName=="BR"&&g.remove(s.firstChild),s.childNodes.length==0?(f.dom.add(s,j.element,null,"<br />"),A=f.dom.add(s,j.element,null,"<br />")):(D=s.innerHTML,s.innerHTML="",f.dom.add(s,j.element,null,D),A=f.dom.add(s,j.element,null,"<br />")),n=i.createRange(),n.selectNodeContents(A),n.collapse(1),f.selection.setRng(n),l;s==o&&u==o&&o.firstChild&&f.dom.isBlock(o.firstChild)&&(s=u=s.firstChild,t=v=0,p=i.createRange(),p.setStart(s,0),q=i.createRange(),q.setStart(u,0)),i.body.hasChildNodes()||i.body.appendChild(g.create("br")),s=s.nodeName=="HTML"?i.body:s,s=s.nodeName=="BODY"?s.firstChild:s,u=u.nodeName=="HTML"?i.body:u,u=u.nodeName=="BODY"?u.firstChild:u,w=e.getParentBlock(s),x=e.getParentBlock(u),y=w?w.nodeName:j.element;if(D=e.dom.getParent(w,"li,pre"))return D.nodeName=="LI"?d(f.selection,e.dom,D):k;w&&(w.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(w,"position",1)))&&(y=j.element,w=null),x&&(x.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(g.getStyle(w,"position",1)))&&(y=j.element,x=null);if(/(TD|TABLE|TH|CAPTION)/.test(y)||w&&y=="DIV"&&/left|right/gi.test(g.getStyle(w,"float",1)))y=j.element,w=x=null;z=w&&w.nodeName==y?w.cloneNode(0):f.dom.create(y),A=x&&x.nodeName==y?x.cloneNode(0):f.dom.create(y),A.removeAttribute("id"),/^(H[1-6])$/.test(y)&&c(n,w)&&(A=f.dom.create(j.element)),D=B=s;do{if(D==o||D.nodeType==9||e.dom.isBlock(D)||/(TD|TABLE|TH|CAPTION)/.test(D.nodeName))break;B=D}while(D=D.previousSibling?D.previousSibling:D.parentNode);D=C=u;do{if(D==o||D.nodeType==9||e.dom.isBlock(D)||/(TD|TABLE|TH|CAPTION)/.test(D.nodeName))break;C=D}while(D=D.nextSibling?D.nextSibling:D.parentNode);B.nodeName==y?p.setStart(B,0):p.setStartBefore(B),p.setEnd(s,t),z.appendChild(p.cloneContents()||i.createTextNode(""));try{q.setEndAfter(C)}catch(I){}return q.setStart(u,v),A.appendChild(q.cloneContents()||i.createTextNode("")),n=i.createRange(),!B.previousSibling&&B.parentNode.nodeName==y?n.setStartBefore(B.parentNode):p.startContainer.nodeName==y&&p.startOffset==0?n.setStartBefore(p.startContainer):n.setStart(p.startContainer,p.startOffset),!C.nextSibling&&C.parentNode.nodeName==y?n.setEndAfter(C.parentNode):n.setEnd(q.endContainer,q.endOffset),n.deleteContents(),h&&f.getWin().scrollTo(0,E.y),z.firstChild&&z.firstChild.nodeName==y&&(z.innerHTML=z.firstChild.innerHTML),A.firstChild&&A.firstChild.nodeName==y&&(A.innerHTML=A.firstChild.innerHTML),g.isEmpty(z)&&b(z,s),g.isEmpty(A)&&(H=b(A,u)),h&&parseFloat(opera.version())<9.5?(n.insertNode(z),n.insertNode(A)):(n.insertNode(A),n.insertNode(z)),A.normalize(),z.normalize(),f.selection.select(A,!0),f.selection.collapse(!0),F=f.dom.getPos(A).y,(F<E.y||F+25>E.y+E.h)&&f.getWin().scrollTo(0,F<E.y?F:F-E.h+25),f.undoManager.add(),l},backspaceDelete:function(b,c){var d=this,f=d.editor,g=f.getBody(),h=f.dom,i,j=f.selection,k=j.getRng(),m=k.startContainer,i,n,o,p;if(!c&&k.collapsed&&m.nodeType==1&&k.startOffset==m.childNodes.length){p=new a.dom.TreeWalker(m.lastChild,m);for(i=m.lastChild;i;i=p.prev())if(i.nodeType==3){k.setStart(i,i.nodeValue.length),k.collapse(!0),j.setRng(k);return}}if(m&&f.dom.isBlock(m)&&!/^(TD|TH)$/.test(m.nodeName)&&c)if(m.childNodes.length==0||m.childNodes.length==1&&m.firstChild.nodeName=="BR"){i=m;while((i=i.previousSibling)&&!f.dom.isBlock(i));if(i){if(m!=g.firstChild){n=f.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,l);while(o=n.nextNode())i=o;k=f.getDoc().createRange(),k.setStart(i,i.nodeValue?i.nodeValue.length:0),k.setEnd(i,i.nodeValue?i.nodeValue.length:0),j.setRng(k),f.dom.remove(m)}return e.cancel(b)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this,f;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f=this,g=f.editor,h,i,j,k;c=e({"class":"mceDropDown",constrain:g.settings.constrain_menus},c),c["class"]=c["class"]+" "+g.getParam("skin")+"Skin";if(j=g.getParam("skin_variant"))c["class"]+=" "+g.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);return b=f.prefix+b,k=d||f._cls.dropmenu||a.ui.DropMenu,h=f.controls[b]=new k(b,c),h.onAddItem.add(function(a,b){var c=b.settings;c.title=g.getLang(c.title,c.title),c.onclick||(c.onclick=function(a){c.cmd&&g.execCommand(c.cmd,c.ui||!1,c.value)})}),g.onRemove.add(function(){h.destroy()}),a.isIE&&(h.onShowMenu.add(function(){g.focus(),i=g.selection.getBookmark(1)}),h.onHideMenu.add(function(){i&&(g.selection.moveToBookmark(i),i=0)})),f.add(h)},createListBox:function(b,d,f){function g(b){return b.settings.use_accessible_selects&&!a.isGecko}var h=this,i=h.editor,j,k,l;return h.get(b)?null:(d.title=i.translate(d.title),d.scope=d.scope||i,d.onselect||(d.onselect=function(a){i.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:h},d),b=h.prefix+b,i.settings.use_native_selects||g(i)?k=new a.ui.NativeListBox(b,d):(l=f||h._cls.listbox||a.ui.ListBox,k=new l(b,d,i)),h.controls[b]=k,a.isWebKit&&k.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){i.bookmark=i.selection.getBookmark(1)}),c.add(b,"focus",function(){i.selection.moveToBookmark(i.bookmark),i.bookmark=null})}),k.hideMenu&&i.onMouseDown.add(k.hideMenu,k),h.add(k))},createButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.label=g.translate(c.label),c.scope=c.scope||g,!c.onclick&&!c.menu_button&&(c.onclick=function(){g.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:g.getLang("unavailable",""),scope:c.scope,control_manager:f},c),b=f.prefix+b,c.menu_button?(j=d||f._cls.menubutton||a.ui.MenuButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i)):(j=f._cls.button||a.ui.Button,i=new j(b,c,g)),f.add(i))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:f},c),b=f.prefix+b,j=d||f._cls.splitbutton||a.ui.SplitButton,i=f.add(new j(b,c,g)),g.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(b,c,d){var f=this,g=f.editor,h,i,j,k;return f.get(b)?null:(c.title=g.translate(c.title),c.scope=c.scope||g,c.onclick||(c.onclick=function(b){a.isIE&&(k=g.selection.getBookmark(1)),g.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){g.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:g.getParam("skin")+"Skin",scope:c.scope,more_colors_title:g.getLang("more_colors")},c),b=f.prefix+b,j=d||f._cls.colorsplitbutton||a.ui.ColorSplitButton,i=new j(b,c,g),g.onMouseDown.add(i.hideMenu,i),g.onRemove.add(function(){i.destroy()}),a.isIE&&(i.onShowMenu.add(function(){g.focus(),k=g.selection.getBookmark(1)}),i.onHideMenu.add(function(){k&&(g.selection.moveToBookmark(k),k=0)})),f.add(i))},createToolbar:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||f._cls.toolbar||a.ui.Toolbar,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createToolbarGroup:function(b,c,d){var e,f=this,g;return b=f.prefix+b,g=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new g(b,c,f.editor),f.get(b)?null:f.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g=this,h="",i,j,k=g.editor.settings.dialog_type=="modal",l,m,n,o=a.DOM.getViewPort(),p;b=b||{},f=f||{},m=e?o.w:screen.width,n=e?o.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(m/2)-b.width/2,b.top=b.top||parseInt(n/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,k&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&k?h+=(h?";":"")+c+":"+b:h+=(h?",":"")+c+"="+b)}),g.features=b,g.params=f,g.onOpen.dispatch(g,b,f),p=b.url||b.file,p=a._addVer(p);try{d&&k?(l=1,window.showModalDialog(p,window,h)):l=window.open(p,b.name,h)}catch(q){}l||alert(g.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function c(a){return a instanceof Array}function d(a,b){return F.getParents(a,b,F.getRoot())}function e(a){return a.nodeType===1&&(a.face==="mceinline"||a.style.fontFamily==="mceinline")}function f(a){return a?D[a]:D}function g(a,b){a&&(typeof a!="string"?E(a,function(a,b){g(b,a)}):(b=b.length?b:[b],E(b,function(a){a.deep===R&&(a.deep=!a.selector),a.split===R&&(a.split=!a.selector||a.inline),a.remove===R&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),D[a]=b))}function h(c,d,g){function h(a){var b=a.startContainer,c=a.startOffset,d,e;if(b.nodeType==1||b.nodeValue===""){b=b.nodeType==1?b.childNodes[c]:b;if(b){d=new H(b,b.parentNode);for(e=d.current();e;e=d.next())if(e.nodeType==3&&!s(e)){a.setStart(e,0);break}}}return a}function i(a,b){b=b||q,a&&(b.onformat&&b.onformat(a,b,d,g),E(b.styles,function(b,c){F.setStyle(a,c,r(b,d))}),E(b.attributes,function(b,c){F.setAttrib(a,c,r(b,d))}),E(b.classes,function(b){b=r(b,d),F.hasClass(a,b)||F.addClass(a,b)}))}function j(){function a(a,b){var c=new H(b);for(g=c.current();g;g=c.prev())if(g.childNodes.length>1||g==a)return g}var c=b.selection.getRng(),d=c.startContainer,e=c.endContainer;if(d!=e&&c.endOffset==0){var f=a(d,e),h=f.nodeType==3?f.length:f.childNodes.length;c.setEnd(f,h)}return c}function l(b,c,d,e,f){var g=[],h=-1,i,j=-1,k=-1,l;return E(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return h=b,i=a,!1}),E(b.childNodes,function(a,b){a.nodeName==="SPAN"&&F.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?j=b:a.id==c.id+"_end"&&(k=b))}),h<=0||j<h&&k>h?(E(a.grep(b.childNodes),f),0):(l=d.cloneNode(P),E(a.grep(b.childNodes),function(a,b){if(j<h&&b<h||j>h&&b>h)g.push(a),a.parentNode.removeChild(a)}),j<h?b.insertBefore(l,i):j>h&&b.insertBefore(l,i.nextSibling),e.push(l),E(g,function(a){l.appendChild(a)}),l)}function m(b,f,g){var h=[],j,m;j=q.inline||q.block,m=F.create(j),i(m),I.walk(b,function(b){function o(b){var s=b.nodeName.toLowerCase(),t=b.parentNode.nodeName.toLowerCase(),u;if(p(s,"br")){r=0,q.block&&F.remove(b);return}if(q.wrapper&&k(b,c,d)){r=0;return}if(q.block&&!q.wrapper&&A(s)){b=F.rename(b,j),i(b),h.push(b),r=0;return}if(q.selector){E(n,function(a){if("collapsed"in a&&a.collapsed!==D)return;F.is(b,a.selector)&&!e(b)&&(i(b,a),u=!0)});if(!q.inline||u){r=0;return}}!J(j,s)||!J(t,j)||!g&&b.nodeType===3&&b.nodeValue.length===1&&b.nodeValue.charCodeAt(0)===65279||b.id==="_mce_caret"?s=="li"&&f?r=l(b,f,m,h,o):(r=0,E(a.grep(b.childNodes),o),r=0):(r||(r=m.cloneNode(P),b.parentNode.insertBefore(r,b),h.push(r)),r.appendChild(b))}var r;E(b,o)}),q.wrap_links===!1&&E(h,function(b){function c(b){var d,e,f;if(b.nodeName==="A"){e=m.cloneNode(P),h.push(e),f=a.grep(b.childNodes);for(d=0;d<f.length;d++)e.appendChild(f[d]);b.appendChild(e)}E(a.grep(b.childNodes),c)}c(b)}),E(h,function(a){function b(a){var b=0;return E(a.childNodes,function(a){!s(a)&&!y(a)&&b++}),b}function f(a){var b,c;return E(a.childNodes,function(a){if(a.nodeType==1&&!y(a)&&!e(a))return b=a,P}),b&&o(b,q)&&(c=b.cloneNode(P),i(c),F.replace(c,a,Q),F.remove(b,1)),c||a}var g;g=b(a);if((h.length>1||!K(a))&&g===0){F.remove(a,1);return}if(q.inline||q.wrapper){!q.exact&&g===1&&(a=f(a)),E(n,function(b){E(F.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}v(b,d,a,b.exact?a:null)})});if(k(a.parentNode,c,d))return F.remove(a,1),a=0,Q;q.merge_with_parents&&F.getParent(a.parentNode,function(b){if(k(b,c,d))return F.remove(a,1),a=0,Q}),a&&q.merge_siblings!==!1&&(a=z(x(a),a),a=z(a,x(a,Q)))}})}var n=f(c),q=n[0],t,w,B,D=G.isCollapsed();if(q)if(g)g.nodeType?(w=F.createRng(),w.setStartBefore(g),w.setEndAfter(g),m(u(w,n),null,!0)):m(g,null,!0);else if(!D||!q.inline||F.select("td.mceSelected,th.mceSelected").length){var L=b.selection.getNode();b.selection.setRng(j()),t=G.getBookmark(),m(u(G.getRng(Q),n),t),q.styles&&(q.styles.color||q.styles.textDecoration)&&(a.walk(L,T,"childNodes"),T(L)),G.moveToBookmark(t),G.setRng(h(G.getRng(Q))),b.nodeChanged()}else C("apply",c,d)}function i(c,e,g){function h(a){var b=a.startContainer,c=a.startOffset,d,e,f,g;b.nodeType==3&&c>=b.nodeValue.length-1&&(b=b.parentNode,c=M(b)+1);if(b.nodeType==1){f=b.childNodes,b=f[Math.min(c,f.length-1)],d=new H(b),c>f.length-1&&d.next();for(e=d.current();e;e=d.next())if(e.nodeType==3&&!s(e)){g=F.create("a",null,N),e.parentNode.insertBefore(g,e),a.setStart(e,0),G.setRng(a),F.remove(g);return}}}function i(b){var c,d,f;c=a.grep(b.childNodes);for(d=0,f=q.length;d<f;d++)if(v(q[d],e,b,b))break;if(r.deep)for(d=0,f=c.length;d<f;d++)i(c[d])}function j(a){var b;return E(d(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&(d=k(a,c,e),d&&d.split!==!1&&(b=a))}),b}function m(a,b,c,d){var f,g,h,i,j,k;if(a){k=a.parentNode;for(f=b.parentNode;f&&f!=k;f=f.parentNode){g=f.cloneNode(P);for(j=0;j<q.length;j++)if(v(q[j],e,g,g)){g=0;break}g&&(h&&g.appendChild(h),i||(i=g),h=g)}d&&(!r.mixed||!K(a))&&(b=F.split(a,b)),h&&(c.parentNode.insertBefore(h,c),i.appendChild(c))}return b}function n(a){return m(j(a),a,a,!0)}function o(a){var b=F.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return y(c)&&(c=c[a?"firstChild":"lastChild"]),F.remove(b,!0),c}function p(a){var c,d;a=u(a,q,Q),r.split&&(c=B(a,Q),d=B(a),c!=d?(c=t(c,"span",{id:"_start","data-mce-type":"bookmark"}),d=t(d,"span",{id:"_end","data-mce-type":"bookmark"}),n(c),n(d),c=o(Q),d=o()):c=d=n(c),a.startContainer=c.parentNode,a.startOffset=M(c),a.endContainer=d.parentNode,a.endOffset=M(d)+1),I.walk(a,function(a){E(a,function(a){i(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&S(a.parentNode)==="underline"&&v({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var q=f(c),r=q[0],w,x,z;if(g){g.nodeType?(z=F.createRng(),z.setStartBefore(g),z.setEndAfter(g),p(z)):p(g);return}!G.isCollapsed()||!r.inline||F.select("td.mceSelected,th.mceSelected").length?(w=G.getBookmark(),p(G.getRng(Q)),G.moveToBookmark(w),r.inline&&l(c,e,G.getStart())&&h(G.getRng(!0)),b.nodeChanged()):C("remove",c,e),a.isWebKit&&b.execCommand("mceCleanup")}function j(a,b,c){var d=f(a);!l(a,b,c)||"toggle"in d[0]&&!d[0].toggle?h(a,b,c):i(a,b,c)}function k(a,b,c,d){function e(a,b,e){var f,g,h=b[e],i;if(b.onmatch)return b.onmatch(a,b,e);if(h)if(h.length===R){for(f in h)if(h.hasOwnProperty(f)){e==="attributes"?g=F.getAttrib(a,f):g=q(a,f);if(d&&!g&&!b.exact)return;if((!d||b.exact)&&!p(g,r(h[f],c)))return}}else for(i=0;i<h.length;i++)if(e==="attributes"?F.getAttrib(a,h[i]):q(a,h[i]))return b;return b}var g=f(b),h,i,j;if(g&&a)for(i=0;i<g.length;i++){h=g[i];if(o(a,h)&&e(a,h,"attributes")&&e(a,h,"styles")){if(j=h.classes)for(i=0;i<j.length;i++)if(!F.hasClass(a,j[i]))return;return h}}}function l(a,b,c){function d(c){return c=F.getParent(c,function(c){return!!k(c,a,b,!0)}),k(c,a,b)}var e;return c?d(c):(c=G.getNode(),d(c)?Q:(e=G.getStart(),e!=c&&d(e)?Q:P))}function m(a,b){var c,d=[],e={},f,g,h;return c=G.getStart(),F.getParent(c,function(c){var f,g;for(f=0;f<a.length;f++)g=a[f],!e[g]&&k(c,g,b)&&(e[g]=!0,d.push(g))}),d}function n(a){var b=f(a),c,e,g,h,i;if(b){c=G.getStart(),e=d(c);for(h=b.length-1;h>=0;h--){i=b[h].selector;if(!i)return Q;for(g=e.length-1;g>=0;g--)if(F.is(e[g],i))return Q}}return P}function o(a,b){if(p(a,b.inline))return Q;if(p(a,b.block))return Q;if(b.selector)return F.is(a,b.selector)}function p(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function q(a,b){var c=F.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=F.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function r(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function s(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function t(a,b,c){var d=F.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function u(a,c,e){function f(a){var b,d,e,f,g;b=d=a?h:j,g=a?"previousSibling":"nextSibling",root=F.getRoot();if(b.nodeType==3&&!s(b))if(a?i>0:k<b.nodeValue.length)return b;for(;;){if(d==root||!c[0].block_expand&&K(d))return d;for(f=d[g];f;f=f[g])if(!y(f)&&!s(f))return d;d=d.parentNode}return b}function g(a,b){b===R&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var h=a.startContainer,i=a.startOffset,j=a.endContainer,k=a.endOffset,l,m,n,o;h.nodeType==1&&h.hasChildNodes()&&(m=h.childNodes.length-1,h=h.childNodes[i>m?m:i],h.nodeType==3&&(i=0)),j.nodeType==1&&j.hasChildNodes()&&(m=j.childNodes.length-1,j=j.childNodes[k>m?m:k-1],j.nodeType==3&&(k=j.nodeValue.length));if(y(h.parentNode)||y(h))h=y(h)?h:h.parentNode,h=h.nextSibling||h,h.nodeType==3&&(i=0);if(y(j.parentNode)||y(j))j=y(j)?j:j.parentNode,j=j.previousSibling||j,j.nodeType==3&&(k=j.length);if(c[0].inline){if(a.collapsed){function q(a,c,d){function f(a,b){var c,f,g=a.nodeValue;return typeof b=="undefined"&&(b=d?g.length:0),d?(c=g.lastIndexOf(" ",b),f=g.lastIndexOf(" ",b),c=c>f?c:f,c!==-1&&!e&&c++):(c=g.indexOf(" ",b),f=g.indexOf(" ",b),c=c===-1||f!==-1&&c>=f?f:c),c}var g,h,i,j;if(a.nodeType===3){i=f(a,c);if(i!==-1)return{container:a,offset:i};j=a}g=new H(a,F.getParent(a,K)||b.getBody());while(h=g[d?"prev":"next"]())if(h.nodeType===3){j=h,i=f(h);if(i!==-1)return{container:h,offset:i}}else if(K(h))break;if(j)return d?c=0:c=j.length,{container:j,offset:c}}o=q(h,i,!0),o&&(h=o.container,i=o.offset),o=q(j,k),o&&(j=o.container,k=o.offset)}n=g(j,k);if(n.node){while(n.node&&n.offset===0&&n.node.previousSibling)n=g(n.node.previousSibling);n.node&&n.offset>0&&n.node.nodeType===3&&n.node.nodeValue.charAt(n.offset-1)===" "&&(n.offset>1?(j=n.node,j.splitText(n.offset-1)):!n.node.previousSibling)}}if(c[0].inline||c[0].block_expand){if(!c[0].inline||h.nodeType!=3||i===0)h=f(!0);if(!c[0].inline||j.nodeType!=3||k===j.nodeValue.length)j=f()}if(c[0].selector&&c[0].expand!==P&&!c[0].inline){function r(b,e){var f,g,h,i;b.nodeType==3&&b.nodeValue.length==0&&b[e]&&(b=b[e]),f=d(b);for(g=0;g<f.length;g++)for(h=0;h<c.length;h++){i=c[h];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(F.is(f[g],i.selector))return f[g]}return b}h=r(h,"previousSibling"),j=r(j,"nextSibling")}if(c[0].block||c[0].selector){function t(a,b,e){var f;c[0].wrapper||(f=F.getParent(a,c[0].block)),f||(f=F.getParent(a.nodeType==3?a.parentNode:a,K)),f&&c[0].wrapper&&(f=d(f,"ul,ol").reverse()[0]||f);if(!f){f=a;while(f[b]&&!K(f[b])){f=f[b];if(p(f,"br"))break}}return f||a}h=t(h,"previousSibling"),j=t(j,"nextSibling"),c[0].block&&(K(h)||(h=f(!0)),K(j)||(j=f()))}return h.nodeType==1&&(i=M(h),h=h.parentNode),j.nodeType==1&&(k=M(j)+1,j=j.parentNode),{startContainer:h,startOffset:i,endContainer:j,endOffset:k}}function v(a,b,c,d){var e,f,g;if(!o(c,a))return P;if(a.remove!="all"){E(a.styles,function(a,e){a=r(a,b),typeof e=="number"&&(e=a,d=0),(!d||p(q(d,e),a))&&F.setStyle(c,e,""),g=1}),g&&F.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),E(a.attributes,function(a,e){var f;a=r(a,b),typeof e=="number"&&(e=a,d=0);if(!d||p(F.getAttrib(d,e),a)){if(e=="class"){a=F.getAttrib(c,e);if(a){f="",E(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f+=(f?" ":"")+a)});if(f){F.setAttrib(c,e,f);return}}}e=="class"&&c.removeAttribute("className"),O.test(e)&&c.removeAttribute("data-mce-"+e),c.removeAttribute(e)}}),E(a.classes,function(a){a=r(a,b),(!d||F.hasClass(d,a))&&F.removeClass(c,a)}),f=F.getAttribs(c);for(e=0;e<f.length;e++)if(f[e].nodeName.indexOf("_")!==0)return P}if(a.remove!="none")return w(c,a),Q}function w(b,c){var d=b.parentNode,e;if(c.block)if(!L){function f(a,b,c){return a=x(a,b,c),!a||a.nodeName=="BR"||K(a)}K(b)&&!K(d)&&(!f(b,P)&&!f(b.firstChild,Q,1)&&b.insertBefore(F.create("br"),b.firstChild),!f(b,Q)&&!f(b.lastChild,P,1)&&b.appendChild(F.create("br")))}else d==F.getRoot()&&(!c.list_block||!p(b,c.list_block))&&E(a.grep(b.childNodes),function(a){J(L,a.nodeName.toLowerCase())?e?e.appendChild(a):e=t(a,L):e=0});if(c.selector&&c.inline&&!p(c.inline,b))return;F.remove(b,1)}function x(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!s(a))return a}}function y(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function z(b,c){function d(a,b){function c(a){var b={};return E(F.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=F.getAttrib(a,d))}),b}function d(a,b){var c,d;for(d in a)if(a.hasOwnProperty(d)){c=b[d];if(c===R)return P;if(a[d]!=c)return P;delete b[d]}for(d in b)if(b.hasOwnProperty(d))return P;return Q}return a.nodeName!=b.nodeName?P:d(c(a),c(b))?d(F.parseStyle(F.getAttrib(a,"style")),F.parseStyle(F.getAttrib(b,"style")))?Q:P:P}var e,f,g;if(b&&c){function h(a,b){for(f=a;f;f=f[b]){if(f.nodeType==3&&f.nodeValue.length!==0)return a;if(f.nodeType==1&&!y(f))return f}return a}b=h(b,"previousSibling"),c=h(c,"nextSibling");if(d(b,c)){for(f=b.nextSibling;f&&f!=c;)g=f,f=f.nextSibling,b.appendChild(g);return F.remove(c),E(a.grep(c.childNodes),function(a){b.appendChild(a)}),b}}return c}function A(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function B(a,c){var d,e,f,g;return d=a[c?"startContainer":"endContainer"],e=a[c?"startOffset":"endOffset"],d.nodeType==1&&(f=d.childNodes.length-1,!c&&e&&e--,d=d.childNodes[e>f?f:e]),d.nodeType===3&&c&&e>=d.nodeValue.length&&(d=(new H(d,b.getBody())).next()||d),d.nodeType===3&&!c&&e==0&&(d=(new H(d,b.getBody())).prev()||d),d}function C(c,d,e){function g(a){var c=F.create("span",{id:r,"data-mce-bogus":!0,style:s?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(q)),c}function j(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==q||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function l(a){while(a){if(a.id===r)return a;a=a.parentNode}}function m(a){var b;if(a){b=new H(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function n(a,b){var c,d;if(!a){a=l(G.getStart());if(!a)while(a=F.get(r))n(a,!1)}else d=G.getRng(!0),j(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),F.remove(a)):(c=m(a),c=c.deleteData(0,1),F.remove(a,1)),G.setRng(d)}function o(){var a,b,c,i,j,k,n;a=G.getRng(!0),i=a.startOffset,k=a.startContainer,n=k.nodeValue,b=l(G.getStart()),b&&(c=m(b)),n&&i>0&&i<n.length&&/\w/.test(n.charAt(i))&&/\w/.test(n.charAt(i-1))?(j=G.getBookmark(),a.collapse(!0),a=u(a,f(d)),a=I.split(a),h(d,e,a),G.moveToBookmark(j)):(!b||c.nodeValue!==q?(b=g(!0),c=b.firstChild,a.insertNode(b),i=1,h(d,e,b)):h(d,e,b),G.setCursorLocation(c,i))}function p(){var a=G.getRng(!0),b,c,h,j,l,m,n=[],o,p;b=a.startContainer,c=a.startOffset,l=b;if(b.nodeType==3){if(c!=b.nodeValue.length||b.nodeValue===q)j=!0;l=l.parentNode}while(l){if(k(l,d,e)){m=l;break}l.nextSibling&&(j=!0),n.push(l),l=l.parentNode}if(!m)return;if(j)h=G.getBookmark(),a.collapse(!0),a=u(a,f(d),!0),a=I.split(a),i(d,e,a),G.moveToBookmark(h);else{p=g(),l=p;for(o=n.length-1;o>=0;o--)l.appendChild(n[o].cloneNode(!1)),l=l.firstChild;l.appendChild(F.doc.createTextNode(q)),l=l.firstChild,F.insertAfter(p,m),G.setCursorLocation(l,1)}}var q,r="_mce_caret",s=b.settings.caret_debug;q=a.isGecko?"​":N,b.onBeforeGetContent.addToTop(function(){var a=[],b;if(j(l(G.getStart()),a)){b=a.length;while(b--)F.setAttrib(a[b],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){n()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&n(l(G.getStart()))}),c=="apply"?o():p()}var D={},E=a.each,F=b.dom,G=b.selection,H=a.dom.TreeWalker,I=new a.dom.RangeUtils(F),J=b.schema.isValidChild,K=F.isBlock,L=b.settings.forced_root_block,M=F.nodeIndex,N="﻿",O=/^(src|href|style)$/,P=!1,Q=!0,R,S=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},T=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=S(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))};a.extend(this,{get:f,register:g,apply:h,remove:i,toggle:j,match:l,matchAll:m,matchNode:k,canApply:n})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}}),define("tinymce/jscripts/tiny_mce/tiny_mce_src",function(){}),tinyMCE.addI18n({en:{common:{more_colors:"More Colors...",invalid_data:"Error: Invalid values entered, these are marked in red.",popup_blocked:"Sorry, but we have noticed that your popup-blocker has disabled a window that provides application functionality. You will need to disable popup blocking on this site in order to fully utilize this tool.",clipboard_no_support:"Currently not supported by your browser, use keyboard shortcuts instead.",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",not_set:"-- Not Set --",class_name:"Class",browse:"Browse",close:"Close",cancel:"Cancel",update:"Update",insert:"Insert",apply:"Apply",edit_confirm:"Do you want to use the WYSIWYG mode for this textarea?",invalid_data_number:"{#field} must be a number",invalid_data_min:"{#field} must be a number greater than {#min}",invalid_data_size:"{#field} must be a number or percentage",value:"(value)"},contextmenu:{full:"Full",right:"Right",center:"Center",left:"Left",align:"Alignment"},insertdatetime:{day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat,Sun",day_long:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday",months_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",months_long:"January,February,March,April,May,June,July,August,September,October,November,December",inserttime_desc:"Insert Time",insertdate_desc:"Insert Date",time_fmt:"%H:%M:%S",date_fmt:"%Y-%m-%d"},print:{print_desc:"Print"},preview:{preview_desc:"Preview"},directionality:{rtl_desc:"Direction Right to Left",ltr_desc:"Direction Left to Right"},layer:{content:"New layer...",absolute_desc:"Toggle Absolute Positioning",backward_desc:"Move Backward",forward_desc:"Move Forward",insertlayer_desc:"Insert New Layer"},save:{save_desc:"Save",cancel_desc:"Cancel All Changes"},nonbreaking:{nonbreaking_desc:"Insert Non-Breaking Space Character"},iespell:{download:"ieSpell not detected. Do you want to install it now?",iespell_desc:"Check Spelling"},advhr:{delta_height:"",delta_width:"",advhr_desc:"Insert Horizontal Line"},emotions:{delta_height:"",delta_width:"",emotions_desc:"Emotions"},searchreplace:{replace_desc:"Find/Replace",delta_width:"",delta_height:"",search_desc:"Find"},advimage:{delta_width:"",image_desc:"Insert/Edit Image",delta_height:""},advlink:{delta_height:"",delta_width:"",link_desc:"Insert/Edit Link"},xhtmlxtras:{attribs_delta_height:"",attribs_delta_width:"",ins_delta_height:"",ins_delta_width:"",del_delta_height:"",del_delta_width:"",acronym_delta_height:"",acronym_delta_width:"",abbr_delta_height:"",abbr_delta_width:"",cite_delta_height:"",cite_delta_width:"",attribs_desc:"Insert/Edit Attributes",ins_desc:"Insertion",del_desc:"Deletion",acronym_desc:"Acronym",abbr_desc:"Abbreviation",cite_desc:"Citation"},style:{delta_height:"",delta_width:"",desc:"Edit CSS Style"},paste:{plaintext_mode_stick:"Paste is now in plain text mode. Click again to toggle back to regular paste mode.",plaintext_mode:"Paste is now in plain text mode. Click again to toggle back to regular paste mode. After you paste something you will be returned to regular paste mode.",selectall_desc:"Select All",paste_word_desc:"Paste from Word",paste_text_desc:"Paste as Plain Text"},paste_dlg:{word_title:"Use Ctrl+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep Linebreaks",text_title:"Use Ctrl+V on your keyboard to paste the text into the window."},table:{merge_cells_delta_height:"",merge_cells_delta_width:"",table_delta_height:"",table_delta_width:"",cellprops_delta_height:"",cellprops_delta_width:"",rowprops_delta_height:"",rowprops_delta_width:"",cell:"Cell",col:"Column",row:"Row",del:"Delete Table",copy_row_desc:"Copy Table Row",cut_row_desc:"Cut Table Row",paste_row_after_desc:"Paste Table Row After",paste_row_before_desc:"Paste Table Row Before",props_desc:"Table Properties",cell_desc:"Table Cell Properties",row_desc:"Table Row Properties",merge_cells_desc:"Merge Table Cells",split_cells_desc:"Split Merged Table Cells",delete_col_desc:"Delete Column",col_after_desc:"Insert Column After",col_before_desc:"Insert Column Before",delete_row_desc:"Delete Row",row_after_desc:"Insert Row After",row_before_desc:"Insert Row Before",desc:"Insert/Edit Table"},autosave:{warning_message:"If you restore the saved content, you will lose all the content that is currently in the editor.\n\nAre you sure you want to restore the saved content?",restore_content:"Restore auto-saved content.",unload_msg:"The changes you made will be lost if you navigate away from this page."},fullscreen:{desc:"Toggle Full Screen Mode"},media:{delta_height:"",delta_width:"",edit:"Edit Embedded Media",desc:"Insert/Edit Embedded Media"},fullpage:{desc:"Document Properties",delta_width:"",delta_height:""},template:{desc:"Insert Predefined Template Content"},visualchars:{desc:"Show/Hide Visual Control Characters"},spellchecker:{desc:"Toggle Spell Checker",menu:"Spell Checker Settings",ignore_word:"Ignore Word",ignore_words:"Ignore All",langs:"Languages",wait:"Please wait...",sug:"Suggestions",no_sug:"No Suggestions",no_mpell:"No misspellings found.",learn_word:"Learn word"},pagebreak:{desc:"Insert Page Break for Printing"},advlist:{types:"Types",def:"Default",lower_alpha:"Lower Alpha",lower_greek:"Lower Greek",lower_roman:"Lower Roman",upper_alpha:"Upper Alpha",upper_roman:"Upper Roman",circle:"Circle",disc:"Disc",square:"Square"},colors:{333300:"Dark olive",993300:"Burnt orange","000000":"Black","003300":"Dark green","003366":"Dark azure","000080":"Navy Blue",333399:"Indigo",333333:"Very dark gray",8e5:"Maroon",FF6600:"Orange",808e3:"Olive","008000":"Green","008080":"Teal","0000FF":"Blue",666699:"Grayish blue",808080:"Gray",FF0000:"Red",FF9900:"Amber","99CC00":"Yellow green",339966:"Sea green","33CCCC":"Turquoise","3366FF":"Royal blue",800080:"Purple",999999:"Medium gray",FF00FF:"Magenta",FFCC00:"Gold",FFFF00:"Yellow","00FF00":"Lime","00FFFF":"Aqua","00CCFF":"Sky blue",993366:"Brown",C0C0C0:"Silver",FF99CC:"Pink",FFCC99:"Peach",FFFF99:"Light yellow",CCFFCC:"Pale green",CCFFFF:"Pale cyan","99CCFF":"Light sky blue",CC99FF:"Plum",FFFFFF:"White"},aria:{rich_text_area:"Rich Text Area"},wordcount:{words:"Words:"}}}),define("tinymce/jscripts/tiny_mce/langs/en",function(){}),tinyMCE.addI18n("en.advanced",{underline_desc:"Underline (Ctrl+U)",italic_desc:"Italic (Ctrl+I)",bold_desc:"Bold (Ctrl+B)",dd:"Definition Description",dt:"Definition Term ",samp:"Code Sample",code:"Code",blockquote:"Block Quote",h6:"Heading 6",h5:"Heading 5",h4:"Heading 4",h3:"Heading 3",h2:"Heading 2",h1:"Heading 1",pre:"Preformatted",address:"Address",div:"DIV",paragraph:"Paragraph",block:"Format",fontdefault:"Font Family",font_size:"Font Size",style_select:"Styles",anchor_delta_height:"",anchor_delta_width:"",charmap_delta_height:"",charmap_delta_width:"",colorpicker_delta_height:"",colorpicker_delta_width:"",link_delta_height:"",link_delta_width:"",image_delta_height:"",image_delta_width:"",more_colors:"More Colors...",toolbar_focus:"Jump to tool buttons - Alt+Q, Jump to editor - Alt-Z, Jump to element path - Alt-X",newdocument:"Are you sure you want clear all contents?",path:"Path",clipboard_msg:"Copy/Cut/Paste is not available in Mozilla and Firefox.\nDo you want more information about this issue?",blockquote_desc:"Block Quote",help_desc:"Help",newdocument_desc:"New Document",image_props_desc:"Image Properties",paste_desc:"Paste (Ctrl+V)",copy_desc:"Copy (Ctrl+C)",cut_desc:"Cut (Ctrl+X)",anchor_desc:"Insert/Edit Anchor",visualaid_desc:"show/Hide Guidelines/Invisible Elements",charmap_desc:"Insert Special Character",backcolor_desc:"Select Background Color",forecolor_desc:"Select Text Color",custom1_desc:"Your Custom Description Here",removeformat_desc:"Remove Formatting",hr_desc:"Insert Horizontal Line",sup_desc:"Superscript",sub_desc:"Subscript",code_desc:"Edit HTML Source",cleanup_desc:"Cleanup Messy Code",image_desc:"Insert/Edit Image",unlink_desc:"Unlink",link_desc:"Insert/Edit Link",redo_desc:"Redo (Ctrl+Y)",undo_desc:"Undo (Ctrl+Z)",indent_desc:"Increase Indent",outdent_desc:"Decrease Indent",numlist_desc:"Insert/Remove Numbered List",bullist_desc:"Insert/Remove Bulleted List",justifyfull_desc:"Align Full",justifyright_desc:"Align Right",justifycenter_desc:"Align Center",justifyleft_desc:"Align Left",striketrough_desc:"Strikethrough",help_shortcut:"Press ALT-F10 for toolbar. Press ALT-0 for help",rich_text_area:"Rich Text Area",shortcuts_desc:"Accessability Help",toolbar:"Toolbar"}),define("tinymce/jscripts/tiny_mce/themes/advanced/langs/en",function(){}),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.each,f=a.util.Cookie,g,h=a.explode;a.ThemeManager.requireLangPack("advanced"),a.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(c,f){var g=this,h,i,j;g.editor=c,g.url=f,g.onResolveName=new a.util.Dispatcher(this),c.forcedHighContrastMode=c.settings.detect_highcontrast&&g._isHighContrast(),c.settings.skin=c.forcedHighContrastMode?"highcontrast":c.settings.skin,g.settings=h=d({theme_advanced_path:!0,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:c.settings.readonly},c.settings),h.font_size_style_values||(h.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"),a.is(h.theme_advanced_font_sizes,"string")&&(h.font_size_style_values=a.explode(h.font_size_style_values),h.font_size_classes=a.explode(h.font_size_classes||""),j={},c.settings.theme_advanced_font_sizes=h.theme_advanced_font_sizes,e(c.getParam("theme_advanced_font_sizes","","hash"),function(a,b){var c;b==a&&a>=1&&a<=7&&(b=a+" ("+g.sizes[a-1]+"pt)",c=h.font_size_classes[a-1],a=h.font_size_style_values[a-1]||g.sizes[a-1]+"pt"),/^\s*\./.test(a)&&(c=a.replace(/\./g,"")),j[b]=c?{"class":c}:{fontSize:a}}),h.theme_advanced_font_sizes=j),(i=h.theme_advanced_path_location)&&i!="none"&&(h.theme_advanced_statusbar_location=h.theme_advanced_path_location),h.theme_advanced_statusbar_location=="none"&&(h.theme_advanced_statusbar_location=0),c.settings.content_css!==!1&&c.contentCSS.push(c.baseURI.toAbsolute(f+"/skins/"+c.settings.skin+"/content.css")),c.onInit.add(function(){c.settings.readonly||(c.onNodeChange.add(g._nodeChanged,g),c.onKeyUp.add(g._updateUndoStatus,g),c.onMouseUp.add(g._updateUndoStatus,g),c.dom.bind(c.dom.getRoot(),"dragend",function(){g._updateUndoStatus(c)}))}),c.onSetProgressState.add(function(a,c,d){var e,f=a.id,h;c?g.progressTimer=setTimeout(function(){e=a.getContainer(),e=e.insertBefore(b.create("DIV",{style:"position:relative"}),e.firstChild),h=b.get(a.id+"_tbl"),b.add(e,"div",{id:f+"_blocker","class":"mceBlocker",style:{width:h.clientWidth+2,height:h.clientHeight+2}}),b.add(e,"div",{id:f+"_progress","class":"mceProgress",style:{left:h.clientWidth/2,top:h.clientHeight/2}})},d||0):(b.remove(f+"_blocker"),b.remove(f+"_progress"),clearTimeout(g.progressTimer))}),b.loadCSS(h.editor_css?c.documentBaseURI.toAbsolute(h.editor_css):f+"/skins/"+c.settings.skin+"/ui.css"),h.skin_variant&&b.loadCSS(f+"/skins/"+c.settings.skin+"/ui_"+h.skin_variant+".css")},_isHighContrast:function(){var a,c=b.add(b.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});return a=(b.getStyle(c,"background-color",!0)+"").toLowerCase().replace(/ /g,""),b.remove(c),a!="rgb(171,239,86)"&&a!="#abef56"},createControl:function(a,b){var c,d;if(d=b.createControl(a))return d;switch(a){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if(c=this.controls[a])return b.createButton(a,{title:"advanced."+c[0],cmd:c[1],ui:c[2],value:c[3]})},execCommand:function(a,b,c){var d=this["_"+a];return d?(d.call(this,b,c),!0):!1},_importClasses:function(a){var b=this.editor,c=b.controlManager.get("styleselect");c.getLength()==0&&e(b.dom.getClasses(),function(a,d){var e="style_"+d;b.formatter.register(e,{inline:"span",attributes:{"class":a["class"]},selector:"*"}),c.add(a["class"],e)})},_createStyleSelect:function(a){var b=this,d=b.editor,f=d.controlManager,g;return g=f.createListBox("styleselect",{title:"advanced.style_select",onselect:function(a){var b,c=[];return e(g.items,function(a){c.push(a.value)}),d.focus(),d.undoManager.add(),b=d.formatter.matchAll(c),!a||b[0]==a?b[0]&&d.formatter.remove(b[0]):d.formatter.apply(a),d.undoManager.add(),d.nodeChanged(),!1}}),d.onInit.add(function(){var a=0,c=d.getParam("style_formats");c?e(c,function(b){var c,f=0;e(b,function(){f++}),f>1?(c=b.name=b.name||"style_"+a++,d.formatter.register(c,b),g.add(b.title,c)):g.add(b.title)}):e(d.getParam("theme_advanced_styles","","hash"),function(c,e){var f;c&&(f="style_"+a++,d.formatter.register(f,{inline:"span",classes:c,selector:"*"}),g.add(b.editor.translate(e),f))})}),g.getLength()==0&&g.onPostRender.add(function(a,d){g.NativeListBox?c.add(d.id,"focus",b._importClasses,b):(c.add(d.id+"_text","focus",b._importClasses,b),c.add(d.id+"_text","mousedown",b._importClasses,b),c.add(d.id+"_open","focus",b._importClasses,b),c.add(d.id+"_open","mousedown",b._importClasses,b))}),g},_createFontSelect:function(){var a,b=this,c=b.editor;return a=c.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(b){var d=a.items[a.selectedIndex];if(!b&&d){c.execCommand("FontName",!1,d.value);return}return c.execCommand("FontName",!1,b),a.select(function(a){return b==a}),d&&d.value==b&&a.select(null),!1}}),a&&e(c.getParam("theme_advanced_fonts",b.settings.theme_advanced_fonts,"hash"),function(b,d){a.add(c.translate(d),b,{style:b.indexOf("dings")==-1?"font-family:"+b:""})}),a},_createFontSizeSelect:function(){var a=this,b=a.editor,c,d=0,f=[];return c=b.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(a){var d=c.items[c.selectedIndex];if(!a&&d){d=d.value,d["class"]?(b.formatter.toggle("fontsize_class",{value:d["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,d.fontSize);return}return a["class"]?(b.focus(),b.undoManager.add(),b.formatter.toggle("fontsize_class",{value:a["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,a.fontSize),c.select(function(b){return a==b}),d&&(d.value.fontSize==a.fontSize||d.value["class"]==a["class"])&&c.select(null),!1}}),c&&e(a.settings.theme_advanced_font_sizes,function(b,e){var f=b.fontSize;f>=1&&f<=7&&(f=a.sizes[parseInt(f)-1]+"pt"),c.add(e,b,{style:"font-size:"+f,"class":"mceFontSize"+d++ +(" "+(b["class"]||""))})}),c},_createBlockFormats:function(){var a,b={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},c=this;return a=c.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(a){return c.editor.execCommand("FormatBlock",!1,a),!1}}),a&&e(c.editor.getParam("theme_advanced_blockformats",c.settings.theme_advanced_blockformats,"hash"),function(d,e){a.add(c.editor.translate(e!=d?e:b[d]),d,{"class":"mce_formatPreview mce_"+d})}),a},_createForeColorMenu:function(){var a,b=this,c=b.settings,d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_text_colors)d.colors=e;return c.theme_advanced_default_foreground_color&&(d.default_color=c.theme_advanced_default_foreground_color),d.title="advanced.forecolor_desc",d.cmd="ForeColor",d.scope=this,a=b.editor.controlManager.createColorSplitButton("forecolor",d),a},_createBackColorMenu:function(){var a,b=this,c=b.settings,d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_background_colors)d.colors=e;return c.theme_advanced_default_background_color&&(d.default_color=c.theme_advanced_default_background_color),d.title="advanced.backcolor_desc",d.cmd="HiliteColor",d.scope=this,a=b.editor.controlManager.createColorSplitButton("backcolor",d),a},renderUI:function(d){var f,g,h,i=this,j=i.editor,k=i.settings,l,m,n;j.settings&&(j.settings.aria_label=k.aria_label+j.getLang("advanced.help_shortcut")),f=m=b.create("span",{role:"application","aria-labelledby":j.id+"_voice",id:j.id+"_parent","class":"mceEditor "+j.settings.skin+"Skin"+(k.skin_variant?" "+j.settings.skin+"Skin"+i._ufirst(k.skin_variant):"")}),b.add(f,"span",{"class":"mceVoiceLabel",style:"display:none;",id:j.id+"_voice"},k.aria_label),b.boxModel||(f=b.add(f,"div",{"class":"mceOldBoxModel"})),f=l=b.add(f,"table",{role:"presentation",id:j.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0}),f=h=b.add(f,"tbody");switch((k.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":g=i._rowLayout(k,h,d);break;case"customlayout":g=j.execCallback("theme_advanced_custom_layout",k,h,d,m);break;default:g=i._simpleLayout(k,h,d,m)}return f=d.targetNode,n=l.rows,b.addClass(n[0],"mceFirst"),b.addClass(n[n.length-1],"mceLast"),e(b.select("tr",h),function(a){b.addClass(a.firstChild,"mceFirst"),b.addClass(a.childNodes[a.childNodes.length-1],"mceLast")}),b.get(k.theme_advanced_toolbar_container)?b.get(k.theme_advanced_toolbar_container).appendChild(m):b.insertAfter(m,f),c.add(j.id+"_path_row","click",function(a){a=a.target;if(a.nodeName=="A")return i._sel(a.className.replace(/^.*mcePath_([0-9]+).*$/,"$1")),c.cancel(a)}),j.getParam("accessibility_focus")||c.add(b.add(m,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(j.id).focus()}),k.theme_advanced_toolbar_location=="external"&&(d.deltaHeight=0),i.deltaHeight=d.deltaHeight,d.targetNode=null,j.onKeyDown.add(function(d,e){var f=121,g=122;if(e.altKey){if(e.keyCode===f)return a.isWebKit&&window.focus(),i.toolbarGroup.focus(),c.cancel(e);if(e.keyCode===g)return b.get(d.id+"_path_row").focus(),c.cancel(e)}}),j.addShortcut("alt+0","","mceShortcuts",i),{iframeContainer:g,editorContainer:j.id+"_parent",sizeContainer:l,deltaHeight:d.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:a.majorVersion+"."+a.minorVersion}},resizeBy:function(a,c){var d=b.get(this.editor.id+"_ifr");this.resizeTo(d.clientWidth+a,d.clientHeight+c)},resizeTo:function(a,c,d){var e=this.editor,g=this.settings,h=b.get(e.id+"_tbl"),i=b.get(e.id+"_ifr");a=Math.max(g.theme_advanced_resizing_min_width||100,a),c=Math.max(g.theme_advanced_resizing_min_height||100,c),a=Math.min(g.theme_advanced_resizing_max_width||65535,a),c=Math.min(g.theme_advanced_resizing_max_height||65535,c),b.setStyle(h,"height",""),b.setStyle(i,"height",c),g.theme_advanced_resize_horizontal&&(b.setStyle(h,"width",""),b.setStyle(i,"width",a),a<h.clientWidth&&(a=h.clientWidth,b.setStyle(i,"width",h.clientWidth))),d&&g.theme_advanced_resizing_use_cookie&&f.setHash("TinyMCE_"+e.id+"_size",{cw:a,ch:c})},destroy:function(){var a=this.editor.id;c.clear(a+"_resize"),c.clear(a+"_path_row"),c.clear(a+"_external_close")},_simpleLayout:function(a,d,e,f){var h=this,i=h.editor,j=a.theme_advanced_toolbar_location,k=a.theme_advanced_statusbar_location,l,m,n,o;return a.readonly?(l=b.add(d,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"}),m):(j=="top"&&h._addToolbars(d,e),j=="external"&&(l=o=b.create("div",{style:"position:relative"}),l=b.add(l,"div",{id:i.id+"_external","class":"mceExternalToolbar"}),b.add(l,"a",{id:i.id+"_external_close",href:"javascript:;","class":"mceExternalClose"}),l=b.add(l,"table",{id:i.id+"_tblext",cellSpacing:0,cellPadding:0}),n=b.add(l,"tbody"),f.firstChild.className=="mceOldBoxModel"?f.firstChild.appendChild(o):f.insertBefore(o,f.firstChild),h._addToolbars(n,e),i.onMouseUp.add(function(){var a=b.get(i.id+"_external");b.show(a),b.hide(g);var d=c.add(i.id+"_external_close","click",function(){b.hide(i.id+"_external"),c.remove(i.id+"_external_close","click",d)});b.show(a),b.setStyle(a,"top",0-b.getRect(i.id+"_tblext").h-1),b.hide(a),b.show(a),a.style.filter="",g=i.id+"_external",a=null})),k=="top"&&h._addStatusBar(d,e),a.theme_advanced_toolbar_container||(l=b.add(d,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"})),j=="bottom"&&h._addToolbars(d,e),k=="bottom"&&h._addStatusBar(d,e),m)},_rowLayout:function(a,c,d){var f=this,g=f.editor,i,j,k=g.controlManager,l,m,n,o;return i=a.theme_advanced_containers_default_class||"",j=a.theme_advanced_containers_default_align||"center",e(h(a.theme_advanced_containers||""),function(e,g){var h=a["theme_advanced_container_"+e]||"";switch(e.toLowerCase()){case"mceeditor":l=b.add(c,"tr"),l=m=b.add(l,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":f._addStatusBar(c,d);break;default:o=(a["theme_advanced_container_"+e+"_align"]||j).toLowerCase(),o="mce"+f._ufirst(o),l=b.add(b.add(c,"tr"),"td",{"class":"mceToolbar "+(a["theme_advanced_container_"+e+"_class"]||i)+" "+o||j}),n=k.createToolbar("toolbar"+g),f._addControls(h,n),b.setHTML(l,n.renderHTML()),d.deltaHeight-=a.theme_advanced_row_height}}),m},_addControls:function(a,b){var c=this,d=c.settings,f,g=c.editor.controlManager;d.theme_advanced_disable&&!c._disabled?(f={},e(h(d.theme_advanced_disable),function(a){f[a]=1}),c._disabled=f):f=c._disabled,e(h(a),function(a){var d;if(f&&f[a])return;if(a=="tablecontrols"){e(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(a){a=c.createControl(a,g),a&&b.add(a)});return}d=c.createControl(a,g),d&&b.add(d)})},_addToolbars:function(a,c){var d=this,e,f,g=d.editor,h=d.settings,i,j=g.controlManager,k,l,m=[],n,o;o=j.createToolbarGroup("toolbargroup",{name:g.getLang("advanced.toolbar"),tab_focus_toolbar:g.getParam("theme_advanced_tab_focus_toolbar")}),d.toolbarGroup=o,n=h.theme_advanced_toolbar_align.toLowerCase(),n="mce"+d._ufirst(n),l=b.add(b.add(a,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+n,role:"presentation"});for(e=1;i=h["theme_advanced_buttons"+e];e++)f=j.createToolbar("toolbar"+e,{"class":"mceToolbarRow"+e}),h["theme_advanced_buttons"+e+"_add"]&&(i+=","+h["theme_advanced_buttons"+e+"_add"]),h["theme_advanced_buttons"+e+"_add_before"]&&(i=h["theme_advanced_buttons"+e+"_add_before"]+","+i),d._addControls(i,f),o.add(f),c.deltaHeight-=h.theme_advanced_row_height;m.push(o.renderHTML()),m.push(b.createHTML("a",{href:"#",accesskey:"z",title:g.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+g.id+"').focus();"},"<!-- IE -->")),b.setHTML(l,m.join(""))},_addStatusBar:function(a,d){var e,g=this,h=g.editor,i=g.settings,j,k,l,m;e=b.add(a,"tr"),e=m=b.add(e,"td",{"class":"mceStatusbar"}),e=b.add(e,"div",{id:h.id+"_path_row",role:"group","aria-labelledby":h.id+"_path_voice"}),i.theme_advanced_path?(b.add(e,"span",{id:h.id+"_path_voice"},h.translate("advanced.path")),b.add(e,"span",{},": ")):b.add(e,"span",{},"&#160;"),i.theme_advanced_resizing&&(b.add(m,"a",{id:h.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"}),i.theme_advanced_resizing_use_cookie&&h.onPostRender.add(function(){var a=f.getHash("TinyMCE_"+h.id+"_size"),c=b.get(h.id+"_tbl");if(!a)return;g.resizeTo(a.cw,a.ch)}),h.onPostRender.add(function(){c.add(h.id+"_resize","click",function(a){a.preventDefault()}),c.add(h.id+"_resize","mousedown",function(a){function d(a){a.preventDefault(),p=n+(a.screenX-l),q=o+(a.screenY-m),g.resizeTo(p,q)}function e(a){c.remove(b.doc,"mousemove",f),c.remove(h.getDoc(),"mousemove",i),c.remove(b.doc,"mouseup",j),c.remove(h.getDoc(),"mouseup",k),p=n+(a.screenX-l),q=o+(a.screenY-m),g.resizeTo(p,q,!0)}var f,i,j,k,l,m,n,o,p,q,r;a.preventDefault(),l=a.screenX,m=a.screenY,r=b.get(g.editor.id+"_ifr"),n=p=r.clientWidth,o=q=r.clientHeight,f=c.add(b.doc,"mousemove",d),i=c.add(h.getDoc(),"mousemove",d),j=c.add(b.doc,"mouseup",e),k=c.add(h.getDoc(),"mouseup",e)})})),d.deltaHeight-=21,e=a=null},_updateUndoStatus:function(a){var b=a.controlManager,c=a.undoManager;b.setDisabled("undo",!c.hasUndo()&&!c.typing),b.setDisabled("redo",!c.hasRedo())},_nodeChanged:function(c,d,f,g,h){function i(a){var b,c=h.parents,d=a;typeof a=="string"&&(d=function(b){return b.nodeName==a});for(b=0;b<c.length;b++)if(d(c[b]))return c[b]}var j=this,k,l=0,m,n,o=j.settings,p,q,r,s,t,u,v;a.each(j.stateControls,function(a){d.setActive(a,c.queryCommandState(j.controls[a][1]))}),d.setActive("visualaid",c.hasVisual),j._updateUndoStatus(c),d.setDisabled("outdent",!c.queryCommandState("Outdent")),k=i("A");if(n=d.get("link"))if(!k||!k.name)n.setDisabled(!k&&g),n.setActive(!!k);if(n=d.get("unlink"))n.setDisabled(!k&&g),n.setActive(!!k&&!k.name);(n=d.get("anchor"))&&n.setActive(!g&&!!k&&k.name),k=i("IMG"),(n=d.get("image"))&&n.setActive(!g&&!!k&&f.className.indexOf("mceItem")==-1);if(n=d.get("styleselect"))j._importClasses(),u=[],e(n.items,function(a){u.push(a.value)}),v=c.formatter.matchAll(u),n.select(v[0]);if(n=d.get("formatselect"))k=i(b.isBlock),k&&n.select(k.nodeName.toLowerCase());i(function(a){return a.nodeName==="SPAN"&&!p&&a.className&&(p=a.className),c.dom.is(a,o.theme_advanced_font_selector)&&(!q&&a.style.fontSize&&(q=a.style.fontSize),!r&&a.style.fontFamily&&(r=a.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()),!s&&a.style.color&&(s=a.style.color),!t&&a.style.backgroundColor&&(t=a.style.backgroundColor)),!1}),(n=d.get("fontselect"))&&n.select(function(a){return a.replace(/^([^,]+).*/,"$1").toLowerCase()==r});if(n=d.get("fontsizeselect"))o.theme_advanced_runtime_fontsize&&!q&&!p&&(q=c.dom.getStyle(f,"fontSize",!0)),n.select(function(a){if(a.fontSize&&a.fontSize===q)return!0;if(a["class"]&&a["class"]===p)return!0});if(o.theme_advanced_show_current_color){function w(a,b){if(n=d.get(a))b||(b=n.settings.default_color),b!==n.value&&n.displayColor(b)}w("forecolor",s),w("backcolor",t)}if(o.theme_advanced_show_current_color){function w(a,b){if(n=d.get(a))b||(b=n.settings.default_color),b!==n.value&&n.displayColor(b)}w("forecolor",s),w("backcolor",t)}o.theme_advanced_path&&o.theme_advanced_statusbar_location&&(k=b.get(c.id+"_path")||b.add(c.id+"_path_row","span",{id:c.id+"_path"}),j.statusKeyboardNavigation&&(j.statusKeyboardNavigation.destroy(),j.statusKeyboardNavigation=null),b.setHTML(k,""),i(function(c){var d=c.nodeName.toLowerCase(),e,f,g="";if(c.nodeType!=1||d==="br"||c.getAttribute("data-mce-bogus")||b.hasClass(c,"mceItemHidden")||b.hasClass(c,"mceItemRemoved"))return;a.isIE&&c.scopeName!=="HTML"&&(d=c.scopeName+":"+d),d=d.replace(/mce\:/g,"");switch(d){case"b":d="strong";break;case"i":d="em";break;case"img":if(m=b.getAttrib(c,"src"))g+="src: "+m+" ";break;case"a":if(m=b.getAttrib(c,"name"))g+="name: "+m+" ",d+="#"+m;if(m=b.getAttrib(c,"href"))g+="href: "+m+" ";break;case"font":if(m=b.getAttrib(c,"face"))g+="font: "+m+" ";if(m=b.getAttrib(c,"size"))g+="size: "+m+" ";if(m=b.getAttrib(c,"color"))g+="color: "+m+" ";break;case"span":if(m=b.getAttrib(c,"style"))g+="style: "+m+" "}if(m=b.getAttrib(c,"id"))g+="id: "+m+" ";if(m=c.className){m=m.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(m){g+="class: "+m+" ";if(b.isBlock(c)||d=="img"||d=="span")d+="."+m}}d=d.replace(/(html:)/g,""),d={name:d,node:c,title:g},j.onResolveName.dispatch(j,d),g=d.title,d=d.name,f=b.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:g,"class":"mcePath_"+l++},d),k.hasChildNodes()?(k.insertBefore(b.create("span",{"aria-hidden":"true"}," » "),k.firstChild),k.insertBefore(f,k.firstChild)):k.appendChild(f)},c.getBody()),b.select("a",k).length>0&&(j.statusKeyboardNavigation=new a.ui.KeyboardNavigation({root:c.id+"_path_row",items:b.select("a",k),excludeFromTabOrder:!0,onCancel:function(){c.focus()}},b)))},_sel:function(a){this.editor.execCommand("mceSelectNodeDepth",!1,a)},_mceInsertAnchor:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(c.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(c.getLang("advanced.anchor_delta_height",0)),inline:!0},{theme_url:this.url})},_mceCharMap:function(){var a=this.editor;a.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(a.getLang("advanced.charmap_delta_width",0)),height:260+parseInt(a.getLang("advanced.charmap_delta_height",0)),inline:!0},{theme_url:this.url})},_mceHelp:function(){var a=this.editor;a.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceShortcuts:function(){var a=this.editor;a.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceColorPicker:function(a,b){var c=this.editor;b=b||{},c.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(c.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(c.getLang("advanced.colorpicker_delta_height",0)),close_previous:!1,inline:!0},{input_color:b.color,func:b.func,theme_url:this.url})},_mceCodeEditor:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(c.getParam("theme_advanced_source_editor_width",720)),height:parseInt(c.getParam("theme_advanced_source_editor_height",580)),inline:!0,resizable:!0,maximizable:!0},{theme_url:this.url})},_mceImage:function(a,b){var c=this.editor;if(c.dom.getAttrib(c.selection.getNode(),"class").indexOf("mceItem")!=-1)return;c.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(c.getLang("advanced.image_delta_width",0)),height:275+parseInt(c.getLang("advanced.image_delta_height",0)),inline:!0},{theme_url:this.url})},_mceLink:function(a,b){var c=this.editor;c.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(c.getLang("advanced.link_delta_width",0)),height:200+parseInt(c.getLang("advanced.link_delta_height",0)),inline:!0},{theme_url:this.url})},_mceNewDocument:function(){var a=this.editor;a.windowManager.confirm("advanced.newdocument",function(b){b&&a.execCommand("mceSetContent",!1,"")})},_mceForeColor:function(){var a=this;this._mceColorPicker(0,{color:a.fgColor,func:function(b){a.fgColor=b,a.editor.execCommand("ForeColor",!1,b)}})},_mceBackColor:function(){var a=this;this._mceColorPicker(0,{color:a.bgColor,func:function(b){a.bgColor=b,a.editor.execCommand("HiliteColor",!1,b)}})},_ufirst:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}}),a.ThemeManager.add("advanced",a.themes.AdvancedTheme)}(tinymce),define("tinymce/jscripts/tiny_mce/themes/advanced/editor_template",function(){}),function(){function a(a){var b,c,d;if(a&&!a.splice){c=[];for(d=0;!0;d++)if(a[d])c[d]=a[d];else break;return c}return a}var b=tinymce.explode("id,name,width,height,style,align,class,hspace,vspace,bgcolor,type"),c=tinymce.makeMap(b.join(",")),d=tinymce.html.Node,e,f,g=tinymce.util.JSON,h;e=[["Flash","d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["ShockWave","166b1bca-3f9c-11cf-8075-444553540000","application/x-director","http://download.macromedia.com/pub/shockwave/cabs/director/sw.cab#version=8,5,1,0"],["WindowsMedia","6bf52a52-394a-11d3-b153-00c04f79faa6,22d6f312-b0f6-11d0-94ab-0080c74c7e95,05589fa1-c356-11ce-bf01-00aa0055595a","application/x-mplayer2","http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701"],["QuickTime","02bf25d5-8c17-4b23-bc80-d3488abddc6b","video/quicktime","http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"],["RealMedia","cfcdaa03-8be4-11cf-b84b-0020afbbccfa","audio/x-pn-realaudio-plugin","http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"],["Java","8ad9c840-044e-11d1-b3e9-00805f499d93","application/x-java-applet","http://java.sun.com/products/plugin/autodl/jinstall-1_5_0-windows-i586.cab#Version=1,5,0,0"],["Silverlight","dfeaf541-f3e1-4c24-acac-99c30715084a","application/x-silverlight-2"],["Iframe"],["Video"],["EmbeddedAudio"],["Audio"]],tinymce.create("tinymce.plugins.MediaPlugin",{init:function(a,c){function d(b){return b&&b.nodeName==="IMG"&&a.dom.hasClass(b,"mceItemMedia")}var h=this,i={},j,k,l,m;h.editor=a,h.url=c,f="";for(j=0;j<e.length;j++){m=e[j][0],l={name:m,clsids:tinymce.explode(e[j][1]||""),mimes:tinymce.explode(e[j][2]||""),codebase:e[j][3]};for(k=0;k<l.clsids.length;k++)i["clsid:"+l.clsids[k]]=l;for(k=0;k<l.mimes.length;k++)i[l.mimes[k]]=l;i["mceItem"+m]=l,i[m.toLowerCase()]=l,f+=(f?"|":"")+m}tinymce.each(a.getParam("media_types","video=mp4,m4v,ogv,webm;silverlight=xap;flash=swf,flv;shockwave=dcr;quicktime=mov,qt,mpg,mpeg;shockwave=dcr;windowsmedia=avi,wmv,wm,asf,asx,wmx,wvx;realmedia=rm,ra,ram;java=jar;audio=mp3,ogg").split(";"),function(a){var b,c,d;a=a.split(/=/),c=tinymce.explode(a[1].toLowerCase());for(b=0;b<c.length;b++)d=i[a[0].toLowerCase()],d&&(i[c[b]]=d)}),f=new RegExp("write("+f+")\\(([^)]+)\\)"),h.lookup=i,a.onPreInit.add(function(){a.schema.addValidElements("object[id|style|width|height|classid|codebase|*],param[name|value],embed[id|style|width|height|type|src|*],video[*],audio[*],source[*]"),a.parser.addNodeFilter("object,embed,video,audio,script,iframe",function(a){var b=a.length;while(b--)h.objectToImg(a[b])}),a.serializer.addNodeFilter("img",function(a,b,c){var d=a.length,e;while(d--)e=a[d],(e.attr("class")||"").indexOf("mceItemMedia")!==-1&&h.imgToObject(e,c)})}),a.onInit.add(function(){a.theme&&a.theme.onResolveName&&a.theme.onResolveName.add(function(b,c){c.name==="img"&&a.dom.hasClass(c.node,"mceItemMedia")&&(c.name="media")}),a&&a.plugins.contextmenu&&a.plugins.contextmenu.onContextMenu.add(function(a,b,c){c.nodeName==="IMG"&&c.className.indexOf("mceItemMedia")!==-1&&b.add({title:"media.edit",icon:"media",cmd:"mceMedia"})})}),a.addCommand("mceMedia",function(){var e,f;f=a.selection.getNode(),d(f)&&(e=a.dom.getAttrib(f,"data-mce-json"),e&&(e=g.parse(e),tinymce.each(b,function(b){var c=a.dom.getAttrib(f,b);c&&(e[b]=c)}),e.type=h.getType(f.className).name.toLowerCase())),e||(e={type:"flash",video:{sources:[]},params:{}}),a.windowManager.open({file:c+"/media.htm",width:430+parseInt(a.getLang("media.delta_width",0)),height:500+parseInt(a.getLang("media.delta_height",0)),inline:1},{plugin_url:c,data:e})}),a.addButton("media",{title:"media.desc",cmd:"mceMedia"}),a.onNodeChange.add(function(a,b,c){b.setActive("media",d(c))})},convertUrl:function(a,b){var c=this,d=c.editor,e=d.settings,f=e.url_converter,g=e.url_converter_scope||c;return a?b?d.documentBaseURI.toAbsolute(a):f.call(g,a,"src","object"):a},getInfo:function(){return{longname:"Media",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/media",version:tinymce.majorVersion+"."+tinymce.minorVersion}},dataToImg:function(b,c){var d=this,e=d.editor,f=e.documentBaseURI,h,i,j,k;b.params.src=d.convertUrl(b.params.src,c),i=b.video.attrs,i&&(i.src=d.convertUrl(i.src,c)),i&&(i.poster=d.convertUrl(i.poster,c)),h=a(b.video.sources);if(h)for(k=0;k<h.length;k++)h[k].src=d.convertUrl(h[k].src,c);return j=d.editor.dom.create("img",{id:b.id,style:b.style,align:b.align,hspace:b.hspace,vspace:b.vspace,src:d.editor.theme.url+"/img/trans.gif","class":"mceItemMedia mceItem"+d.getType(b.type).name,"data-mce-json":g.serialize(b,"'")}),j.width=b.width||(b.type=="audio"?"300":"320"),j.height=b.height||(b.type=="audio"?"32":"240"),j},dataToHtml:function(a,b){return this.editor.serializer.serialize(this.dataToImg(a,b),{forced_root_block:"",force_absolute:b})},htmlToData:function(a){var c,d,e;return e={type:"flash",video:{sources:[]},params:{}},c=this.editor.parser.parse(a),d=c.getAll("img")[0],d&&(e=g.parse(d.attr("data-mce-json")),e.type=this.getType(d.attr("class")).name.toLowerCase(),tinymce.each(b,function(a){var b=d.attr(a);b&&(e[a]=b)})),e},getType:function(a){var b,c,d;c=tinymce.explode(a," ");for(b=0;b<c.length;b++){d=this.lookup[c[b]];if(d)return d}},imgToObject:function(c,e){function f(a,b){var c,d,e,f,g;g=i.getParam("flash_video_player_url",h.convertUrl(h.url+"/moxieplayer.swf")),g&&(c=i.documentBaseURI,p.params.src=g,i.getParam("flash_video_player_absvideourl",!0)&&(a=c.toAbsolute(a||"",!0),b=c.toAbsolute(b||"",!0)),e="",d=i.getParam("flash_video_player_flashvars",{url:"$url",poster:"$poster"}),tinymce.each(d,function(c,d){c=c.replace(/\$url/,a||""),c=c.replace(/\$poster/,b||""),c.length>0&&(e+=(e?"&":"")+d+"="+escape(c))}),e.length&&(p.params.flashvars=e),f=i.getParam("flash_video_player_params",{allowfullscreen:!0,allowscriptaccess:!0}),tinymce.each(f,function(a,b){p.params[b]=""+a}))}var h=this,i=h.editor,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;p=c.attr("data-mce-json");if(!p)return;p=g.parse(p),u=this.getType(c.attr("class")),A=c.attr("data-mce-style"),A||(A=c.attr("style"),A&&(A=i.dom.serializeStyle(i.dom.parseStyle(A,"img"))));if(u.name==="Iframe"){y=new d("iframe",1),tinymce.each(b,function(a){var b=c.attr(a);a=="class"&&b&&(b=b.replace(/mceItem.+ ?/g,"")),b&&b.length>0&&y.attr(a,b)});for(n in p.params)y.attr(n,p.params[n]);y.attr({style:A,src:p.params.src}),c.replace(y);return}if(this.editor.settings.media_use_script){y=(new d("script",1)).attr("type","text/javascript"),o=new d("#text",3),o.value="write"+u.name+"("+g.serialize(tinymce.extend(p.params,{width:c.attr("width"),height:c.attr("height")}))+");",y.append(o),c.replace(y);return}if(u.name==="Video"&&p.video.sources[0]){j=(new d("video",1)).attr(tinymce.extend({id:c.attr("id"),width:c.attr("width"),height:c.attr("height"),style:A},p.video.attrs)),p.video.attrs&&(z=p.video.attrs.poster),r=p.video.sources=a(p.video.sources);for(v=0;v<r.length;v++)/\.mp4$/.test(r[v].src)&&(x=r[v].src);r[0].type||(j.attr("src",r[0].src),r.splice(0,1));for(v=0;v<r.length;v++)q=(new d("source",1)).attr(r[v]),q.shortEnded=!0,j.append(q);x?(f(x,z),u=h.getType("flash")):p.params.src=""}if(u.name==="Audio"&&p.video.sources[0]){B=(new d("audio",1)).attr(tinymce.extend({id:c.attr("id"),width:c.attr("width"),height:c.attr("height"),style:A},p.video.attrs)),p.video.attrs&&(z=p.video.attrs.poster),r=p.video.sources=a(p.video.sources),r[0].type||(B.attr("src",r[0].src),r.splice(0,1));for(v=0;v<r.length;v++)q=(new d("source",1)).attr(r[v]),q.shortEnded=!0,B.append(q);p.params.src=""}if(u.name==="EmbeddedAudio"){l=new d("embed",1),l.shortEnded=!0,l.attr({id:c.attr("id"),width:c.attr("width"),height:c.attr("height"),style:A,type:c.attr("type")});for(n in p.params)l.attr(n,p.params[n]);tinymce.each(b,function(a){p[a]&&a!="type"&&l.attr(a,p[a])}),p.params.src=""}if(p.params.src){/\.flv$/i.test(p.params.src)&&f(p.params.src,""),e&&e.force_absolute&&(p.params.src=i.documentBaseURI.toAbsolute(p.params.src)),k=(new d("object",1)).attr({id:c.attr("id"),width:c.attr("width"),height:c.attr("height"),style:A}),tinymce.each(b,function(a){var b=p[a];a=="class"&&b&&(b=b.replace(/mceItem.+ ?/g,"")),b&&a!="type"&&k.attr(a,b)});for(n in p.params)t=new d("param",1),t.shortEnded=!0,o=p.params[n],n==="src"&&u.name==="WindowsMedia"&&(n="url"),t.attr({name:n,value:o}),k.append(t);if(this.editor.getParam("media_strict",!0))k.attr({data:p.params.src,type:u.mimes[0]});else{k.attr({classid:"clsid:"+u.clsids[0],codebase:u.codebase}),l=new d("embed",1),l.shortEnded=!0,l.attr({id:c.attr("id"),width:c.attr("width"),height:c.attr("height"),style:A,type:u.mimes[0]});for(n in p.params)l.attr(n,p.params[n]);tinymce.each(b,function(a){p[a]&&a!="type"&&l.attr(a,p[a])}),k.append(l)}p.object_html&&(o=new d("#text",3),o.raw=!0,o.value=p.object_html,k.append(o)),j&&j.append(k)}j&&p.video_html&&(o=new d("#text",3),o.raw=!0,o.value=p.video_html,j.append(o)),B&&p.video_html&&(o=new d("#text",3),o.raw=!0,o.value=p.video_html,B.append(o));var C=j||B||k||l;C?c.replace(C):c.remove()},objectToImg:function(a){function e(a){return(new tinymce.html.Serializer({inner:!0,validate:!1})).serialize(a)}function h(a,b){return B[(a.attr(b)||"").toLowerCase()]}function i(a){var b=a.replace(/^.*\.([^.]+)$/,"$1");return B[b.toLowerCase()||""]}var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=this.lookup,C,D,E=this.editor.settings.url_converter,F=this.editor.settings.url_converter_scope,G,H,I,J;if(!a.parent)return;if(a.name==="script"){a.firstChild&&(C=f.exec(a.firstChild.value));if(!C)return;A=C[1],z={video:{},params:g.parse(C[2])},q=z.params.width,r=z.params.height}z=z||{video:{},params:{}},n=new d("img",1),n.attr({src:this.editor.theme.url+"/img/trans.gif"}),o=a.name;if(o==="video"||o=="audio"){l=a,j=a.getAll("object")[0],k=a.getAll("embed")[0],q=l.attr("width"),r=l.attr("height"),p=l.attr("id"),z.video={attrs:{},sources:[]},D=z.video.attrs;for(o in l.attributes.map)D[o]=l.attributes.map[o];x=a.attr("src"),x&&z.video.sources.push({src:E.call(F,x,"src",a.name)}),y=l.getAll("source");for(t=0;t<y.length;t++)x=y[t].remove(),z.video.sources.push({src:E.call(F,x.attr("src"),"src","source"),type:x.attr("type"),media:x.attr("media")});D.poster&&(D.poster=E.call(F,D.poster,"poster",a.name))}a.name==="object"&&(j=a,k=a.getAll("embed")[0]),a.name==="embed"&&(k=a),a.name==="iframe"&&(m=a,A="Iframe");if(j){q=q||j.attr("width"),r=r||j.attr("height"),s=s||j.attr("style"),p=p||j.attr("id"),G=G||j.attr("hspace"),H=H||j.attr("vspace"),I=I||j.attr("align"),J=J||j.attr("bgcolor"),z.name=j.attr("name"),w=j.getAll("param");for(t=0;t<w.length;t++)v=w[t],o=v.remove().attr("name"),c[o]||(z.params[o]=v.attr("value"));z.params.src=z.params.src||j.attr("data")}if(k){q=q||k.attr("width"),r=r||k.attr("height"),s=s||k.attr("style"),p=p||k.attr("id"),G=G||k.attr("hspace"),H=H||k.attr("vspace"),I=I||k.attr("align"),J=J||k.attr("bgcolor");for(o in k.attributes.map)!c[o]&&!z.params[o]&&(z.params[o]=k.attributes.map[o])}if(m){q=m.attr("width"),r=m.attr("height"),s=s||m.attr("style"),p=m.attr("id"),G=m.attr("hspace"),H=m.attr("vspace"),I=m.attr("align"),J=m.attr("bgcolor"),tinymce.each(b,function(a){n.attr(a,m.attr(a))});for(o in m.attributes.map)!c[o]&&!z.params[o]&&(z.params[o]=m.attributes.map[o])}z.params.movie&&(z.params.src=z.params.src||z.params.movie,delete z.params.movie),z.params.src&&(z.params.src=E.call(F,z.params.src,"src","object")),l&&(a.name==="video"?A=B.video.name:a.name==="audio"&&(A=B.audio.name)),j&&!A&&(A=(h(j,"clsid")||h(j,"classid")||h(j,"type")||{}).name),k&&!A&&(A=(h(k,"type")||i(z.params.src)||{}).name),k&&A=="EmbeddedAudio"&&(z.params.type=k.attr("type")),a.replace(n),k&&k.remove(),j&&(u=e(j.remove()),u&&(z.object_html=u)),l&&(u=e(l.remove()),u&&(z.video_html=u)),z.hspace=G,z.vspace=H,z.align=I,z.bgcolor=J,n.attr({id:p,"class":"mceItemMedia mceItem"+(A||"Flash"),style:s,width:q||(a.name=="audio"?"300":"320"),height:r||(a.name=="audio"?"32":"240"),hspace:G,vspace:H,align:I,bgcolor:J,"data-mce-json":g.serialize(z,"'")})}}),tinymce.PluginManager.add("media",tinymce.plugins.MediaPlugin)}(),define("tinymce/jscripts/tiny_mce/plugins/media/editor_plugin_src",function(){}),function(){function a(a,b){return a.getParam(b,c[b])}var b=tinymce.each,c={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!0,paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]};tinymce.create("tinymce.plugins.PastePlugin",{init:function(c,d){function e(b,d){var e=c.dom,f;g.onPreProcess.dispatch(g,b),b.node=e.create("div",0,b.content),tinymce.isGecko&&(f=c.selection.getRng(!0),f.startContainer==f.endContainer&&f.startContainer.nodeType==3&&b.node.childNodes.length===1&&/^(p|h[1-6]|pre)$/i.test(b.node.firstChild.nodeName)&&b.content.indexOf("__MCE_ITEM__")===-1&&e.remove(b.node.firstChild,!0)),g.onPostProcess.dispatch(g,b),b.content=c.serializer.serialize(b.node,{getInner:1,forced_root_block:""}),!d&&c.pasteAsPlainText?(g._insertPlainText(b.content),a(c,"paste_text_sticky")||(c.pasteAsPlainText=!1,c.controlManager.setActive("pastetext",!1))):g._insert(b.content)}function f(a){function d(a){a.preventDefault()}var f,g,h,i,j=c.selection,k=c.dom,l=c.getBody(),m,n;if(a.clipboardData||k.doc.dataTransfer){n=(a.clipboardData||k.doc.dataTransfer).getData("Text");if(c.pasteAsPlainText){a.preventDefault(),e({content:k.encode(n).replace(/\r?\n/g,"<br />")});return}}if(k.get("_mcePaste"))return;f=k.add(l,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"﻿﻿"),l!=c.getDoc().body?m=k.getPos(c.selection.getStart(),l).y:m=l.scrollTop+k.getViewPort(c.getWin()).y,k.setStyles(f,{position:"absolute",left:tinymce.isGecko?-40:0,top:m-25,width:1,height:1,overflow:"hidden"});if(tinymce.isIE){i=j.getRng(),h=k.doc.body.createTextRange(),h.moveToElementText(f),h.execCommand("Paste"),k.remove(f);if(f.innerHTML==="﻿﻿"){c.execCommand("mcePasteWord"),a.preventDefault();return}return j.setRng(i),j.setContent(""),setTimeout(function(){e({content:f.innerHTML})},0),tinymce.dom.Event.cancel(a)}k.bind(c.getDoc(),"mousedown",d),k.bind(c.getDoc(),"keydown",d),g=c.selection.getRng(),f=f.firstChild,h=c.getDoc().createRange(),h.setStart(f,0),h.setEnd(f,2),j.setRng(h),window.setTimeout(function(){var a="",f;k.select("div.mcePaste > div.mcePaste").length?a="<p>"+k.encode(n).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>":(f=k.select("div.mcePaste"),b(f,function(c){var d=c.firstChild;d&&d.nodeName=="DIV"&&d.style.marginTop&&d.style.backgroundColor&&k.remove(d,1),b(k.select("span.Apple-style-span",c),function(a){k.remove(a,1)}),b(k.select("br[data-mce-bogus]",c),function(a){k.remove(a)}),c.parentNode.className!="mcePaste"&&(a+=c.innerHTML)})),b(k.select("div.mcePaste"),function(a){k.remove(a)}),g&&j.setRng(g),e({content:a}),k.unbind(c.getDoc(),"mousedown",d),k.unbind(c.getDoc(),"keydown",d)},0)}var g=this;g.editor=c,g.url=d,g.onPreProcess=new tinymce.util.Dispatcher(g),g.onPostProcess=new tinymce.util.Dispatcher(g),g.onPreProcess.add(g._preProcess),g.onPostProcess.add(g._postProcess),g.onPreProcess.add(function(a,b){c.execCallback("paste_preprocess",a,b)}),g.onPostProcess.add(function(a,b){c.execCallback("paste_postprocess",a,b)}),c.onKeyDown.addToTop(function(a,b){if((tinymce.isMac?b.metaKey:b.ctrlKey)&&b.keyCode==86||b.shiftKey&&b.keyCode==45)return!1}),c.pasteAsPlainText=a(c,"paste_text_sticky_default"),c.addCommand("mceInsertClipboardContent",function(a,b){e(b,!0)}),a(c,"paste_text_use_dialog")||c.addCommand("mcePasteText",function(b,d){var e=tinymce.util.Cookie;c.pasteAsPlainText=!c.pasteAsPlainText,c.controlManager.setActive("pastetext",c.pasteAsPlainText),c.pasteAsPlainText&&!e.get("tinymcePasteText")&&(a(c,"paste_text_sticky")?c.windowManager.alert(c.translate("paste.plaintext_mode_sticky")):c.windowManager.alert(c.translate("paste.plaintext_mode")),a(c,"paste_text_notifyalways")||e.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))}),c.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"}),c.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"}),a(c,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?c.onKeyDown.addToTop(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&b.keyCode==86||b.shiftKey&&b.keyCode==45)&&f(b)}):c.onPaste.addToTop(function(a,b){return f(b)})),c.onInit.add(function(){c.controlManager.setActive("pastetext",c.pasteAsPlainText),a(c,"paste_block_drop")&&c.dom.bind(c.getBody(),["dragend","dragover","draggesture","dragdrop","drop","drag"],function(a){return a.preventDefault(),a.stopPropagation(),!1})}),g._legacySupport()},getInfo:function(){return{longname:"Paste text/word",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(c,d){function e(a){b(a,function(a){a.constructor==RegExp?g=g.replace(a,""):g=g.replace(a[0],a[1])})}var f=this.editor,g=d.content,h=tinymce.grep,i=tinymce.explode,j=tinymce.trim,k,l;if(f.settings.paste_enable_default_filters==0)return;tinymce.isIE&&document.documentMode>=9&&(e([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]),e([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]));if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(g)||d.wordContent){d.wordContent=!0,e([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]),a(f,"paste_convert_headers_to_strong")&&(g=g.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>")),a(f,"paste_convert_middot_lists")&&e([[/<!--\[if !supportLists\]-->/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]),e([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "]]);do k=g.length,g=g.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(k!=g.length);a(f,"paste_retain_style_properties").replace(/^none$/i,"").length==0?g=g.replace(/<\/?span[^>]*>/gi,""):e([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(a,c,d){var e=[],f=0,g=i(j(d).replace(/&quot;/gi,"'"),";");return b(g,function(a){function b(a){return a+(a!=="0"&&/\d$/.test(a))?"px":""}var c,d,g=i(a,":");if(g.length==2){c=g[0].toLowerCase(),d=g[1].toLowerCase();switch(c){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":e[f++]=c.replace(/^mso-|-alt$/g,"")+":"+b(d);return;case"horiz-align":e[f++]="text-align:"+d;return;case"vert-align":e[f++]="vertical-align:"+d;return;case"font-color":case"mso-foreground":e[f++]="color:"+d;return;case"mso-background":case"mso-highlight":e[f++]="background:"+d;return;case"mso-default-height":e[f++]="min-height:"+b(d);return;case"mso-default-width":e[f++]="min-width:"+b(d);return;case"mso-padding-between-alt":e[f++]="border-collapse:separate;border-spacing:"+b(d);return;case"text-line-through":if(d=="single"||d=="double")e[f++]="text-decoration:line-through";return;case"mso-zero-height":d=="yes"&&(e[f++]="display:none");return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(c))return;e[f++]=c+":"+g[1]}}),f>0?c+' style="'+e.join(";")+'"':c}]])}a(f,"paste_convert_headers_to_strong")&&e([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]),e([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]),l=a(f,"paste_strip_class_attributes");if(l!=="none"){function m(a,b){if(l==="all")return"";var c=h(i(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return c.length?' class="'+c.join(" ")+'"':""}g=g.replace(/ class="([^"]+)"/gi,m),g=g.replace(/ class=([\-\w]+)/gi,m)}a(f,"paste_remove_spans")&&(g=g.replace(/<\/?span[^>]*>/gi,"")),d.content=g},_postProcess:function(c,d){var e=this,f=e.editor,g=f.dom,h;if(f.settings.paste_enable_default_filters==0)return;d.wordContent&&(b(g.select("a",d.node),function(a){(!a.href||a.href.indexOf("#_Toc")!=-1)&&g.remove(a,1)}),a(f,"paste_convert_middot_lists")&&e._convertLists(c,d),h=a(f,"paste_retain_style_properties"),tinymce.is(h,"string")&&h!=="all"&&h!=="*"&&(h=tinymce.explode(h.replace(/^none$/i,"")),b(g.select("*",d.node),function(a){var b={},c=0,d,e,f;if(h)for(d=0;d<h.length;d++)e=h[d],f=g.getStyle(a,e),f&&(b[e]=f,c++);g.setAttrib(a,"style",""),h&&c>0?g.setStyles(a,b):a.nodeName=="SPAN"&&!a.className&&g.remove(a,!0)}))),a(f,"paste_remove_styles")||a(f,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?b(g.select("*[style]",d.node),function(a){a.removeAttribute("style"),a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&b(g.select("*",d.node),function(a){a.removeAttribute("data-mce-style")})},_convertLists:function(a,c){var d=a.editor.dom,e,f,g=-1,h,i=[],j,k;b(d.select("p",c.node),function(a){var c,k="",l,m,n,o;for(c=a.firstChild;c&&c.nodeType==3;c=c.nextSibling)k+=c.nodeValue;k=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," "),/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(k)&&(l="ul"),/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(k)&&(l="ol"),l?(h=parseFloat(a.style.marginLeft||0),h>g&&i.push(h),!e||l!=j?(e=d.create(l),d.insertAfter(e,a)):h>g?e=f.appendChild(d.create(l)):h<g&&(n=tinymce.inArray(i,h),o=d.getParents(e.parentNode,l),e=o[o.length-1-n]||e),b(d.select("span",a),function(a){var b=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"");l=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(b)?d.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(b)&&d.remove(a)}),m=a.innerHTML,l=="ul"?m=a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):m=a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),f=e.appendChild(d.create("li",0,m)),d.remove(a),g=h,j=l):e=g=0}),k=c.node.innerHTML,k.indexOf("__MCE_ITEM__")!=-1&&(c.node.innerHTML=k.replace(/__MCE_ITEM__/g,""))},_insert:function(a,b){var c=this.editor,d=c.selection.getRng();!c.selection.isCollapsed()&&d.startContainer!=d.endContainer&&c.getDoc().execCommand("Delete",!1,null),c.execCommand("mceInsertContent",!1,a,{skip_undo:b})},_insertPlainText:function(c){function d(a){b(a,function(a){a.constructor==RegExp?c=c.replace(a,""):c=c.replace(a[0],a[1])})}var e=this.editor,f=a(e,"paste_text_linebreaktype"),g=a(e,"paste_text_replacements"),h=tinymce.is;typeof c=="string"&&c.length>0&&(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(c)?d([/[\n\r]+/g]):d([/\r+/g]),d([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),c=e.dom.decode(tinymce.html.Entities.encodeRaw(c)),h(g,"array")?d(g):h(g,"string")&&d(new RegExp(g,"gi")),f=="none"?d([[/\n+/g," "]]):f=="br"?d([[/\n/g,"<br />"]]):f=="p"?d([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]):d([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),e.execCommand("mceInsertContent",!1,c))},_legacySupport:function(){var b=this,c=b.editor;c.addCommand("mcePasteWord",function(){c.windowManager.open({file:b.url+"/pasteword.htm",width:parseInt(a(c,"paste_dialog_width")),height:parseInt(a(c,"paste_dialog_height")),inline:1})}),a(c,"paste_text_use_dialog")&&c.addCommand("mcePasteText",function(){c.windowManager.open({file:b.url+"/pastetext.htm",width:parseInt(a(c,"paste_dialog_width")),height:parseInt(a(c,"paste_dialog_height")),inline:1})}),c.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})}}),tinymce.PluginManager.add("paste",tinymce.plugins.PastePlugin)}(),define("tinymce/jscripts/tiny_mce/plugins/paste/editor_plugin_src",function(){}),tinyMCE.addI18n("en.paste_dlg",{word_title:"Use Ctrl+V on your keyboard to paste the text into the window.",text_linebreaks:"Keep Linebreaks",text_title:"Use Ctrl+V on your keyboard to paste the text into the window."}),define("tinymce/jscripts/tiny_mce/plugins/paste/langs/en_dlg",function(){}),function(a){function b(a,b){var c=b.ownerDocument,d=c.createRange(),e;return d.setStartBefore(b),d.setEnd(a.endContainer,a.endOffset),e=c.createElement("body"),e.appendChild(d.cloneContents()),e.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length==0}function c(a,b){return parseInt(a.getAttribute(b)||1)}function d(b,d,f){function g(a,b){return a=a.cloneNode(b),a.removeAttribute("id"),a}function h(){var a=0;G=[],e(["thead","tbody","tfoot"],function(f){var g=d.select("> "+f+" tr",b);e(g,function(b,g){g+=a,e(d.select("> td, > th",b),function(a,b){var d,e,h,i;if(G[g])while(G[g][b])b++;h=c(a,"rowspan"),i=c(a,"colspan");for(e=g;e<g+h;e++){G[e]||(G[e]=[]);for(d=b;d<b+i;d++)G[e][d]={part:f,real:e==g&&d==b,elm:a,rowspan:h,colspan:i}}})}),a+=g.length})}function j(a,b){var c;c=G[b];if(c)return c[a]}function k(a,b,c){a&&(c=parseInt(c),c===1?a.removeAttribute(b,1):a.setAttribute(b,c,1))}function l(a){return a&&(d.hasClass(a.elm,"mceSelected")||a==J)}function m(){var a=[];return e(b.rows,function(b){e(b.cells,function(c){if(d.hasClass(c,"mceSelected")||c==J.elm)return a.push(b),!1})}),a}function n(){var a=d.createRng();a.setStartAfter(b),a.setEndAfter(b),f.setRng(a),d.remove(b)}function o(b){var c;return a.walk(b,function(f){var h;if(f.nodeType==3)return e(d.getParents(f.parentNode,null,b).reverse(),function(a){a=g(a,!1),c?h&&h.appendChild(a):c=h=a,h=a}),h&&(h.innerHTML=a.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),b=g(b,!1),k(b,"rowSpan",1),k(b,"colSpan",1),c?b.appendChild(c):a.isIE||(b.innerHTML='<br data-mce-bogus="1" />'),b}function p(){var a=d.createRng();e(d.select("tr",b),function(a){a.cells.length==0&&d.remove(a)});if(d.select("tr",b).length==0){a.setStartAfter(b),a.setEndAfter(b),f.setRng(a),d.remove(b);return}e(d.select("thead,tbody,tfoot",b),function(a){a.rows.length==0&&d.remove(a)}),h(),row=G[Math.min(G.length-1,H.y)],row&&(f.select(row[Math.min(row.length-1,H.x)].elm,!0),f.collapse(!0))}function q(a,b,c,e){var f,g,h,i,j;f=G[b][a].elm.parentNode;for(h=1;h<=c;h++){f=d.getNext(f,"tr");if(f){for(g=a;g>=0;g--){j=G[b+h][g].elm;if(j.parentNode==f){for(i=1;i<=e;i++)d.insertAfter(o(j),j);break}}if(g==-1)for(i=1;i<=e;i++)f.insertBefore(o(f.cells[0]),f.cells[0])}}}function r(){e(G,function(a,b){e(a,function(a,e){var f,g,h,i;if(l(a)){a=a.elm,f=c(a,"colspan"),g=c(a,"rowspan");if(f>1||g>1){k(a,"rowSpan",1),k(a,"colSpan",1);for(i=0;i<f-1;i++)d.insertAfter(o(a),a);q(e,b,g-1,f)}}})})}function s(b,c,f){var g,i,l,m,n,o,q,s,b,t,u;b?(pos=C(b),g=pos.x,i=pos.y,l=g+(c-1),m=i+(f-1)):(g=H.x,i=H.y,l=I.x,m=I.y),q=j(g,i),s=j(l,m);if(q&&s&&q.part==s.part){r(),h(),q=j(g,i).elm,k(q,"colSpan",l-g+1),k(q,"rowSpan",m-i+1);for(o=i;o<=m;o++)for(n=g;n<=l;n++){if(!G[o]||!G[o][n])continue;b=G[o][n].elm,b!=q&&(t=a.grep(b.childNodes),e(t,function(a){q.appendChild(a)}),t.length&&(t=a.grep(q.childNodes),u=0,e(t,function(a){a.nodeName=="BR"&&d.getAttrib(a,"data-mce-bogus")&&u++<t.length-1&&q.removeChild(a)})),d.remove(b))}p()}}function t(a){var b,f,h,i,j,m,n,p,q;e(G,function(c,d){e(c,function(c,e){if(l(c)){c=c.elm,j=c.parentNode,m=g(j,!1),b=d;if(a)return!1}});if(a)return!b});for(i=0;i<G[0].length;i++){if(!G[b][i])continue;f=G[b][i].elm;if(f!=h){if(!a){q=c(f,"rowspan");if(q>1){k(f,"rowSpan",q+1);continue}}else if(b>0&&G[b-1][i]){p=G[b-1][i].elm,q=c(p,"rowSpan");if(q>1){k(p,"rowSpan",q+1);continue}}n=o(f),k(n,"colSpan",f.colSpan),m.appendChild(n),h=f}}m.hasChildNodes()&&(a?j.parentNode.insertBefore(m,j):d.insertAfter(m,j))}function u(a){var b,f;e(G,function(c,d){e(c,function(c,d){if(l(c)){b=d;if(a)return!1}});if(a)return!b}),e(G,function(e,g){var h,i,j;if(!e[b])return;h=e[b].elm,h!=f&&(j=c(h,"colspan"),i=c(h,"rowspan"),j==1?a?(h.parentNode.insertBefore(o(h),h),q(b,g,i-1,j)):(d.insertAfter(o(h),h),q(b,g,i-1,j)):k(h,"colSpan",h.colSpan+1),f=h)})}function v(){var b=[];e(G,function(f,g){e(f,function(f,g){l(f)&&a.inArray(b,g)===-1&&(e(G,function(a){var b=a[g].elm,e;e=c(b,"colSpan"),e>1?k(b,"colSpan",e-1):d.remove(b)}),b.push(g))})}),p()}function w(){function a(a){var b,f,g;b=d.getNext(a,"tr"),e(a.cells,function(a){var b=c(a,"rowSpan");b>1&&(k(a,"rowSpan",b-1),f=C(a),q(f.x,f.y,1,1))}),f=C(a.cells[0]),e(G[f.y],function(a){var b;a=a.elm,a!=g&&(b=c(a,"rowSpan"),b>1?k(a,"rowSpan",b-1):d.remove(a),g=a)})}var b;b=m(),e(b.reverse(),function(b){a(b)}),p()}function z(){var a=m();return d.remove(a),p(),a}function A(){var a=m();return e(a,function(b,c){a[c]=g(b,!0)}),a}function B(a,b){var c=m(),f=c[b?0:c.length-1],g=f.cells.length;e(G,function(a){var b;g=0,e(a,function(a,c){a.real&&(g+=a.colspan),a.elm.parentNode==f&&(b=1)});if(b)return!1}),b||a.reverse(),e(a,function(a){var c=a.cells.length,e;for(i=0;i<c;i++)e=a.cells[i],k(e,"colSpan",1),k(e,"rowSpan",1);for(i=c;i<g;i++)a.appendChild(o(a.cells[c-1]));for(i=g;i<c;i++)d.remove(a.cells[i]);b?f.parentNode.insertBefore(a,f):d.insertAfter(a,f)})}function C(a){var b;return e(G,function(c,d){return e(c,function(c,e){if(c.elm==a)return b={x:e,y:d},!1}),!b}),b}function D(a){H=C(a)}function E(){var a,b,c;return b=c=0,e(G,function(a,d){e(a,function(a,e){var f,g;l(a)&&(a=G[d][e],e>b&&(b=e),d>c&&(c=d),a.real&&(f=a.colspan-1,g=a.rowspan-1,f&&e+f>b&&(b=e+f),g&&d+g>c&&(c=d+g)))})}),{x:b,y:c}}function F(a){var b,c,e,f,g,h,i,j;I=C(a);if(H&&I){b=Math.min(H.x,I.x),c=Math.min(H.y,I.y),e=Math.max(H.x,I.x),f=Math.max(H.y,I.y),g=e,h=f;for(y=c;y<=h;y++)a=G[y][b],a.real||b-(a.colspan-1)<b&&(b-=a.colspan-1);for(x=b;x<=g;x++)a=G[c][x],a.real||c-(a.rowspan-1)<c&&(c-=a.rowspan-1);for(y=c;y<=f;y++)for(x=b;x<=e;x++)a=G[y][x],a.real&&(i=a.colspan-1,j=a.rowspan-1,i&&x+i>g&&(g=x+i),j&&y+j>h&&(h=y+j));d.removeClass(d.select("td.mceSelected,th.mceSelected"),"mceSelected");for(y=c;y<=h;y++)for(x=b;x<=g;x++)G[y][x]&&d.addClass(G[y][x].elm,"mceSelected")}}var G,H,I,J;h(),J=d.getParent(f.getStart(),"th,td"),J&&(H=C(J),I=E(),J=j(H.x,H.y)),a.extend(this,{deleteTable:n,split:r,merge:s,insertRow:t,insertCol:u,deleteCols:v,deleteRows:w,cutRows:z,copyRows:A,pasteRows:B,getPos:C,setStartCell:D,setEndCell:F})}var e=a.each;a.create("tinymce.plugins.TablePlugin",{init:function(f,g){function h(a){var b=f.selection,c=f.dom.getParent(a||b.getNode(),"table");if(c)return new d(c,f.dom,b)}function i(){f.getBody().style.webkitUserSelect="",l&&(f.dom.removeClass(f.dom.select("td.mceSelected,th.mceSelected"),"mceSelected"),l=!1)}var j,k,l=!0;e([["table","table.desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0]],function(a){f.addButton(a[0],{title:a[1],cmd:a[2],ui:a[3]})}),a.isIE||f.onClick.add(function(a,b){b=b.target,b.nodeName==="TABLE"&&(a.selection.select(b),a.nodeChanged())}),f.onPreProcess.add(function(a,b){var c,d,e,f=a.dom,g;c=f.select("table",b.node),d=c.length;while(d--){e=c[d],f.setAttrib(e,"data-mce-style","");if(g=f.getAttrib(e,"width"))f.setStyle(e,"width",g),f.setAttrib(e,"width","");if(g=f.getAttrib(e,"height"))f.setStyle(e,"height",g),f.setAttrib(e,"height","")}}),f.onNodeChange.add(function(a,b,c){var d;c=a.selection.getStart(),d=a.dom.getParent(c,"td,th,caption"),b.setActive("table",c.nodeName==="TABLE"||!!d),d&&d.nodeName==="CAPTION"&&(d=0),b.setDisabled("delete_table",!d),b.setDisabled("delete_col",!d),b.setDisabled("delete_table",!d),b.setDisabled("delete_row",!d),b.setDisabled("col_after",!d),b.setDisabled("col_before",!d),b.setDisabled("row_after",!d),b.setDisabled("row_before",!d),b.setDisabled("row_props",!d),b.setDisabled("cell_props",!d),b.setDisabled("split_cells",!d),b.setDisabled("merge_cells",!d)}),f.onInit.add(function(d){function f(a,b,c,d){var e=3,f=a.dom.getParent(b.startContainer,"TABLE"),g,h,i;return f&&(g=f.parentNode),h=b.startContainer.nodeType==e&&b.startOffset==0&&b.endOffset==0&&d&&(c.nodeName=="TR"||c==g),i=(c.nodeName=="TD"||c.nodeName=="TH")&&!d,h||i}function g(b){if(!a.isWebKit)return;var c=b.selection.getRng(),d=b.selection.getNode(),e=b.dom.getParent(c.startContainer,"TD,TH");if(!f(b,c,d,e))return;e||(e=d);var g=e.lastChild;while(g.lastChild)g=g.lastChild;c.setEnd(g,g.nodeValue.length),b.selection.setRng(c)}var m,n,o=d.dom,p;j=d.windowManager,d.onMouseDown.add(function(a,b){b.button!=2&&(i(),n=o.getParent(b.target,"td,th"),m=o.getParent(n,"table"))}),o.bind(d.getDoc(),"mouseover",function(a){var b,c,e=a.target;if(n&&(p||e!=n)&&(e.nodeName=="TD"||e.nodeName=="TH")){c=o.getParent(e,"table"),c==m&&(p||(p=h(c),p.setStartCell(n),d.getBody().style.webkitUserSelect="none"),p.setEndCell(e),l=!0),b=d.selection.getSel();try{b.removeAllRanges?b.removeAllRanges():b.empty()}catch(f){}a.preventDefault()}}),d.onMouseUp.add(function(b,c){var d,e=b.selection,f,g=e.getSel(),h,i,j,k;if(n){p&&(b.getBody().style.webkitUserSelect="");function l(b,c){var e=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?d.setStart(b,0):d.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?d.setStartBefore(b):d.setEndBefore(b);return}}while(b=c?e.next():e.prev())}f=o.select("td.mceSelected,th.mceSelected");if(f.length>0){d=o.createRng(),i=f[0],k=f[f.length-1],d.setStartBefore(i),d.setEndAfter(i),l(i,1),h=new a.dom.TreeWalker(i,o.getParent(f[0],"table"));do if(i.nodeName=="TD"||i.nodeName=="TH"){if(!o.hasClass(i,"mceSelected"))break;j=i}while(i=h.next());l(j),e.setRng(d)}b.nodeChanged(),n=p=m=null}}),d.onKeyUp.add(function(a,b){i()}),d.onKeyDown.add(function(a,b){g(a)}),d.onMouseDown.add(function(a,b){b.button!=2&&g(a)}),d.plugins.table.fixTableCellSelection=g,d&&d.plugins.contextmenu&&d.plugins.contextmenu.onContextMenu.add(function(a,b,c){var e,f=d.selection,g=f.getNode()||d.getBody();d.dom.getParent(c,"td")||d.dom.getParent(c,"th")||d.dom.select("td.mceSelected,th.mceSelected").length?(b.removeAll(),g.nodeName=="A"&&!d.dom.getAttrib(g,"name")&&(b.add({title:"advanced.link_desc",icon:"link",cmd:d.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),b.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),b.addSeparator()),g.nodeName=="IMG"&&g.className.indexOf("mceItem")==-1&&(b.add({title:"advanced.image_desc",icon:"image",cmd:d.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),b.addSeparator()),b.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}}),b.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"}),b.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"}),b.addSeparator(),e=b.addMenu({title:"table.cell"}),e.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"}),e.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"}),e.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"}),e=b.addMenu({title:"table.row"}),e.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"}),e.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),e.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),e.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),e.addSeparator(),e.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"}),e.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"}),e.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!k),e.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!k),e=b.addMenu({title:"table.col"}),e.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),e.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"}),e.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):b.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})});if(a.isWebKit){function q(b,d){function f(c,d,e){var f=c?"previousSibling":"nextSibling",h=b.dom.getParent(d,"tr"),k=h[f];if(k)return q(b,d,k,c),a.dom.Event.cancel(e),!0;var l=b.dom.getParent(h,"table"),m=h.parentNode,n=m.nodeName.toLowerCase();if(n==="tbody"||n===(c?"tfoot":"thead")){var o=g(c,l,m,"tbody");if(o!==null)return i(c,o,d,e)}return j(c,h,f,l,e)}function g(a,c,d,e){var f=b.dom.select(">"+e,c),g=f.indexOf(d);if(a&&g===0||!a&&g===f.length-1)return h(a,c);if(g===-1){var i=d.tagName.toLowerCase()==="thead"?0:f.length-1;return f[i]}return f[g+(a?-1:1)]}function h(a,c){var d=a?"thead":"tfoot",e=b.dom.select(">"+d,c);return e.length!==0?e[0]:null}function i(c,d,e,f){var g=k(d,c);return g&&q(b,e,g,c),a.dom.Event.cancel(f),!0}function j(c,d,e,g,h){var i=g[e];if(i)return l(i),!0;var j=b.dom.getParent(g,"td,th");if(j)return f(c,j,h);var m=k(d,!c);return l(m),a.dom.Event.cancel(h)}function k(a,b){return a&&a[b?"lastChild":"firstChild"]}function l(a){b.selection.setCursorLocation(a,0)}function m(){return u==t.UP||u==t.DOWN}function n(a){var b=a.selection.getNode(),c=a.dom.getParent(b,"tr");return c!==null}function o(a){var b=0,d=a;while(d.previousSibling)d=d.previousSibling,b+=c(d,"colspan");return b}function p(a,b){var d=0,f=0;return e(a.children,function(a,e){d+=c(a,"colspan"),f=e;if(d>b)return!1}),f}function q(a,b,c,d){var e=o(a.dom.getParent(b,"td,th")),f=p(c,e),g=c.childNodes[f],h=k(g,d);l(h||g)}function r(a){var c=b.selection.getNode(),d=b.dom.getParent(c,"td,th"),e=b.dom.getParent(a,"td,th");return d&&d!==e&&s(d,e)}function s(a,c){return b.dom.getParent(a,"TABLE")===b.dom.getParent(c,"TABLE")}var t=a.VK,u=d.keyCode;if(m()&&n(b)){var v=b.selection.getNode();setTimeout(function(){r(v)&&f(!d.shiftKey&&u===t.UP,v,d)},0)}}d.onKeyDown.add(q)}if(!a.isIE){function r(){var a;for(a=d.getBody().lastChild;a&&a.nodeType==3&&!a.nodeValue.length;a=a.previousSibling);a&&a.nodeName=="TABLE"&&d.dom.add(d.getBody(),"p",null,'<br mce_bogus="1" />')}a.isGecko&&d.onKeyDown.add(function(a,c){var d,e,f=a.dom;if(c.keyCode==37||c.keyCode==38)d=a.selection.getRng(),e=f.getParent(d.startContainer,"table"),e&&a.getBody().firstChild==e&&b(d,e)&&(d=f.createRng(),d.setStartBefore(e),d.setEndBefore(e),a.selection.setRng(d),c.preventDefault())}),d.onKeyUp.add(r),d.onSetContent.add(r),d.onVisualAid.add(r),d.onPreProcess.add(function(a,b){var c=b.node.lastChild;c&&c.childNodes.length==1&&c.firstChild.nodeName=="BR"&&a.dom.remove(c)}),r(),d.startContent=d.getContent({format:"raw"})}}),e({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){var b,c,d;d=f.dom.getParent(f.selection.getNode(),"th,td"),d&&(b=d.rowSpan,c=d.colSpan),f.dom.select("td.mceSelected,th.mceSelected").length?a.merge():j.open({url:g+"/merge_cells.htm",width:240+parseInt(f.getLang("table.merge_cells_delta_width",0)),height:110+parseInt(f.getLang("table.merge_cells_delta_height",0)),inline:1},{rows:b,cols:c,onaction:function(b){a.merge(d,b.cols,b.rows)},plugin_url:g})},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){k=a.cutRows()},mceTableCopyRow:function(a){k=a.copyRows()},mceTablePasteRowBefore:function(a){a.pasteRows(k,!0)},mceTablePasteRowAfter:function(a){a.pasteRows(k)},mceTableDelete:function(a){a.deleteTable()}},function(a,b){f.addCommand(b,function(){var b=h();b&&(a(b),f.execCommand("mceRepaint"),i())})}),e({mceInsertTable:function(a){j.open({url:g+"/table.htm",width:400+parseInt(f.getLang("table.table_delta_width",0)),height:320+parseInt(f.getLang("table.table_delta_height",0)),inline:1},{plugin_url:g,action:a?a.action:0})},mceTableRowProps:function(){j.open({url:g+"/row.htm",width:400+parseInt(f.getLang("table.rowprops_delta_width",0)),height:295+parseInt(f.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:g})},mceTableCellProps:function(){j.open({url:g+"/cell.htm",width:400+parseInt(f.getLang("table.cellprops_delta_width",0)),height:295+parseInt(f.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:g})}},function(a,b){f.addCommand(b,function(b,c){a(c)})})}}),a.PluginManager.add("table",a.plugins.TablePlugin)}(tinymce),define("tinymce/jscripts/tiny_mce/plugins/table/editor_plugin_src",function(){}),tinyMCE.addI18n("en.table_dlg",{rules_border:"border",rules_box:"box",rules_vsides:"vsides",rules_rhs:"rhs",rules_lhs:"lhs",rules_hsides:"hsides",rules_below:"below",rules_above:"above",rules_void:"void",rules:"Rules",frame_all:"all",frame_cols:"cols",frame_rows:"rows",frame_groups:"groups",frame_none:"none",frame:"Frame",caption:"Table Caption",missing_scope:"Are you sure you want to continue without specifying a scope for this table header cell. Without it, it may be difficult for some users with disabilities to understand the content or data displayed of the table.",cell_limit:"You've exceeded the maximum number of cells of {$cells}.",row_limit:"You've exceeded the maximum number of rows of {$rows}.",col_limit:"You've exceeded the maximum number of columns of {$cols}.",colgroup:"Col Group",rowgroup:"Row Group",scope:"Scope",tfoot:"Footer",tbody:"Body",thead:"Header",row_all:"Update All Rows in Table",row_even:"Update Even Rows in Table",row_odd:"Update Odd Rows in Table",row_row:"Update Current Row",cell_all:"Update All Cells in Table",cell_row:"Update All Cells in Row",cell_cell:"Update Current Cell",th:"Header",td:"Data",summary:"Summary",bgimage:"Background Image",rtl:"Right to Left",ltr:"Left to Right",mime:"Target MIME Type",langcode:"Language Code",langdir:"Language Direction",style:"Style",id:"ID",merge_cells_title:"Merge Table Cells",bgcolor:"Background Color",bordercolor:"Border Color",align_bottom:"Bottom",align_top:"Top",valign:"Vertical Alignment",cell_type:"Cell Type",cell_title:"Table Cell Properties",row_title:"Table Row Properties",align_middle:"Center",align_right:"Right",align_left:"Left",align_default:"Default",align:"Alignment",border:"Border",cellpadding:"Cell Padding",cellspacing:"Cell Spacing",rows:"Rows",cols:"Columns",height:"Height",width:"Width",title:"Insert/Edit Table",rowtype:"Row Type",advanced_props:"Advanced Properties",general_props:"General Properties",advanced_tab:"Advanced",general_tab:"General",cell_col:"Update all cells in column"}),define("tinymce/jscripts/tiny_mce/plugins/table/langs/en_dlg",function(){}),function(){var a=tinymce.DOM,b=tinymce.dom.Element,c=tinymce.dom.Event,d=tinymce.each,e=tinymce.is;tinymce.create("tinymce.plugins.InlinePopups",{init:function(b,c){b.onBeforeRenderUI.add(function(){b.windowManager=new tinymce.InlineWindowManager(b),a.loadCSS(c+"/skins/"+(b.settings.inlinepopups_skin||"clearlooks2")+"/window.css")})},getInfo:function(){return{longname:"InlinePopups",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/inlinepopups",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.create("tinymce.InlineWindowManager:tinymce.WindowManager",{InlineWindowManager:function(a){var b=this;b.parent(a),b.zIndex=3e5,b.count=0,b.windows={}},open:function(d,e){var f=this,g,h="",i=f.editor,j=0,k=0,l,m,n,o,p,q,r,s;return d=d||{},e=e||{},d.inline?(s=f._frontWindow(),s&&a.get(s.id+"_ifr")&&(s.focussedElement=a.get(s.id+"_ifr").contentWindow.document.activeElement),d.type||(f.bookmark=i.selection.getBookmark(1)),g=a.uniqueId(),l=a.getViewPort(),d.width=parseInt(d.width||320),d.height=parseInt(d.height||240)+(tinymce.isIE?8:0),d.min_width=parseInt(d.min_width||150),d.min_height=parseInt(d.min_height||100),d.max_width=parseInt(d.max_width||2e3),d.max_height=parseInt(d.max_height||2e3),d.left=d.left||Math.round(Math.max(l.x,l.x+l.w/2-d.width/2)),d.top=d.top||Math.round(Math.max(l.y,l.y+l.h/2-d.height/2)),d.movable=d.resizable=!0,e.mce_width=d.width,e.mce_height=d.height,e.mce_inline=!0,e.mce_window_id=g,e.mce_auto_focus=d.auto_focus,f.features=d,f.params=e,f.onOpen.dispatch(f,d,e),d.type&&(h+=" mceModal",d.type&&(h+=" mce"+d.type.substring(0,1).toUpperCase()+d.type.substring(1)),d.resizable=!1),d.statusbar&&(h+=" mceStatusbar"),d.resizable&&(h+=" mceResizable"),d.minimizable&&(h+=" mceMinimizable"),d.maximizable&&(h+=" mceMaximizable"),d.movable&&(h+=" mceMovable"),f._addAll(a.doc.body,["div",{id:g,role:"dialog","aria-labelledby":d.type?g+"_content":g+"_title","class":(i.settings.inlinepopups_skin||"clearlooks2")+(tinymce.isIE&&window.getSelection?" ie9":""),style:"width:100px;height:100px"},["div",{id:g+"_wrapper","class":"mceWrapper"+h},["div",{id:g+"_top","class":"mceTop"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:g+"_title"},d.title||""]],["div",{id:g+"_middle","class":"mceMiddle"},["div",{id:g+"_left","class":"mceLeft",tabindex:"0"}],["span",{id:g+"_content"}],["div",{id:g+"_right","class":"mceRight",tabindex:"0"}]],["div",{id:g+"_bottom","class":"mceBottom"},["div",{"class":"mceLeft"}],["div",{"class":"mceCenter"}],["div",{"class":"mceRight"}],["span",{id:g+"_status"},"Content"]],["a",{"class":"mceMove",tabindex:"-1",href:"javascript:;"}],["a",{"class":"mceMin",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMax",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceMed",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{"class":"mceClose",tabindex:"-1",href:"javascript:;",onmousedown:"return false;"}],["a",{id:g+"_resize_n","class":"mceResize mceResizeN",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_s","class":"mceResize mceResizeS",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_w","class":"mceResize mceResizeW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_e","class":"mceResize mceResizeE",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_nw","class":"mceResize mceResizeNW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_ne","class":"mceResize mceResizeNE",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_sw","class":"mceResize mceResizeSW",tabindex:"-1",href:"javascript:;"}],["a",{id:g+"_resize_se","class":"mceResize mceResizeSE",tabindex:"-1",href:"javascript:;"}]]]),a.setStyles(g,{top:-1e4,left:-1e4}),tinymce.isGecko&&a.setStyle(g,"overflow","auto"),d.type||(j+=a.get(g+"_left").clientWidth,j+=a.get(g+"_right").clientWidth,k+=a.get(g+"_top").clientHeight,k+=a.get(g+"_bottom").clientHeight),a.setStyles(g,{top:d.top,left:d.left,width:d.width+j,height:d.height+k}),r=d.url||d.file,r&&(tinymce.relaxedDomain&&(r+=(r.indexOf("?")==-1?"?":"&")+"mce_rdomain="+tinymce.relaxedDomain),r=tinymce._addVer(r)),d.type?(a.add(g+"_wrapper","a",{id:g+"_ok","class":"mceButton mceOk",href:"javascript:;",onmousedown:"return false;"},"Ok"),d.type=="confirm"&&a.add(g+"_wrapper","a",{"class":"mceButton mceCancel",href:"javascript:;",onmousedown:"return false;"},"Cancel"),a.add(g+"_middle","div",{"class":"mceIcon"}),a.setHTML(g+"_content",d.content.replace("\n","<br />")),c.add(g,"keyup",function(a){var b=27;if(a.keyCode===b)return d.button_func(!1),c.cancel(a)}),c.add(g,"keydown",function(b){var d,e=9;if(b.keyCode===e)return d=a.select("a.mceCancel",g+"_wrapper")[0],d&&d!==b.target?d.focus():a.get(g+"_ok").focus(),c.cancel(b)})):(a.add(g+"_content","iframe",{id:g+"_ifr",src:'javascript:""',frameBorder:0,style:"border:0;width:10px;height:10px"}),a.setStyles(g+"_ifr",{width:d.width,height:d.height}),a.setAttrib(g+"_ifr","src",r)),n=c.add(g,"mousedown",function(b){var d=b.target,e,h;e=f.windows[g],f.focus(g);if(d.nodeName=="A"||d.nodeName=="a"){if(d.className=="mceClose")return f.close(null,g),c.cancel(b);if(d.className=="mceMax")e.oldPos=e.element.getXY(),e.oldSize=e.element.getSize(),h=a.getViewPort(),h.w-=2,h.h-=2,e.element.moveTo(h.x,h.y),e.element.resizeTo(h.w,h.h),a.setStyles(g+"_ifr",{width:h.w-e.deltaWidth,height:h.h-e.deltaHeight}),a.addClass(g+"_wrapper","mceMaximized");else if(d.className=="mceMed")e.element.moveTo(e.oldPos.x,e.oldPos.y),e.element.resizeTo(e.oldSize.w,e.oldSize.h),e.iframeElement.resizeTo(e.oldSize.w-e.deltaWidth,e.oldSize.h-e.deltaHeight),a.removeClass(g+"_wrapper","mceMaximized");else{if(d.className=="mceMove")return f._startDrag(g,b,d.className);if(a.hasClass(d,"mceResize"))return f._startDrag(g,b,d.className.substring(13))}}}),o=c.add(g,"click",function(a){var b=a.target;f.focus(g);if(b.nodeName=="A"||b.nodeName=="a")switch(b.className){case"mceClose":return f.close(null,g),c.cancel(a);case"mceButton mceOk":case"mceButton mceCancel":return d.button_func(b.className=="mceButton mceOk"),c.cancel(a)}}),c.add([g+"_left",g+"_right"],"focus",function(b){var c=a.get(g+"_ifr");if(c){var d=c.contentWindow.document.body,e=a.select(":input:enabled,*[tabindex=0]",d);b.target.id===g+"_left"?e[e.length-1].focus():e[0].focus()}else a.get(g+"_ok").focus()}),q=f.windows[g]={id:g,mousedown_func:n,click_func:o,element:new b(g,{blocker:1,container:i.getContainer()}),iframeElement:new b(g+"_ifr"),features:d,deltaWidth:j,deltaHeight:k},q.iframeElement.on("focus",function(){f.focus(g)}),f.count==0&&f.editor.getParam("dialog_type","modal")=="modal"?(a.add(a.doc.body,"div",{id:"mceModalBlocker","class":(f.editor.settings.inlinepopups_skin||"clearlooks2")+"_modalBlocker",style:{zIndex:f.zIndex-1}}),a.show("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","true")):a.setStyle("mceModalBlocker","z-index",f.zIndex-1),(tinymce.isIE6||/Firefox\/2\./.test(navigator.userAgent)||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceModalBlocker",{position:"absolute",left:l.x,top:l.y,width:l.w-2,height:l.h-2}),a.setAttrib(g,"aria-hidden","false"),f.focus(g),f._fixIELayout(g,1),a.get(g+"_ok")&&a.get(g+"_ok").focus(),f.count++,q):f.parent(d,e)},focus:function(b){var c=this,d;if(d=c.windows[b])d.zIndex=this.zIndex++,d.element.setStyle("zIndex",d.zIndex),d.element.update(),b+="_wrapper",a.removeClass(c.lastId,"mceFocus"),a.addClass(b,"mceFocus"),c.lastId=b,d.focussedElement?d.focussedElement.focus():a.get(b+"_ok")?a.get(d.id+"_ok").focus():a.get(d.id+"_ifr")&&a.get(d.id+"_ifr").focus()},_addAll:function(a,b){var c,d,f=this,g=tinymce.DOM;if(e(b,"string"))a.appendChild(g.doc.createTextNode(b));else if(b.length){a=a.appendChild(g.create(b[0],b[1]));for(c=2;c<b.length;c++)f._addAll(a,b[c])}},_startDrag:function(d,e,f){function g(){if(l)return;h._fixIELayout(d,0),a.add(k.body,"div",{id:"mceEventBlocker","class":"mceEventBlocker "+(h.editor.settings.inlinepopups_skin||"clearlooks2"),style:{zIndex:h.zIndex+1}}),(tinymce.isIE6||tinymce.isIE&&!a.boxModel)&&a.setStyles("mceEventBlocker",{position:"absolute",left:t.x,top:t.y,width:t.w-2,height:t.h-2}),l=new b("mceEventBlocker"),l.update(),p=n.getXY(),q=n.getSize(),u=s.x+p.x-t.x,v=s.y+p.y-t.y,a.add(l.get(),"div",{id:"mcePlaceHolder","class":"mcePlaceHolder",style:{left:u,top:v,width:q.w,height:q.h}}),r=new b("mcePlaceHolder")}var h=this,i,j,k=a.doc,l,m=h.windows[d],n=m.element,o=n.getXY(),p,q,r,s,t,u,v,w,x,y,z,A,B;return s={x:0,y:0},t=a.getViewPort(),t.w-=2,t.h-=2,w=e.screenX,x=e.screenY,y=z=A=B=0,i=c.add(k,"mouseup",function(b){return c.remove(k,"mouseup",i),c.remove(k,"mousemove",j),l&&l.remove(),n.moveBy(y,z),n.resizeBy(A,B),q=n.getSize(),a.setStyles(d+"_ifr",{width:q.w-m.deltaWidth,height:q.h-m.deltaHeight}),h._fixIELayout(d,1),c.cancel(b)}),f!="Move"&&g(),j=c.add(k,"mousemove",function(a){var b,d,e;g(),b=a.screenX-w,d=a.screenY-x;switch(f){case"ResizeW":y=b,A=0-b;break;case"ResizeE":A=b;break;case"ResizeN":case"ResizeNW":case"ResizeNE":f=="ResizeNW"?(y=b,A=0-b):f=="ResizeNE"&&(A=b),z=d,B=0-d;break;case"ResizeS":case"ResizeSW":case"ResizeSE":f=="ResizeSW"?(y=b,A=0-b):f=="ResizeSE"&&(A=b),B=d;break;case"mceMove":y=b,z=d}return A<(e=m.features.min_width-q.w)&&(y!==0&&(y+=A-e),A=e),B<(e=m.features.min_height-q.h)&&(z!==0&&(z+=B-e),B=e),A=Math.min(A,m.features.max_width-q.w),B=Math.min(B,m.features.max_height-q.h),y=Math.max(y,t.x-(u+t.x)),z=Math.max(z,t.y-(v+t.y)),y=Math.min(y,t.w+t.x-(u+q.w+t.x)),z=Math.min(z,t.h+t.y-(v+q.h+t.y)),y+z!==0&&(u+y<0&&(y=0),v+z<0&&(z=0),r.moveTo(u+y,v+z)),A+B!==0&&r.resizeTo(q.w+A,q.h+B),c.cancel(a)}),c.cancel(e)},resizeBy:function(a,b,c){var d=this.windows[c];d&&(d.element.resizeBy(a,b),d.iframeElement.resizeBy(a,b))},close:function(b,d){var e=this,f,g=a.doc,h,d;d=e._findId(d||b);if(!e.windows[d]){e.parent(b);return}e.count--,e.count==0&&(a.remove("mceModalBlocker"),a.setAttrib(a.doc.body,"aria-hidden","false"),e.editor.focus());if(f=e.windows[d])e.onClose.dispatch(e),c.remove(g,"mousedown",f.mousedownFunc),c.remove(g,"click",f.clickFunc),c.clear(d),c.clear(d+"_ifr"),a.setAttrib(d+"_ifr","src",'javascript:""'),f.element.remove(),delete e.windows[d],h=e._frontWindow(),h&&e.focus(h.id)},_frontWindow:function(){var a,b=0;return d(this.windows,function(c){c.zIndex>b&&(a=c,b=c.zIndex)}),a},setTitle:function(b,c){var d;b=this._findId(b);if(d=a.get(b+"_title"))d.innerHTML=a.encode(c)},alert:function(b,c,d){var e=this,f;f=e.open({title:e,type:"alert",button_func:function(a){c&&c.call(a||e,a),e.close(null,f.id)},content:a.encode(e.editor.getLang(b,b)),inline:1,width:400,height:130})},confirm:function(b,c,d){var e=this,f;f=e.open({title:e,type:"confirm",button_func:function(a){c&&c.call(a||e,a),e.close(null,f.id)},content:a.encode(e.editor.getLang(b,b)),inline:1,width:400,height:130})},_findId:function(b){var c=this;return typeof b=="string"?b:(d(c.windows,function(c){var d=a.get(c.id+"_ifr");if(d&&b==d.contentWindow)return b=c.id,!1}),b)},_fixIELayout:function(b,c){var e,f;if(!tinymce.isIE6)return;d(["n","s","w","e","nw","ne","sw","se"],function(d){var e=a.get(b+"_resize_"+d);a.setStyles(e,{width:c?e.clientWidth:"",height:c?e.clientHeight:"",cursor:a.getStyle(e,"cursor",1)}),a.setStyle(b+"_bottom","bottom","-1px"),e=0});if(e=this.windows[b])e.element.hide(),e.element.show(),d(a.select("div,a",b),function(a,b){a.currentStyle.backgroundImage!="none"&&(f=new Image,f.src=a.currentStyle.backgroundImage.replace(/url\(\"(.+)\"\)/,"$1"))}),a.get(b).style.filter=""}}),tinymce.PluginManager.add("inlinepopups",tinymce.plugins.InlinePopups)}(),define("tinymce/jscripts/tiny_mce/plugins/inlinepopups/editor_plugin_src",function(){}),function(){define("compiled/editor/stocktiny",["compiled/editor/markScriptsLoaded","compiled/fn/punch","order!tricktiny","order!tinymce/jscripts/tiny_mce/tiny_mce_src","order!tinymce/jscripts/tiny_mce/langs/en","order!tinymce/jscripts/tiny_mce/themes/advanced/langs/en","order!tinymce/jscripts/tiny_mce/themes/advanced/editor_template","order!tinymce/jscripts/tiny_mce/plugins/media/editor_plugin_src","order!tinymce/jscripts/tiny_mce/plugins/paste/editor_plugin_src","order!tinymce/jscripts/tiny_mce/plugins/paste/langs/en_dlg","order!tinymce/jscripts/tiny_mce/plugins/table/editor_plugin_src","order!tinymce/jscripts/tiny_mce/plugins/table/langs/en_dlg","order!tinymce/jscripts/tiny_mce/plugins/inlinepopups/editor_plugin_src"],function(a,b){return b(tinymce.DOM,"loadCSS",function(){}),a(["themes/advanced/editor_template","themes/advanced/langs/en","plugins/media/editor_plugin","plugins/paste/editor_plugin","plugins/paste/langs/en_dlg","plugins/table/editor_plugin","plugins/table/langs/en_dlg","plugins/inlinepopups/editor_plugin"]),tinymce})}.call(this),define("tinymce/jscripts/tiny_mce/plugins/instructure_contextmenu/editor_plugin",["compiled/editor/stocktiny"],function(a){var b=a.dom.Event,c=a.each,d=a.DOM;a.create("tinymce.plugins.ContextMenu",{init:function(c,d){function e(){h=!h,c.getBody().setAttribute("spellcheck",h),cm=c.controlManager,cm.setActive("instructure_table_mode",!h)}function f(){g._menu&&(g._menu.removeAll(),g._menu.destroy(),b.remove(c.getDoc(),"click",f))}var g=this;g.editor=c,g.onContextMenu=new a.util.Dispatcher(this),c.onContextMenu.add(function(a,c){var d=!1,e=c.target;while(e.nodeName!="TABLE"&&e.nodeName!="BODY"&&e.parentNode)e=e.parentNode;if(e.nodeName=="TABLE"){var i=a.selection.getRng(!0);if(!i||i.startOffset==i.endOffset&&i.startContainer==i.endContainer)d=!0}!c.ctrlKey&&(d||!h)&&(g._getMenu(a).showMenu(c.clientX,c.clientY),b.add(a.getDoc(),"click",f),b.cancel(c))});var h=!1;c.addCommand("toggleSpellCheck",e),c.onInit.add(function(a,b,c){e()}),c.addButton("instructure_table_mode",{title:"Turn on Advanced Mode (right-click table editing, disables spell-check)",cmd:"toggleSpellCheck",image:d+"/img/button.png"}),c.onMouseDown.add(f),c.onKeyDown.add(f)},getInfo:function(){return{longname:"Contextmenu",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/contextmenu",version:a.majorVersion+"."+a.minorVersion}},_getMenu:function(a){var b=this,c=b._menu,e=a.selection,f=e.isCollapsed(),g=e.getNode()||a.getBody(),h,i,j;c&&(c.removeAll(),c.destroy()),i=d.getPos(a.getContentAreaContainer()),j=d.getPos(a.getContainer()),c=a.controlManager.createDropMenu("contextmenu",{offset_x:i.x+a.getParam("contextmenu_offset_x",0),offset_y:i.y+a.getParam("contextmenu_offset_y",0),constrain:1}),b._menu=c,c.add({title:"advanced.cut_desc",icon:"cut",cmd:"Cut"}).setDisabled(f),c.add({title:"advanced.copy_desc",icon:"copy",cmd:"Copy"}).setDisabled(f),c.add({title:"advanced.paste_desc",icon:"paste",cmd:"Paste"});if(g.nodeName=="A"&&!a.dom.getAttrib(g,"name")||!f)c.addSeparator(),c.add({title:"advanced.link_desc",icon:"link",cmd:"instructureLinks",ui:!0}),c.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"});return c.addSeparator(),c.add({title:"advanced.image_desc",icon:"image",cmd:"instructureEmbed",ui:!0}),c.addSeparator(),h=c.addMenu({title:"contextmenu.align"}),h.add({title:"contextmenu.left",icon:"justifyleft",cmd:"JustifyLeft"}),h.add({title:"contextmenu.center",icon:"justifycenter",cmd:"JustifyCenter"}),h.add({title:"contextmenu.right",icon:"justifyright",cmd:"JustifyRight"}),h.add({title:"contextmenu.full",icon:"justifyfull",cmd:"JustifyFull"}),b.onContextMenu.dispatch(b,c,g,f),c}}),a.PluginManager.add("instructure_contextmenu",a.plugins.ContextMenu)}),define("translations/editor",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/mathquill",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{mathquill:{tabs:{arrows:"Flechas",basic:"Básico",delimiters:"Delimitadores",greek:"Griego",miscellaneous:"Misc",operators:"Operadores",relationships:"Relaciones"}}}}})}),define("mathquill",["i18n!mathquill","jquery"],function(a,b){function c(){}function d(){}function e(a,b,c){this.init(a,[b],[c||(a&&a.length>1?a.slice(1):a)])}function f(){}function g(a,c,d){if(!arguments.length)return;var e=this;e.parent=a,e.prev=c||0,e.next=d||0,e.jQinit(e.fold(b(),function(a,b){return b.jQ.add(a)}))}function h(a,c,d,e,f){function h(){t=P;var a=q.selection?"$"+q.selection.latex()+"$":"";s.val(a);if(a)if(s[0].select)s[0].select();else if(document.selection){var b=s[0].createTextRange();b.expand("textedit"),b.select()}}function j(a){return q.seek(b(a.target),a.pageX,a.pageY),(q.prev!==u.prev||q.parent!==u.parent)&&q.selectFrom(u),!1}function k(a){return delete a.target,j(a)}function l(c){u=P,q.blink=v,q.selection||(e?q.show():r.detach()),a.unbind("mousemove",j),b(document).unbind("mousemove",k).unbind("mouseup",l)}function m(){s.focus()}function n(){var a=s.val();a.slice(0,1)==="$"&&a.slice(-1)==="$"?a=a.slice(1,-1):a.match(/^\\/)||(a="\\text{"+a+"}"),q.writeLatex(a).show(),s.val("")}function o(){if(A)return;var a=s.val();if(a){s.val("");for(var b=0;b<a.length;b+=1)q.parent.textInput(a.charAt(b))}else(q.selection||t!==P)&&h()}var p=a.contents().detach();d||a.addClass("mathquill-rendered-math"),c.jQ=a.data(R,{block:c,revert:function(){a.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox mathquill-editor").append(p)}});var q=c.cursor=new N(c);c.renderLatex(p.text());var r=c.textarea=b('<span class="textarea"><textarea></textarea></span>'),s=r.children();f&&i(c,a);var t;c.selectionChanged=function(){t===P&&(t=setTimeout(h)),X(a[0])},a.bind("selectstart.mathquill",function(a){a.target!==s[0]&&a.preventDefault(),a.stopPropagation()});var u,v=q.blink;a.bind("mousedown.mathquill",function(c){q.blink=b.noop,q.seek(b(c.target),c.pageX,c.pageY),u=new g(q.parent,q.prev,q.next),e||a.prepend(r),a.mousemove(j),b(document).mousemove(k).mouseup(l),c.stopPropagation()});if(!e){a.bind("cut paste",!1).bind("copy",h).prepend('<span class="selectable">$'+c.latex()+"$</span>"),s.blur(function(){q.clearSelection(),setTimeout(w)});function w(){r.detach()}return}a.prepend(r),a.addClass("mathquill-editable"),d&&a.addClass("mathquill-textbox"),s.focus(function(a){q.parent||q.appendTo(c),q.parent.jQ.addClass("hasCursor"),q.selection?(q.selection.jQ.removeClass("blur"),setTimeout(c.selectionChanged)):q.show(),a.stopPropagation()}).blur(function(a){q.hide().parent.blur(),q.selection&&q.selection.jQ.addClass("blur"),a.stopPropagation()}),a.bind("focus.mathquill blur.mathquill",function(a){s.trigger(a)}).bind("mousedown.mathquill",function(){setTimeout(m)}).bind("click.mathquill",m).blur(),a.bind("cut",function(a){h(),q.selection&&setTimeout(function(){q.deleteSelection(),q.redraw()}),a.stopPropagation()}).bind("copy",function(a){h(),A=!0,a.stopPropagation()}).bind("paste",function(a){A=!0,setTimeout(n),a.stopPropagation()});var x,y,z,A=!1;a.bind("keydown.mathquill",function(a){x=a,y=!0,q.parent.keydown(a)===!1&&a.preventDefault()}).bind("keypress.mathquill",function(a){if(y)y=!1;else{if(z!==a.which)return;q.parent.keydown(x)}z=a.which,t!==P&&clearTimeout(t),A=!1,setTimeout(o)})}function i(c,d){var e=[{name:a.t("tabs.basic","Basic"),example:"+",button_groups:[["subscript","supscript","frac","sqrt","nthroot","langle","binomial","vector","f","prime"],["+","-","pm","mp","cdot","=","times","div","ast"],["therefore","because"],["sum","prod","coprod","int"],["N","P","Z","Q","R","C","H"]]},{name:a.t("tabs.greek","Greek"),example:"&pi;",button_groups:[["alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega"],["digamma","varepsilon","vartheta","varkappa","varpi","varrho","varsigma","varphi"],["Gamma","Delta","Theta","Lambda","Xi","Pi","Sigma","Upsilon","Phi","Psi","Omega"]]},{name:a.t("tabs.operators","Operators"),example:"&oplus;",button_groups:[["wedge","vee","cup","cap","diamond","bigtriangleup","ominus","uplus","otimes","oplus","bigtriangledown","sqcap","triangleleft","sqcup","triangleright","odot","bigcirc","dagger","ddagger","wr","amalg"]]},{name:a.t("tabs.relationships","Relationships"),example:"&le;",button_groups:[["<",">","equiv","cong","sim","notin","ne","propto","approx","le","ge","in","ni","notni","subset","supset","notsubset","notsupset","subseteq","supseteq","notsubseteq","notsupseteq","models","prec","succ","preceq","succeq","simeq","mid","ll","gg","parallel","bowtie","sqsubset","sqsupset","smile","sqsubseteq","sqsupseteq","doteq","frown","vdash","dashv","exists","varnothing"]]},{name:a.t("tabs.arrows","Arrows"),example:"&hArr;",button_groups:[["longleftarrow","longrightarrow","Longleftarrow","Longrightarrow","longleftrightarrow","updownarrow","Longleftrightarrow","Updownarrow","mapsto","nearrow","hookleftarrow","hookrightarrow","searrow","leftharpoonup","rightharpoonup","swarrow","leftharpoondown","rightharpoondown","nwarrow","downarrow","Downarrow","uparrow","Uparrow","rightarrow","Rightarrow","leftarrow","lArr","leftrightarrow","Leftrightarrow"]]},{name:a.t("tabs.delimiters","Delimiters"),example:"{",button_groups:[["lfloor","rfloor","lceil","rceil","slash","opencurlybrace","closecurlybrace"]]},{name:a.t("tabs.miscellaneous","Misc"),example:"&infin;",button_groups:[["forall","ldots","cdots","vdots","ddots","surd","triangle","ell","top","flat","natural","sharp","wp","bot","clubsuit","diamondsuit","heartsuit","spadesuit","caret","underscore","backslash","vert","perp","nabla","hbar","AA","circ","bullet","setminus","neg","dots","Re","Im","partial","infty","aleph","deg","angle"]]}],f={binomial:'<span style="font-size: 0.5em"><span class="paren" style="font-size: 2.087912087912088em; ">(</span><span class="array"><span><var>n</var></span><span><var>m</var></span></span><span class="paren" style="font-size: 2.087912087912088em; ">)</span></span>',frac:'<span style="font-size: 0.55em; vertical-align: middle" class="fraction"><span class="numerator"><var>n</var></span><span class="denominator"><var>m</var></span><span style="width:0"></span></span>',sqrt:'<span class="block"><span class="sqrt-prefix">&radic;</span><span class="sqrt-stem">&nbsp;</span></span>',nthroot:'<span style="font-size: 0.7em"><sup class="nthroot"><var>n</var></sup><span class="block"><span class="sqrt-prefix">&radic;</span><span class="sqrt-stem">&nbsp;</span></span></span>',supscript:'<sup style="font-size: 0.6em">sup</sup>',subscript:'<sub style="font-size: 0.6em; line-height: 3.5;">sub</sub>',vector:'<span class="array" style="vertical-align: middle; font-size: 0.4em; line-height: 0.9em"><span>1</span><span>2</span><span>3</span></span>'},g=[],h=[];b.each(e,function(a,c){g.push('<li><a href="#'+c.name+'_tab"><span class="mathquill-rendered-math">'+c.example+"</span>"+c.name+"</a></li>");var d=[];b.each(c.button_groups,function(a,c){b.each(c,function(a,b){var c=new V[b](P,b);d.push('<li><a class="mathquill-rendered-math" title="'+(b.match(/^[a-z]+$/i)?"\\"+b:b)+'">'+(f[b]?f[b]:'<span style="line-height: 1.5em">'+c.html_template.join("")+"</span>")+"</a></li>")}),d.push('<li class="mathquill-button-spacer"></li>')}),h.push('<div class="mathquill-tab-pane" id="'+c.name+'_tab"><ul>'+d.join("")+"</ul></div>")}),c.toolbar=b('<div class="mathquill-toolbar"><ul class="mathquill-tab-bar">'+g.join("")+'</ul><div class="mathquill-toolbar-panes">'+h.join("")+"</div></div>").prependTo(d),d.find(".mathquill-tab-bar li a").mouseenter(function(){d.find(".mathquill-tab-bar li").removeClass("mathquill-tab-selected"),d.find(".mathquill-tab-pane").removeClass("mathquill-tab-pane-selected"),b(this).parent().addClass("mathquill-tab-selected"),b(this.href.replace(/.*#/,"#")).addClass("mathquill-tab-pane-selected")}),d.find(".mathquill-tab-bar li:first-child a").mouseenter(),d.find("a.mathquill-rendered-math").mousedown(function(a){a.stopPropagation()}).click(function(){c.cursor.writeLatex(this.title,!0),d.focus()})}function j(){}function k(a){this.init("$"),this.firstChild.cursor=a,this.firstChild.textInput=function(b){if(this.skipTextInput)return;b!=="$"||a.parent!==this?a.write(b):this.isEmpty()?a.insertAfter(this.parent).backspace().insertNew(new H("\\$","$")).show():a.next?a.prev?a.write(b):a.insertBefore(this.parent):a.insertAfter(this.parent)}}function l(){}function m(a,b){return b.prototype=a.prototype,b}function n(a){var b=Array.prototype.slice.call(arguments,1);return m(a,function(){a.apply(this,Array.prototype.concat.apply(b,arguments))})}function o(a,b,c){this.init(a,[b],P,c)}function p(a,b,c,d){this.init(a,[b],[c],d)}function q(a){this.init("\\frac",P,P,a),this.jQ.append('<span style="display:inline-block;width:0">&nbsp;</span>')}function r(){q.apply(this,arguments)}function s(a){this.init("\\sqrt",P,P,a)}function t(a){s.call(this,a),this.jQ=this.firstChild.jQ.detach().add(this.jQ)}function u(a,b,c,d,e){this.init("\\left"+c,['<span class="block"><span class="paren">'+a+'</span><span class="block"></span><span class="paren">'+b+"</span></span>"],[a,b],e),this.end="\\right"+d}function v(a,b,c,d,e){u.apply(this,arguments)}function w(a,b,c){u.call(this,a,b,a,b,c)}function x(a,b,c){v.call(this,a,b,a,b,c)}function y(a){w.call(this,"|","|",a)}function z(a){a instanceof g?this.replacedText=a.remove().jQ.text():typeof a=="string"&&(this.replacedText=a),this.init()}function A(){}function B(a,b){function c(){z.apply(this,arguments)}return Q=c.prototype=new z,Q.cmd=a,Q.html_template=[b],c}function C(a){this.init("\\"),a&&(this.replacedFragment=a.detach(),this.isEmpty=function(){return!1})}function D(a){this.init("\\binom",P,P,a),this.jQ.wrapInner('<span class="array"></span>'),this.blockjQ=this.jQ.children(),this.bracketjQs=b('<span class="paren">(</span>').prependTo(this.jQ).add(b('<span class="paren">)</span>').appendTo(this.jQ))}function E(){D.apply(this,arguments)}function F(a){this.init("\\vector",P,P,a)}function G(a,b){e.call(this,a,"<var>"+(b||a)+"</var>")}function H(a,b){e.call(this,a,"<span>"+(b||a)+"</span>")}function I(a,b){e.call(this,a,'<span class="nonSymbola">'+(b||a)+"</span>")}function J(a,b,c){e.call(this,a,'<span class="binary-operator">'+b+"</span>",c)}function K(a,b){H.apply(this,arguments)}function L(a,b){e.call(this,a,"<big>"+b+"</big>")}function M(a,b){e.call(this,"\\"+b+" ","<span>"+b+"</span>")}function N(a){this.parent=this.root=a;var c=this.jQ=this._jQ=b('<span class="cursor">&zwj;</span>');this.blink=function(){c.toggleClass("blink")}}function O(a,b,c){g.apply(this,arguments)}var P,Q,R="[[mathquill internal data]]",S=Math.min,T=Math.max;Q=c.prototype,Q.prev=0,Q.next=0,Q.parent=0,Q.firstChild=0,Q.lastChild=0,Q.eachChild=function(a){for(var b=this.firstChild;b;b=b.next)if(a.call(this,b)===!1)break;return this},Q.foldChildren=function(a,b){return this.eachChild(function(c){a=b.call(this,a,c)}),a},Q.keydown=function(a){return this.parent.keydown(a)},Q.textInput=function(a){return this.parent.textInput(a)},Q=d.prototype=new c,Q.init=function(a,c,d,e){var f=this;a&&(f.cmd=a),c&&(f.html_template=c),d&&(f.text_template=d),f.jQ=b(f.html_template[0]).data(R,{cmd:f}),f.initBlocks(e)},Q.initBlocks=function(a){var c=this;if(c.html_template.length===1){c.firstChild=c.lastChild=c.jQ.data(R).block=a&&a.blockify()||new f,c.firstChild.parent=c,c.firstChild.jQ=c.jQ.append(c.firstChild.jQ);return}var d,e,g=c.html_template.length;this.firstChild=d=e=a&&a.blockify()||new f,d.parent=c,d.jQ=b(c.html_template[1]).data(R,{block:d}).append(d.jQ).appendTo(c.jQ),d.blur();for(var h=2;h<g;h+=1)d=new f,d.parent=c,d.prev=e,e.next=d,e=d,d.jQ=b(c.html_template[h]).data(R,{block:d}).appendTo(c.jQ),d.blur();c.lastChild=d},Q.latex=function(){return this.foldChildren(this.cmd,function(a,b){return a+"{"+(b.latex()||" ")+"}"})},Q.text_template=[""],Q.text=function(){var a=0;return this.foldChildren(this.text_template[a],function(b,c){a+=1;var d=c.text();return b&&this.text_template[a]==="("&&d[0]==="("&&d.slice(-1)===")"?b+d.slice(1,-1)+this.text_template[a]:b+c.text()+(this.text_template[a]||"")})},Q.insertAt=function(a){var b=this;b.parent=a.parent,b.next=a.next,b.prev=a.prev,a.prev?a.prev.next=b:a.parent.firstChild=b,a.next?a.next.prev=b:a.parent.lastChild=b,a.prev=b,b.jQ.insertBefore(a.jQ),b.respace(),b.next&&b.next.respace(),b.prev&&b.prev.respace(),b.placeCursor(a),a.redraw()},Q.respace=b.noop,Q.placeCursor=function(a){a.appendTo(this.foldChildren(this.firstChild,function(a,b){return a.isEmpty()?a:b}))},Q.isEmpty=function(){return this.foldChildren(!0,function(a,b){return a&&b.isEmpty()})},Q.remove=function(){var a=this,b=a.prev,c=a.next,d=a.parent;return b?b.next=c:d.firstChild=c,c?c.prev=b:d.lastChild=b,a.jQ.remove(),a},Q=e.prototype=new d,Q.initBlocks=b.noop,Q.latex=function(){return this.cmd},Q.text=function(){return this.text_template},Q.placeCursor=b.noop,Q.isEmpty=function(){return!0},Q=f.prototype=new c,Q.latex=function(){return this.foldChildren("",function(a,b){return a+b.latex()})},Q.text=function(){return this.firstChild===this.lastChild?this.firstChild.text():this.foldChildren("(",function(a,b){return a+b.text()})+")"},Q.isEmpty=function(){return this.firstChild===0&&this.lastChild===0},Q.focus=function(){return this.jQ.addClass("hasCursor"),this.isEmpty()&&this.jQ.removeClass("empty"),this},Q.blur=function(){return this.jQ.removeClass("hasCursor"),this.isEmpty()&&this.jQ.addClass("empty"),this},Q=g.prototype,Q.remove=d.prototype.remove,Q.jQinit=function(a){this.jQ=a},Q.each=function(a){for(var b=this.prev.next||this.parent.firstChild;b!==this.next;b=b.next)if(a.call(this,b)===!1)break;return this},Q.fold=function(a,b){return this.each(function(c){a=b.call(this,a,c)}),a},Q.latex=function(){return this.fold("",function(a,b){return a+b.latex()})},Q.blockify=function(){var a=this,b=a.prev,c=a.next,d=a.parent,e=new f,g=e.firstChild=b.next||d.firstChild,h=e.lastChild=c.prev||d.lastChild;return b?b.next=c:d.firstChild=c,c?c.prev=b:d.lastChild=b,g.prev=a.prev=0,h.next=a.next=0,a.parent=e,a.each(function(a){a.parent=e}),e.jQ=a.jQ,e},Q=j.prototype=new f,Q.latex=function(){return f.prototype.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")},Q.text=function(){return this.foldChildren("",function(a,b){return a+b.text()})},Q.renderLatex=function(a){this.jQ.children().slice(1).remove(),this.firstChild=this.lastChild=0,this.cursor.appendTo(this).writeLatex(a),this.blur()},Q.keydown=function(a){a.ctrlKey=a.ctrlKey||a.metaKey;switch(a.originalEvent&&a.originalEvent.keyIdentifier||a.which){case 8:case"Backspace":case"U+0008":if(a.ctrlKey)while(this.cursor.prev||this.cursor.selection)this.cursor.backspace();else this.cursor.backspace();break;case 27:case"Esc":case"U+001B":case 9:case"Tab":case"U+0009":if(a.ctrlKey)break;var b=this.cursor.parent;if(a.shiftKey){if(b===this.cursor.root)return this.skipTextInput=!0;b.prev?this.cursor.appendTo(b.prev):this.cursor.insertBefore(b.parent)}else{if(b===this.cursor.root)return this.skipTextInput=!0;b.next?this.cursor.prependTo(b.next):this.cursor.insertAfter(b.parent)}this.cursor.clearSelection();break;case 13:case"Enter":break;case 35:case"End":if(a.shiftKey)while(this.cursor.next||a.ctrlKey&&this.cursor.parent!==this)this.cursor.selectRight();else this.cursor.clearSelection().appendTo(a.ctrlKey?this:this.cursor.parent);break;case 36:case"Home":if(a.shiftKey)while(this.cursor.prev||a.ctrlKey&&this.cursor.parent!==this)this.cursor.selectLeft();else this.cursor.clearSelection().prependTo(a.ctrlKey?this:this.cursor.parent);break;case 37:case"Left":if(a.ctrlKey)break;a.shiftKey?this.cursor.selectLeft():this.cursor.moveLeft();break;case 38:case"Up":if(a.ctrlKey)break;if(a.shiftKey)if(this.cursor.prev)while(this.cursor.prev)this.cursor.selectLeft();else this.cursor.selectLeft();else this.cursor.parent.prev?this.cursor.clearSelection().appendTo(this.cursor.parent.prev):this.cursor.prev?this.cursor.clearSelection().prependTo(this.cursor.parent):this.cursor.parent!==this&&this.cursor.clearSelection().insertBefore(this.cursor.parent.parent);break;case 39:case"Right":if(a.ctrlKey)break;a.shiftKey?this.cursor.selectRight():this.cursor.moveRight();break;case 40:case"Down":if(a.ctrlKey)break;if(a.shiftKey)if(this.cursor.next)while(this.cursor.next)this.cursor.selectRight();else this.cursor.selectRight();else this.cursor.parent.next?this.cursor.clearSelection().prependTo(this.cursor.parent.next):this.cursor.next?this.cursor.clearSelection().appendTo(this.cursor.parent):this.cursor.parent!==this&&this.cursor.clearSelection().insertAfter(this.cursor.parent.parent);break;case 46:case"Del":case"U+007F":if(a.ctrlKey)while(this.cursor.next||this.cursor.selection)this.cursor.deleteForward();else this.cursor.deleteForward();break;case 65:case"A":case"U+0041":if(a.ctrlKey&&!a.shiftKey&&!a.altKey){if(this!==this.cursor.root)return this.parent.keydown(a);this.cursor.clearSelection().appendTo(this);while(this.cursor.prev)this.cursor.selectLeft();break};default:return this.skipTextInput=!1,!0}return this.skipTextInput=!0,!1},Q.textInput=function(a){this.skipTextInput||this.cursor.write(a)},Q=k.prototype=new d,Q.html_template=['<span class="mathquill-rendered-math"></span>'],Q.initBlocks=function(){this.firstChild=this.lastChild=this.jQ.data(R).block=new j,this.firstChild.parent=this,this.firstChild.jQ=this.jQ},Q.latex=function(){return"$"+this.firstChild.latex()+"$"},Q=l.prototype=new f,Q.renderLatex=function(a){var b=this,c=b.cursor;b.jQ.children().slice(1).remove(),b.firstChild=b.lastChild=0,c.show().appendTo(b),a=a.match(/(?:\\\$|[^$])+|\$(?:\\\$|[^$])*\$|\$(?:\\\$|[^$])*$/g)||"";for(var d=0;d<a.length;d+=1){var e=a[d];if(e[0]==="$"){e[-1+e.length]==="$"&&e[-2+e.length]!=="\\"?e=e.slice(1,-1):e=e.slice(1);var f=new k(c);c.insertNew(f),f.firstChild.renderLatex(e),c.show().insertAfter(f)}else for(var g=0;g<e.length;g+=1)this.cursor.insertNew(new H(e[g]))}},Q.keydown=j.prototype.keydown,Q.textInput=function(a){if(this.skipTextInput)return;this.cursor.deleteSelection(),a==="$"?this.cursor.insertNew(new k(this.cursor)):this.cursor.insertNew(new H(a))};var U={},V={},W,X=b.noop,Y=document.createElement("div"),Z=Y.style,$={transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1},_;for(var ba in $)if(ba in Z){_=ba;break}_?W=function(a,b,c){a.css(_,"scale("+b+","+c+")")}:"filter"in Z?(X=function(a){a.className=a.className},W=function(a,c,d){function e(){a.css("marginRight",(1+a.width())*(c-1)/c+"px")}c/=1+(d-1)/2,a.addClass("matrixed").css({fontSize:d+"em",marginTop:"-.1em",filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+c+",SizingMethod='auto expand')"}),e();var f=setInterval(e);b(window).load(function(){clearTimeout(f),e()})}):W=function(a,b,c){a.css("fontSize",c+"em")},m(d,o),V.mathrm=n(o,"\\mathrm",'<span class="roman font"></span>'),V.mathit=n(o,"\\mathit",'<i class="font"></i>'),V.mathbf=n(o,"\\mathbf",'<b class="font"></b>'),V.mathsf=n(o,"\\mathsf",'<span class="sans-serif font"></span>'),V.mathtt=n(o,"\\mathtt",'<span class="monospace font"></span>'),V.underline=n(o,"\\underline",'<span class="underline"></span>'),V.overline=V.bar=n(o,"\\overline",'<span class="overline"></span>'),Q=p.prototype=new d,Q.latex=function(){var a=this.firstChild.latex();return a.length===1?this.cmd+a:this.cmd+"{"+(a||" ")+"}"},Q.redraw=function(){this.prev&&this.prev.respace(),this.prev instanceof p||(this.respace(),this.next&&!(this.next instanceof p)&&this.next.respace())},Q.respace=function(){this.prev.cmd==="\\int "||this.prev instanceof p&&this.prev.cmd!=this.cmd&&this.prev.prev&&this.prev.prev.cmd==="\\int "?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit")),this.respaced=this.prev instanceof p&&this.prev.cmd!=this.cmd&&!this.prev.respaced;if(this.respaced){var a=+this.jQ.css("fontSize").slice(0,-2),b=this.prev.jQ.outerWidth();thisWidth=this.jQ.outerWidth(),this.jQ.css({left:(this.limit&&this.cmd==="_"?-0.25:0)-b/a+"em",marginRight:.1-S(thisWidth,b)/a+"em"})}else this.limit&&this.cmd==="_"?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});return this.next instanceof p&&this.next.respace(),this},V.subscript=V._=m(p,function(a){p.call(this,"_","<sub></sub>","_",a)}),V.superscript=V.supscript=V["^"]=m(p,function(a){p.call(this,"^","<sup></sup>","**",a)}),Q=q.prototype=new d,Q.html_template=['<span class="fraction"></span>','<span class="numerator"></span>','<span class="denominator"></span>'],Q.text_template=["(","/",")"],V.frac=V.dfrac=V.cfrac=V.fraction=q,Q=r.prototype=new q,Q.placeCursor=function(a){if(this.firstChild.isEmpty()){var b=this.prev;while(b&&!(b instanceof J||b instanceof z||b instanceof L))b=b.prev;b instanceof L&&b.next instanceof p&&(b=b.next,b.next instanceof p&&b.next.cmd!=b.cmd&&(b=b.next));if(b!==this.prev){var c=(new g(this.parent,b,this)).blockify();c.jQ=this.firstChild.jQ.empty().removeClass("empty").append(c.jQ).data(R,{block:c}),c.next=this.lastChild,c.parent=this,this.firstChild=this.lastChild.prev=c}}a.appendTo(this.lastChild)},V.over=U["/"]=r,Q=s.prototype=new d,Q.html_template=['<span class="block"><span class="sqrt-prefix">&radic;</span></span>','<span class="sqrt-stem"></span>'],Q.text_template=["sqrt(",")"],Q.redraw=function(){var a=this.lastChild.jQ;W(a.prev(),1,a.innerHeight()/+a.css("fontSize").slice(0,-2)-.1)},Q.optional_arg_command="nthroot",V.sqrt=V["√"]=s,Q=t.prototype=new s,Q.html_template=['<span class="block"><span class="sqrt-prefix">&radic;</span></span>','<sup class="nthroot"></sup>','<span class="sqrt-stem"></span>'],Q.text_template=["sqrt[","](",")"],Q.latex=function(){return"\\sqrt["+this.firstChild.latex()+"]{"+this.lastChild.latex()+"}"},V.nthroot=t,Q=u.prototype=new d,Q.initBlocks=function(a){this.firstChild=this.lastChild=a&&a.blockify()||new f,this.firstChild.parent=this,this.firstChild.jQ=this.jQ.children(":eq(1)").data(R,{block:this.firstChild}).append(this.firstChild.jQ);var b=this.blockjQ=this.firstChild.jQ;this.bracketjQs=b.prev().add(b.next())},Q.latex=function(){return this.cmd+this.firstChild.latex()+this.end},Q.redraw=function(){var a=this.blockjQ.outerHeight()/+this.blockjQ.css("fontSize").slice(0,-2);W(this.bracketjQs,S(1+.2*(a-1),1.2),1.05*a)},V.lbrace=U["{"]=m(u,function(a){u.call(this,"{","}","\\{","\\}",a)}),V.langle=V.lang=m(u,function(a){u.call(this,"&lang;","&rang;","\\langle ","\\rangle ",a)}),Q=v.prototype=new u,Q.placeCursor=function(a){!this.next&&this.parent.parent&&this.parent.parent.end===this.end&&this.firstChild.isEmpty()?a.backspace().insertAfter(this.parent.parent):(this.firstChild.blur(),this.redraw())},V.rbrace=U["}"]=m(v,function(a){v.call(this,"{","}","\\{","\\}",a)}),V.rangle=V.rang=m(v,function(a){v.call(this,"&lang;","&rang;","\\langle ","\\rangle ",a)}),w.prototype=u.prototype,V.lparen=U["("]=m(w,function(a){w.call(this,"(",")",a)}),V.lbrack=V.lbracket=U["["]=m(w,function(a){w.call(this,"[","]",a)}),x.prototype=v.prototype,V.rparen=U[")"]=m(x,function(a){x.call(this,"(",")",a)}),V.rbrack=V.rbracket=U["]"]=m(x,function(a){x.call(this,"[","]",a)}),Q=y.prototype=new w,Q.placeCursor=function(a){!this.next&&this.parent.parent&&this.parent.parent.end===this.end&&this.firstChild.isEmpty()?a.backspace().insertAfter(this.parent.parent):a.appendTo(this.firstChild)},V.lpipe=V.rpipe=U["|"]=y,Q=z.prototype=new d,Q.cmd="\\text",Q.html_template=['<span class="text"></span>'],Q.text_template=['"','"'],Q.initBlocks=function(){this.firstChild=this.lastChild=this.jQ.data(R).block=new A,this.firstChild.parent=this,this.firstChild.jQ=this.jQ.append(this.firstChild.jQ)},Q.placeCursor=function(a){(this.cursor=a).appendTo(this.firstChild);if(this.replacedText)for(var b=0;b<this.replacedText.length;b+=1)this.write(this.replacedText.charAt(b))},Q.write=function(a){this.cursor.insertNew(new H(a))},Q.keydown=function(a){return!this.cursor.selection&&(a.which===8&&!this.cursor.prev||a.which===46&&!this.cursor.next)?(this.isEmpty()&&this.cursor.insertAfter(this),!1):this.parent.keydown(a)},Q.textInput=function(a){this.cursor.deleteSelection();if(a!=="$")this.write(a);else if(this.isEmpty())this.cursor.insertAfter(this).backspace().insertNew(new H("\\$","$"));else if(!this.cursor.next)this.cursor.insertAfter(this);else if(!this.cursor.prev)this.cursor.insertBefore(this);else{var b=new z(new g(this.firstChild,this.cursor.prev));b.placeCursor=function(a){this.prev=0,delete this.placeCursor,this.placeCursor(a)},b.firstChild.focus=function(){return this},this.cursor.insertAfter(this).insertNew(b),b.prev=this,this.cursor.insertBefore(b),delete b.firstChild.focus}},Q=A.prototype=new f,Q.blur=function(){this.jQ.removeClass("hasCursor");if(this.isEmpty()){var a=this.parent,b=a.cursor;b.parent===this?this.jQ.addClass("empty"):(b.hide(),a.remove(),b.next===a?b.next=a.next:b.prev===a&&(b.prev=a.prev),b.show().redraw())}return this},Q.focus=function(){f.prototype.focus.call(this);var a=this.parent;if(a.next.cmd===a.cmd){var b=this,c=a.cursor,d=a.next.firstChild;d.eachChild(function(a){a.parent=b,a.jQ.appendTo(b.jQ)}),this.lastChild?this.lastChild.next=d.firstChild:this.firstChild=d.firstChild,d.firstChild.prev=this.lastChild,this.lastChild=d.lastChild,d.parent.remove(),c.prev?c.insertAfter(c.prev):c.prependTo(this),c.redraw()}else if(a.prev.cmd===a.cmd){var c=a.cursor;c.prev?a.prev.firstChild.focus():c.appendTo(a.prev.firstChild)}return this},U.$=V.text=V.textnormal=V.textrm=V.textup=V.textmd=z,V.em=V.italic=V.italics=V.emph=V.textit=V.textsl=B("\\textit",'<i class="text"></i>'),V.strong=V.bold=V.textbf=B("\\textbf",'<b class="text"></b>'),V.sf=V.textsf=B("\\textsf",'<span class="sans-serif text"></span>'),V.tt=V.texttt=B("\\texttt",'<span class="monospace text"></span>'),V.textsc=B("\\textsc",'<span style="font-variant:small-caps" class="text"></span>'),V.uppercase=B("\\uppercase",'<span style="text-transform:uppercase" class="text"></span>'),V.lowercase=B("\\lowercase",'<span style="text-transform:lowercase" class="text"></span>'),Q=C.prototype=new d,Q.html_template=['<span class="latex-command-input">\\</span>'],Q.text_template=["\\"],Q.placeCursor=function(a){this.cursor=a.appendTo(this.firstChild),this.replacedFragment&&(this.jQ=this.jQ.add(this.replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(a){return b(a.target=this.nextSibling).trigger(a),!1}).insertBefore(this.jQ)))},Q.latex=function(){return"\\"+this.firstChild.latex()+" "},Q.keydown=function(a){return a.which===9||a.which===13?(this.renderCommand(),!1):this.parent.keydown(a)},Q.textInput=function(a){if(a.match(/[a-z:]/i)){this.cursor.deleteSelection(),this.cursor.insertNew(new H(a));return}this.renderCommand();if(a===" "||a==="\\"&&this.firstChild.isEmpty())return;this.cursor.parent.textInput(a)},Q.renderCommand=function(){this.jQ=this.jQ.last(),this.remove(),this.next?this.cursor.insertBefore(this.next):this.cursor.appendTo(this.parent);var a=this.firstChild.latex();if(a)this.cursor.insertCmd(a,this.replacedFragment);else{var b=new H("\\backslash ","\\");this.cursor.insertNew(b),this.replacedFragment&&this.replacedFragment.remove()}},U["\\"]=C,Q=D.prototype=new d,Q.html_template=['<span class="block"></span>',"<span></span>","<span></span>"],Q.text_template=["choose(",",",")"],Q.redraw=u.prototype.redraw,V.binom=V.binomial=D,Q=E.prototype=new D,Q.placeCursor=r.prototype.placeCursor,V.choose=E,Q=F.prototype=new d,Q.html_template=['<span class="array"></span>',"<span></span>"],Q.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(a,b){return a.push(b.latex()),a}).join("\\\\")+"\\end{matrix}"},Q.text=function(){return"["+this.foldChildren([],function(a,b){return a.push(b.text()),a}).join()+"]"},Q.placeCursor=function(a){this.cursor=a.appendTo(this.firstChild)},Q.keydown=function(a){var c=this.cursor.parent;if(c.parent===this){if(a.which===13){var d=new f;return d.parent=this,d.jQ=b("<span></span>").data(R,{block:d}).insertAfter(c.jQ),c.next?c.next.prev=d:this.lastChild=d,d.next=c.next,c.next=d,d.prev=c,this.cursor.appendTo(d).redraw(),!1}if(a.which===9&&!a.shiftKey&&!c.next){if(c.isEmpty())return c.prev?(this.cursor.insertAfter(this),delete c.prev.next,this.lastChild=c.prev,c.jQ.remove(),this.cursor.redraw(),!1):this.parent.keydown(a);var d=new f;return d.parent=this,d.jQ=b("<span></span>").data(R,{block:d}).appendTo(this.jQ),this.lastChild=d,c.next=d,d.prev=c,this.cursor.appendTo(d).redraw(),!1}if(a.which===8){if(c.isEmpty())return c.prev?(this.cursor.appendTo(c.prev),c.prev.next=c.next):(this.cursor.insertBefore(this),this.firstChild=c.next),c.next?c.next.prev=c.prev:this.lastChild=c.prev,c.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.cursor.redraw(),!1;if(!this.cursor.prev)return!1}}return this.parent.keydown(a)},V.vector=F,V.editable=m(k,function(){this.init("\\editable"),h(this.jQ,this.firstChild,!1,!0);var a;this.placeCursor=function(b){a=b.appendTo(this.firstChild)},this.firstChild.blur=function(){if(a.prev!==this.parent)return;delete this.blur,this.cursor.appendTo(this),f.prototype.blur.call(this)},this.latex=function(){return this.firstChild.latex()},this.text=function(){return this.firstChild.text()}}),V.f=n(e,"f",'<var class="florin">&fnof;</var><span style="display:inline-block;width:0">&nbsp;</span>'),Q=G.prototype=new e,Q.text=function(){var a=this.cmd;return this.prev&&!(this.prev instanceof G)&&!(this.prev instanceof J)&&(a="*"+a),this.next&&!(this.next instanceof J)&&this.next.cmd!=="^"&&(a+="*"),a},H.prototype=e.prototype,V[":"]=U[" "]=n(H,"\\:"," "),V.prime=U["'"]=n(H,"'","&prime;"),I.prototype=e.prototype,V["@"]=I,V["&"]=n(I,"\\&","&"),V["%"]=n(I,"\\%","%"),V.alpha=V.beta=V.gamma=V.delta=V.zeta=V.eta=V.theta=V.iota=V.kappa=V.mu=V.nu=V.xi=V.rho=V.sigma=V.tau=V.chi=V.psi=V.omega=m(e,function(a,b){G.call(this,"\\"+b+" ","&"+b+";")}),V.phi=n(G,"\\phi ","&#981;"),V.phiv=V.varphi=n(G,"\\varphi ","&phi;"),V.epsilon=n(G,"\\epsilon ","&#1013;"),V.epsiv=V.varepsilon=n(G,"\\varepsilon ","&epsilon;"),V.piv=V.varpi=n(G,"\\varpi ","&piv;"),V.sigmaf=V.sigmav=V.varsigma=n(G,"\\varsigma ","&sigmaf;"),V.thetav=V.vartheta=V.thetasym=n(G,"\\vartheta ","&thetasym;"),V.upsilon=V.upsi=n(G,"\\upsilon ","&upsilon;"),V.gammad=V.Gammad=V.digamma=n(G,"\\digamma ","&#989;"),V.kappav=V.varkappa=n(G,"\\varkappa ","&#1008;"),V.rhov=V.varrho=n(G,"\\varrho ","&#1009;"),V.pi=V["π"]=n(I,"\\pi ","&pi;"),V.lambda=n(I,"\\lambda ","&lambda;"),V.Upsilon=V.Upsi=V.upsih=V.Upsih=n(e,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>'),V.Gamma=V.Delta=V.Theta=V.Lambda=V.Xi=V.Pi=V.Sigma=V.Phi=V.Psi=V.Omega=V.forall=m(e,function(a,b){H.call(this,"\\"+b+" ","&"+b+";")}),J.prototype=new e,Q=K.prototype=new J,Q.respace=function(){return this.prev?this.prev instanceof J&&this.next&&!(this.next instanceof J)?this.jQ[0].className="unary-operator":this.jQ[0].className="binary-operator":this.jQ[0].className="",this},V["+"]=n(K,"+","+"),V["–"]=V["-"]=n(K,"-","&minus;"),V["±"]=V.pm=V.plusmn=V.plusminus=n(K,"\\pm ","&plusmn;"),V.mp=V.mnplus=V.minusplus=n(K,"\\mp ","&#8723;"),U["*"]=V.sdot=V.cdot=n(J,"\\cdot ","&middot;"),V["="]=n(J,"=","="),V["<"]=n(J,"<","&lt;"),V[">"]=n(J,">","&gt;"),V.notin=V.sim=V.cong=V.equiv=V.oplus=V.otimes=m(J,function(a,b){J.call(this,"\\"+b+" ","&"+b+";")}),V.times=m(J,function(a,b){J.call(this,"\\times ","&times;","[x]")}),V["÷"]=V.div=V.divide=V.divides=n(J,"\\div ","&divide;","[/]"),V["≠"]=V.ne=V.neq=n(J,"\\ne ","&ne;"),V.ast=V.star=V.loast=V.lowast=n(J,"\\ast ","&lowast;"),V.therefor=V.therefore=n(J,"\\therefore ","&there4;"),V.cuz=V.because=n(J,"\\because ","&#8757;"),V.prop=V.propto=n(J,"\\propto ","&prop;"),V["≈"]=V.asymp=V.approx=n(J,"\\approx ","&asymp;"),V.lt=n(J,"<","&lt;"),V.gt=n(J,">","&gt;"),V["≤"]=V.le=V.leq=n(J,"\\le ","&le;"),V["≥"]=V.ge=V.geq=n(J,"\\ge ","&ge;"),V.isin=V["in"]=n(J,"\\in ","&isin;"),V.ni=V.contains=n(J,"\\ni ","&ni;"),V.notni=V.niton=V.notcontains=V.doesnotcontain=n(J,"\\not\\ni ","&#8716;"),V.sub=V.subset=n(J,"\\subset ","&sub;"),V.sup=V.supset=V.superset=n(J,"\\supset ","&sup;"),V.nsub=V.notsub=V.nsubset=V.notsubset=n(J,"\\not\\subset ","&#8836;"),V.nsup=V.notsup=V.nsupset=V.notsupset=V.nsuperset=V.notsuperset=n(J,"\\not\\supset ","&#8837;"),V.sube=V.subeq=V.subsete=V.subseteq=n(J,"\\subseteq ","&sube;"),V.supe=V.supeq=V.supsete=V.supseteq=V.supersete=V.superseteq=n(J,"\\supseteq ","&supe;"),V.nsube=V.nsubeq=V.notsube=V.notsubeq=V.nsubsete=V.nsubseteq=V.notsubsete=V.notsubseteq=n(J,"\\not\\subseteq ","&#8840;"),V.nsupe=V.nsupeq=V.notsupe=V.notsupeq=V.nsupsete=V.nsupseteq=V.notsupsete=V.notsupseteq=V.nsupersete=V.nsuperseteq=V.notsupersete=V.notsuperseteq=n(J,"\\not\\supseteq ","&#8841;"),L.prototype=new e,V["∑"]=V.sum=V.summation=n(L,"\\sum ","&sum;"),V["∏"]=V.prod=V.product=n(L,"\\prod ","&prod;"),V.coprod=V.coproduct=n(L,"\\coprod ","&#8720;"),V["∫"]=V["int"]=V.integral=n(L,"\\int ","&int;"),V.N=V.naturals=V.Naturals=n(H,"\\mathbb{N}","&#8469;"),V.P=V.primes=V.Primes=V.projective=V.Projective=V.probability=V.Probability=n(H,"\\mathbb{P}","&#8473;"),V.Z=V.integers=V.Integers=n(H,"\\mathbb{Z}","&#8484;"),V.Q=V.rationals=V.Rationals=n(H,"\\mathbb{Q}","&#8474;"),V.R=V.reals=V.Reals=n(H,"\\mathbb{R}","&#8477;"),V.C=V.complex=V.Complex=V.complexes=V.Complexes=V.complexplane=V.Complexplane=V.ComplexPlane=n(H,"\\mathbb{C}","&#8450;"),V.H=V.Hamiltonian=V.quaternions=V.Quaternions=n(H,"\\mathbb{H}","&#8461;"),V.quad=V.emsp=n(H,"\\quad ","    "),V.qquad=n(H,"\\qquad ","        "),V.diamond=n(H,"\\diamond ","&#9671;"),V.bigtriangleup=n(H,"\\bigtriangleup ","&#9651;"),V.ominus=n(H,"\\ominus ","&#8854;"),V.uplus=n(H,"\\uplus ","&#8846;"),V.bigtriangledown=n(H,"\\bigtriangledown ","&#9661;"),V.sqcap=n(H,"\\sqcap ","&#8851;"),V.triangleleft=n(H,"\\triangleleft ","&#8882;"),V.sqcup=n(H,"\\sqcup ","&#8852;"),V.triangleright=n(H,"\\triangleright ","&#8883;"),V.odot=n(H,"\\odot ","&#8857;"),V.bigcirc=n(H,"\\bigcirc ","&#9711;"),V.dagger=n(H,"\\dagger ","&#0134;"),V.ddagger=n(H,"\\ddagger ","&#135;"),V.wr=n(H,"\\wr ","&#8768;"),V.amalg=n(H,"\\amalg ","&#8720;"),V.models=n(H,"\\models ","&#8872;"),V.prec=n(H,"\\prec ","&#8826;"),V.succ=n(H,"\\succ ","&#8827;"),V.preceq=n(H,"\\preceq ","&#8828;"),V.succeq=n(H,"\\succeq ","&#8829;"),V.simeq=n(H,"\\simeq ","&#8771;"),V.mid=n(H,"\\mid ","&#8739;"),V.ll=n(H,"\\ll ","&#8810;"),V.gg=n(H,"\\gg ","&#8811;"),V.parallel=n(H,"\\parallel ","&#8741;"),V.bowtie=n(H,"\\bowtie ","&#8904;"),V.sqsubset=n(H,"\\sqsubset ","&#8847;"),V.sqsupset=n(H,"\\sqsupset ","&#8848;"),V.smile=n(H,"\\smile ","&#8995;"),V.sqsubseteq=n(H,"\\sqsubseteq ","&#8849;"),V.sqsupseteq=n(H,"\\sqsupseteq ","&#8850;"),V.doteq=n(H,"\\doteq ","&#8784;"),V.frown=n(H,"\\frown ","&#8994;"),V.vdash=n(H,"\\vdash ","&#8870;"),V.dashv=n(H,"\\dashv ","&#8867;"),V.longleftarrow=n(H,"\\longleftarrow ","&#8592;"),V.longrightarrow=n(H,"\\longrightarrow ","&#8594;"),V.Longleftarrow=n(H,"\\Longleftarrow ","&#8656;"),V.Longrightarrow=n(H,"\\Longrightarrow ","&#8658;"),V.longleftrightarrow=n(H,"\\longleftrightarrow ","&#8596;"),V.updownarrow=n(H,"\\updownarrow ","&#8597;"),V.Longleftrightarrow=n(H,"\\Longleftrightarrow ","&#8660;"),V.Updownarrow=n(H,"\\Updownarrow ","&#8661;"),V.mapsto=n(H,"\\mapsto ","&#8614;"),V.nearrow=n(H,"\\nearrow ","&#8599;"),V.hookleftarrow=n(H,"\\hookleftarrow ","&#8617;"),V.hookrightarrow=n(H,"\\hookrightarrow ","&#8618;"),V.searrow=n(H,"\\searrow ","&#8600;"),V.leftharpoonup=n(H,"\\leftharpoonup ","&#8636;"),V.rightharpoonup=n(H,"\\rightharpoonup ","&#8640;"),V.swarrow=n(H,"\\swarrow ","&#8601;"),V.leftharpoondown=n(H,"\\leftharpoondown ","&#8637;"),V.rightharpoondown=n(H,"\\rightharpoondown ","&#8641;"),V.nwarrow=n(H,"\\nwarrow ","&#8598;"),V.ldots=n(H,"\\ldots ","&#8230;"),V.cdots=n(H,"\\cdots ","&#8943;"),V.vdots=n(H,"\\vdots ","&#8942;"),V.ddots=n(H,"\\ddots ","&#8944;"),V.surd=n(H,"\\surd ","&#8730;"),V.triangle=n(H,"\\triangle ","&#9653;"),V.ell=n(H,"\\ell ","&#8467;"),V.top=n(H,"\\top ","&#8868;"),V.flat=n(H,"\\flat ","&#9837;"),V.natural=n(H,"\\natural ","&#9838;"),V.sharp=n(H,"\\sharp ","&#9839;"),V.wp=n(H,"\\wp ","&#8472;"),V.bot=n(H,"\\bot ","&#8869;"),V.clubsuit=n(H,"\\clubsuit ","&#9827;"),V.diamondsuit=n(H,"\\diamondsuit ","&#9826;"),V.heartsuit=n(H,"\\heartsuit ","&#9825;"),V.spadesuit=n(H,"\\spadesuit ","&#9824;"),V.oint=n(H,"\\oint ","&#8750;"),V.bigcap=n(H,"\\bigcap ","&#8745;"),V.bigcup=n(H,"\\bigcup ","&#8746;"),V.bigsqcup=n(H,"\\bigsqcup ","&#8852;"),V.bigvee=n(H,"\\bigvee ","&#8744;"),V.bigwedge=n(H,"\\bigwedge ","&#8743;"),V.bigodot=n(H,"\\bigodot ","&#8857;"),V.bigotimes=n(H,"\\bigotimes ","&#8855;"),V.bigoplus=n(H,"\\bigoplus ","&#8853;"),V.biguplus=n(H,"\\biguplus ","&#8846;"),V.lfloor=n(H,"\\lfloor ","&#8970;"),V.rfloor=n(H,"\\rfloor ","&#8971;"),V.lceil=n(H,"\\lceil ","&#8968;"),V.rceil=n(H,"\\rceil ","&#8969;"),V.slash=n(H,"\\slash ","&#47;"),V.opencurlybrace=n(H,"\\opencurlybrace ","&#123;"),V.closecurlybrace=n(H,"\\closecurlybrace ","&#125;"),V.caret=n(H,"\\caret ","^"),V.underscore=n(H,"\\underscore ","_"),V.backslash=n(H,"\\backslash ","\\"),V.vert=n(H,"|"),V.perp=V.perpendicular=n(H,"\\perp ","&perp;"),V.nabla=V.del=n(H,"\\nabla ","&nabla;"),V.hbar=n(H,"\\hbar ","&#8463;"),V.AA=V.Angstrom=V.angstrom=n(H,"\\text\\AA ","&#8491;"),V.ring=V.circ=V.circle=n(H,"\\circ ","&#8728;"),V.bull=V.bullet=n(H,"\\bullet ","&bull;"),V.setminus=V.smallsetminus=n(H,"\\setminus ","&#8726;"),V.not=V["¬"]=V.neg=n(H,"\\neg ","&not;"),V["…"]=V.dots=V.ellip=V.hellip=V.ellipsis=V.hellipsis=n(H,"\\dots ","&hellip;"),V.converges=V.darr=V.dnarr=V.dnarrow=V.downarrow=n(H,"\\downarrow ","&darr;"),V.dArr=V.dnArr=V.dnArrow=V.Downarrow=n(H,"\\Downarrow ","&dArr;"),V.diverges=V.uarr=V.uparrow=n(H,"\\uparrow ","&uarr;"),V.uArr=V.Uparrow=n(H,"\\Uparrow ","&uArr;"),V.to=n(J,"\\to ","&rarr;"),V.rarr=V.rightarrow=n(H,"\\rightarrow ","&rarr;"),V.implies=n(J,"\\Rightarrow ","&rArr;"),V.rArr=V.Rightarrow=n(H,"\\Rightarrow ","&rArr;"),V.gets=n(J,"\\gets ","&larr;"),V.larr=V.leftarrow=n(H,"\\leftarrow ","&larr;"),V.impliedby=n(J,"\\Leftarrow ","&lArr;"),V.lArr=V.Leftarrow=n(H,"\\Leftarrow ","&lArr;"),V.harr=V.lrarr=V.leftrightarrow=n(H,"\\leftrightarrow ","&harr;"),V.iff=n(J,"\\Leftrightarrow ","&hArr;"),V.hArr=V.lrArr=V.Leftrightarrow=n(H,"\\Leftrightarrow ","&hArr;"),V.Re=V.Real=V.real=n(H,"\\Re ","&real;"),V.Im=V.imag=V.image=V.imagin=V.imaginary=V.Imaginary=n(H,"\\Im ","&image;"),V.part=V.partial=n(H,"\\partial ","&part;"),V.inf=V.infin=V.infty=V.infinity=n(H,"\\infty ","&infin;"),V.alef=V.alefsym=V.aleph=V.alephsym=n(H,"\\aleph ","&alefsym;"),V.xist=V.xists=V.exist=V.exists=n(H,"\\exists ","&exist;"),V.and=V.land=V.wedge=n(H,"\\wedge ","&and;"),V.or=V.lor=V.vee=n(H,"\\vee ","&or;"),V.o=V.O=V.empty=V.emptyset=V.oslash=V.Oslash=V.nothing=V.varnothing=n(J,"\\varnothing ","&empty;"),V.cup=V.union=n(H,"\\cup ","&cup;"),V.cap=V.intersect=V.intersection=n(H,"\\cap ","&cap;"),V.deg=V.degree=n(H,"^\\circ ","&deg;"),V.ang=V.angle=n(H,"\\angle ","&ang;"),Q=M.prototype=new e,Q.respace=function(){this.jQ[0].className=this.next instanceof p||this.next instanceof u?"":"non-italicized-function"},V.ln=V.lg=V.log=V.span=V.proj=V.det=V.dim=V.min=V.max=V.mod=V.lcm=V.gcd=V.gcf=V.hcf=V.lim=M,function(){var a=["sin","cos","tan","sec","cosec","csc","cotan","cot"];for(var b in a)V[a[b]]=V[a[b]+"h"]=V["a"+a[b]]=V["arc"+a[b]]=V["a"+a[b]+"h"]=V["arc"+a[b]+"h"]=M}(),Q=N.prototype,Q.prev=0,Q.next=0,Q.parent=0,Q.show=function(){return this.jQ=this._jQ.removeClass("blink"),"intervalId"in this?clearInterval(this.intervalId):(this.next?this.selection&&this.selection.prev===this.prev?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this.next.jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},Q.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=b(),this},Q.redraw=function(){for(var a=this.parent;a;a=a.parent)a.redraw&&a.redraw()},Q.insertAt=function(a,b,c){var d=this.parent;this.parent=a,this.prev=b,this.next=c,d.blur()},Q.insertBefore=function(a){return this.insertAt(a.parent,a.prev,a),this.parent.jQ.addClass("hasCursor"),this.jQ.insertBefore(a.jQ.first()),this},Q.insertAfter=function(a){return this.insertAt(a.parent,a,a.next),this.parent.jQ.addClass("hasCursor"),this.jQ.insertAfter(a.jQ.last()),this},Q.prependTo=function(a){return this.insertAt(a,0,a.firstChild),a.textarea?this.jQ.insertAfter(a.textarea):this.jQ.prependTo(a.jQ),a.focus(),this},Q.appendTo=function(a){return this.insertAt(a,a.lastChild,0),this.jQ.appendTo(a.jQ),a.focus(),this},Q.hopLeft=function(){return this.jQ.insertBefore(this.prev.jQ.first()),this.next=this.prev,this.prev=this.prev.prev,this},Q.hopRight=function(){return this.jQ.insertAfter(this.next.jQ.last()),this.prev=this.next,this.next=this.next.next,this},Q.moveLeft=function(){return this.selection?this.insertBefore(this.selection.prev.next||this.parent.firstChild).clearSelection():this.prev?this.prev.lastChild?this.appendTo(this.prev.lastChild):this.hopLeft():this.parent.prev?this.appendTo(this.parent.prev):this.parent!==this.root&&this.insertBefore(this.parent.parent),this.show()},Q.moveRight=function(){return this.selection?this.insertAfter(this.selection.next.prev||this.parent.lastChild).clearSelection():this.next?this.next.firstChild?this.prependTo(this.next.firstChild):this.hopRight():this.parent.next?this.prependTo(this.parent.next):this.parent!==this.root&&this.insertAfter(this.parent.parent),this.show()},Q.seek=function(a,b,c){var d=this.clearSelection();if(a.hasClass("empty"))return d.prependTo(a.data(R).block),d;var e=a.data(R);if(e){if(e.cmd&&!e.block)return a.outerWidth()>2*(b-a.offset().left)?d.insertBefore(e.cmd):d.insertAfter(e.cmd),d}else a=a.parent(),e=a.data(R),e||(e={block:d.root});e.cmd?d.insertAfter(e.cmd):d.appendTo(e.block);var f=d.jQ.offset().left-b,g;do d.moveLeft(),g=f,f=d.jQ.offset().left-b;while(f>0&&(d.prev||d.parent!==d.root));return-f>g&&d.moveRight(),d},Q.resolveNonItalicizedFunctions=function(){var a=this.prev,b=a?a.latex().replace(/ $/,""):null,c=0,d={ln:1,lg:1,log:1,span:1,proj:1,det:1,dim:1,min:1,max:1,mod:1,lcm:1,gcd:1,gcf:1,hcf:1,lim:1,sin:1,sinh:1,asin:1,arcsin:1,asinh:1,arcsinh:1,cos:1,cosh:1,acos:1,arccos:1,acosh:1,arccosh:1,tan:1,tanh:1,atan:1,arctan:1,atanh:1,arctanh:1,sec:1,sech:1,asec:1,arcsec:1,asech:1,arcsech:1,cosec:1,cosech:1,acosec:1,arccosec:1,acosech:1,arccosech:1,csc:1,csch:1,acsc:1,arccsc:1,acsch:1,arccsch:1,cotan:1,cotanh:1,acotan:1,arccotan:1,acotanh:1,arccotanh:1,cot:1,coth:1,acot:1,arccot:1,acoth:1,arccoth:1},e="";while(a&&b){var f=b.match(/^[a-z]$/);if(!(f||e&&b[0]=="\\"&&d[b.substring(1)]&&d[(b+e).substring(1)]))return;c++,e=b.replace(/\\/,"")+e,a=a.prev,b=a?a.latex().replace(/ $/,""):null;if(!f||(!a||!b.match(/^[a-z]$/))&&d[e]){for(var g=0;g<c;g++)this.selectLeft();this.writeLatex("\\"+e);return}}},Q.writeLatex=function(a,b){return this.deleteSelection(),a=a&&a.match(/\\text\{([^}]|\\\})*\}|\\:|\\[a-z]*|[^\s]/ig)||0,function c(d){while(a.length){var e=a.shift();if(!e||e==="}"||e==="]")return;var f;if(e.slice(0,6)==="\\text{"){f=new z(e.slice(6,-1)),d.insertNew(f).insertAfter(f);continue}if(e==="\\left"||e==="\\right"){e=a.shift(),e==="\\"&&(e=a.shift()),d.insertCh(e),f=d.prev||d.parent.parent;if(d.prev)return;a.unshift("{")}else if(/^\\[a-z:]+$/i.test(e)){e=e.slice(1);var f=V[e];if(f)f=new f(P,e),a[0]==="["&&f.optional_arg_command&&(e=f.optional_arg_command,f=new V[e](P,e)),d.insertNew(f);else{f=new z(e),d.insertNew(f).insertAfter(f);continue}}else e.match(/[a-eg-zA-Z]/)?f=new G(e):(f=V[e])?f=new f:f=new H(e),d.insertNew(f);f.eachChild(function(b){d.appendTo(b);var e=a.shift();if(!e)return!1;e==="{"||e==="["?c(d):d.insertCh(e)}),b||d.insertAfter(f)}}(this),this.hide()},Q.write=function(a){var b=this.show().insertCh(a);return this.root.toolbar&&this.resolveNonItalicizedFunctions(),b},Q.insertCh=function(a){this.selection&&(this.prev=this.selection.prev,this.next=this.selection.next);var b;return a.match(/^[a-eg-zA-Z]$/)?b=new G(a):(b=U[a]||V[a])?b=new b(this.selection,a):b=new H(a),this.selection&&(b instanceof e&&this.selection.remove(),delete this.selection),this.insertNew(b)},Q.insertNew=function(a){return a.insertAt(this),this},Q.insertCmd=function(a,b){var c=V[a];return c?(c=new c(b,a),this.insertNew(c),c instanceof e&&b&&b.remove()):(c=new z(a),c.firstChild.focus=function(){return delete this.focus,this},this.insertNew(c).insertAfter(c),b&&b.remove()),this},Q.unwrapGramp=function(){var a=this.parent.parent,b=a.parent,c=a.prev,d=this;a.eachChild(function(d){if(d.isEmpty())return;d.eachChild(function(c){c.parent=b,c.jQ.insertBefore(a.jQ.first())}),d.firstChild.prev=c,c?c.next=d.firstChild:b.firstChild=d.firstChild,c=d.lastChild}),c.next=a.next,a.next?a.next.prev=c:b.lastChild=c;if(!this.next)if(this.prev)this.next=this.prev.next;else while(!this.next){this.parent=this.parent.next;if(this.parent)this.next=this.parent.firstChild;else{this.next=a.next,this.parent=b;break}}this.next?this.insertBefore(this.next):this.appendTo(b),a.jQ.remove(),a.prev&&a.prev.respace(),a.next&&a.next.respace()},Q.backspace=function(){if(!this.deleteSelection())if(this.prev)this.prev.isEmpty()?this.prev=this.prev.remove().prev:this.selectLeft();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertAfter(this.parent.parent).backspace();this.unwrapGramp()}return this.prev&&this.prev.respace(),this.next&&this.next.respace(),this.redraw(),this},Q.deleteForward=function(){if(!this.deleteSelection())if(this.next)this.next.isEmpty()?this.next=this.next.remove().next:this.selectRight();else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insertBefore(this.parent.parent).deleteForward();this.unwrapGramp()}return this.prev&&this.prev.respace(),this.next&&this.next.respace(),this.redraw(),this},Q.selectFrom=function(a){var b=this,c=a;d:for(;;){for(var e=this;e!==b.parent.parent;e=e.parent.parent)if(e.parent===c.parent){g=e,h=c;break d}for(var f=a;f!==c.parent.parent;f=f.parent.parent)if(b.parent===f.parent){g=b,h=f;break d}b.parent.parent&&(b=b.parent.parent),c.parent.parent&&(c=c.parent.parent)}var g,h,i;if(g.next!==h){for(var j=g;j;j=j.next)if(j===h.prev){i=!0;break}i||(i=h,h=g,g=i)}this.hide().selection=new O(g.parent,g.prev,h.next),this.insertAfter(h.next.prev||h.parent.lastChild),this.root.selectionChanged()},Q.selectLeft=function(){if(this.selection)if(this.selection.prev===this.prev)this.prev?(this.hopLeft().next.jQ.prependTo(this.selection.jQ),this.selection.prev=this.prev):this.parent!==this.root&&this.insertBefore(this.parent.parent).selection.levelUp();else{this.prev.jQ.insertAfter(this.selection.jQ),this.hopLeft().selection.next=this.next;if(this.selection.prev===this.prev){this.deleteSelection();return}}else{if(this.prev)this.hopLeft();else if(this.parent!==this.root)this.insertBefore(this.parent.parent);else return;this.hide().selection=new O(this.parent,this.prev,this.next.next)}this.root.selectionChanged()},Q.selectRight=function(){if(this.selection)if(this.selection.next===this.next)this.next?(this.hopRight().prev.jQ.appendTo(this.selection.jQ),this.selection.next=this.next):this.parent!==this.root&&this.insertAfter(this.parent.parent).selection.levelUp();else{this.next.jQ.insertBefore(this.selection.jQ),this.hopRight().selection.prev=this.prev;if(this.selection.next===this.next){this.deleteSelection();return}}else{if(this.next)this.hopRight();else if(this.parent!==this.root)this.insertAfter(this.parent.parent);else return;this.hide().selection=new O(this.parent,this.prev.prev,this.next)}this.root.selectionChanged()},Q.clearSelection=function(){return this.show().selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged()),this},Q.deleteSelection=function(){return this.show().selection?(this.prev=this.selection.prev,this.next=this.selection.next,this.selection.remove(),delete this.selection,this.root.selectionChanged(),!0):!1},Q=O.prototype=new g,Q.jQinit=function(a){this.jQ=a.wrapAll('<span class="selection"></span>').parent()},Q.levelUp=function(){return this.clear().jQinit(this.parent.parent.jQ),this.prev=this.parent.parent.prev,this.next=this.parent.parent.next,this.parent=this.parent.parent.parent,this},Q.clear=function(){return this.jQ.replaceWith(this.jQ.children()),this},Q.blockify=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),g.prototype.blockify.call(this)},Q.detach=function(){var a=g.prototype.blockify.call(this);return this.blockify=function(){return this.jQ.replaceWith(a.jQ=this.jQ=this.jQ.children()),a},this},b.fn.mathquill=function(a,c){switch(a){case"redraw":return this.find(":not(:has(:first))").each(function(){var a=b(this).data(R);a&&(a.cmd||a.block)&&N.prototype.redraw.call(a.cmd||a.block)}),this;case"revert":return this.each(function(){var a=b(this).data(R);a&&a.revert&&a.revert()});case"latex":if(arguments.length>1)return this.each(function(){var a=b(this).data(R);a&&a.block&&a.block.renderLatex&&a.block.renderLatex(c)});var d=this.data(R);return d&&d.block&&d.block.latex();case"text":var d=this.data(R);return d&&d.block&&d.block.text();case"html":return this.html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"");case"write":if(arguments.length>1)return this.each(function(){var a=b(this).data(R),d=a&&a.block,e=d&&d.cursor;e&&e.writeLatex(c).parent.blur()});case"cmd":if(arguments.length>1)return this.each(function(){var a=b(this).data(R),d=a&&a.block,e=d&&d.cursor;e&&(e.show(),/^\\[a-z]+$/i.test(c)?(e.selection&&(e.prev=e.selection.prev,e.next=e.selection.next),e.insertCmd(c.slice(1),e.selection),delete e.selection):e.insertCh(c),e.hide().parent.blur())});default:var e=a==="textbox",f=a==="editor",g=f||e||a==="editable",i=e?l:j;return this.each(function(){h(b(this),new i,e,g,f)})}},b(function(){b(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable"),b(".mathquill-editor").mathquill("editor"),b(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox"),b(".mathquill-embedded-latex").mathquill()})}),define("tinymce/jscripts/tiny_mce/plugins/instructure_equation/editor_plugin",["compiled/editor/stocktiny","jquery","jqueryui/dialog","mathquill"],function(a,b){function c(a){var d="",e;for(var f=0;a[f];f++)e=a[f],e.nodeType===3||e.nodeType===4?d+=e.nodeValue:e.nodeName=="IMG"&&e.className=="equation_image"?d+=b(e).attr("alt"):e.nodeType!==8&&(d+=c(e.childNodes));return d}b('<style>@font-face { font-family: Symbola; src: url(/font/Symbola.eot?v1); src: local("Symbola Regular"), local("Symbola"),url(/font/Symbola.ttf?v1) format("truetype"),url(/font/Symbola.otf?v1) format("opentype"),url(/font/Symbola.svg?v1#webfont7MzkO3xs) format("svg");}</style>').appendTo("head"),b("<span class='mathquill-embedded-latex' style='position: absolute; z-index: -1; top: 0; left: 0; width: 0; height: 0; overflow: hidden;'>a</span>").appendTo("body").mathquill(),a.create("tinymce.plugins.InstructureEquation",{init:function(a,d){a.addCommand("instructureEquation",function(){var d=b("<span>"+a.selection.getContent()+"</span>"),e=c(d).replace(/^\s+|\s+$/g,"");e||(e="1 + 1");var f=b("#"+a.id),g=b("#instructure_equation_prompt");if(g.length==0){var g=b(document.createElement("div"));g.append("Use the equation editor below (or type/paste in your equation in LaTeX format). <form id='instructure_equation_prompt_form' style='margin-top: 5px;'><span class='mathquill-editor' style='width: auto; font-size: 1.5em'></span><div class='actions' style='padding-top: 10px'><button type='submit' class='button' style='float: right'>Insert Equation</button></div></form>"),g.find("#instructure_equation_prompt_form").submit(function(a){var c=g.data("editor");a.preventDefault(),a.stopPropagation();var d=b(this).find(".mathquill-editor").mathquill("latex"),e="/equation_images/"+encodeURIComponent(escape(d)),f=b(document.createElement("div")),h=b(document.createElement("img"));h.attr("src",e).attr("alt",d).attr("title",d).attr("class","equation_image"),f.append(h),g.data("restore_caret")(),c.editorBox("insert_code",f.html()),g.dialog("close")}),g.attr("id","instructure_equation_prompt"),b("body").append(g)}var h=a.selection.getBookmark();g.data("restore_caret",function(){a.selection.moveToBookmark(h)}),g.data("editor",f),g.dialog("close").dialog({autoOpen:!1,width:690,minWidth:690,minHeight:300,resizable:!0,height:"auto",title:"Embed Math Equation"}).dialog("open"),g.find(".mathquill-editor").mathquill("revert").addClass("mathquill-editor").mathquill("editor").mathquill("write",e).focus()}),a.addButton("instructure_equation",{title:"Insert Math Equation",cmd:"instructureEquation",image:d+"/img/button.gif"}),a.onNodeChange.add(function(a,b,c){c.nodeName=="IMG"&&c.className=="equation_image"?b.setActive("instructure_equation",!0):b.setActive("instructure_equation",!1)})},getInfo:function(){return{longname:"InstructureEquation",author:"Brian Whitmer",authorurl:"http://www.instructure.com",infourl:"http://www.instructure.com",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("instructure_equation",a.plugins.InstructureEquation)}),define("tinymce/jscripts/tiny_mce/plugins/instructure_equella/editor_plugin",["compiled/editor/stocktiny","jquery","jqueryui/dialog"],function(a,b){a.create("tinymce.plugins.InstructureEquella",{init:function(a,c){a.addCommand("instructureEquella",function(){var c=b("#equella_dialog"),d=b("#equella_endpoint_url").attr("href"),e=b.trim(b("#equella_action").text()||"")||"selectOrAdd",f=b("#equella_callback_url").attr("href"),g=b("#equella_cancel_url").attr("href");if(!d||!f||!g){alert("Equella is not properly configured for this account, please notify your system administrator.");return}var h=Math.max(Math.min(b(window).height()-100,550),100);c.length||(c=b('<div id="equella_dialog" style="padding: 0; overflow-y: hidden;"/>').hide().html("<div class='teaser' style='width: 800px; margin-bottom: 10px; display: none;'></div><iframe style='background: url(/images/ajax-loader-medium-444.gif) no-repeat left top; width: 800px; height: "+h+"px; border: 0;' src='about:blank' borderstyle='0'/>").appendTo("body").dialog({autoOpen:!1,width:"auto",resizable:!0,resizeStart:function(){b(this).find("iframe").each(function(){b('<div class="fix_for_resizing_over_iframe" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e7}).css(b(this).offset()).appendTo("body")})},resizeStop:function(){b(".fix_for_resizing_over_iframe").remove()},resize:function(){b(this).find("iframe").add(".fix_for_resizing_over_iframe").height(b(this).height()).width(b(this).width())},close:function(){c.find("iframe").attr("src","about:blank")},title:"Embed content from Equella"}).bind("equella_ready",function(d,e){var f=c.data("editor")||a,g=a.selection.getContent();if(g)a.execCommand("mceInsertLink",!1,{title:e.name,href:e.url,"class":"equella_content_link"});else{var h=b("<div><a/></div>");h.find("a").attr("title",e.name).attr("href",e.url).attr("class","equella_content_link").text(e.name),a.execCommand("mceInsertContent",!1,h.html())}b("#equella_dialog").dialog("close")}));var i=b("#equella_teaser").html();c.find(".teaser").hide(),i&&c.find(".teaser").html(i).show();var j=d;j=j+"?method=lms&returnprefix=eq_&action="+e,j=j+"&returnurl="+encodeURIComponent(f),j=j+"&cancelurl="+encodeURIComponent(g),c.data("editor",a),c.dialog("close").dialog("open"),c.find("iframe").attr("src",j)}),a.addButton("instructure_equella",{title:"Insert Equella Links",cmd:"instructureEquella",image:c+"/button.gif"})},getInfo:function(){return{longname:"InstructureEquella",author:"Brian Whitmer",authorurl:"http://www.instructure.com",infourl:"http://www.instructure.com",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("instructure_equella",a.plugins.InstructureEquella)}),define("tinymce/jscripts/tiny_mce/plugins/instructure_embed/editor_plugin",["compiled/editor/stocktiny","i18n!editor","jquery","str/htmlEscape","jqueryui/dialog","jquery.instructure_misc_helpers"],function(a,b,c,d){function e(){k=c("<div/>",{html:r.instructions+"<form id='instructure_embed_prompt_form' style='margin-top: 5px;'><table class='formtable'><tr><td>"+r.url+"</td><td><input type='text' class='prompt' style='width: 250px;' value='http://'/></td></tr><tr><td class='nobr'>"+r.alt_text+"</td><td><input type='text' class='alt_text' style='width: 150px;' value=''/></td></tr><tr><td colspan='2' style='text-align: right;'><input type='submit' value='Embed Image'/></td></tr></table></form><div class='actions'></div>"}).hide(),n=k.find(".alt_text"),o=k.find(".actions"),m=k.find(".prompt"),p=c("<a/>",{"class":"flickr_search_link",text:r.search_flickr,href:"#"}),m.bind("keyup",h),o.delegate(".embed_image_link","click",g),p.click(f),k.append(p).find("#instructure_embed_prompt_form").submit(g),c("body").append(k),k.dialog({autoOpen:!1,width:425,title:r.embed_external,open:function(){m.select()}}),q=!0}function f(a){a.preventDefault(),k.dialog("close"),c.findImageForService("flickr_creative_commons",function(a){var b=INST.htmlEscape(a.title),c='<a href="'+a.link_url+'"><img src="'+a.image_url+'" title="'+b+'"alt="'+b+'" style="max-width: 500; max-height: 500"></a>';k.dialog("close"),l.editorBox("insert_code",c)})}function g(a){var b=INST.htmlEscape(n.val()||""),c=INST.htmlEscape(m.val());a.preventDefault(),l.editorBox("insert_code","<img src='"+c+"' alt='"+b+"'/>"),k.dialog("close")}function h(a){var b=m.val();return b.match(/\.(gif|png|jpg|jpeg)$/)?j(b):i()}function i(){o.empty()}function j(a){var b=c("<div/>"),d=c("<img/>");b.css("textAlign","center").text(r.loading),o.empty(),o.append(b),d.attr({src:a,title:r.click_to_embed}).addClass("embed_image_link").css("cursor","pointer").bind({load:function(){var a=d[0];d.height(a.height<200?a.height:100),b.empty().append(d)},error:function(){b.text(r.image_not_found)}})}var k,l,m,n,o,p,q=!1,r={click_to_embed:b.t("click_to_embed","Click to embed the image"),instructions:INST.htmlEscape(b.t("instructions","Paste or type the URL of the image you'd like to embed:")),url:INST.htmlEscape(b.t("url","URL:")),alt_text:INST.htmlEscape(b.t("alt_text","Alternate Text:")),search_flickr:b.t("search_flickr","Search flickr creative commons"),loading:b.t("loading","Loading..."),embed_external:b.t("embed_external","Embed External Image"),embed_image:INST.htmlEscape(b.t("embed_image","Embed Image")),image_not_found:b.t("image_not_found","Image not found, please try a new URL")};a.create("tinymce.plugins.InstructureEmbed",{init:function(a,b){var d=c("#"+a.id);a.addCommand("instructureEmbed",function(a){q||e(),l=d,k.dialog("open"),a==="flickr"&&p.click()}),a.addButton("instructure_embed",{title:r.embed_image,cmd:"instructureEmbed",image:b+"/img/button.gif"})},getInfo:function(){return{longname:"InstructureEmbed",author:"Brian Whitmer",authorurl:"http://www.instructure.com",infourl:"http://www.instructure.com",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("instructure_embed",a.plugins.InstructureEmbed)}),define("tinymce/jscripts/tiny_mce/plugins/instructure_external_tools/editor_plugin",["compiled/editor/stocktiny","i18n!editor","jquery","str/htmlEscape","jquery.dropdownList","jquery.instructure_misc_helpers","jqueryui/dialog","jquery.instructure_misc_plugins"],function(a,b,c,d){var e={embed_from_external_tool:b.t("embed_from_external_tool",'"Embed content from External Tool"'),more_external_tools:INST.htmlEscape(b.t("more_external_tools","More External Tools"))};a.create("tinymce.plugins.InstructureExternalTools",{init:function(a,b){function d(b){var d=Math.max(Math.min(c(window).height()-100,550),100);f||(f=c('<div id="external_tool_button_dialog" style="padding: 0; overflow-y: hidden;"/>').hide().html("<div class='teaser' style='width: 800px; margin-bottom: 10px; display: none;'></div><iframe id='external_tool_button_frame' style='width: 800px; height: "+d+"px; border: 0;' src='/images/ajax-loader-medium-444.gif' borderstyle='0'/>").appendTo("body").dialog({autoOpen:!1,width:"auto",resizable:!0,close:function(){f.find("iframe").attr("src","/images/ajax-loader-medium-444.gif")},title:e.embed_from_external_tool}).bind("dialogresize",function(){c(this).find("iframe").add(".fix_for_resizing_over_iframe").height(c(this).height()).width(c(this).width())}).bind("dialogresizestop",function(){c(".fix_for_resizing_over_iframe").remove()}).bind("dialogresizestart",function(){c(this).find("iframe").each(function(){c('<div class="fix_for_resizing_over_iframe" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e7}).css(c(this).offset()).appendTo("body")})}).bind("selection",function(b,d){var e=f.data("editor")||a;if(d.embed_type=="basic_lti")if(c("#external_tool_retrieve_url").attr("href")){var g=c.replaceTags(c("#external_tool_retrieve_url").attr("href"),"url",d.url);c("#"+a.id).editorBox("create_link",{url:g,title:d.title,text:d.text})}else console.log("cannot embed basic lti links in this context");else if(d.embed_type=="image"){var h=c("<div/>").append(c("<img/>",{src:d.url,alt:d.alt}).css({width:d.width,height:d.height})).html();c("#"+a.id).editorBox("insert_code",h)}else if(d.embed_type=="link")c("#"+a.id).editorBox("create_link",{url:d.url,title:d.title,text:d.text,target:d.target=="_blank"?"_blank":null});else if(d.embed_type=="iframe"){var h=c("<div/>").append(c("<iframe/>",{src:d.url,title:d.title}).css({width:d.width,height:d.height})).html();c("#"+a.id).editorBox("insert_code",h)}else d.embed_type=="rich_content"?c("#"+a.id).editorBox("insert_code",d.html):d.embed_type=="error"&&d.message?alert(d.message):console.log("unrecognized embed type: "+d.embed_type);c("#external_tool_button_dialog iframe").attr("src","about:blank"),c("#external_tool_button_dialog").dialog("close")})),f.dialog("option","title","Embed content from "+b.name),f.dialog("close").dialog("option","width",b.width||800).dialog("option","height",b.height||d||400).dialog("open"),f.triggerHandler("dialogresize"),f.data("editor",a);var g=c.replaceTags(c("#context_external_tool_resource_selection_url").attr("href"),"id",b.id);f.find("iframe").attr("src",g)}if(!window||!window.INST||!window.INST.editorButtons||!window.INST.editorButtons.length)return;var f=null,g=[];for(var h in INST.editorButtons){var i=INST.editorButtons[h];INST.editorButtons.length>INST.maxVisibleEditorButtons&&h>=INST.maxVisibleEditorButtons-1?g.push(i):function(b){a.addCommand("instructureExternalButton"+b.id,function(){d(b)}),a.addButton("instructure_external_button_"+b.id,{title:b.name,cmd:"instructureExternalButton"+b.id,image:b.icon_url,"class":"instructure_external_tool_button"})}(i)}g.length&&(a.addCommand("instructureExternalButtonClump",function(){var b={};for(var e in g)(function(a){b["<img src='"+g[a].icon_url+"'/>&nbsp;"+g[a].name]=function(){d(g[a])}})(e);c("#"+a.id+"_instructure_external_button_clump").dropdownList({options:b})}),a.addButton("instructure_external_button_clump",{title:e.more_external_tools,cmd:"instructureExternalButtonClump",image:"/images/downtick.png"}))},getInfo:function(){return{longname:"InstructureExternalTools",author:"Brian Whitmer",authorurl:"http://www.instructure.com",infourl:"http://www.instructure.com",version:a.majorVersion+"."+a.minorVersion}}}),a.PluginManager.add("instructure_external_tools",a.plugins.InstructureExternalTools)}),define("tinymce/jscripts/tiny_mce/plugins/instructure_links/editor_plugin",["require","compiled/editor/stocktiny","jquery","vendor/scribd.view","jquery.instructure_misc_helpers","jqueryui/dialog","jquery.instructure_misc_plugins"],function(a,b,c,d){var e=null;a(["tinymce.editor_box"],function(){b.create("tinymce.plugins.InstructureLinks",{init:function(a,b){function d(b){d.counter=d.counter||0,b==1&&d.counter!=0?d.counter=(d.counter+1)%5:c(a.getBody()).find("a").each(function(){var a=c(this);a.attr("href")&&!a.hasClass("inline_disabled")&&a.attr("href").match(INST.youTubeRegEx)&&a.addClass("youtube_link_to_box")}),c(a.getBody()).find("iframe").each(function(){var b=c(this),d=c("<img/>");d.addClass("iframe_placeholder"),d.attr("rel",b.attr("src")),d.attr("style",b.attr("style")),d.css("display","block"),d.attr("_iframe_style",b.attr("style"));var e=b.attr("width")||b.css("width");e=="auto"&&(e=null);if(!e||e=="100%"||e=="auto"){var f=c(a.contentAreaContainer).width();d.attr("width",f-15),d.css("width",f-15),d.addClass("fullWidth")}else d.attr("width",e),d.css("width",e);d.css("margin",5);var g=[],h=b.attr("src"),i="";for(var j=0;j<h.length;j++)i+=h[j],h[j].match(/[^a-zA-Z0-9\.]/)&&i.length>30&&(g.push(i),i="");g.push(i),b.attr("src"),d.attr("alt","This frame will embed the url:\r\n"+g.join("\r\n")),d.attr("title","This frame will embed the url:\r\n"+g.join("\r\n"));var k=b.attr("height")||b.css("height");k=="auto"&&(k=null),k?(d.attr("height",k),d.css("height",k)):(d.attr("height",300),d.css("height",300)),d.attr("src","/images/blank.png"),d.css("background","transparent url(/images/iframe.png) no-repeat top left"),d.css("border","1px solid #aaa");if(b.parents("p,div").length==0){var l=c("<p/>");l.append(d),d=l}b.after(d),b.remove()}).end().find(".iframe_placeholder").each(function(){var b=c(a.contentAreaContainer).width(),d=c(this);if(c(a.contentAreaContainer).hasScrollbar()||!0)b-=c(a.contentAreaContainer).scrollbarWidth();d.width()>b-40?(d.width(b-15),d.hasClass("fullWidth")||d.addClass("fullWidth")):d.hasClass("fullWidth")&&d.removeClass("fullWidth")})}var e={},f=["instructure_scribd_file"],g=["instructure_scribd_file"];a.addCommand("instructureLinks",function(){var b=c("#"+a.id);if(b.data("enable_bookmarking")){var e=a.selection&&a.selection.getBookmark();b.data("last_bookmark",e)}var h=c("#instructure_link_prompt"),i="";h.removeClass("for_inline_content").find(".disable_enhancement").hide().end().find(".auto_show").hide().end().find(".insert_button").text("Insert Link").end().find(".disable_inline_content").attr("checked",!1).end().find(".auto_show_inline_content").attr("checked",!1);if(h.length==0){var h=c(document.createElement("div"));c.getUserServices("BookmarkService",function(a){var b=h.data("editor"),d=c("<div style='text-align: left; margin-left: 20px;'/>"),e,f;for(var g in a){e=a[g].user_service;if(e){f=c("<a href='#' class='bookmark_service no-hover'/>"),f.addClass(e.service),f.data("service",e),f.attr("title","Find links using "+e.service);var j=c("<img/>");j.attr("src","/images/"+e.service+"_small_icon.png"),f.append(j),f.click(function(a){a.preventDefault(),c("#instructure_link_prompt").dialog("close"),c.findLinkForService(c(this).data("service").service,function(a){c("#instructure_link_prompt").dialog("close"),b.editorBox("create_link",{title:a.title,url:a.url,classes:i})})}),d.append(f),d.append("&nbsp;&nbsp;")}}h.find("#instructure_link_prompt_form").after(d)}),h.append("<div style='font-size: 0.8em; margin-bottom: 5px;'>This will make the selected text a link, or insert a new link if nothing is selected.</div> Paste or type a url or wiki page in in the box below:<form id='instructure_link_prompt_form' style='margin-top: 5px;'><input type='text' class='prompt' style='width: 250px;' value='http://'/><button type='submit' class='insert_button button'>Insert Link</button></form>").append("<div class='actions'></div><div class='clear'></div>").append("<div class='disable_enhancement' style='display: none;'><input type='checkbox' class='disable_inline_content' id='disable_inline_content'/><label for='disable_inline_content'> Disable inline previews for this link</label></div>").append("<div class='auto_show' style='display: none;'><input type='checkbox' class='auto_show_inline_content' id='auto_show_inline_content'/><label for='auto_show_inline_content'> Auto-open the inline preview for this link</label></div>"),h.find(".disable_inline_content").change(function(){c(this).attr("checked")&&h.find(".auto_show_inline_content").attr("checked",!1),h.find(".auto_show").showIf(!c(this).attr("checked")&&h.hasClass("for_inline_content_can_auto_show"))}),h.find("#instructure_link_prompt_form").submit(function(a){var b=h.data("editor");a.preventDefault(),a.stopPropagation();var e=c(this).find(".prompt").val();!e.match(/^[a-zA-Z]+:\/\//)&&!e.match(/^[0-9a-zA-Z]+\.[0-9a-zA-Z]+/)&&e.match(/^[0-9a-zA-Z\s]+$/)&&(wiki_url=c("#wiki_sidebar_wiki_url").attr("href"),wiki_url&&(e=c.replaceTags(wiki_url,"page_url",e.replace(/\s/,"-").toLowerCase())));var f=i.replace(/(auto_open|inline_disabled)/g,"");h.find(".auto_show_inline_content").attr("checked")&&(f+=" auto_open"),h.find(".disable_inline_content").attr("checked")&&(f+=" inline_disabled"),b.editorBox("create_link",{url:e,classes:f}),h.dialog("close"),d(!0)}),h.find(".actions").delegate(".embed_image_link","click",function(a){var b=h.data("editor");a.preventDefault(),b.editorBox("insert_code","<img src='"+c(a.target).closest("img").attr("src")+"'/>"),h.dialog("close")}),h.find(".actions").delegate(".embed_youtube_link","click",function(a){var b=h.data("editor");a.preventDefault(),b.editorBox("create_link",c(a.target).closest("img").attr("alt")),h.dialog("close")}),h.find("#instructure_link_prompt_form .prompt").bind("change keyup",function(){c("#instructure_link_prompt .actions").empty();var a=c(this).val(),b=h.data("original_data");if(!b||a!=b.url){h.removeClass("for_inline_content").removeClass("for_inline_content_can_auto_show");var d=new RegExp("("+f.join("|")+")","g");i=i.replace(d,"")}else h.toggleClass("for_inline_content",b.for_inline_content).toggleClass("for_inline_content_can_auto_show",b.for_inline_content_can_auto_show).find(".disable_enhancement").showIf(b.for_inline_content).end().find(".auto_show").showIf(b.for_inline_content_can_auto_show),i=b.prior_classes;var e=!h.hasClass("for_inline_content"),g=!h.hasClass("for_inline_content_can_auto_show");if(a.match(/\.(gif|png|jpg|jpeg)$/)){var j=c(document.createElement("div"));j.css("textAlign","center");var k=c(document.createElement("img"));k.attr("src",a),k.addClass("embed_image_link"),k.css("cursor","pointer");var l=new Image;l.src=a;function m(){l.complete?(l.height<100||l.height>100&&l.height<200)&&k.height(l.height):setTimeout(m,500)}setTimeout(m,500),k.height(100),k.attr("title","Click to Embed the Image"),j.append(k),c("#instructure_link_prompt .actions").append(j)}else if(a.match(INST.youTubeRegEx)){var n=c.youTubeID(a),j=c(document.createElement("div"));j.css("textAlign","center"),!h.find(".disable_inline_content").attr("checked")&&h.hasClass("for_inline_content_can_auto_show")&&h.find(".auto_show").show(),e=!1,h.find(".disable_enhancement").show();var k=c(document.createElement("img"));k.attr("src","http://img.youtube.com/vi/"+n+"/2.jpg"),k.css({paddingLeft:100,background:"url(/images/youtube_logo.png) no-repeat left center",height:90,display:"inline-block"}),k.attr("alt",a),k.addClass("embed_youtube_link"),k.css("cursor","pointer"),k.attr("title","Click to Embed YouTube Video"),j.append(k),c("#instructure_link_prompt .actions").append(j)}e&&(h.find(".disable_enhancement").hide(),h.find(".disable_inline_content").attr("checked",!1)),g&&(h.find(".auto_show").hide(),h.find(".auto_show_inline_content").attr("checked",!1))}),h.attr("id","instructure_link_prompt"),c("body").append(h)}h.data("editor",b),h.data("original_data",null);var j=a.selection.getNode();while(j.nodeName!="A"&&j.nodeName!="BODY"&&j.parentNode)j=j.parentNode;var k=j.nodeName=="A"?c(j):null;if(k){h.find(".prompt").val(k.attr("href")).change(),i=(k.attr("class")||"").replace(/youtube_link_to_box/,"");var l=new RegExp("("+f.join("|")+")");(k.attr("class")||"").match(l)&&h.addClass("for_inline_content").find(".disable_enhancement").show();var l=new RegExp("("+g.join("|")+")");(k.attr("class")||"").match(l)&&h.addClass("for_inline_content_can_auto_show").find(".auto_show").show(),h.data("original_data",{url:k.attr("href"),for_inline_content:h.hasClass("for_inline_content"),for_inline_content_can_auto_show:h.hasClass("for_inline_content_can_auto_show"),prior_classes:i}),h.find(".disable_inline_content").attr("checked",k.hasClass("inline_disabled")).triggerHandler("change"),h.find(".auto_show_inline_content").attr("checked",k.hasClass("auto_open")).triggerHandler("change"),h.find(".insert_button").text("Update Link")}h.dialog("close").dialog({autoOpen:!1,width:425,height:"auto",title:"Link to Website URL",open:function(){c(this).find(".prompt").focus().select()}}).dialog("open")}),a.addButton("instructure_links",{title:"Link to URL",cmd:"instructureLinks",image:b+"/img/button.gif"}),a.onPreProcess.add(function(a,b){c(b.node).find("a.youtube_link_to_box").removeClass("youtube_link_to_box"),c(b.node).find("img.iframe_placeholder").each(function(){var a=c(this),b=c("<iframe/>");b.attr("src",a.attr("rel")),b.attr("style",a.attr("_iframe_style")),b.height(a.attr("height")||a.css("height")),a.hasClass("fullWidth")&&(a.attr("width","100%"),a.css("width","100%")),b.css("width",a.attr("width")||a.css("width")),c(this).after(b),c(this).remove()})}),a.onChange.add(function(){d()}),a.onSetContent.add(function(){d("contentJustSet")}),a.onNodeChange.add(function(a,b,c){while(c.nodeName!="A"&&c.nodeName!="BODY"&&c.parentNode)c=c.parentNode;b.setActive("instructure_links",c.nodeName=="A")})},getInfo:function(){return{longname:"InstructureLinks",author:"Brian Whitmer",authorurl:"http://www.instructure.com",infourl:"http://www.instructure.com",version:b.majorVersion+"."+b.minorVersion}}}),b.PluginManager.add("instructure_links",b.plugins.InstructureLinks)})}),define("tinymce/jscripts/tiny_mce/plugins/instructure_record/editor_plugin",["jquery","media_comments"],function(a){tinymce.create("tinymce.plugins.InstructureRecord",{init:function(b,c){b.addCommand("instructureRecord",function(){var c=a("#"+b.id);a.mediaComment("create","any",function(d,e){c.editorBox("insert_code","<a href='/media_objects/"+d+"' class='instructure_inline_media_comment "+(e||"video")+"_comment' id='media_comment_"+d+"'>this is a media comment</a><br>"),b.selection.select(a(b.getBody()).find("#media_comment_"+d+" + br")[0]),b.selection.collapse(!0)})}),b.addButton("instructure_record",{title:"Record/Upload Media",cmd:"instructureRecord",image:c+"/img/record.gif"})},getInfo:function(){return{longname:"InstructureRecord",author:"Brian Whitmer",authorurl:"http://www.instructure.com",infourl:"http://www.instructure.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("instructure_record",tinymce.plugins.InstructureRecord)}),function(){define("compiled/tinymce",["compiled/editor/markScriptsLoaded","compiled/editor/stocktiny","tinymce/jscripts/tiny_mce/plugins/instructure_contextmenu/editor_plugin","tinymce/jscripts/tiny_mce/plugins/instructure_embed/editor_plugin","tinymce/jscripts/tiny_mce/plugins/instructure_equation/editor_plugin","tinymce/jscripts/tiny_mce/plugins/instructure_equella/editor_plugin","tinymce/jscripts/tiny_mce/plugins/instructure_external_tools/editor_plugin","tinymce/jscripts/tiny_mce/plugins/instructure_links/editor_plugin","tinymce/jscripts/tiny_mce/plugins/instructure_record/editor_plugin"],function(a,b){return a(["plugins/instructure_contextmenu/editor_plugin","plugins/instructure_embed/editor_plugin","plugins/instructure_equation/editor_plugin","plugins/instructure_equella/editor_plugin","plugins/instructure_external_tools/editor_plugin","plugins/instructure_links/editor_plugin","plugins/instructure_record/editor_plugin"]),b})}.call(this)