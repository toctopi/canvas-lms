define("translations/gradebook",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{gradebook:{alerts:{no_active_students:"Perdón, no hay estudiantes activos en este curso o no pueden ser calificados por usted.",no_students_in_section:"No se pudieron encontrar estudiantes en esa sección, regresando para mostrar todas las secciones.",none_to_update:"Nada que Actualizar",scores_updated:{one:"1 calificación de estudiante actualizada",other:"%{count} calificaciones de estudiantes actualizados"},students_updated:{one:"1 Estudiante Actualizado",other:"%{count} estudiantes actualizados"}},assignment_details:"Detalles de la Tarea",buttons:{change_section:"Cambiar Sección",saving_settings:"Guardar Configuraciones...",submit_comment:"Enviar Comentario",submitting:"Enviando...",upload_data:"Cargar Información"},cancel_button:"Cancelar",click_to_change:"Haga click para probar una calificación diferente",click_to_expand:"Haga click para expandir",computing_grades:"Computando Calificaciones...",confirms:{delete_comment:"¿Seguro que quiere borrar este comentario?",unsaved_changes:"Los siguientes estudiantes tienen cambios no guardados en los envíos de sus evaluaciones: \n%{users}\n¿Continuar?"},curve_grade_for_course:"Aplicar Curva a %{assignment}",curve_grades:"Aplicar Curva a los Grados",default_grade_for_course:"Calificación Predeterminada para %{assignment}",download_scores:"Descargar Calificaciones (%{format})",download_submissions:"Descargar los Envíos",edit_view_rubric:"Ver Rúbrica",errors:{failed_to_load:"El libro de calificaciones no se pudo cargar, intente recargar la página",none_to_update:"Nada que Actualizar",select_an_option:"Por favor seleccione una opción",upload_as_zip:"Por favor cargue los archivos como un .zip"},grade:"grado: %{grade}",graded_by_me:"%{graded_time} por mí",graded_then_resubmitted:"calificado, luego reenviado (%{when})",hide_all_things:"Esconder %{things}",hide_column:"Esconder Columna",hide_student_name:"Esconder los Nombres de los Estudiantes",ignore_ungraded:"Ignorar Tareas No Calificadas",include_ungraded:"Incluír Tareas Actualizadas",labels:{details:"Detalles"},links:{download_attachment:"Descargando %{attachment}",finish_scoring:"Terminar la Calificación de esta Evaluación",go_to_submission:"Ir al URL de Envío",submission_details:"Detalles de Envío",view_quiz:"Ver esta Evaluación",view_submission:"Ver Envío"},loud_late:"TARDE",message_students_who:"Enviar Mensaje a Estudiante Que...",mute_assignment:"Obviar Tarea",new_assessment:"[Tarea Nueva]",no_submission_time:"ningun tiempo de envío",nth_student:"Estudiante %{n}",percent:"Porcentaje",publish_to_sis:"Publicar calificaciones a SIS",reupload_submission_files:"Recargar los Archivos de Envío",reupload_submissions:"Recargar los Envíos",set_default_grade:"Establecer Calificación Predeterminada",set_group_weights:"Establecer Peso por Grupo",show_student_name:"Mostrar los Nombres de Estudiantes",showing_all_sections:"Mostrando Todas las Secciones",showing_section:"Mostrando la Sección: %{section}",sort_columns_by:"Ordenar Columnas Por...",sort_rows_by:"Ordenar Filas Por...",speed_grader:"Calificador Rápido",student:"Estudiante",student_mute_notification:"El instructor está trabajando en las calificaciones",student_name:"Nombre del Estudiante",students_who:{havent_submitted_yet:"Aún no ha enviado",scored_less_than:"Obtuvo menos de",scored_more_than:"Obtuvo más de"},submission_information:"Información del Envío",teacher_muted_title:"Tarea ha sido obviada",titles:{assignment_groups:"Grupos de Trabajo",click_to_record:"Haga click en el micrófono para grabar sus comentarios",dropped_assignment_no_total:"Esta tarea no será considerada en el cálculo total",hypothetical_score:'Esta es una calificación "que pasa si"',loading:"Cargando...",turnitin_score:"Calificación de Similaridad de Turnitin -- más información"},tooltips:{submission_dropped:"Este envío se eliminó para la calificación",submitted_late:"Este envío se envió tarde"},unmute_assignment:"Activar Tarea",unmute_button:"Activar la Tarea",upload_scores:"Cargar Calificaciones (desde %{format})",view_grading_history:"Ver el Historial de Calificación"},not_applicable:"N/A"}}})}),define("vendor/slickgrid-googlecode/slick.globaleditorlock",[],function(){return window.GlobalEditorLock=new function(){var a=null;this.isEditing=function(){return a!=null},this.hasLock=function(b){return a==b},this.enterEditMode=function(b){if(a!=null)throw"GlobalEditorLock : enterEditMode : currentEditor == null";if(!b.commitCurrentEdit)throw"GlobalEditorLock : enterEditMode : editor must implement .commitCurrentEdit()";if(!b.cancelCurrentEdit)throw"GlobalEditorLock : enterEditMode : editor must implement .cancelCurrentEdit()";a=b},this.leaveEditMode=function(b){if(a!=b)throw"GlobalEditorLock : leaveEditMode() : currentEditor != editor";a=null},this.commitCurrentEdit=function(){return a?a.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){a&&a.cancelCurrentEdit()}},window.GlobalEditorLock}),define("vendor/jquery.getScrollbarWidth",["jquery"],function(a){var b=0;a.getScrollbarWidth=function(){if(!b)if(a.browser.msie){var c=a('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:-1e3}).appendTo("body"),d=a('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:-1e3}).appendTo("body");b=c.width()-d.width(),c.add(d).remove()}else{var e=a("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:-1e3}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200});b=100-e.width(),e.parent().remove()}return b}}),define("vendor/slickgrid-googlecode/slick.grid",["vendor/slickgrid-googlecode/slick.globaleditorlock","jquery","jqueryui/sortable","jqueryui/resizable","vendor/jquery.getScrollbarWidth"],function(a,b){return function c(c,d,e,f){function g(){f=b.extend({},S,f),c.empty().attr("tabIndex",0).attr("hideFocus",!0).css("overflow","hidden").css("outline",0).css("position","relative").addClass(W),Y=b("<div class='grid-header' style='overflow:hidden;position:relative;' />").appendTo(c),Z=b("<div style='width:10000px' />").appendTo(Y),$=b("<div tabIndex='0' hideFocus style='width:100%;overflow:scroll;outline:0;position:relative;outline:0px;'>").appendTo(c),_=b("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo($),$.height(c.innerHeight()-Y.outerHeight());for(var a=0;a<e.length;a++){var d=e[a];bq[d.id]=a,d.width||(d.width=f.defaultColumnWidth),d.formatter||(d.formatter=p);var g=b("<div class='h c"+a+"' cell="+a+" id='"+d.id+"' />").html(d.name).width(d.width).appendTo(Z);d.rerenderOnResize&&g.append(" <img src='images/help.png' align='absmiddle' title='This column has an adaptive formatter.  Resize to a smaller size to see alternative data representation.'>")}Z.find(".h").each(function(){var a=parseInt(b(this).attr("cell")),c=e[a];if(c.resizable===!1)return;b(this).resizable({handles:"e",minWidth:c.minWidth?c.minWidth:null,maxWidth:c.maxWidth?c.maxWidth:null,stop:function(a,c){var d=b(this).attr("id"),f=bq[d];e[f].width=b(this).width(),b("body").append("<style class='slick-style'> ."+W+" .grid-canvas .c"+f+"{width: "+e[f].width+"px;} </style>"),y(),e[f].rerenderOnResize&&t(),B()}})}),f.enableColumnReorder&&Z.sortable({axis:"x",cancel:".ui-resizable-handle",update:function(a,b){console.time("column reorder");var c=Z.sortable("toArray"),d={};for(var f=0;f<e.length;f++)d[e[f].id]=e[f];for(var f=0;f<c.length;f++)bq[c[f]]=f,e[f]=d[c[f]];t(),i(),h(),B(),X.onColumnsReordered&&X.onColumnsReordered(),a.stopPropagation(),console.timeEnd("column reorder")}}),Z.bind("click",function(a){if(!b(a.target).hasClass(".h"))return;var c=b(a.target).attr("id");X.onColumnHeaderClick&&X.onColumnHeaderClick(e[bq[c]])}),h(),y(),B(),f.manualScrolling||$.bind("scroll",C),_.bind("keydown",D),_.bind("click",E),_.bind("dblclick",F),b.browser.msie&&($[0].onselectstart=function(){if(event.srcElement.tagName!="INPUT"&&event.srcElement.tagName!="TEXTAREA")return!1})}function h(){for(var a=0;a<e.length;a++)b("body").append("<style class='slick-style'> ."+W+" .grid-canvas .c"+a+" { width:"+e[a].width+"px } </style>")}function i(){b("body").find("style.slick_style").remove()}function j(){bf&&R(),Z.sortable("destroy"),Z.find(".h").resizable("destroy"),i(),c.empty().removeClass(W)}function k(a,b,c){Z.find(".h[id="+a+"]").removeClass(c).addClass(b)}function l(a){return bq[a]}function m(){return bo.concat()}function n(c){if(a.isEditing()&&!a.hasLock(X))throw"Grid : setSelectedRows : cannot set selected rows when somebody else has an edit lock";var d={};for(var e=0;e<c.length;e++)d[c[e]]=!0;for(var e=0;e<bo.length;e++){var f=bo[e];bg[f]&&!d[f]&&b(bg[f]).removeClass("selected")}for(var e=0;e<c.length;e++){var f=c[e];bg[f]&&!bp[f]&&b(bg[f]).addClass("selected")}bo=c.concat(),bp=d}function o(a){if(bf&&!Q())return;H(null),f.enableAddRow!=a.enableAddRow&&u(d.length),f=b.extend(f,a),B()}function p(a,b,c,d,e){return c==null||c==undefined?"":c}function q(a,b){var c=d[b],f=b<d.length&&!c,g="r"+(f?" loading":"")+(bp[b]?" selected":"");a.push("<div class='"+g+"' row='"+b+"' style='top:"+T*b+"px'>");for(var h=0,i=e.length;h<i;h++){var j=e[h],k;!j.active||!c.active,a.push("<div "+(j.unselectable?"":"hideFocus tabIndex=0 ")+"class='c c"+h+(j.cssClass?" "+j.cssClass:"")+(j.active&&c.active?" active-col-and-row":"")+"' cell="+h+">"),c&&b<d.length&&a.push(j.formatter(b,h,c[j.field],j,c)),a.push("</div>")}a.push("</div>")}function r(a){var b=[];return q(b,a),b.join("")}function s(a,b){console.time("cleanupRows");var c=bh,d=_[0];for(var e in bg)(e<a||e>b)&&e!=bc&&(d.removeChild(bg[e]),delete bg[e],bh--,bu++);console.log("removed "+(c-bh)+" rows"),console.timeEnd("cleanupRows")}function t(){console.log("removeAllRows"),_[0].innerHTML="",bg={},bu+=bh,bh=0}function u(a){var b=bg[a];if(!b)return;if(bf&&bc==a)throw"Grid : removeRow : Cannot remove a row that is currently in edit mode";bm=0,b.parentNode.removeChild(b),b=null,delete bg[a],bh--,bu++}function v(a){console.time("removeRows");if(!a||!a.length)return;bm=0;var b=[];for(var c=0,d=a.length;c<d;c++){if(bf&&bc==c)throw"Grid : removeRow : Cannot remove a row that is currently in edit mode";var e=bg[a[c]];if(!e)continue;b.push(a[c])}if(bh>10&&b.length==bh)_[0].innerHTML="",bg={},bu+=bh,bh=0;else for(var c=0,f=b.length;c<f;c++){var e=bg[b[c]];e.parentNode.removeChild(e),delete bg[b[c]],bh--,bu++}console.timeEnd("removeRows")}function w(a,c){if(!bg[a])return;var f=b(bg[a]).find(".c[cell="+c+"]");if(f.length===0)return;var g=e[c],h=d[a];bf&&bc==a&&bd==c?bf.setValue(h[g.field]):f[0].innerHTML=h?g.formatter(a,c,h[g.field],g,h):""}function x(a){if(!bg[a])return;b(bg[a]).find(".c").each(function(b){var c=e[b];a==bc&&b==bd&&bf?bf.setValue(d[bc][c.field]):d[a]?this.innerHTML=c.formatter(a,b,d[a][c.field],c,d[a]):this.innerHTML=""})}function y(){bb=$.innerWidth(),ba=$.innerHeight(),V=bi=Math.ceil(ba/T),U=Math.max(U,bi+2*V);var a=0;for(var c=0;c<e.length;c++)a+=e[c].width+5;_.width(a);var g=_[0],h=f.enableAddRow?d.length:d.length-1;for(var c in bg)c>=h&&(g.removeChild(bg[c]),delete bg[c],bh--,bu++);var i=Math.max(T*(d.length+bi-2),ba-b.getScrollbarWidth());$.scrollTop()>i-$.height()+b.getScrollbarWidth()&&$.scrollTop(i-$.height()+b.getScrollbarWidth()),_.height(i)}function z(){return{top:Math.floor(bk/T),bottom:Math.floor((bk+ba)/T)}}function A(a,b){console.time("renderRows");var c=_[0],d=bh,e=[],f=[],g=new Date;for(var h=a;h<=b;h++){if(bg[h])continue;bh++,f.push(h),q(e,h),bt++}var i=document.createElement("div");i.innerHTML=e.join("");for(var h=0,j=i.childNodes.length;h<j;h++)bg[f[h]]=c.appendChild(i.firstChild);bh-d>5&&(bn=(new Date-g)/(bh-d)),console.log("rendered "+(bh-d)+" rows"),console.timeEnd("renderRows")}function B(){var a=z(),b=Math.max(0,a.top-(bm<0?V:5)),c=Math.min(f.enableAddRow?d.length:d.length-1,a.bottom+(bm>0?V:5));bh>10&&Math.abs(bj-bk)>T*U?t():s(b,c),A(b,c),bj=bk,bs=null}function C(){bk=$[0].scrollTop;var a=Math.abs(bj-bk),b=$[0].scrollLeft;b!=bl&&(Y[0].scrollLeft=bl=b);if(a<5*T)return;bj==bk?bm=0:bj<bk?bm=1:bm=-1,bs&&window.clearTimeout(bs),a<bi*T?B():bs=window.setTimeout(B,50),X.onViewportChanged&&X.onViewportChanged()}function D(b){switch(b.which){case 27:a.isEditing()&&a.hasLock(X)&&R(X),be&&be.focus();break;case 9:b.shiftKey?O(0,-1,!0):O(0,1,!0);break;case 37:O(0,-1);break;case 39:O(0,1);break;case 38:O(-1,0);break;case 40:case 13:O(1,0);break;default:if(X.onKeyDown&&d[bc]&&!bf&&X.onKeyDown(b,bc,bd))return b.stopPropagation(),b.preventDefault(),!1;return}return b.stopPropagation(),b.preventDefault(),!1}function E(a){var c=b(a.target).closest(".c");if(c.length===0)return;if(be==c[0]&&bf!=null)return;var g=parseInt(c.parent().attr("row")),h=parseInt(c.attr("cell")),i=null;if(d[g]&&X.onClick&&(!bf||(i=Q()))&&X.onClick(a,g,h))return a.stopPropagation(),a.preventDefault(),!1;f.enableCellNavigation&&!e[h].unselectable&&(i==1||i==null&&Q())&&I(c[0])}function F(a){var c=b(a.target).closest(".c");if(c.length===0)return;if(be==c[0]&&bf!=null)return;f.editOnDoubleClick&&M()}function G(a,b){var c=Math.floor(b/T),d=0,f=0;for(var g=0;g<e.length&&f<b;g++)f+=e[g].width,d++;return{row:c,cell:d-1}}function H(a,c){be!=null&&(L(),b(be).removeClass("selected")),be=a,be!=null?(bc=parseInt(b(be).parent().attr("row")),bd=parseInt(b(be).attr("cell")),b(be).addClass("selected"),N(),f.editable&&!f.editOnDoubleClick&&(d[bc]||bc==d.length)&&(window.clearTimeout(br),c?br=window.setTimeout(M,100):M())):(bc=null,bd=null)}function I(a,b){H(a,b),a?n([bc]):n([]),X.onSelectedRowsChanged&&X.onSelectedRowsChanged()}function J(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}}function K(a,b){return a<d.length&&!d[a]?!1:e[b].cannotTriggerInsert&&a>=d.length?!1:e[b].editor?!0:!1}function L(){if(!bf)return;bf.destroy(),b(be).removeClass("editable invalid"),d[bc]&&(be.innerHTML=e[bd].formatter(bc,bd,d[bc][e[bd].field],e[bd],d[bc])),bf=null,b.browser.msie&&J(),a.leaveEditMode(X)}function M(){if(!be)return;if(!f.editable)throw"Grid : makeSelectedCellEditable : should never get called when options.editable is false";window.clearTimeout(br);if(!K(bc,bd))return;a.enterEditMode(X),b(be).addClass("editable");var c=null;d[bc]&&(c=d[bc][e[bd].field]),be.innerHTML="",bf=new e[bd].editor(b(be),e[bd],c,d[bc])}function N(){if(!be)return;var a=$[0].scrollTop;(bc+2)*T>a+ba?($[0].scrollTop=bc*T,C()):bc*T<a&&($[0].scrollTop=(bc+2)*T-ba,C())}function O(c,d,e){if(!be)return;if(!f.enableCellNavigation)return;if(!a.commitCurrentEdit())return;var g=bg[bc+c],h=g?b(g).find(".c[cell="+(bd+d)+"][tabIndex=0]"):null;e&&c==0&&!(g&&h&&h.length)&&(!h||!h.length)&&(d>0?(g=bg[bc+c+1],h=g?b(g).find(".c[cell][tabIndex=0]:first"):null):(g=bg[bc+c-1],h=g?b(g).find(".c[cell][tabIndex=0]:last"):null)),g&&h&&h.length?(I(h[0],f.asyncEditorLoading),bf||be.focus()):be.focus()}function P(c,g){if(c>d.length||c<0||g>=e.length||g<0)return;if(!f.enableCellNavigation||e[g].unselectable)return;if(!a.commitCurrentEdit())return;bg[c]||A(c,c);var g=b(bg[c]).find(".c[cell="+g+"][tabIndex=0]")[0];I(g),bf||be.focus()}function Q(){if(bf){if(bf.isValueChanged()){var a=bf.validate();if(a.valid){var c=bf.getValue();return bc<d.length?e[bd].setValueHandler?e[bd].setValueHandler(c,e[bd],d[bc]):d[bc][e[bd].field]=c:X.onAddNewRow&&X.onAddNewRow(e[bd],c),L(),!0}return b(be).addClass("invalid"),b(be).stop(!0,!0).effect("highlight",{color:"red"},300),X.onValidationError&&X.onValidationError(be,a,bc,bd,e[bd]),bf.focus(),!1}L()}return!0}function R(){L()}var S={enableAddRow:!0,manualScrolling:!1,editable:!0,editOnDoubleClick:!1,enableCellNavigation:!0,defaultColumnWidth:80,enableColumnReorder:!0,asyncEditorLoading:!0},T=24,U=50,V=5,W="slickgrid_"+Math.round(1e6*Math.random()),X=this,Y,Z,$,_,ba,bb,bc,bd,be=null,bf=null,bg={},bh=0,bi,bj=0,bk=0,bl=0,bm=1,bn=10,bo=[],bp={},bq={},br=null,bs=null,bt=0,bu=0,bv=document.createDocumentFragment(),bw=!1;this.debug=function(){var a="";a+="\ncounter_rows_rendered:  "+bt,a+="\ncounter_rows_removed:  "+bu,a+="\nrenderedRows:  "+bh,a+="\nnumVisibleRows:  "+bi,a+="\nCAPACITY:  "+U,a+="\nBUFFER:  "+V,a+="\navgRowRenderTime:  "+bn,alert(a)},this.benchmark_render_200=function(){t(),A(0,200),s()},this.stressTest=function(){console.time("benchmark-stress"),A(0,500),s(),console.timeEnd("benchmark-stress"),window.setTimeout(X.stressTest,50)},this.benchmarkFn=function(a){var b=new Date,c=new Array(arguments);c.splice(0,1),X[a].call(this,c),alert("Grid : benchmarkFn : "+a+" : "+(new Date-b)+"ms")},g(),b.extend(this,{onColumnHeaderClick:null,onClick:null,onKeyDown:null,onAddNewRow:null,onValidationError:null,onViewportChanged:null,onSelectedRowsChanged:null,onColumnsReordered:null,destroy:j,getColumnIndex:l,updateCell:w,updateRow:x,removeRow:u,removeRows:v,removeAllRows:t,render:B,getViewport:z,resizeCanvas:y,scroll:scroll,getCellFromPoint:G,gotoCell:P,editCurrentCell:M,getSelectedRows:m,setSelectedRows:n,setColumnHeaderCssClass:k,commitCurrentEdit:Q,cancelCurrentEdit:R})}}),define("vendor/jquery.template",["jquery"],function(a){a.extend({template:function(a,b){a=a||"",b=b||{};var c=/#\{([^{}]*)}/g,d=function(a,c){return typeof b[c]=="string"||typeof b[c]=="number"?b[c]:a};return a.replace(c,d)}})}),define("vendor/slickgrid-googlecode/slick.editors",["jquery","vendor/jquery.template"],function(a){window.requiredFieldValidator=function(b){return b==null||b==undefined||!a.trim(b+"").length?{valid:!1,msg:"This is a required field"}:{valid:!0,msg:null}},window.TextCellEditor=function(b,c,d,e){var f,g=d,h=this;this.init=function(){f=a("<INPUT type=text class='editor-text' />"),d!=null&&(f[0].defaultValue=d,f.val(g)),f.appendTo(b),f.focus().select()},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a),g=a},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()},window.GradeCellEditor=function(b,c,d,e){if(e.active){d=d||{};var f,g=d.grade,h=this;this.init=function(){switch(c.grading_type){case"letter_grade":var e=[{text:"--",value:""},{text:"A",value:"A"},{text:"A-",value:"A-"},{text:"B+",value:"B+"},{text:"B",value:"B"},{text:"B-",value:"B-"},{text:"C+",value:"C+"},{text:"C-",value:"C-"},{text:"D+",value:"D+"},{text:"D",value:"D"},{text:"D-",value:"D-"},{text:"F",value:"F"}],h="";a.each(e,function(){h+='<option value="'+this.value+'" '+(this.value==d.grade?"selected":"")+">"+this.text+"</option>"}),f=a("<select>"+h+"</select>");break;default:f=a("<INPUT type=text class='editor-text' />")}typeof d.grade!="undefined"&&d.grade+""!=""&&(f[0].defaultValue=d.grade,f.val(g)),f.appendTo(b),f.focus().select(),typeof d.uploaded_grade=="undefined"&&(d.uploaded_grade=d.grade);var i={originalScore:d.original_grade||"--",uploadedScore:d.uploaded_grade||"--"},j='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all">  <table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></table></div> </div>';a(a.template(j,i)).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a.grade},this.getValue=function(){return f.val()},this.isValueChanged=function(){return(f.val()!=""||g!=null)&&f.val()!=g},this.validate=function(){if(c.validator){var a=c.validator(h.getValue());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()}else{var f;this.init=function(){var a=d?d.grade:"";b.removeClass("selected editable").html(a)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return d},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()}},window.StudentNameEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.name:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.StudentNameFormatter=function(a,b,c,d,e){return c?c.name:""},window.NullEditor=function(a,b,c,d){var e,f=c,g=this;this.init=function(){a.removeClass("selected editable").html(c)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.NullGradeEditor=function(a,b,c,d){var e;this.init=function(){var b=c?c.grade:"";a.removeClass("selected editable").html(b)},this.destroy=function(){},this.focus=function(){},this.setValue=function(a){},this.getValue=function(){return c},this.isValueChanged=function(){return!1},this.validate=function(){return{valid:!0,msg:null}},this.init()},window.simpleGradeCellFormatter=function(a,b,c,d,e){return c?c.grade:""},window.PassFailCellFormatter=function(a,b,c,d,e){c=c||{};switch(c.grade){case"pass":return"<span class='pass_fail pass' />";case"fail":return"<span class='pass_fail fail' />";default:return""}},window.PassFailSelectCellEditor=function(b,c,d,e){d=d||{};var f,g=d,h=this;this.init=function(){f=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value=''>---</OPTION><OPTION value='pass'>Pass</OPTION><OPTION value='fail'>Fail</OPTION></SELECT>"),f.val(g.grade),f.appendTo(b),f.focus(),f.change(function(){d.grade=a(this).val()});var c='<div class="grade-helper-wrapper"><span class="ui-icon ui-icon-triangle-1-w"/><div class="grade-helper-inner ui-widget-content ui-corner-all"><table><tr><th>Original Score</th><th>Uploaded Score</th></tr><tr><td>#{originalScore}</td><td>#{uploadedScore}</td></tr></tbody></table></div> </div>';a(a.template(c,{originalScore:10,uploadedScore:15})).appendTo(b)},this.destroy=function(){f.remove()},this.focus=function(){f.focus()},this.setValue=function(a){f.val(a.grade),g=a},this.getValue=function(){return d},this.isValueChanged=function(){return f.val()!=g},this.validate=function(){return{valid:!0,msg:null}},this.init()}}),define("gradebook_uploads",["i18n!gradebook","jquery","underscore","str/htmlEscape","vendor/slickgrid-googlecode/slick.grid","vendor/slickgrid-googlecode/slick.editors","jquery.instructure_forms","jquery.instructure_misc_helpers","jquery.templateData"],function(a,b,c,d,e){var f={init:function(){var c,f=b("#gradebook_grid"),g={columns:[{id:"student",name:a.t("student","Student"),field:"student",width:250,cssClass:"cell-title",editor:StudentNameEditor,validator:requiredFieldValidator,formatter:StudentNameFormatter}],options:{enableAddRow:!1,enableColumnReorder:!1,asyncEditorLoading:!0},data:[]};delete uploadedGradebook.missing_objects,delete uploadedGradebook.original_submissions,b.each(uploadedGradebook.assignments,function(){var a={id:this.id,name:d(this.title),field:this.id,width:200,editor:GradeCellEditor,formatter:simpleGradeCellFormatter,active:!0,original_id:this.original_id};g.columns.push(a),this.original_id?a.cssClass="active changed":a.cssClass="active new",a.setValueHandler=function(a,b,c){if(c[b.id])c[b.id].grade=a;else{var d={grade:a,assignment_id:b.id},e=c.submissions.push(d);c[b.id]=c.submissions[e-1]}}}),b.each(uploadedGradebook.students,function(){var a={student:this,id:this.id};b.each(this.submissions,function(){a[this.assignment_id]=this}),g.data.push(a),a.active=!0}),g.columns.length>1?(uploadedGradebook.unchanged_assignments&&b("#assignments_without_changes_alert").show(),b("#gradebook_grid_form").submit(function(a){b(this).find("input[name='json_data_to_submit']").val(JSON.stringify(uploadedGradebook))}).show(),b(window).resize(function(){f.height(b(window).height()-f.offset().top-50)}).triggerHandler("resize"),c=new e(f,g.data,g.columns,g.options),c.onColumnHeaderClick=function(a){}):b("#no_changes_detected").show()},handleThingsNeedingToBeResolved:function(){var e={},g={};b.each(["student","assignment"],function(a,c){var f=b("#"+c+"_resolution_template").remove(),g=f.find("select");e[c]=[],b.each(uploadedGradebook[c+"s"],function(){this.original_id||e[c].push(this)}),e[c].length&&(g.change(function(){b(this).next(".points_possible_section").css({opacity:0}),b(this).val()>0?(b("#"+c+"_resolution_template select option").removeAttr("disabled"),b("#"+c+"_resolution_template select").each(function(){b("#"+c+"_resolution_template select").not(this).find("option[value='"+b(this).val()+"']").attr("disabled",!0)})):b(this).val()==="new"&&b(this).next(".points_possible_section").css({opacity:1})}),b.each(uploadedGradebook.missing_objects[c+"s"],function(){b('<option value="'+this.id+'" >'+d(this.name||this.title)+"</option>").appendTo(g)}),b.each(e[c],function(a,d){f.clone(!0).fillTemplateData({iterator:d.id,data:{name:d.name,title:d.title,points_possible:d.points_possible}}).appendTo("#gradebook_importer_resolution_section ."+c+"_section table tbody").show().find("input.points_possible").change(function(){d.points_possible=b(this).val()})}),b("#gradebook_importer_resolution_section, #gradebook_importer_resolution_section ."+c+"_section").show())}),e.student.length||e.assignment.length?b("#gradebook_importer_resolution_section").submit(function(d){var e=!1;d.preventDefault(),b(this).find("select").each(function(){if(!b(this).val())return e=!0,b(this).errorBox(a.t("errors.select_an_option","Please select an option")),!1});if(e)return!1;b(this).find("select").each(function(){var a=b(this),d=a.attr("name").split("_"),e=d[0],f=d[1],g=a.val();switch(g){case"new":break;case"ignore":for(var h in uploadedGradebook[e+"s"])if(f==uploadedGradebook[e+"s"][h].id){uploadedGradebook[e+"s"].splice(h,1);break}break;default:var i=c.detect(uploadedGradebook[e+"s"],function(a){return f==a.id});i.id=i.original_id=g,e==="assignment"?b.each(uploadedGradebook.students,function(){var a=this,b=c.detect(a.submissions,function(a){return a.assignment_id==f});b.assignment_id=g;var d=c.detect(uploadedGradebook.original_submissions,function(b){return b.user_id==a.id&&b.assignment_id==g});d&&(b.original_grade=d.score)}):e==="student"&&b.each(i.submissions,function(){var a=this,b=c.detect(uploadedGradebook.original_submissions,function(b){return b.user_id==i.id&&b.assignment_id==a.assignment_id});b&&(a.original_grade=b.score)})}});var g=[];b.each(uploadedGradebook.assignments,function(a){uploadedGradebook.assignments[a].original_id&&c.all(uploadedGradebook.students,function(b){var c=b.submissions[a];return c.original_grade==c.grade||!c.original_grade&&!c.grade})&&g.push(a)}),c.each(g.reverse(),function(a){uploadedGradebook.assignments.splice(a,1),b.each(uploadedGradebook.students,function(){this.submissions.splice(a,1)})}),g.length!=0&&(uploadedGradebook.unchanged_assignments=!0),b(this).hide(),f.init()}):f.init()}};return f}),function(){require(["jquery","gradebook_uploads"],function(a,b){return a(b.handleThingsNeedingToBeResolved)})}.call(this),define("compiled/bundles/gradebook_uploads",function(){})