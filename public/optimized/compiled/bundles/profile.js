define("translations/profile",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{profile:{alerts:{profile_picture_locked:"Su foto de perfil ha sido bloqueada por un administrador, y no puede cambiarse."},buttons:{add_file:"Agregar Archivo",adding_file:"Agregando Archivo...",generate_token:"Generar un Componente Léxico",generating_token:"Generando Componente Léxico...",regenerate_token:"Regenerar Componente Léxico",regenerating_token:"Regenerando Componenete Léxico...",select_image:"Seleccionar Imagen",selecting_image:"Seleccionando Imagen..."},communication:{buttons:{problem_saving_preferences:"Problema Guardando las Preferencias",save_preferences:"Guardar Preferencias",saved_preferences:"¡Preferencias Guardadas!",saving_preferences:"Guardando Preferencias..."},errors:{saving_preferences_failed:"¡Oops! Algo falló. Intente guardar otra vez"},notices:{communication_preferences_updated:"Preferencias de Comunicación Actualizadas"}},confirms:{delete_access_key:"¿Seguro que quiere borrar esta clave de acceso?",delete_login:"¿Seguro que quiere borrar este inicio de sesión?",regenerate_token:"¿Seguro que quiere regenerar este componente léxico? Cualquier cosa usando este componente léxico tendrá que actualizarse.",unregister_service:"¿Seguro que quiere cancelar el registro de este servicio?"},errors:{adding_file_failed:"Falló la adición del archivo",generating_token_failed:"Falló la generación del Componente léxico",loading_images_failed:"Falló la carga de imagenes, intente de nuevo",regenerating_token_failed:"Falló la Regeneración del Componente léxico",registration_failed:"Falló la inscripción. Revise el nombre de usuario y la contraseña, e intente de nuevo.",selecting_image_failed:"Selección de la Imagen Falló, intente de nuevo"},headers:{loading_images:"Cargando Imagenes..."},please_select_an_option:"Por favor seleccione una opción",titles:{select_profile_pic:"Seleccionar una Foto de Perfil"},token_never_expires:"nunca"}}}})}),define("user_utils",["jquery"],function(a){return{nameParts:function(b,c){var d=/^(Sn?r\.?|Senior|Jn?r\.?|Junior|II|III|IV|V|VI|Esq\.?|Esquire)$/i,e,f,g,h,i,j;return!b||a.trim(b)===""?[null,null,null]:(j=a.map(b.split(","),function(b){return a.trim(b)}),e=j[0],f=j[1],g=j.slice(2).join(", "),g===""&&(g=null),g&&!d.test(g)&&(f=f+" "+g,g=null),typeof f=="string"?!g&&d.test(f)&&(g=f,f=e,e=null):(f=a.trim(b),e=null),h=f.split(/\s+/),h.length===1&&h[0]===""&&(h=[]),!g&&h.length>1&&d.test(h[h.length-1])&&(g=h.pop()),!e&&c&&!/^\s*$/.test(c)&&(i=c.split(/\s+/))&&h.length>=i.length&&h.slice(h.length-i.length).join(" ")===i.join(" ")&&(e=h.splice(h.length-i.length,i.length).join(" ")),!e&&h.length>1&&(e=h.pop()),[h.length===0?null:h.join(" "),e,g])},lastNameFirst:function(b){var c=a.trim([b[0],b[2]].join(" "));return a.trim(b[1]?b[1]+", "+c:c)},firstNameFirst:function(b){return a.trim(b.join(" ").replace(/\s+/," "))}}}),define("user_sortable_name",["jquery","user_utils"],function(a,b){a(function(){var c=a('input[name="user[short_name]"]'),d=c.parents("form").find('input[name="user[name]"]'),e=a('input[name="user[sortable_name]"]'),f=d.attr("value");d.keyup(function(){var g=d.attr("value"),h=e.attr("value"),i=b.nameParts(h);if(jQuery.trim(h)===""||b.firstNameFirst(i)===jQuery.trim(f)){var j=b.nameParts(g,i[1]);e.attr("value",b.lastNameFirst(j))}var k=c.attr("value");(jQuery.trim(k)===""||k===f)&&c.attr("value",g),f=a(this).attr("value")})})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/util/BackoffPoller",["jquery","jquery.ajaxJSON"],function(b){var c;return c=function(){function c(b,c,d){var e,f,g,h,i;this.url=b,this.handler=c,d==null&&(d={}),this.handle=a(this.handle,this),this.poll=a(this.poll,this),this.baseInterval=(e=d.baseInterval)!=null?e:1e3,this.backoffFactor=(f=d.backoffFactor)!=null?f:1.5,this.maxAttempts=(g=d.maxAttempts)!=null?g:8,this.handleErrors=(h=d.handleErrors)!=null?h:!1,this.initialDelay=(i=d.initialDelay)!=null?i:!0}return c.name="BackoffPoller",c.prototype.start=function(){return this.running?this.reset():this.nextPoll(!0),this},c.prototype.then=function(a){return this.callbacks==null&&(this.callbacks=[]),this.callbacks.push(a)},c.prototype.reset=function(){return this.nextInterval=this.baseInterval,this.attempts=0},c.prototype.stop=function(a){var b,c,d,e;a==null&&(a=!1),this.running&&clearTimeout(this.running),delete this.running;if(a&&this.callbacks){e=this.callbacks;for(c=0,d=e.length;c<d;c++)b=e[c],b()}return delete this.callbacks},c.prototype.poll=function(){var a=this;return this.running=!0,this.attempts++,b.ajaxJSON(this.url,"GET",{},this.handle,function(b,c){return a.handleErrors?a.handle(b,c):a.stop()})},c.prototype.handle=function(a,b){switch(this.handler(a,b)){case"continue":return this.nextPoll();case"reset":return this.nextPoll(!0);case"stop":return this.stop(!0);default:return this.stop()}},c.prototype.nextPoll=function(a){a==null&&(a=!1);if(a){this.reset();if(!this.initialDelay)return this.poll()}else this.nextInterval=parseInt(this.nextInterval*this.backoffFactor);return this.attempts<this.maxAttempts?this.running=setTimeout(this.poll,this.nextInterval):this.stop()},c}()})}.call(this),define("profile",["INST","i18n!profile","jquery","compiled/util/BackoffPoller","jquery.ajaxJSON","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.loadingImg","jquery.templateData","jqueryui/sortable"],function(a,b,c,d){var e=c(".profile_table"),f=c("#update_profile_form"),g=c("#default_email_id"),h="/api/v1/users/self/avatars",i=new d(h,function(a){var b={},d=c("img.pending"),e,f,g,h=0;for(var i=0,j=a.length;i<j;i++)e=a[i],e.pending||(b[e.token]=e.url);return d.each(function(){f=c(this),g=b[f.data("token")],g!=null&&(f.removeClass("pending"),f.attr("src",g),h++)}),h===d.length?"stop":h>0?"reset":"continue"});c(".edit_profile_link").click(function(a){return e.addClass("editing").find(".edit_data_row").show().end().find(":text:first").focus().select(),!1}),e.find(".cancel_button").click(function(a){return e.removeClass("editing").find(".change_password_row,.edit_data_row,.more_options_row").hide().end().find("#change_password_checkbox").attr("checked",!1),!1}),e.find("#change_password_checkbox").click(function(){a.browser.ie&&c(this).triggerHandler("change")}).change(function(a){a.preventDefault(),c(this).attr("checked")?(c(this).addClass("showing"),e.find(".change_password_row").show().find(":password:first").focus().select()):e.find(".change_password_row").hide().find(":password").val("")}).attr("checked",!1).change(),f.attr("method","PUT").formSubmit({required:f.find("#user_name").length?["name"]:[],object_name:"user",property_validations:{"=default_email_id":function(a,d){if(c("#default_email_id").length&&(!a||a=="new"))return b.t("please_select_an_option","Please select an option")}},beforeSubmit:function(a){f.loadingImage()},success:function(a){var b=a.user,d={short_name:b.short_name,full_name:b.name,sortable_name:b.sortable_name,time_zone:b.time_zone,locale:c("#user_locale option[value='"+b.locale+"']").text()};if(d.locale!=f.find(".locale").text()){location.reload();return}f.loadingImage("remove");if(g.length>0){var e=g.find("option:selected").text();c(".default_email.display_data").text(e)}c(".channel").removeClass("default"),c("#channel_"+b.communication_channel.id).addClass("default"),f.fillTemplateData({data:d}).find(".cancel_button").click()},error:function(a){f.loadingImage("remove").formErrors(a.errors||a),c(".edit_profile_link").click()}}).find(".more_options_link").click(function(){return f.find(".more_options_link_row").hide(),f.find(".more_options_row").show(),!1}),c("#default_email_id").change(function(){c(this).val()=="new"&&c(".add_email_link:first").click()}),c("#unregistered_services li.service").click(function(a){a.preventDefault(),c("#"+c(this).attr("id")+"_dialog").dialog("close").dialog({width:350,autoOpen:!1}).dialog("open")}),c(".create_user_service_form").formSubmit({object_name:"user_service",beforeSubmit:function(a){c(this).loadingImage()},success:function(a){c(this).loadingImage("remove").parents(".content").dialog("close"),document.location.reload()},error:function(a){c(this).loadingImage("remove").errorBox(b.t("errors.registration_failed","Registration failed. Check the user name and password, and try again."))}}),c("#unregistered_services li.service .content form .cancel_button").click(function(a){c(this).parents(".content").dialog("close")}),c("#registered_services li.service .delete_service_link").click(function(a){a.preventDefault(),c(this).parents("li.service").confirmDelete({message:b.t("confirms.unregister_service","Are you sure you want to unregister this service?"),url:c(this).attr("href"),success:function(a){c(this).slideUp(function(){c("#unregistered_services").find("#unregistered_"+c(this).attr("id")).slideDown()})}})}),c(".service").hover(function(){c(this).addClass("service-hover")},function(){c(this).removeClass("service-hover")}),c("#show_user_services").change(function(){c.ajaxJSON(c("#update_profile_form").attr("action"),"PUT",{"user[show_user_services]":c(this).prop("checked")},function(a){},function(a){})}),c(".delete_pseudonym_link").click(function(a){a.preventDefault(),c(this).parents(".pseudonym").confirmDelete({url:c(this).attr("href"),message:b.t("confirms.delete_login","Are you sure you want to delete this login?")})}),c(".datetime_field").datetime_field(),c(".expires_field").bind("change keyup",function(){c(this).closest("td").find(".hint").showIf(!c(this).val())}),c(".delete_key_link").click(function(a){a.preventDefault(),c(this).closest(".access_token").confirmDelete({url:c(this).attr("rel"),message:b.t("confirms.delete_access_key","Are you sure you want to delete this access key?"),success:function(){c(this).remove(),c(".access_token:visible").length||c("#no_approved_integrations,#access_tokens_holder").toggle()}})}),c("#add_access_token_dialog .cancel_button").click(function(){c("#add_access_token_dialog").dialog("close")}),c("#access_token_form").formSubmit({object_name:"access_token",required:["purpose"],beforeSubmit:function(){c(this).find("button").attr("disabled",!0).filter(".submit_button").text(b.t("buttons.generating_token","Generating Token..."))},success:function(a){c(this).find("button").attr("disabled",!1).filter(".submit_button").text(b.t("buttons.generate_token","Generate Token")),c("#add_access_token_dialog").dialog("close"),c("#no_approved_integrations").hide(),c("#access_tokens_holder").show();var d=c(".access_token.blank:first").clone(!0).removeClass("blank");a.created=c.parseFromISO(a.created_at).datetime_formatted||"--",a.expires=c.parseFromISO(a.expires_at).datetime_formatted||b.t("token_never_expires","never"),a.used="--",d.fillTemplateData({data:a,hrefValues:["id"]}),d.data("token",a),c("#access_tokens > tbody").append(d.show()),d.find(".show_token_link").click()},error:function(){c(this).find("button").attr("disabled",!1).filter(".submit_button").text(b.t("errors.generating_token_failed","Generating Token Failed"))}}),c("#token_details_dialog .regenerate_token").click(function(){var a=confirm(b.t("confirms.regenerate_token","Are you sure you want to regenerate this token?  Anything using this token will have to be updated."));if(!a)return;var d=c("#token_details_dialog"),e=d.data("token"),f=d.data("token_url"),g=c(this);g.text(b.t("buttons.regenerating_token","Regenerating token...")).attr("disabled",!0),c.ajaxJSON(f,"PUT",{"access_token[regenerate]":"1"},function(a){a.created=c.parseFromISO(a.created_at).datetime_formatted||"--",a.expires=c.parseFromISO(a.expires_at).datetime_formatted||b.t("token_never_expires","never"),a.used=c.parseFromISO(a.last_used_at).datetime_formatted||"--",a.visible_token=a.visible_token||"protected",d.fillTemplateData({data:a}).find(".full_token_warning").showIf(a.visible_token.length>10),e.data("token",a),g.text(b.t("buttons.regenerate_token","Regenerate Token")).attr("disabled",!1)},function(){g.text(b.t("errors.regenerating_token_failed","Regenerating Token Failed")).attr("disabled",!1)})}),c(".show_token_link").click(function(a){function d(a){e.fillTemplateData({data:a}),e.data("token_url",f),e.find(".refresh_token").showIf(a.visible_token&&a.visible_token!=="protected").find(".regenerate_token").text(b.t("buttons.regenerate_token","Regenerate Token")).attr("disabled",!1),e.find(".loading_message,.error_loading_message").hide().end().find(".results").show().end().find(".full_token_warning").showIf(a.visible_token.length>10)}a.preventDefault();var e=c("#token_details_dialog"),f=c(this).attr("rel");e.dialog("close").dialog({autoOpen:!1,width:600}).dialog("open");var g=c(this).parents(".access_token");e.data("token",g),e.find(".loading_message").show().end().find(".results,.error_loading_message").hide();var h=g.data("token");h?d(h):c.ajaxJSON(f,"GET",{},function(a){a.created=c.parseFromISO(a.created_at).datetime_formatted||"--",a.expires=c.parseFromISO(a.expires_at).datetime_formatted||b.t("token_never_expires","never"),a.used=c.parseFromISO(a.last_used_at).datetime_formatted||"--",a.visible_token=a.visible_token||"protected",g.data("token",a),d(a)},function(){e.find(".error_loading_message").show().end().find(".results,.loading_message").hide()})}),c(".add_access_token_link").click(function(a){a.preventDefault(),c("#access_token_form").find("button").attr("disabled",!1).filter(".submit_button").text(b.t("buttons.generate_token","Generate Token")),c("#add_access_token_dialog").find(":input").val("").end().dialog({width:500})}),c(document).fragmentChange(function(a,b){var d=b.substring(1);d.match(/^register/)&&(d=d.substring(9)),c("#unregistered_service_"+d+":visible").length>0&&c("#unregistered_service_"+d+":visible").click()}).fragmentChange(),c("#profile_pic_dialog .add_pic_link").click(function(a){a.preventDefault(),c("#add_pic_form").slideToggle()}),c("#profile_pic_dialog").delegate("img","click",function(){c(this).hasClass("pending")||(c("#profile_pic_dialog .img.selected").removeClass("selected"),c(this).parent().addClass("selected"),c("#profile_pic_dialog .select_button").attr("disabled",!1))}),c("#add_pic_form").formSubmit({fileUpload:!0,beforeSubmit:function(){c(this).find("button").attr("disabled",!0).text(b.t("buttons.adding_file","Adding File..."));var a=c("<span class='img'><img/></span>"),d=a.find("img");return d.attr("src","/images/ajax-loader.gif"),d.addClass("pending"),c("#profile_pic_dialog .profile_pic_list div").before(a),a},success:function(a,d){var e=a.attachment,f=a.avatar,g=c("#add_pic_form");c(this).find("button").prop("disabled",!1).text(b.t("buttons.add_file","Add File")),g.slideToggle();if(d){var h=d.find("img");h.data("type","attachment").data("token",a.avatar.token).attr("alt",e.display_name),h[0].onerror=function(){h.attr("src","/images/dotted_pic.png")},i.start().then(function(){h.click()})}},error:function(a,d){c(this).find("button").attr("disabled",!1).text(b.t("errors.adding_file_failed","Adding File Failed")),d&&d.remove()}}),c("#profile_pic_dialog .cancel_button").click(function(){c("#profile_pic_dialog").dialog("close")}),c("#profile_pic_dialog .select_button").click(function(){var a="/api/v1/users/self",d=c("#profile_pic_dialog"),e=d.find("button"),f=c("#profile_pic_dialog .profile_pic_list .img.selected img"),g={"user[avatar][token]":f.data("token")};e.prop("disabled",!0).filter(".select_button").text(b.t("buttons.selecting_image","Selecting Image..."));if(f.length===0)return;c.ajaxJSON(a,"PUT",g,function(a){var f=c(".profile_pic_link img"),g=c("#profile_pic_dialog .img.selected img").attr("src");e.prop("disabled",!1).filter(".select_button").text(b.t("buttons.select_image","Select Image")),a.avatar_url==="/images/no_pic.gif"&&(a.avatar_url="/images/dotted_pic.png"),f.attr("src",g),d.dialog("close")},function(a){e.prop("disabled",!1).filter(".select_button").text(b.t("errors.selecting_image_failed","Selecting image failed, please try again"))})}),c(".profile_pic_link").click(function(a){a.preventDefault();var d=c("#profile_pic_dialog");d.find(".img.selected").removeClass("selected"),d.find(".select_button").prop("disabled",!0);if(c(this).hasClass("locked")){alert(b.t("alerts.profile_picture_locked","Your profile picture has been locked by an administrator, and cannot be changed."));return}d.hasClass("loaded")||(d.find(".profile_pic_list h3").text(b.t("headers.loading_images","Loading Images...")),c.ajaxJSON(h,"GET",{},function(a){if(a&&a.length>0){d.addClass("loaded"),d.find(".profile_pic_list h3").remove();var e=!1;for(var f in a){var g=a[f],h=c("<span />",{"class":"img"}),j=c("<img />").appendTo(h);g.pending?(j.addClass("pending").attr("src","/images/ajax-loader.gif").data("token",g.token),e=!0):j.attr("src",g.url).data("token",g.token),j.data("token",g.token).attr("alt",g.display_name||g.type).attr("title",g.display_name||g.type).attr("data-type",g.type),j[0].onerror=function(){h.remove()},d.find(".profile_pic_list div").before(h)}e&&i.start()}else d.find(".profile_pic_list h3").text(b.t("errors.loading_images_failed","Loading Images Failed, please try again"))},function(a){d.find(".profile_pic_list h3").text(b.t("errors.loading_images_failed","Loading Images Failed, please try again"))})),c("#profile_pic_dialog").dialog("close").dialog({autoOpen:!1,title:b.t("titles.select_profile_pic","Select Profile Pic"),width:500,height:300}).dialog("open")});var j=function(){var a=c(".profile_pic_link img")[0];a&&(a.complete?a.width<5&&(a.src="/images/dotted_pic.png"):setTimeout(j,500))};setTimeout(j,500)}),require(["i18n!profile","jquery","jquery.ajaxJSON","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.loadingImg","jquery.rails_flash_notifications","jquery.templateData","jqueryui/tabs"],function(a,b){b(document).ready(function(){b("#communication_channels").tabs(),b("#communication_channels").bind("tabsshow",function(a){if(b(this).css("display")!="none"){var c=b(this).data("selected.tabs");c==0?b("#register_email_address").find(":text:first").focus().select():b("#register_sms_number").find(":text:first").focus().select()}}),b(".channel_list tr").hover(function(){if(b(this).hasClass("unconfirmed")){var c=a.t("titles.contact_not_confirmed","This contact has not been confirmed.  Click the address for more details");b(this).closest(".email_channels").length>0&&(c=a.t("titles.email_not_confirmed","This email has not been confirmed.  Click the address for more details")),b(this).attr("title",c),b(this).find("a.path").parent().attr("title",c)}},function(){b(this).attr("title",""),b(this).find("a.path").parent().attr("title",b(this).find("a.path").text())}),b(".add_email_link,.add_contact_link").click(function(c){c.preventDefault();var d="email";b("#communication_channels").show().dialog("close").dialog({title:a.t("titles.register_communication","Register Communication"),width:430,resizable:!1,modal:!0,open:function(){b("#communication_channels").triggerHandler("tabsshow")}}).dialog("open"),b(this).hasClass("add_contact_link")?(b("#communication_channels").tabs("select","#register_sms_number"),d="sms"):b("#communication_channels").tabs("select","#register_email_address")}),b("#register_sms_number .user_selected").bind("change blur keyup focus",function(){var a=b(this).parents("#register_sms_number"),c=a.find(".sms_number").val().replace(/[^\d]/g,"");a.find(".should_be_10_digits").showIf(c&&c.length!=10);var d=a.find(".carrier").val();a.find(".sms_email").attr("disabled",d!="other");if(d=="other")return;d=d.replace("#",c),a.find(".sms_email").val(d)}),b("#register_sms_number,#register_email_address").formSubmit({beforeSubmit:function(c){var d=b(".email_channels"),c=b(this).getFormData({object_name:"communication_channel"});b(this).attr("id")=="register_sms_number"&&(d=b(".other_channels"));var e=b(this).getFormData({object_name:"communication_channel"}).address;b(this).data("email",e),d.find(".channel .path").each(function(){b(this).text()==e&&(e="")}),d.removeClass("single");var f=null;return e&&(f=d.find(".channel.blank").clone(!0).removeClass("blank"),f.find(".path").attr("title",a.t("titles.unconfirmed_click_to_confirm","Unconfirmed.  Click to confirm")),f.fillTemplateData({data:{path:e}}),d.find(".channel.blank").before(f.show())),e?(b("#communication_channels").dialog("close"),f.loadingImage({image_size:"small"}),f):!1},success:function(a,c){b("#communication_channels").dialog("close"),c.loadingImage("remove"),a.channel_id=a.id;var d="email_select";b(this).attr("id")=="register_sms_number"&&(d="sms_select");var e=b("#select_templates ."+d),f=b(document.createElement("option"));f.val(a.id).text(a.address),e.find("option:last").before(f),e.find("option.blank_option").remove(),b("."+d).each(function(){var c=b(this).val();c=="new"&&(c=a.id),b(this).after(e.clone(!0).val(c)).remove()}),c.fillTemplateData({data:a,id:"channel_"+a.id,hrefValues:["user_id","pseudonym_id","channel_id"]}),c.find(".path").triggerHandler("click")},error:function(a,b){b.loadingImage("remove"),b.remove()}}),b("a.email_address_taken_learn_more").live("click",function(a){a.preventDefault()}),b(".channel_list .channel .delete_channel_link").click(function(a){a.preventDefault(),b(this).parents(".channel").confirmDelete({url:b(this).attr("href"),success:function(a){var c=b(this).parents(".channel_list");b(this).remove(),c.toggleClass("single",c.find(".channel:visible").length<=1)}})}),b("#confirm_communication_channel .cancel_button").click(function(a){b("#confirm_communication_channel").dialog("close")}),b(".email_channels .channel .path,.other_channels .channel .path").click(function(c){c.preventDefault();var d=b(this).parents(".channel");if(d.hasClass("unconfirmed")){var e="email address",f=a.t("titles.confirm_email_address","Confirm Email Address");b(this).parents(".channel_list").hasClass("other_channels")&&(e="sms number",f=a.t("titles.confirm_sms_number","Confirm SMS Number"));var g=b("#confirm_communication_channel");d.parents(".email_channels").length>0&&(g=b("#confirm_email_channel"));var h=d.getTemplateData({textValues:["user_id","pseudonym_id","channel_id"]}),i=b(this).text();e=="sms number"&&(i=i.split("@")[0]),h.code="",g.fillTemplateData({data:{path:i,path_type:e,user_id:h.user_id,channel_id:h.channel_id}}),g.find(".status_message").css("visibility","hidden");var j=b(".re_send_confirmation_url").attr("href");j=b.replaceTags(j,"id",h.channel_id),j=b.replaceTags(j,"pseudonym_id",h.pseudonym_id),j=b.replaceTags(j,"user_id",h.user_id),g.find(".re_send_confirmation_link").attr("href",j).text(a.t("links.resend_confirmation","Re-Send Confirmation")),g.fillFormData(h),g.show().dialog("close").dialog({autoOpen:!1,title:f,width:350,open:function(){b(this).find(":text:first").focus().select()}}).dialog("open")}}),b("#confirm_communication_channel").formSubmit({formErrors:!1,processData:function(a){var c=b(this).find(".register_channel_link").attr("href");c=b.replaceTags(c,"id",a.channel_id),c=b.replaceTags(c,"code",a.code),b(this).attr("action",c)},beforeSubmit:function(c){b(this).find(".status_message").text(a.t("confirming_contact","Confirming...")).css("visibility","visible")},success:function(c){b(this).find(".status_message").css("visibility","hidden");var d=c.communication_channel.pseudonym_id;b("#channel_"+c.communication_channel.id).removeClass("unconfirmed"),b(".channel.pseudonym_"+d).removeClass("unconfirmed"),b("#confirm_communication_channel").dialog("close"),b.flashMessage(a.t("notices.contact_confirmed","Contact successfully confirmed!"))},error:function(c){b(this).find(".status_message").text(a.t("errors.confirmation_failed","Confirmation failed.  Please try again."))}}),b(".channel_list .channel .default_link").click(function(a){a.preventDefault();var c=b(this).parents(".channel").getTemplateData({textValues:["channel_id"]}).channel_id,d={default_email_id:c};b.ajaxJSON(b(this).attr("href"),"PUT",d,function(a){var c=a.user.communication_channel.id;b(".channel.default").removeClass("default"),b(".channel#channel_"+c).addClass("default"),b(".default_email.display_data").text(a.user.pseudonym.unique_id)})}),b(".dialog .re_send_confirmation_link").click(function(c){c.preventDefault();var d=b(this);d.text(a.t("links.resending_confirmation","Re-Sending...")),b.ajaxJSON(d.attr("href"),"POST",{},function(b){d.text(a.t("links.resent_confirmation","Done! Message may take a few minutes."))},function(b){d.text(a.t("links.resend_confirmation_failed","Request failed. Try again."))})}),b("#communication_channels .cancel_button").click(function(a){b("#communication_channels").dialog("close")}),b("#confirm_email_channel .cancel_button").click(function(){b("#confirm_email_channel").dialog("close")})})}),define("communication_channels",function(){}),function(){require(["compiled/util/BackoffPoller","profile","user_sortable_name","communication_channels"])}.call(this),define("compiled/bundles/profile",function(){})