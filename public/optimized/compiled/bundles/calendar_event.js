define("translations/calendar_events",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{calendar_events:{no_content:"Sin Contenido"}}}})}),define("calendar_event",["i18n!calendar_events","jquery","wikiSidebar","jquery.instructure_date_and_time","jquery.instructure_forms","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.loadingImg","jquery.templateData","compiled/tinymce","tinymce.editor_box","vendor/date"],function(a,b,c){var d=a.t("no_content","No Content");b(function(a){function b(b){f.show(),g.hide().find("textarea").editorBox("destroy"),c&&(c.hide(),a("#sidebar_content").show()),b&&g.hasClass("new_event")&&(window.location.href=a(".calendar_url").attr("href"))}function e(){f.hide();var b=f.getTemplateData({textValues:["start_at_date_string","start_at_time_string","end_at_time_string","title","all_day","all_day_date"]});b.description==d&&(b.description=""),b.start_date=b.start_at_date_string,b.start_time=b.start_at_time_string,b.end_time=b.end_at_time_string,b.all_day=="true"&&(b.all_day_date&&(b.start_date=b.all_day_date),b.start_time="",b.end_time=""),g.fillFormData(b,{object_name:"calendar_event"}).show().find("textarea").editorBox(),c&&(c.attachToEditor(g.find("textarea:first")),c.show(),a("#sidebar_content").hide())}var f=a("#full_calendar_event"),g=a("#edit_calendar_event_form"),h=a("#full_calendar_event_holder");c&&c.init(),a(".date_field").date_field(),a(".time_field").time_field(),a(".delete_event_link").click(function(b){b.preventDefault(),a("#full_calendar_event_holder").confirmDelete({message:"Are you sure you want to delete this event?",url:a(this).attr("href"),success:function(){a(this).fadeOut("slow"),window.location.href=a(".calendar_url").attr("href")}})}),a(".switch_full_calendar_event_view").click(function(){return a("#calendar_event_description").editorBox("toggle"),!1}),a(".edit_calendar_event_link").click(function(){return e(),!1}),g.find(".cancel_button").click(function(){return b(!0),!1}),g.formSubmit({object_name:"calendar_event",processData:function(b){return b["calendar_event[start_at]"]=a.datetime.process(b.start_date+" "+b.start_time),b["calendar_event[end_at]"]=a.datetime.process(b.start_date+" "+b.end_time),b["calendar_event[description]"]=a(this).find("textarea").editorBox("get_code"),h.fillTemplateData({data:b,except:["description"]}),b},beforeSubmit:function(a){b(),h.loadingImage()},success:function(b){var c=b.calendar_event,d=a.parseFromISO(c.start_at),e=a.parseFromISO(c.end_at),f=Date.parse(c.all_day_date).toString("MMM dd, yyyy");c.start_at_date_string=d.date_formatted,c.start_at_time_string=d.time_formatted,c.end_at_time_string=e.time_formatted,c.all_day_date=f||"",h.find(".from_string,.to_string,.end_at_time_string").showIf(c.end_at&&c.end_at!=c.start_at),h.find(".at_string").showIf(!c.end_at||c.end_at==c.start_at),h.find(".not_all_day").showIf(!c.all_day),h.loadingImage("remove").fillTemplateData({data:c,htmlValues:["description"]}),a(this).find("textarea").editorBox("set_code",c.description);var g=null,i=null;c.start_at&&(i=c.start_at.substring(0,4),g=c.start_at.substring(5,7));var j=a(".base_calendar_url").attr("href"),k=j.split(/#/),l=k[1],m=k[0],n={};try{n=a.parseJSON(l)||{}}catch(o){n={}}g&&i&&(n.month=g,n.year=i),a(".calendar_url").attr("href",m+"#"+a.encodeToHex(JSON.stringify(n))),h.hasClass("editing")&&(window.location.href=a(".calendar_url").attr("href"))},error:function(b){h.loadingImage("remove"),a(".edit_calendar_event_link:first").click(),g.formErrors(b)}}),setTimeout(function(){h.hasClass("editing")&&a(".edit_calendar_event_link:first").click()},500),a(document).fragmentChange(function(b,c){c=="#edit"&&a(".edit_calendar_event_link:first").click()}),a.scrollSidebar()})}),function(){require(["calendar_event"])}.call(this),define("compiled/bundles/calendar_event",function(){})