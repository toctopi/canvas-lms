/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-05-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
/*!
 * jQuery UI @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
/*!
 * jQuery UI Mouse @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
/*!
 * jQuery Tiny Pub/Sub - v0.6 - 1/10/2011
 * http://benalman.com/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
/**
 * @license RequireJS order 1.0.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
(function(a,b){function c(a){var b=K[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}function d(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(N,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:J.isNumeric(d)?+d:M.test(d)?J.parseJSON(d):d}catch(f){}J.data(a,c,d)}else d=b}return d}function e(a){for(var b in a){if(b==="data"&&J.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function f(a,b,c){var d=b+"defer",e=b+"queue",f=b+"mark",g=J._data(a,d);g&&(c==="queue"||!J._data(a,e))&&(c==="mark"||!J._data(a,f))&&setTimeout(function(){!J._data(a,e)&&!J._data(a,f)&&(J.removeData(a,d,!0),g.fire())},0)}function g(){return!1}function h(){return!0}function i(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function j(a,b,c){b=b||0;if(J.isFunction(b))return J.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return J.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=J.grep(a,function(a){return a.nodeType===1});if(bk.test(b))return J.filter(b,d,!c);b=J.filter(b,d)}return J.grep(a,function(a,d){return J.inArray(a,b)>=0===c})}function k(a){var b=bo.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function l(a,b){return J.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a,b){if(b.nodeType!==1||!J.hasData(a))return;var c,d,e,f=J._data(a),g=J._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)J.event.add(b,c,h[c][d])}g.data&&(g.data=J.extend({},g.data))}function n(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(J.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached")}function o(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function p(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function q(a){var b=(a.nodeName||"").toLowerCase();b==="input"?p(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&J.grep(a.getElementsByTagName("input"),p)}function r(a){var b=G.createElement("div");return bC.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function s(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,f=4;if(d>0){if(c!=="border")for(;e<f;e+=2)c||(d-=parseFloat(J.css(a,"padding"+bL[e]))||0),c==="margin"?d+=parseFloat(J.css(a,c+bL[e]))||0:d-=parseFloat(J.css(a,"border"+bL[e]+"Width"))||0;return d+"px"}d=bM(a,b);if(d<0||d==null)d=a.style[b];if(bH.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<f;e+=2)d+=parseFloat(J.css(a,"padding"+bL[e]))||0,c!=="padding"&&(d+=parseFloat(J.css(a,"border"+bL[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(J.css(a,c+bL[e]))||0);return d+"px"}function t(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(J.isFunction(c)){var d=b.toLowerCase().split(b_),e=0,f=d.length,g,h,i;for(;e<f;e++)g=d[e],i=/^\+/.test(g),i&&(g=g.substr(1)||"*"),h=a[g]=a[g]||[],h[i?"unshift":"push"](c)}}}function u(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===cd,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=u(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=u(a,c,d,e,"*",g)),l}function v(a,c){var d,e,f=J.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&J.extend(!0,a,e)}function w(a,b,c,d){if(J.isArray(b))J.each(b,function(b,e){c||bQ.test(a)?d(a,e):w(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&J.type(b)==="object")for(var e in b)w(a+"["+e+"]",b[e],c,d);else d(a,b)}function x(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function y(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},f,g,h=d.length,i,j=d[0],k,l,m,n,o;for(f=1;f<h;f++){if(f===1)for(g in a.converters)typeof g=="string"&&(e[g.toLowerCase()]=a.converters[g]);k=j,j=d[f];if(j==="*")j=k;else if(k!=="*"&&k!==j){l=k+" "+j,m=e[l]||e["* "+j];if(!m){o=b;for(n in e){i=n.split(" ");if(i[0]===k||i[0]==="*"){o=e[i[1]+" "+j];if(o){n=e[n],n===!0?m=o:o===!0&&(m=n);break}}}}!m&&!o&&J.error("No conversion from "+l.replace(" "," to ")),m!==!0&&(c=m?m(c):o(n(c)))}}return c}function z(){try{return new a.XMLHttpRequest}catch(b){}}function A(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function B(){return setTimeout(C,0),cv=J.now()}function C(){cv=b}function D(a,b){var c={};return J.each(cu.concat.apply([],cu.slice(0,b)),function(){c[this]=a}),c}function E(a){if(!co[a]){var b=G.body,c=J("<"+a+">").appendTo(b),d=c.css("display");c.remove();if(d==="none"||d===""){cp||(cp=G.createElement("iframe"),cp.frameBorder=cp.width=cp.height=0),b.appendChild(cp);if(!cq||!cp.createElement)cq=(cp.contentWindow||cp.contentDocument).document,cq.write((J.support.boxModel?"<!doctype html>":"")+"<html><body>"),cq.close();c=cq.createElement(a),cq.body.appendChild(c),d=J.css(c,"display"),b.removeChild(cp)}co[a]=d}return co[a]}function F(a){return J.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var G=a.document,H=a.navigator,I=a.location,J=function(){function c(){if(d.isReady)return;try{G.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}var d=function(a,b){return new d.fn.init(a,b,g)},e=a.jQuery,f=a.$,g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,i=/\S/,j=/^\s+/,k=/\s+$/,l=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,p=/(?:^|:|,)(?:\s*\[)+/g,q=/(webkit)[ \/]([\w.]+)/,r=/(opera)(?:.*version)?[ \/]([\w.]+)/,s=/(msie) ([\w.]+)/,t=/(mozilla)(?:.*? rv:([\w.]+))?/,u=/-([a-z]|[0-9])/ig,v=/^-ms-/,w=function(a,b){return(b+"").toUpperCase()},x=H.userAgent,y,z,A,B=Object.prototype.toString,C=Object.prototype.hasOwnProperty,D=Array.prototype.push,E=Array.prototype.slice,F=String.prototype.trim,I=Array.prototype.indexOf,J={};return d.fn=d.prototype={constructor:d,init:function(a,c,e){var f,g,i,j;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!c&&G.body)return this.context=G,this[0]=G.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?f=h.exec(a):f=[null,a,null];if(f&&(f[1]||!c)){if(f[1])return c=c instanceof d?c[0]:c,j=c?c.ownerDocument||c:G,i=l.exec(a),i?d.isPlainObject(c)?(a=[G.createElement(i[1])],d.fn.attr.call(a,c,!0)):a=[j.createElement(i[1])]:(i=d.buildFragment([f[1]],[j]),a=(i.cacheable?d.clone(i.fragment):i.fragment).childNodes),d.merge(this,a);g=G.getElementById(f[2]);if(g&&g.parentNode){if(g.id!==f[2])return e.find(a);this.length=1,this[0]=g}return this.context=G,this.selector=a,this}return!c||c.jquery?(c||e).find(a):this.constructor(c).find(a)}return d.isFunction(a)?e.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),d.makeArray(a,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var e=this.constructor();return d.isArray(a)?D.apply(e,a):d.merge(e,a),e.prevObject=this,e.context=this.context,b==="find"?e.selector=this.selector+(this.selector?" ":"")+c:b&&(e.selector=this.selector+"."+b+"("+c+")"),e},each:function(a,b){return d.each(this,a,b)},ready:function(a){return d.bindReady(),z.add(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:D,sort:[].sort,splice:[].splice},d.fn.init.prototype=d.fn,d.extend=d.fn.extend=function(){var a,c,e,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!d.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){e=i[c],f=a[c];if(i===f)continue;l&&f&&(d.isPlainObject(f)||(g=d.isArray(f)))?(g?(g=!1,h=e&&d.isArray(e)?e:[]):h=e&&d.isPlainObject(e)?e:{},i[c]=d.extend(l,h,f)):f!==b&&(i[c]=f)}return i},d.extend({noConflict:function(b){return a.$===d&&(a.$=f),b&&a.jQuery===d&&(a.jQuery=e),d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(a===!0&&!--d.readyWait||a!==!0&&!d.isReady){if(!G.body)return setTimeout(d.ready,1);d.isReady=!0;if(a!==!0&&--d.readyWait>0)return;z.fireWith(G,[d]),d.fn.trigger&&d(G).trigger("ready").off("ready")}},bindReady:function(){if(z)return;z=d.Callbacks("once memory");if(G.readyState==="complete")return setTimeout(d.ready,1);if(G.addEventListener)G.addEventListener("DOMContentLoaded",A,!1),a.addEventListener("load",d.ready,!1);else if(G.attachEvent){G.attachEvent("onreadystatechange",A),a.attachEvent("onload",d.ready);var b=!1;try{b=a.frameElement==null}catch(e){}G.documentElement.doScroll&&b&&c()}},isFunction:function(a){return d.type(a)==="function"},isArray:Array.isArray||function(a){return d.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):J[B.call(a)]||"object"},isPlainObject:function(a){if(!a||d.type(a)!=="object"||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!C.call(a,"constructor")&&!C.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var e;for(e in a);return e===b||C.call(a,e)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(m.test(b.replace(n,"@").replace(o,"]").replace(p,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var e,f;try{a.DOMParser?(f=new DOMParser,e=f.parseFromString(c,"text/xml")):(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(c))}catch(g){e=b}return(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+c),e},noop:function(){},globalEval:function(b){b&&i.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(v,"ms-").replace(u,w)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,e){var f,g=0,h=a.length,i=h===b||d.isFunction(a);if(e){if(i){for(f in a)if(c.apply(a[f],e)===!1)break}else for(;g<h;)if(c.apply(a[g++],e)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:F?function(a){return a==null?"":F.call(a)}:function(a){return a==null?"":a.toString().replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var e=d.type(a);a.length==null||e==="string"||e==="function"||e==="regexp"||d.isWindow(a)?D.call(c,a):d.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(I)return I.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,e){var f,g,h=[],i=0,j=a.length,k=a instanceof d||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||d.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,e),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,e),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var e=a[c];c=a,a=e}if(!d.isFunction(a))return b;var f=E.call(arguments,2),g=function(){return a.apply(c,f.concat(E.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||d.guid++,g},access:function(a,c,e,f,g,h,i){var j,k=e==null,l=0,m=a.length;if(e&&typeof e=="object"){for(l in e)d.access(a,c,l,e[l],1,h,f);g=1}else if(f!==b){j=i===b&&d.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(d(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],e,j?f.call(a[l],l,c(a[l],e)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],e):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=q.exec(a)||r.exec(a)||s.exec(a)||a.indexOf("compatible")<0&&t.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(e,c){return c&&c instanceof d&&!(c instanceof a)&&(c=a(c)),d.fn.init.call(this,e,c,b)},a.fn.init.prototype=a.fn;var b=a(G);return a},browser:{}}),d.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){J["[object "+b+"]"]=b.toLowerCase()}),y=d.uaMatch(x),y.browser&&(d.browser[y.browser]=!0,d.browser.version=y.version),d.browser.webkit&&(d.browser.safari=!0),i.test("Â ")&&(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/),g=d(G),G.addEventListener?A=function(){G.removeEventListener("DOMContentLoaded",A,!1),d.ready()}:G.attachEvent&&(A=function(){G.readyState==="complete"&&(G.detachEvent("onreadystatechange",A),d.ready())}),d}(),K={};J.Callbacks=function(a){a=a?K[a]||c(a):{};var d=[],e=[],f,g,h,i,j,k,l=function(b){var c,e,f,g,h;for(c=0,e=b.length;c<e;c++)f=b[c],g=J.type(f),g==="array"?l(f):g==="function"&&(!a.unique||!n.has(f))&&d.push(f)},m=function(b,c){c=c||[],f=!a.memory||[b,c],g=!0,h=!0,k=i||0,i=0,j=d.length;for(;d&&k<j;k++)if(d[k].apply(b,c)===!1&&a.stopOnFalse){f=!0;break}h=!1,d&&(a.once?f===!0?n.disable():d=[]:e&&e.length&&(f=e.shift(),n.fireWith(f[0],f[1])))},n={add:function(){if(d){var a=d.length;l(arguments),h?j=d.length:f&&f!==!0&&(i=a,m(f[0],f[1]))}return this},remove:function(){if(d){var b=arguments,c=0,e=b.length;for(;c<e;c++)for(var f=0;f<d.length;f++)if(b[c]===d[f]){h&&f<=j&&(j--,f<=k&&k--),d.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(d){var b=0,c=d.length;for(;b<c;b++)if(a===d[b])return!0}return!1},empty:function(){return d=[],this},disable:function(){return d=e=f=b,this},disabled:function(){return!d},lock:function(){return e=b,(!f||f===!0)&&n.disable(),this},locked:function(){return!e},fireWith:function(b,c){return e&&(h?a.once||e.push([b,c]):(!a.once||!f)&&m(b,c)),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!g}};return n};var L=[].slice;J.extend({Deferred:function(a){var b=J.Callbacks("once memory"),c=J.Callbacks("once memory"),d=J.Callbacks("memory"),e="pending",f={resolve:b,reject:c,notify:d},g={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return h.done(a).fail(b).progress(c),this},always:function(){return h.done.apply(h,arguments).fail.apply(h,arguments),this},pipe:function(a,b,c){return J.Deferred(function(d){J.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],f;J.isFunction(c)?h[a](function(){f=c.apply(this,arguments),f&&J.isFunction(f.promise)?f.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===h?d:this,[f])}):h[a](d[e])})}).promise()},promise:function(a){if(a==null)a=g;else for(var b in g)a[b]=g[b];return a}},h=g.promise({}),i;for(i in f)h[i]=f[i].fire,h[i+"With"]=f[i].fireWith;return h.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(h,h),h},when:function(a){function b(a){return function(b){d[a]=arguments.length>1?L.call(arguments,0):b,--h||j.resolveWith(j,d)}}function c(a){return function(b){g[a]=arguments.length>1?L.call(arguments,0):b,j.notifyWith(k,g)}}var d=L.call(arguments,0),e=0,f=d.length,g=new Array(f),h=f,i=f,j=f<=1&&a&&J.isFunction(a.promise)?a:J.Deferred(),k=j.promise();if(f>1){for(;e<f;e++)d[e]&&d[e].promise&&J.isFunction(d[e].promise)?d[e].promise().then(b(e),j.reject,c(e)):--h;h||j.resolveWith(j,d)}else j!==a&&j.resolveWith(j,f?[a]:[]);return k}}),J.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n=G.createElement("div"),o=G.documentElement;n.setAttribute("className","t"),n.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=G.createElement("select"),f=e.appendChild(G.createElement("option")),g=n.getElementsByTagName("input")[0],b={leadingWhitespace:n.firstChild.nodeType===3,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:d.getAttribute("href")==="/a",opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:g.value==="on",optSelected:f.selected,getSetAttribute:n.className!=="t",enctype:!!G.createElement("form").enctype,html5Clone:G.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},J.boxModel=b.boxModel=G.compatMode==="CSS1Compat",g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete n.test}catch(p){b.deleteExpando=!1}!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick")),g=G.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue=g.value==="t",g.setAttribute("checked","checked"),g.setAttribute("name","t"),n.appendChild(g),h=G.createDocumentFragment(),h.appendChild(n.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(n);if(n.attachEvent)for(l in{submit:1,change:1,focusin:1})k="on"+l,m=k in n,m||(n.setAttribute(k,"return;"),m=typeof n[k]=="function"),b[l+"Bubbles"]=m;return h.removeChild(n),h=e=f=n=g=null,J(function(){var c,d,e,f,g,h,j,k,l,o,p,q,r,s=G.getElementsByTagName("body")[0];if(!s)return;k=1,r="padding:0;margin:0;border:",p="position:absolute;top:0;left:0;width:1px;height:1px;",q=r+"0;visibility:hidden;",l="style='"+p+r+"5px solid #000;",o="<div "+l+"display:block;'><div style='"+r+"0;display:block;overflow:hidden;'></div></div>"+"<table "+l+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",c=G.createElement("div"),c.style.cssText=q+"width:0;height:0;position:static;top:0;margin-top:"+k+"px",s.insertBefore(c,s.firstChild),n=G.createElement("div"),c.appendChild(n),n.innerHTML="<table><tr><td style='"+r+"0;display:none'></td><td>t</td></tr></table>",i=n.getElementsByTagName("td"),m=i[0].offsetHeight===0,i[0].style.display="",i[1].style.display="none",b.reliableHiddenOffsets=m&&i[0].offsetHeight===0,a.getComputedStyle&&(n.innerHTML="",j=G.createElement("div"),j.style.width="0",j.style.marginRight="0",n.style.width="2px",n.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0),typeof n.style.zoom!="undefined"&&(n.innerHTML="",n.style.width=n.style.padding="1px",n.style.border=0,n.style.overflow="hidden",n.style.display="inline",n.style.zoom=1,b.inlineBlockNeedsLayout=n.offsetWidth===3,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=n.offsetWidth!==3),n.style.cssText=p+q,n.innerHTML=o,d=n.firstChild,e=d.firstChild,g=d.nextSibling.firstChild.firstChild,h={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:g.offsetTop===5},e.style.position="fixed",e.style.top="20px",h.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",h.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,h.doesNotIncludeMarginInBodyOffset=s.offsetTop!==k,a.getComputedStyle&&(n.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(n,null)||{marginTop:0}).marginTop!=="1%"),typeof c.style.zoom!="undefined"&&(c.style.zoom=1),s.removeChild(c),j=n=c=null,J.extend(b,h)}),b}();var M=/^(?:\{.*\}|\[.*\])$/,N=/([A-Z])/g;J.extend({cache:{},uuid:0,expando:"jQuery"+(J.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?J.cache[a[J.expando]]:a[J.expando],!!a&&!e(a)},data:function(a,c,d,e){if(!J.acceptData(a))return;var f,g,h,i=J.expando,j=typeof c=="string",k=a.nodeType,l=k?J.cache:a,m=k?a[i]:a[i]&&i,n=c==="events";if((!m||!l[m]||!n&&!e&&!l[m].data)&&j&&d===b)return;m||(k?a[i]=m=++J.uuid:m=i),l[m]||(l[m]={},k||(l[m].toJSON=J.noop));if(typeof c=="object"||typeof c=="function")e?l[m]=J.extend(l[m],c):l[m].data=J.extend(l[m].data,c);return f=g=l[m],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[J.camelCase(c)]=d),n&&!g[c]?f.events:(j?(h=g[c],h==null&&(h=g[J.camelCase(c)])):h=g,h)},removeData:function(a,b,c){if(!J.acceptData(a))return;var d,f,g,h=J.expando,i=a.nodeType,j=i?J.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){J.isArray(b)||(b in d?b=[b]:(b=J.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(f=0,g=b.length;f<g;f++)delete d[b[f]];if(!(c?e:J.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!e(j[k]))return}J.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(J.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)},_data:function(a,b,c){return J.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=J.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),J.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length){l=J.data(j);if(j.nodeType===1&&!J._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")===0&&(h=J.camelCase(h.substring(5)),d(j,h,l[h]));J._data(j,"parsedAttrs",!0)}}return l}return typeof a=="object"?this.each(function(){J.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",J.access(this,function(c){if(c===b)return l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=J.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l;e[1]=c,this.each(function(){var b=J(this);b.triggerHandler("setData"+f,e),J.data(this,a,c),b.triggerHandler("changeData"+f,e)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){J.removeData(this,a)})}}),J.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",J._data(a,b,(J._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(J._data(b,d)||1)-1;e?J._data(b,d,e):(J.removeData(b,d,!0),f(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=J._data(a,b),c&&(!d||J.isArray(c)?d=J._data(a,b,J.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=J.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),J._data(a,b+".run",e),d.call(a,function(){J.dequeue(a,b)},e)),c.length||(J.removeData(a,b+"queue "+b+".run",!0),f(a,b,"queue"))}}),J.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?J.queue(this[0],a):c===b?this:this.each(function(){var b=J.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&J.dequeue(this,a)})},dequeue:function(a){return this.each(function(){J.dequeue(this,a)})},delay:function(a,b){return a=J.fx?J.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--h||e.resolveWith(f,[f])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var e=J.Deferred(),f=this,g=f.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=J.data(f[g],i,b,!0)||(J.data(f[g],j,b,!0)||J.data(f[g],k,b,!0))&&J.data(f[g],i,J.Callbacks("once memory"),!0))h++,l.add(d);return d(),e.promise(c)}});var O=/[\n\t\r]/g,P=/\s+/,Q=/\r/g,R=/^(?:button|input)$/i,S=/^(?:button|input|object|select|textarea)$/i,T=/^a(?:rea)?$/i,U=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=J.support.getSetAttribute,W,X,Y;J.fn.extend({attr:function(a,b){return J.access(this,J.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){J.removeAttr(this,a)})},prop:function(a,b){return J.access(this,J.prop,a,b,arguments.length>1)},removeProp:function(a){return a=J.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(J.isFunction(a))return this.each(function(b){J(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(P);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{f=" "+e.className+" ";for(g=0,h=b.length;g<h;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");e.className=J.trim(f)}}}return this},removeClass:function(a){var c,d,e,f,g,h,i;if(J.isFunction(a))return this.each(function(b){J(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(P);for(d=0,e=this.length;d<e;d++){f=this[d];if(f.nodeType===1&&f.className)if(a){g=(" "+f.className+" ").replace(O," ");for(h=0,i=c.length;h<i;h++)g=g.replace(" "+c[h]+" "," ");f.className=J.trim(g)}else f.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return J.isFunction(a)?this.each(function(c){J(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=J(this),h=b,i=a.split(P);while(e=i[f++])h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&J._data(this,"__className__",this.className),this.className=this.className||a===!1?"":J._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f)return c=J.valHooks[f.type]||J.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,typeof d=="string"?d.replace(Q,""):d==null?"":d);return}return e=J.isFunction(a),this.each(function(d){var f=J(this),g;if(this.nodeType!==1)return;e?g=a.call(this,d,f.val()):g=a,g==null?g="":typeof g=="number"?g+="":J.isArray(g)&&(g=J.map(g,function(a){return a==null?"":a+""})),c=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,g,"value")===b)this.value=g})}}),J.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i=a.type==="select-one";if(f<0)return null;c=i?f:0,d=i?f+1:h.length;for(;c<d;c++){e=h[c];if(e.selected&&(J.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!J.nodeName(e.parentNode,"optgroup"))){b=J(e).val();if(i)return b;g.push(b)}}return i&&!g.length&&h.length?J(h[f]).val():g},set:function(a,b){var c=J.makeArray(b);return J(a).find("option").each(function(){this.selected=J.inArray(J(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;if(e&&c in J.attrFn)return J(a)[c](d);if(typeof a.getAttribute=="undefined")return J.prop(a,c,d);h=i!==1||!J.isXMLDoc(a),h&&(c=c.toLowerCase(),g=J.attrHooks[c]||(U.test(c)?X:W));if(d!==b){if(d===null){J.removeAttr(a,c);return}return g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d)}return g&&"get"in g&&h&&(f=g.get(a,c))!==null?f:(f=a.getAttribute(c),f===null?b:f)},removeAttr:function(a,b){var c,d,e,f,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(P),f=d.length;for(;h<f;h++)e=d[h],e&&(c=J.propFix[e]||e,g=U.test(e),g||J.attr(a,e,""),a.removeAttribute(V?e:c),g&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(R.test(a.nodeName)&&a.parentNode)J.error("type property can't be changed");else if(!J.support.radioValue&&b==="radio"&&J.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return W&&J.nodeName(a,"button")?W.get(a,b):b in a?a.value:null},set:function(a,b,c){if(W&&J.nodeName(a,"button"))return W.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;return g=h!==1||!J.isXMLDoc(a),g&&(c=J.propFix[c]||c,f=J.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):S.test(a.nodeName)||T.test(a.nodeName)&&a.href?0:b}}}}),J.attrHooks.tabindex=J.propHooks.tabIndex,X={get:function(a,c){var d,e=J.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?J.removeAttr(a,c):(d=J.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},V||(Y={name:!0,id:!0,coords:!0},W=J.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(Y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=G.createAttribute(c),a.setAttributeNode(d)),d.nodeValue=b+""}},J.attrHooks.tabindex.set=W.set,J.each(["width","height"],function(a,b){J.attrHooks[b]=J.extend(J.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),J.attrHooks.contenteditable={get:W.get,set:function(a,b,c){b===""&&(b="false"),W.set(a,b,c)}}),J.support.hrefNormalized||J.each(["href","src","width","height"],function(a,c){J.attrHooks[c]=J.extend(J.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),J.support.style||(J.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),J.support.optSelected||(J.propHooks.selected=J.extend(J.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),J.support.enctype||(J.propFix.enctype="encoding"),J.support.checkOn||J.each(["radio","checkbox"],function(){J.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]=J.extend(J.valHooks[this],{set:function(a,b){if(J.isArray(b))return a.checked=J.inArray(J(a).val(),b)>=0}})});var Z=/^(?:textarea|input|select)$/i,$=/^([^\.]*)?(?:\.(.+))?$/,_=/(?:^|\s)hover(\.\S+)?\b/,ba=/^key/,bb=/^(?:mouse|contextmenu)|click/,bc=/^(?:focusinfocus|focusoutblur)$/,bd=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,be=function(a){var b=bd.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},bf=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},bg=function(a){return J.event.special.hover?a:a.replace(_,"mouseenter$1 mouseleave$1")};J.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r;if(a.nodeType===3||a.nodeType===8||!c||!d||!(g=J._data(a)))return;d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=J.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return typeof J=="undefined"||!!a&&J.event.triggered===a.type?b:J.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=J.trim(bg(c)).split(" ");for(j=0;j<c.length;j++){k=$.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=J.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=J.event.special[l]||{},n=J.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,quick:f&&be(f),namespace:m.join(".")},o),q=i[l];if(!q){q=i[l]=[],q.delegateCount=0;if(!r.setup||r.setup.call(a,e,m,h)===!1)a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h)}r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),J.event.global[l]=!0}a=null},global:{},remove:function(a,b,c,d,e){var f=J.hasData(a)&&J._data(a),g,h,i,j,k,l,m,n,o,p,q,r;if(!f||!(n=f.events))return;b=J.trim(bg(b||"")).split(" ");for(g=0;g<b.length;g++){h=$.exec(b[g])||[],i=j=h[1],k=h[2];if(!i){for(i in n)J.event.remove(a,i+b[g],c,d,!0);continue}o=J.event.special[i]||{},i=(d?o.delegateType:o.bindType)||i,q=n[i]||[],l=q.length,k=k?new RegExp("(^|\\.)"+k.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(m=0;m<q.length;m++)r=q[m],(e||j===r.origType)&&(!c||c.guid===r.guid)&&(!k||k.test(r.namespace))&&(!d||d===r.selector||d==="**"&&r.selector)&&(q.splice(m--,1),r.selector&&q.delegateCount--,o.remove&&o.remove.call(a,r));q.length===0&&l!==q.length&&((!o.teardown||o.teardown.call(a,k)===!1)&&J.removeEvent(a,i,f.handle),delete n[i])}J.isEmptyObject(n)&&(p=f.handle,p&&(p.elem=null),J.removeData(a,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||e.nodeType!==3&&e.nodeType!==8){var g=c.type||c,h=[],i,j,k,l,m,n,o,p,q,r;if(bc.test(g+J.event.triggered))return;g.indexOf("!")>=0&&(g=g.slice(0,-1),j=!0),g.indexOf(".")>=0&&(h=g.split("."),g=h.shift(),h.sort());if((!e||J.event.customEvent[g])&&!J.event.global[g])return;c=typeof c=="object"?c[J.expando]?c:new J.Event(g,c):new J.Event(g),c.type=g,c.isTrigger=!0,c.exclusive=j,c.namespace=h.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,n=g.indexOf(":")<0?"on"+g:"";if(!e){i=J.cache;for(k in i)i[k].events&&i[k].events[g]&&J.event.trigger(c,d,i[k].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?J.makeArray(d):[],d.unshift(c),o=J.event.special[g]||{};if(o.trigger&&o.trigger.apply(e,d)===!1)return;q=[[e,o.bindType||g]];if(!f&&!o.noBubble&&!J.isWindow(e)){r=o.delegateType||g,l=bc.test(r+g)?e:e.parentNode,m=null;for(;l;l=l.parentNode)q.push([l,r]),m=l;m&&m===e.ownerDocument&&q.push([m.defaultView||m.parentWindow||a,r])}for(k=0;k<q.length&&!c.isPropagationStopped();k++)l=q[k][0],c.type=q[k][1],p=(J._data(l,"events")||{})[c.type]&&J._data(l,"handle"),p&&p.apply(l,d),p=n&&l[n],p&&J.acceptData(l)&&p.apply(l,d)===!1&&c.preventDefault();return c.type=g,!f&&!c.isDefaultPrevented()&&(!o._default||o._default.apply(e.ownerDocument,d)===!1)&&(g!=="click"||!J.nodeName(e,"a"))&&J.acceptData(e)&&n&&e[g]&&(g!=="focus"&&g!=="blur"||c.target.offsetWidth!==0)&&!J.isWindow(e)&&(m=e[n],m&&(e[n]=null),J.event.triggered=g,e[g](),J.event.triggered=b,m&&(e[n]=m)),c.result}return},dispatch:function(c){c=J.event.fix(c||a.event);var d=(J._data(this,"events")||{})[c.type]||[],e=d.delegateCount,f=[].slice.call(arguments,0),g=!c.exclusive&&!c.namespace,h=J.event.special[c.type]||{},i=[],j,k,l,m,n,o,p,q,r,s,t;f[0]=c,c.delegateTarget=this;if(h.preDispatch&&h.preDispatch.call(this,c)===!1)return;if(e&&(!c.button||c.type!=="click")){m=J(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this)if(l.disabled!==!0){o={},q=[],m[0]=l;for(j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?bf(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(g||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))c.data=r.data,c.handleObj=r,n=((J.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,f),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}return h.postDispatch&&h.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return a.pageX==null&&c.clientX!=null&&(d=a.target.ownerDocument||G,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),!a.which&&g!==b&&(a.which=g&1?1:g&2?3:g&4?2:0),a}},fix:function(a){if(a[J.expando])return a;var c,d,e=a,f=J.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;a=J.Event(e);for(c=g.length;c;)d=g[--c],a[d]=e[d];return a.target||(a.target=e.srcElement||G),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),f.filter?f.filter(a,e):a},special:{ready:{setup:J.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){J.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=J.extend(new J.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?J.event.trigger(e,null,b):J.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},J.event.handle=J.event.dispatch,J.removeEvent=G.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},J.Event=function(a,b){if(this instanceof J.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?h:g):this.type=a,b&&J.extend(this,b),this.timeStamp=a&&a.timeStamp||J.now(),this[J.expando]=!0;else return new J.Event(a,b)},J.Event.prototype={preventDefault:function(){this.isDefaultPrevented=h;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=h;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h,this.stopPropagation()},isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g},J.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){J.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,f=e.selector,g;if(!d||d!==c&&!J.contains(c,d))a.type=e.origType,g=e.handler.apply(this,arguments),a.type=b;return g}}}),J.support.submitBubbles||(J.event.special.submit={setup:function(){if(J.nodeName(this,"form"))return!1;J.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=J.nodeName(c,"input")||J.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(J.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&J.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(J.nodeName(this,"form"))return!1;J.event.remove(this,"._submit")}}),J.support.changeBubbles||(J.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")J.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),J.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,J.event.simulate("change",this,a,!0))});return!1}J.event.add(this,"beforeactivate._change",function(a){var b=a.target;Z.test(b.nodeName)&&!b._change_attached&&(J.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&J.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return J.event.remove(this,"._change"),Z.test(this.nodeName)}}),J.support.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){J.event.simulate(b,a.target,J.event.fix(a),!0)};J.event.special[b]={setup:function(){c++===0&&G.addEventListener(a,d,!0)},teardown:function(){--c===0&&G.removeEventListener(a,d,!0)}}}),J.fn.extend({on:function(a,c,d,e,f){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],f);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=g;else if(!e)return this;return f===1&&(h=e,e=function(a){return J().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=J.guid++)),this.each(function(){J.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return J(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if(typeof a=="object"){for(var f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=g),this.each(function(){J.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return J(this.context).on(a,this.selector,b,c),this},die:function(a,b){return J(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){J.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return J.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||J.guid++,d=0,e=function(c){var e=(J._data(this,"lastToggle"+a.guid)||0)%d;return J._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){J.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},J.attrFn&&(J.attrFn[b]=!0),ba.test(b)&&(J.event.fixHooks[b]=J.event.keyHooks),bb.test(b)&&(J.event.fixHooks[b]=J.event.mouseHooks)}),function(){function a(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;j=j[a];while(j){if(j[e]===c){k=d[j.sizset];break}j.nodeType===1&&!g&&(j[e]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}d[h]=k}}}function c(a,b,c,d,f,g){for(var h=0,i=d.length;h<i;h++){var j=d[h];if(j){var k=!1;j=j[a];while(j){if(j[e]===c){k=d[j.sizset];break}if(j.nodeType===1){g||(j[e]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}d[h]=k}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),f=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(a,b,c,e){c=c||[],b=b||G;var f=b;if(b.nodeType!==1&&b.nodeType!==9)return[];if(!a||typeof a!="string")return c;var h,i,j,k,l,n,q,r,t=!0,u=m.isXML(b),v=[],x=a;do{d.exec(""),h=d.exec(x);if(h){x=h[3],v.push(h[1]);if(h[2]){k=h[3];break}}}while(h);if(v.length>1&&p.exec(a))if(v.length===2&&o.relative[v[0]])i=w(v[0]+v[1],b,e);else{i=o.relative[v[0]]?[b]:m(v.shift(),b);while(v.length)a=v.shift(),o.relative[a]&&(a+=v.shift()),i=w(a,i,e)}else{!e&&v.length>1&&b.nodeType===9&&!u&&o.match.ID.test(v[0])&&!o.match.ID.test(v[v.length-1])&&(l=m.find(v.shift(),b,u),b=l.expr?m.filter(l.expr,l.set)[0]:l.set[0]);if(b){l=e?{expr:v.pop(),set:s(e)}:m.find(v.pop(),v.length!==1||v[0]!=="~"&&v[0]!=="+"||!b.parentNode?b:b.parentNode,u),i=l.expr?m.filter(l.expr,l.set):l.set,v.length>0?j=s(i):t=!1;while(v.length)n=v.pop(),q=n,o.relative[n]?q=v.pop():n="",q==null&&(q=b),o.relative[n](j,q,u)}else j=v=[]}j||(j=i),j||m.error(n||a);if(g.call(j)==="[object Array]")if(!t)c.push.apply(c,j);else if(b&&b.nodeType===1)for(r=0;j[r]!=null;r++)j[r]&&(j[r]===!0||j[r].nodeType===1&&m.contains(b,j[r]))&&c.push(i[r]);else for(r=0;j[r]!=null;r++)j[r]&&j[r].nodeType===1&&c.push(i[r]);else s(j,c);return k&&(m(k,f,c,e),m.uniqueSort(c)),c};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(b,d,e){var g,h=f++,i=c;typeof d=="string"&&!l.test(d)&&(d=d.toLowerCase(),g=d,i=a),i("parentNode",d,h,b,g,e)},"~":function(b,d,e){var g,h=f++,i=c;typeof d=="string"&&!l.test(d)&&(d=d.toLowerCase(),g=d,i=a),i("previousSibling",d,h,b,g,e)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=f++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,c,e,f){if(a[1]==="not")if((d.exec(a[3])||"").length>1||/^\w/.test(a[3]))a[3]=m(a[3],null,null,b);else{var g=m.filter(a[3],b,c,!0^f);return c||e.push.apply(e,g),!1}else if(o.match.POS.test(a[0])||o.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,d,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],d=b[3];if(c===1&&d===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[e]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[e]=f}return j=a.nodeIndex-d,c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(G.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;G.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=G.createElement("div"),c="script"+(new Date).getTime(),d=G.documentElement;a.innerHTML="<a name='"+c+"'/>",d.insertBefore(a,d.firstChild),G.getElementById(c)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),d.removeChild(a),d=a=null}(),function(){var a=G.createElement("div");a.appendChild(G.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),G.querySelectorAll&&function(){var a=m,b=G.createElement("div"),c="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;m=function(b,d,e,f){d=d||G;if(!f&&!m.isXML(d)){var g=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(g&&(d.nodeType===1||d.nodeType===9)){if(g[1])return s(d.getElementsByTagName(b),e);if(g[2]&&o.find.CLASS&&d.getElementsByClassName)return s(d.getElementsByClassName(g[2]),e)}if(d.nodeType===9){if(b==="body"&&d.body)return s([d.body],e);if(g&&g[3]){var h=d.getElementById(g[3]);if(!h||!h.parentNode)return s([],e);if(h.id===g[3])return s([h],e)}try{return s(d.querySelectorAll(b),e)}catch(i){}}else if(d.nodeType===1&&d.nodeName.toLowerCase()!=="object"){var j=d,k=d.getAttribute("id"),l=k||c,n=d.parentNode,p=/^\s*[+~]/.test(b);k?l=l.replace(/'/g,"\\$&"):d.setAttribute("id",l),p&&n&&(d=d.parentNode);try{if(!p||n)return s(d.querySelectorAll("[id='"+l+"'] "+b),e)}catch(q){}finally{k||j.removeAttribute("id")}}}return a(b,d,e,f)};for(var d in a)m[d]=a[d];b=null}(),function(){var a=G.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(G.createElement("div"),"div"),d=!1;try{b.call(G.documentElement,"[test!='']:sizzle")}catch(e){d=!0}m.matchesSelector=function(a,e){e=e.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(d||!o.match.PSEUDO.test(e)&&!/!=/.test(e)){var f=b.call(a,e);if(f||!c||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(e,null,null,[a]).length>0}}}(),function(){var a=G.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),G.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:G.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var w=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=J.attr,m.selectors.attrMap={},J.find=m,J.expr=m.selectors,J.expr[":"]=J.expr.filters,J.unique=m.uniqueSort,J.text=m.getText,J.isXMLDoc=m.isXML,J.contains=m.contains}();var bh=/Until$/,bi=/^(?:parents|prevUntil|prevAll)/,bj=/,/,bk=/^.[^:#\[\.,]*$/,bl=Array.prototype.slice,bm=J.expr.match.globalPOS,bn={children:!0,contents:!0,next:!0,prev:!0};J.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return J(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(J.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;for(c=0,d=this.length;c<d;c++){f=e.length,J.find(a,this[c],e);if(c>0)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}}return e},has:function(a){var b=J(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(J.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?bm.test(a)?J(a,this.context).index(this[0])>=0:J.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,f=this[0];if(J.isArray(a)){var g=1;while(f&&f.ownerDocument&&f!==b){for(d=0;d<a.length;d++)J(f).is(a[d])&&c.push({selector:a[d],elem:f,level:g});f=f.parentNode,g++}return c}var h=bm.test(a)||typeof a!="string"?J(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){f=this[d];while(f){if(h?h.index(f)>-1:J.find.matchesSelector(f,a)){c.push(f);break}f=f.parentNode;if(!f||!f.ownerDocument||f===b||f.nodeType===11)break}}return c=c.length>1?J.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?typeof a=="string"?J.inArray(this[0],J(a)):J.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?J(a,b):J.makeArray(a&&a.nodeType?[a]:a),d=J.merge(this.get(),c);return this.pushStack(i(c[0])||i(d[0])?d:J.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),J.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return J.dir(a,"parentNode")},parentsUntil:function(a,b,c){return J.dir(a,"parentNode",c)},next:function(a){return J.nth(a,2,"nextSibling")},prev:function(a){return J.nth(a,2,"previousSibling")},nextAll:function(a){return J.dir(a,"nextSibling")},prevAll:function(a){return J.dir(a,"previousSibling")},nextUntil:function(a,b,c){return J.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return J.dir(a,"previousSibling",c)},siblings:function(a){return J.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return J.sibling(a.firstChild)},contents:function(a){return J.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:J.makeArray(a.childNodes)}},function(a,b){J.fn[a]=function(c,d){var e=J.map(this,b,c);return bh.test(a)||(d=c),d&&typeof d=="string"&&(e=J.filter(d,e)),e=this.length>1&&!bn[a]?J.unique(e):e,(this.length>1||bj.test(d))&&bi.test(a)&&(e=e.reverse()),this.pushStack(e,a,bl.call(arguments).join(","))}}),J.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?J.find.matchesSelector(b[0],a)?[b[0]]:[]:J.find.matches(a,b)},dir:function(a,c,d){var e=[],f=a[c];while(f&&f.nodeType!==9&&(d===b||f.nodeType!==1||!J(f).is(d)))f.nodeType===1&&e.push(f),f=f[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var bo="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bp=/ jQuery\d+="(?:\d+|null)"/g,bq=/^\s+/,br=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bs=/<([\w:]+)/,bt=/<tbody/i,bu=/<|&#?\w+;/,bv=/<(?:script|style)/i,bw=/<(?:script|object|embed|option|style)/i,bx=new RegExp("<(?:"+bo+")[\\s/>]","i"),by=/checked\s*(?:[^=]|=\s*.checked.)/i,bz=/\/(java|ecma)script/i,bA=/^\s*<!(?:\[CDATA\[|\-\-)/,bB={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bC=k(G);bB.optgroup=bB.option,bB.tbody=bB.tfoot=bB.colgroup=bB.caption=bB.thead,bB.th=bB.td,J.support.htmlSerialize||(bB._default=[1,"div<div>","</div>"]),J.fn.extend({text:function(a){return J.access(this,function(a){return a===b?J.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(J.isFunction(a))return this.each(function(b){J(this).wrapAll(a.call(this,b))});if(this[0]){var b=J(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return J.isFunction(a)?this.each(function(b){J(this).wrapInner(a.call(this,b))}):this.each(function(){var b=J(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=J.isFunction(a);return this.each(function(c){J(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=J.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,J.clean(arguments)),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||J.filter(a,[d]).length)!b&&d.nodeType===1&&(J.cleanData(d.getElementsByTagName("*")),J.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&J.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return J.clone(this,a,b)})},html:function(a){return J.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(bp,""):null;if(typeof a=="string"&&!bv.test(a)&&(J.support.leadingWhitespace||!bq.test(a))&&!bB[(bs.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(br,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(J.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return this[0]&&this[0].parentNode?J.isFunction(a)?this.each(function(b){var c=J(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=J(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;J(this).remove(),b?J(b).before(a):J(c).append(a)})):this.length?this.pushStack(J(J.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,f,g,h,i=a[0],j=[];if(!J.support.checkClone&&arguments.length===3&&typeof i=="string"&&by.test(i))return this.each(function(){J(this).domManip(a,c,d,!0)});if(J.isFunction(i))return this.each(function(e){var f=J(this);a[0]=i.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){h=i&&i.parentNode,J.support.parentNode&&h&&h.nodeType===11&&h.childNodes.length===this.length?e={fragment:h}:e=J.buildFragment(a,this,j),g=e.fragment,g.childNodes.length===1?f=g=g.firstChild:f=g.firstChild;if(f){c=c&&J.nodeName(f,"tr");for(var k=0,m=this.length,n=m-1;k<m;k++)d.call(c?l(this[k],f):this[k],e.cacheable||m>1&&k<n?J.clone(g,!0,!0):g)}j.length&&J.each(j,function(a,b){b.src?J.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):J.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bA,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),J.buildFragment=function(a,b,c){var d,e,f,g,h=a[0];return b&&b[0]&&(g=b[0].ownerDocument||b[0]),g.createDocumentFragment||(g=G),a.length===1&&typeof h=="string"&&h.length<512&&g===G&&h.charAt(0)==="<"&&!bw.test(h)&&(J.support.checkClone||!by.test(h))&&(J.support.html5Clone||!bx.test(h))&&(e=!0,f=J.fragments[h],f&&f!==1&&(d=f)),d||(d=g.createDocumentFragment(),J.clean(a,g,d,c)),e&&(J.fragments[h]=f?d:1),{fragment:d,cacheable:e}},J.fragments={},J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){J.fn[a]=function(c){var d=[],e=J(c),f=this.length===1&&this[0].parentNode;if(f&&f.nodeType===11&&f.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var g=0,h=e.length;g<h;g++){var i=(g>0?this.clone(!0):this).get();J(e[g])[b](i),d=d.concat(i)}return this.pushStack(d,a,e.selector)}}),J.extend({clone:function(a,b,c){var d,e,f,g=J.support.html5Clone||J.isXMLDoc(a)||!bx.test("<"+a.nodeName+">")?a.cloneNode(!0):r(a);if((!J.support.noCloneEvent||!J.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!J.isXMLDoc(a)){n(a,g),d=o(a),e=o(g);for(f=0;d[f];++f)e[f]&&n(d[f],e[f])}if(b){m(a,g);if(c){d=o(a),e=o(g);for(f=0;d[f];++f)m(d[f],e[f])}}return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h=[];b=b||G,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||G);for(var i=0,j;(j=a[i])!=null;i++){typeof j=="number"&&(j+="");if(!j)continue;if(typeof j=="string")if(!bu.test(j))j=b.createTextNode(j);else{j=j.replace(br,"<$1></$2>");var l=(bs.exec(j)||["",""])[1].toLowerCase(),m=bB[l]||bB._default,n=m[0],o=b.createElement("div"),p=bC.childNodes,r;b===G?bC.appendChild(o):k(b).appendChild(o),o.innerHTML=m[1]+j+m[2];while(n--)o=o.lastChild;if(!J.support.tbody){var s=bt.test(j),t=l==="table"&&!s?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!s?o.childNodes:[];for(g=t.length-1;g>=0;--g)J.nodeName(t[g],"tbody")&&!t[g].childNodes.length&&t[g].parentNode.removeChild(t[g])}!J.support.leadingWhitespace&&bq.test(j)&&o.insertBefore(b.createTextNode(bq.exec(j)[0]),o.firstChild),j=o.childNodes,o&&(o.parentNode.removeChild(o),p.length>0&&(r=p[p.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!J.support.appendChecked)if(j[0]&&typeof (u=j.length)=="number")for(g=0;g<u;g++)q(j[g]);else q(j);j.nodeType?h.push(j):h=J.merge(h,j)}if(c){e=function(a){return!a.type||bz.test(a.type)};for(i=0;h[i];i++){f=h[i];if(d&&J.nodeName(f,"script")&&(!f.type||bz.test(f.type)))d.push(f.parentNode?f.parentNode.removeChild(f):f);else{if(f.nodeType===1){var v=J.grep(f.getElementsByTagName("script"),e);h.splice.apply(h,[i+1,0].concat(v))}c.appendChild(f)}}}return h},cleanData:function(a){var b,c,d=J.cache,e=J.event.special,f=J.support.deleteExpando;for(var g=0,h;(h=a[g])!=null;g++){if(h.nodeName&&J.noData[h.nodeName.toLowerCase()])continue;c=h[J.expando];if(c){b=d[c];if(b&&b.events){for(var i in b.events)e[i]?J.event.remove(h,i):J.removeEvent(h,i,b.handle);b.handle&&(b.handle.elem=null)}f?delete h[J.expando]:h.removeAttribute&&h.removeAttribute(J.expando),delete d[c]}}}});var bD=/alpha\([^)]*\)/i,bE=/opacity=([^)]*)/,bF=/([A-Z]|^ms)/g,bG=/^[\-+]?(?:\d*\.)?\d+$/i,bH=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bI=/^([\-+])=([\-+.\de]+)/,bJ=/^margin/,bK={position:"absolute",visibility:"hidden",display:"block"},bL=["Top","Right","Bottom","Left"],bM,bN,bO;J.fn.css=function(a,c){return J.access(this,function(a,c,d){return d!==b?J.style(a,c,d):J.css(a,c)},a,c,arguments.length>1)},J.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bM(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":J.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h=J.camelCase(c),i=a.style,j=J.cssHooks[h];c=J.cssProps[h]||h;if(d===b)return j&&"get"in j&&(f=j.get(a,!1,e))!==b?f:i[c];g=typeof d,g==="string"&&(f=bI.exec(d))&&(d=+(f[1]+1)*+f[2]+parseFloat(J.css(a,c)),g="number");if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!J.cssNumber[h]&&(d+="px");if(!j||!("set"in j)||(d=j.set(a,d))!==b)try{i[c]=d}catch(k){}},css:function(a,c,d){var e,f;c=J.camelCase(c),f=J.cssHooks[c],c=J.cssProps[c]||c,c==="cssFloat"&&(c="float");if(f&&"get"in f&&(e=f.get(a,!0,d))!==b)return e;if(bM)return bM(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),J.curCSS=J.css,G.defaultView&&G.defaultView.getComputedStyle&&(bN=function(a,b){var c,d,e,f,g=a.style;return b=b.replace(bF,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!J.contains(a.ownerDocument.documentElement,a)&&(c=J.style(a,b))),!J.support.pixelMargin&&e&&bJ.test(b)&&bH.test(c)&&(f=g.width,g.width=c,c=e.width,g.width=f),c}),G.documentElement.currentStyle&&(bO=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return f==null&&g&&(e=g[b])&&(f=e),bH.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),f===""?"auto":f}),bM=bN||bO,J.each(["height","width"],function(a,b){J.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?s(a,b,d):J.swap(a,bK,function(){return s(a,b,d)})},set:function(a,b){return bG.test(b)?b+"px":b}}}),J.support.opacity||(J.cssHooks.opacity={get:function(a,b){return bE.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=J.isNumeric(b)?"alpha(opacity="+b*100+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&J.trim(f.replace(bD,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bD.test(f)?f.replace(bD,e):f+" "+e}}),J(function(){J.support.reliableMarginRight||(J.cssHooks.marginRight={get:function(a,b){return J.swap(a,{display:"inline-block"},function(){return b?bM(a,"margin-right"):a.style.marginRight})}})}),J.expr&&J.expr.filters&&(J.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!J.support.reliableHiddenOffsets&&(a.style&&a.style.display||J.css(a,"display"))==="none"},J.expr.filters.visible=function(a){return!J.expr.filters.hidden(a)}),J.each({margin:"",padding:"",border:"Width"},function(a,b){J.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bL[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bP=/%20/g,bQ=/\[\]$/,bR=/\r?\n/g,bS=/#.*$/,bT=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bU=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bV=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bW=/^(?:GET|HEAD)$/,bX=/^\/\//,bY=/\?/,bZ=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b$=/^(?:select|textarea)/i,b_=/\s+/,ca=/([?&])_=[^&]*/,cb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,cc=J.fn.load,cd={},ce={},cf,cg,ch=["*/"]+["*"];try{cf=I.href}catch(ci){cf=G.createElement("a"),cf.href="",cf=cf.href}cg=cb.exec(cf.toLowerCase())||[],J.fn.extend({load:function(a,c,d){if(typeof a!="string"&&cc)return cc.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var f=a.slice(e,a.length);a=a.slice(0,e)}var g="GET";c&&(J.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=J.param(c,J.ajaxSettings.traditional),g="POST"));var h=this;return J.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),h.html(f?J("<div>").append(c.replace(bZ,"")).find(f):c)),d&&h.each(d,[c,b,a])}}),this},serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?J.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||b$.test(this.nodeName)||bU.test(this.type))}).map(function(a,b){var c=J(this).val();return c==null?null:J.isArray(c)?J.map(c,function(a,c){return{name:b.name,value:a.replace(bR,"\r\n")}}):{name:b.name,value:c.replace(bR,"\r\n")}}).get()}}),J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){J.fn[b]=function(a){return this.on(b,a)}}),J.each(["get","post"],function(a,c){J[c]=function(a,d,e,f){return J.isFunction(d)&&(f=f||e,e=d,d=b),J.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),J.extend({getScript:function(a,c){return J.get(a,b,c,"script")},getJSON:function(a,b,c){return J.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?v(a,J.ajaxSettings):(b=a,a=J.ajaxSettings),v(a,b),a},ajaxSettings:{url:cf,isLocal:bV.test(cg[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ch},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:t(cd),ajaxTransport:t(ce),ajax:function(a,c){function d(a,c,d,l){if(s===2)return;s=2,q&&clearTimeout(q),p=b,n=l||"",w.readyState=a>0?4:0;var m,o,r,u=c,v=d?x(e,w,d):b,z,A;if(a>=200&&a<300||a===304){if(e.ifModified){if(z=w.getResponseHeader("Last-Modified"))J.lastModified[k]=z;if(A=w.getResponseHeader("Etag"))J.etag[k]=A}if(a===304)u="notmodified",m=!0;else try{o=y(e,v),u="success",m=!0}catch(B){u="parsererror",r=B}}else{r=u;if(!u||a)u="error",a<0&&(a=0)}w.status=a,w.statusText=""+(c||u),m?h.resolveWith(f,[o,u,w]):h.rejectWith(f,[w,u,r]),w.statusCode(j),j=b,t&&g.trigger("ajax"+(m?"Success":"Error"),[w,e,m?o:r]),i.fireWith(f,[w,u]),t&&(g.trigger("ajaxComplete",[w,e]),--J.active||J.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};var e=J.ajaxSetup({},c),f=e.context||e,g=f!==e&&(f.nodeType||f instanceof J)?J(f):J.event,h=J.Deferred(),i=J.Callbacks("once memory"),j=e.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,v,w={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bT.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(e.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),d(0,a),this}};h.promise(w),w.success=w.done,w.error=w.fail,w.complete=i.add,w.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[w.status],w.then(b,b)}return this},e.url=((a||e.url)+"").replace(bS,"").replace(bX,cg[1]+"//"),e.dataTypes=J.trim(e.dataType||"*").toLowerCase().split(b_),e.crossDomain==null&&(r=cb.exec(e.url.toLowerCase()),e.crossDomain=!(!r||r[1]==cg[1]&&r[2]==cg[2]&&(r[3]||(r[1]==="http:"?80:443))==(cg[3]||(cg[1]==="http:"?80:443)))),e.data&&e.processData&&typeof e.data!="string"&&(e.data=J.param(e.data,e.traditional)),u(cd,e,c,w);if(s===2)return!1;t=e.global,e.type=e.type.toUpperCase(),e.hasContent=!bW.test(e.type),t&&J.active++===0&&J.event.trigger("ajaxStart");if(!e.hasContent){e.data&&(e.url+=(bY.test(e.url)?"&":"?")+e.data,delete e.data),k=e.url;if(e.cache===!1){var z=J.now(),A=e.url.replace(ca,"$1_="+z);e.url=A+(A===e.url?(bY.test(e.url)?"&":"?")+"_="+z:"")}}(e.data&&e.hasContent&&e.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",e.contentType),e.ifModified&&(k=k||e.url,J.lastModified[k]&&w.setRequestHeader("If-Modified-Since",J.lastModified[k]),J.etag[k]&&w.setRequestHeader("If-None-Match",J.etag[k])),w.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+(e.dataTypes[0]!=="*"?", "+ch+"; q=0.01":""):e.accepts["*"]);for(v in e.headers)w.setRequestHeader(v,e.headers[v]);if(!e.beforeSend||e.beforeSend.call(f,w,e)!==!1&&s!==2){for(v in{success:1,error:1,complete:1})w[v](e[v]);p=u(ce,e,c,w);if(!p)d(-1,"No Transport");else{w.readyState=1,t&&g.trigger("ajaxSend",[w,e]),e.async&&e.timeout>0&&(q=setTimeout(function(){w.abort("timeout")},e.timeout));try{s=1,p.send(l,d)}catch(B){if(s<2)d(-1,B);else throw B}}return w}return w.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=J.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=J.ajaxSettings.traditional);if(J.isArray(a)||a.jquery&&!J.isPlainObject(a))J.each(a,function(){e(this.name,this.value)});else for(var f in a)w(f,a[f],c,e);return d.join("&").replace(bP,"+")}}),J.extend({active:0,lastModified:{},etag:{}});var cj=J.now(),ck=/(\=)\?(&|$)|\?\?/i;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return J.expando+"_"+cj++}}),J.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ck.test(b.url)||e&&ck.test(b.data))){var f,g=b.jsonpCallback=J.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],i=b.url,j=b.data,k="$1"+g+"$2";return b.jsonp!==!1&&(i=i.replace(ck,k),b.url===i&&(e&&(j=j.replace(ck,k)),b.data===j&&(i+=(/\?/.test(i)?"&":"?")+b.jsonp+"="+g))),b.url=i,b.data=j,a[g]=function(a){f=[a]},d.always(function(){a[g]=h,f&&J.isFunction(h)&&a[g](f[0])}),b.converters["script json"]=function(){return f||J.error(g+" was not called"),f[0]},b.dataTypes[0]="json","script"}}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return J.globalEval(a),a}}}),J.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),J.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=G.head||G.getElementsByTagName("head")[0]||G.documentElement;return{send:function(e,f){c=G.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cl=a.ActiveXObject?function(){for(var a in cn)cn[a](0,1)}:!1,cm=0,cn;J.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&z()||A()}:z,function(a){J.extend(J.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(J.ajaxSettings.xhr()),J.support.ajax&&J.ajaxTransport(function(c){if(!c.crossDomain||J.support.cors){var d;return{send:function(e,f){var g=c.xhr(),h,i;c.username?g.open(c.type,c.url,c.async,c.username,c.password):g.open(c.type,c.url,c.async);if(c.xhrFields)for(i in c.xhrFields)g[i]=c.xhrFields[i];c.mimeType&&g.overrideMimeType&&g.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(i in e)g.setRequestHeader(i,e[i])}catch(j){}g.send(c.hasContent&&c.data||null),d=function(a,e){var i,j,k,l,m;try{if(d&&(e||g.readyState===4)){d=b,h&&(g.onreadystatechange=J.noop,cl&&delete cn[h]);if(e)g.readyState!==4&&g.abort();else{i=g.status,k=g.getAllResponseHeaders(),l={},m=g.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=g.responseText}catch(a){}try{j=g.statusText}catch(n){j=""}!i&&c.isLocal&&!c.crossDomain?i=l.text?200:404:i===1223&&(i=204)}}}catch(o){e||f(-1,o)}l&&f(i,j,l,k)},!c.async||g.readyState===4?d():(h=++cm,cl&&(cn||(cn={},J(a).unload(cl)),cn[h]=d),g.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var co={},cp,cq,cr=/^(?:toggle|show|hide)$/,cs=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ct,cu=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cv;J.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(D("show",3),a,b,c);for(var f=0,g=this.length;f<g;f++)d=this[f],d.style&&(e=d.style.display,!J._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&J.css(d,"display")==="none"||!J.contains(d.ownerDocument.documentElement,d))&&J._data(d,"olddisplay",E(d.nodeName)));for(f=0;f<g;f++){d=this[f];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=J._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(D("hide",3),a,b,c);var d,e,f=0,g=this.length;for(;f<g;f++)d=this[f],d.style&&(e=J.css(d,"display"),e!=="none"&&!J._data(d,"olddisplay")&&J._data(d,"olddisplay",e));for(f=0;f<g;f++)this[f].style&&(this[f].style.display="none");return this},_toggle:J.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return J.isFunction(a)&&J.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:J(this).is(":hidden");J(this)[b?"show":"hide"]()}):this.animate(D("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function e(){f.queue===!1&&J._mark(this);var b=J.extend({},f),c=this.nodeType===1,d=c&&J(this).is(":hidden"),e,g,h,i,j,k,l,m,n,o,p;b.animatedProperties={};for(h in a){e=J.camelCase(h),h!==e&&(a[e]=a[h],delete a[h]);if((j=J.cssHooks[e])&&"expand"in j){k=j.expand(a[e]),delete a[e];for(h in k)h in a||(a[h]=k[h])}}for(e in a){g=a[e],J.isArray(g)?(b.animatedProperties[e]=g[1],g=a[e]=g[0]):b.animatedProperties[e]=b.specialEasing&&b.specialEasing[e]||b.easing||"swing";if(g==="hide"&&d||g==="show"&&!d)return b.complete.call(this);c&&(e==="height"||e==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],J.css(this,"display")==="inline"&&J.css(this,"float")==="none"&&(!J.support.inlineBlockNeedsLayout||E(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(h in a)i=new J.fx(this,b,h),g=a[h],cr.test(g)?(p=J._data(this,"toggle"+h)||(g==="toggle"?d?"show":"hide":0),p?(J._data(this,"toggle"+h,p==="show"?"hide":"show"),i[p]()):i[g]()):(l=cs.exec(g),m=i.cur(),l?(n=parseFloat(l[2]),o=l[3]||(J.cssNumber[h]?"":"px"),o!=="px"&&(J.style(this,h,(n||1)+o),m=(n||1)/i.cur()*m,J.style(this,h,m+o)),l[1]&&(n=(l[1]==="-="?-1:1)*n+m),i.custom(m,n,o)):i.custom(m,g,""));return!0}var f=J.speed(b,c,d);return J.isEmptyObject(a)?this.each(f.complete,[!1]):(a=J.extend({},a),f.queue===!1?this.each(e):this.queue(f.queue,e))},stop:function(a,c,d){return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function b(a,b,c){var e=b[c];J.removeData(a,c,!0),e.stop(d)}var c,e=!1,f=J.timers,g=J._data(this);d||J._unmark(!0,this);if(a==null)for(c in g)g[c]&&g[c].stop&&c.indexOf(".run")===c.length-4&&b(this,g,c);else g[c=a+".run"]&&g[c].stop&&b(this,g,c);for(c=f.length;c--;)f[c].elem===this&&(a==null||f[c].queue===a)&&(d?f[c](!0):f[c].saveState(),e=!0,f.splice(c,1));(!d||!e)&&J.dequeue(this,a)})}}),J.each({slideDown:D("show",1),slideUp:D("hide",1),slideToggle:D("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){J.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),J.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?J.extend({},a):{complete:c||!c&&b||J.isFunction(a)&&a,duration:a,easing:c&&b||b&&!J.isFunction(b)&&b};d.duration=J.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in J.fx.speeds?J.fx.speeds[d.duration]:J.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(a){J.isFunction(d.old)&&d.old.call(this),d.queue?J.dequeue(this,d.queue):a!==!1&&J._unmark(this)},d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),J.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(J.fx.step[this.prop]||J.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=J.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,c,d){function e(a){return f.step(a)}var f=this,g=J.fx;this.startTime=cv||B(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(J.cssNumber[this.prop]?"":"px"),e.queue=this.options.queue,e.elem=this.elem,e.saveState=function(){J._data(f.elem,"fxshow"+f.prop)===b&&(f.options.hide?J._data(f.elem,"fxshow"+f.prop,f.start):f.options.show&&J._data(f.elem,"fxshow"+f.prop,f.end))},e()&&J.timers.push(e)&&!ct&&(ct=setInterval(g.tick,g.interval))},show:function(){var a=J._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||J.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),J(this.elem).show()},hide:function(){this.options.orig[this.prop]=J._data(this.elem,"fxshow"+this.prop)||J.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cv||B(),f=!0,g=this.elem,h=this.options;if(a||e>=h.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),h.animatedProperties[this.prop]=!0;for(b in h.animatedProperties)h.animatedProperties[b]!==!0&&(f=!1);if(f){h.overflow!=null&&!J.support.shrinkWrapBlocks&&J.each(["","X","Y"],function(a,b){g.style["overflow"+b]=h.overflow[a]}),h.hide&&J(g).hide();if(h.hide||h.show)for(b in h.animatedProperties)J.style(g,b,h.orig[b]),J.removeData(g,"fxshow"+b,!0),J.removeData(g,"toggle"+b,!0);d=h.complete,d&&(h.complete=!1,d.call(g))}return!1}return h.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/h.duration,this.pos=J.easing[h.animatedProperties[this.prop]](this.state,c,0,1,h.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},J.extend(J.fx,{tick:function(){var a,b=J.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||J.fx.stop()},interval:13,stop:function(){clearInterval(ct),ct=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){J.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),J.each(cu.concat.apply([],cu),function(a,b){b.indexOf("margin")&&(J.fx.step[b]=function(a){J.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),J.expr&&J.expr.filters&&(J.expr.filters.animated=function(a){return J.grep(J.timers,function(b){return a===b.elem}).length});var cw,cx=/^t(?:able|d|h)$/i,cy=/^(?:body|html)$/i;"getBoundingClientRect"in G.documentElement?cw=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!J.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var f=b.body,g=F(b),h=c.clientTop||f.clientTop||0,i=c.clientLeft||f.clientLeft||0,j=g.pageYOffset||J.support.boxModel&&c.scrollTop||f.scrollTop,k=g.pageXOffset||J.support.boxModel&&c.scrollLeft||f.scrollLeft,l=d.top+j-h,m=d.left+k-i;return{top:l,left:m}}:cw=function(a,b,c){var d,e=a.offsetParent,f=a,g=b.body,h=b.defaultView,i=h?h.getComputedStyle(a,null):a.currentStyle,j=a.offsetTop,k=a.offsetLeft;while((a=a.parentNode)&&a!==g&&a!==c){if(J.support.fixedPosition&&i.position==="fixed")break;d=h?h.getComputedStyle(a,null):a.currentStyle,j-=a.scrollTop,k-=a.scrollLeft,a===e&&(j+=a.offsetTop,k+=a.offsetLeft,J.support.doesNotAddBorder&&(!J.support.doesAddBorderForTableAndCells||!cx.test(a.nodeName))&&(j+=parseFloat(d.borderTopWidth)||0,k+=parseFloat(d.borderLeftWidth)||0),f=e,e=a.offsetParent),J.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(j+=parseFloat(d.borderTopWidth)||0,k+=parseFloat(d.borderLeftWidth)||0),i=d}if(i.position==="relative"||i.position==="static")j+=g.offsetTop,k+=g.offsetLeft;return J.support.fixedPosition&&i.position==="fixed"&&(j+=Math.max(c.scrollTop,g.scrollTop),k+=Math.max(c.scrollLeft,g.scrollLeft)),{top:j,left:k}},J.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){J.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;return d?c===d.body?J.offset.bodyOffset(c):cw(c,d,d.documentElement):null},J.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return J.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(J.css(a,"marginTop"))||0,c+=parseFloat(J.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=J.css(a,"position");d==="static"&&(a.style.position="relative");var e=J(a),f=e.offset(),g=J.css(a,"top"),h=J.css(a,"left"),i=(d==="absolute"||d==="fixed")&&J.inArray("auto",[g,h])>-1,j={},k={},l,m;i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),J.isFunction(b)&&(b=b.call(a,c,f)),b.top!=null&&(j.top=b.top-f.top+l),b.left!=null&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)}},J.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cy.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(J.css(a,"marginTop"))||0,c.left-=parseFloat(J.css(a,"marginLeft"))||0,d.top+=parseFloat(J.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(J.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||G.body;while(a&&!cy.test(a.nodeName)&&J.css(a,"position")==="static")a=a.offsetParent;return a})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);J.fn[a]=function(e){return J.access(this,function(a,e,f){var g=F(a);if(f===b)return g?c in g?g[c]:J.support.boxModel&&g.document.documentElement[e]||g.document.body[e]:a[e];g?g.scrollTo(d?J(g).scrollLeft():f,d?f:J(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),J.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,f="offset"+a;J.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(J.css(a,c,"padding")):this[c]():null},J.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(J.css(b,c,a?"margin":"border")):this[c]():null},J.fn[c]=function(a){return J.access(this,function(a,c,g){var h,i,j,k;if(J.isWindow(a))return h=a.document,i=h.documentElement[d],J.support.boxModel&&i||h.body&&h.body[d]||i;if(a.nodeType===9)return h=a.documentElement,h[d]<h[e]?Math.max(a.body[e],h[e],a.body[f],h[f]):h[d];if(g===b)return j=J.css(a,c),k=parseFloat(j),J.isNumeric(k)?k:j;J(a).css(c,g)},c,a,arguments.length,null)}}),a.jQuery=a.$=J,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("vendor/jquery-1.7.2",[],function(){return J})})(window),define("jquery.instructure_jquery_patches",["vendor/jquery-1.7.2"],function(a){a.each(["prop","attr"],function(b,c){a[c+"Hooks"].disabled=a.extend(a[c+"Hooks"].disabled,{set:function(b,c,d){return a(b).toggleClass("disabled",!!c),b[c?"setAttribute":"removeAttribute"]("disabled","disabled"),"disabled"in b&&(b.disabled=!!c),c}})});var b=a.parseJSON;return a.parseJSON=function(){if(arguments[0])try{var c=arguments[0].replace(/^while\(1\);/,"");arguments[0]=c}catch(d){}return b.apply(a,arguments)},a.ajaxSettings.converters["text json"]=a.parseJSON,a.attrHooks.method=a.extend(a.attrHooks.method,{set:function(b,c){var d=c;c=c.toUpperCase()==="GET"?"GET":"POST";if(c==="POST"){var e=a(b).find("input[name='_method']");e.length||(e=a("<input type='hidden' name='_method'/>").prependTo(b)),e.val(d)}return b.setAttribute("method",c),c}}),a.fn.originalScrollTop=a.fn.scrollTop,a.fn.scrollTop=function(){return this.selector=="html,body"&&arguments.length===0&&console.error("$('html,body').scrollTop() is not cross-browser compatible... use $.windowScrollTop() instead"),a.fn.originalScrollTop.apply(this,arguments)},a.windowScrollTop=function(){return(a.browser.safari?a("body"):a("html")).scrollTop()},a}),define("jquery",["jquery.instructure_jquery_patches"],function(a){return a}),function(){define("compiled/util/objectCollection",[],function(){return function(a){return a.indexOf=function(b){var c,d,e,f;for(c=e=0,f=a.length;e<f;c=++e){d=a[c];if(d===b)return c}},-1,a.findBy=function(b,c){var d,e,f,g;for(d=f=0,g=a.length;f<g;d=++f){e=a[d];if(e[b]===c)return e}return!1},a.eraseBy=function(b,c){var d;return d=a.findBy(b,c),a.erase(d)},a.insert=function(b,c){return c==null&&(c=0),a.splice(c,0,b)},a.erase=function(b){var c,d,e,f,g;g=[];for(c=e=0,f=a.length;e<f;c=++e)d=a[c],d===b?g.push(a.splice(c,1)):g.push(void 0);return g},a.sortBy=function(){var b;return b={string:function(a,b){return a<b?-1:a>b?1:0},number:function(a,b){return a-b}},function(c){var d;return a.length===0?a:(d=typeof a[0][c]||"string",a.sort(function(a,e){return b[d](a[c],e[c])}))}}(),a}})}.call(this);var Handlebars={};Handlebars.VERSION="1.0.beta.2",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},Handlebars.registerPartial=function(a,b){this.partials[a]=b},Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+a+"'")}),Handlebars.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,e="",f=Object.prototype.toString.call(a);f==="[object Function]"&&(a=a());if(a===!0)return d(this);if(a===!1||a==null)return c(this);if(f==="[object Array]"){if(a.length>0)for(var g=0,h=a.length;g<h;g++)e+=d(a[g]);else e=c(this);return e}return d(a)}),Handlebars.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&a.length>0)for(var f=0,g=a.length;f<g;f++)e+=c(a[f]);else e=d(this);return e}),Handlebars.registerHelper("if",function(a,b){return!a||Handlebars.Utils.isEmpty(a)?b.inverse(this):b.fn(this)}),Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse;return b.fn=d,b.inverse=c,Handlebars.helpers["if"].call(this,a,b)}),Handlebars.registerHelper("with",function(a,b){return b.fn(a)}),Handlebars.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/&(?!\w+;)|[<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():a==null||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return typeof a=="undefined"?!0:a===null?!0:a===!1?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}}(),Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:(d=this.programs[a]=Handlebars.VM.program(b),d)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e){if(a===undefined)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,{helpers:d,partials:e});if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in vm mode");return e[b]=Handlebars.compile(a),e[b](c,{helpers:d,partials:e})}},Handlebars.template=Handlebars.VM.template,define("vendor/handlebars.vm",[],function(){return Handlebars}),define("str/pluralize",["jquery"],function(a){var b=["equipment","information","rice","money","species","series","fish","sheep","jeans"],c=[[/person$/i,"people"],[/man$/i,"men"],[/child$/i,"children"],[/sex$/i,"sexes"],[/move$/i,"moves"],[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"]],d=function(d){d=d||"";if(a.inArray(d,b)>0)return d;for(var e=0;e<c.length;e++){var f=c[e];if(d.match(f[0]))return d.replace(f[0],f[1])}return d+"s"};return d.withCount=function(a,b){return""+a+" "+(a==1?b:d(b))},d}),define("str/escapeRegex",[],function(){return function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(b*-1)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return a.compareTo(b)===0},a.getDayNumberFromName=function(a){var b=c.dayNames,d=c.abbreviatedDayNames,e=c.shortestDayNames,f=a.toLowerCase();for(var g=0;g<b.length;g++)if(b[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},a.getMonthNumberFromName=function(a){var b=c.monthNames,d=c.abbreviatedMonthNames,e=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].offset===a)return b[e].name;return null},a.getTimezoneOffset=function(a){var b=c.timezones,d;for(var e=0;e<b.length;e++)if(b[e].name===a.toUpperCase())return b[e].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return this.compareTo(a||new Date)===1},b.isBefore=function(a){return this.compareTo(a||new Date)===-1},b.isToday=function(){return this.isSameDay(new Date)},b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())},b.addMilliseconds=function(a){return this.setUTCMilliseconds(this.getUTCMilliseconds()+a),this},b.addSeconds=function(a){return this.addMilliseconds(a*1e3)},b.addMinutes=function(a){return this.addMilliseconds(a*6e4)},b.addHours=function(a){return this.addMilliseconds(a*36e5)},b.addDays=function(a){return this.setDate(this.getDate()+a),this},b.addWeeks=function(a){return this.addDays(a*7)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(a*12)},b.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),f>2?(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l):(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,k<0?m=53-((j-l)/5|0):k>364+l?m=1:m=(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())},a._validate=function(a,b,c,d){if(typeof a=="undefined")return!1;if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")},a.validateSecond=function(b){return a._validate(b,0,59,"second")},a.validateMinute=function(b){return a._validate(b,0,59,"minute")},a.validateHour=function(b){return a._validate(b,0,23,"hour")},a.validateDay=function(b,c,d){return a._validate(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(b){return a._validate(b,0,11,"month")},a.validateYear=function(b){return a._validate(b,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset!=null&&this.setTimezoneOffset(b.timezoneOffset),b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){return a=Number(a),a=-(Math.floor(a/100)*60+(a%100+60)%60),this.addMinutes(a-this.getTimezoneOffset())},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()},b.getUTCOffset=function(){var a=this.getTimezoneOffset(),b=a%60,c=(a-b)/60,d=-(c*100+b),e;return d<0?(e=(d-1e4).toString(),e.charAt(0)+e.substr(2)):(e=(d+1e4).toString(),"+"+e.substr(1))},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return a<10?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&a.length==1){var e=c.formatPatterns;b.t=b.toString;switch(a){case"d":return b.t(e.shortDate);case"D":return b.t(e.longDate);case"F":return b.t(e.fullDateTime);case"m":return b.t(e.monthDay);case"r":return b.t(e.rfc1123);case"s":return b.t(e.sortableDateTime);case"t":return b.t(e.shortTime);case"T":return b.t(e.longTime);case"u":return b.t(e.universalSortableDateTime);case"y":return b.t(e.yearMonth)}}var f=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");b.h=b.getHours;switch(a){case"hh":return d(b.h()<13?b.h()===0?12:b.h():b.h()-12);case"h":return b.h()<13?b.h()===0?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return c.dayNames[b.getDay()];case"ddd":return c.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return c.monthNames[b.getMonth()];case"MMM":return c.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case"tt":return b.h()<12?c.amDesignator:c.pmDesignator;case"S":return f(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return typeof b=="string"?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=this*-1,(a?a.clone():new Date).add(b)};var e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/),j;b.toObject=function(){var a={};for(var b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var d=a.today(),e=b-d.getDay();return b===0&&c.firstDayOfWeek===1&&d.getDay()!==0&&(e+=7),d.addDays(e)}};for(var m=0;m<e.length;m++)a[e[m].toUpperCase()]=a[e[m].toUpperCase().substring(0,3)]=m,a[e[m]]=a[e[m].substring(0,3)]=l(m),b[e[m]]=b[e[m].substring(0,3)]=k(m);var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}};for(var p=0;p<f.length;p++)a[f[p].toUpperCase()]=a[f[p].toUpperCase().substring(0,3)]=p,a[f[p]]=a[f[p].substring(0,3)]=o(p),b[f[p]]=b[f[p].substring(0,3)]=n(p);var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase();for(var f=g.length-1;f>-1;f--){d=g[f].toLowerCase();if(b[d]!=c[d])return!1;if(e==d)break}return!0}return a.substring(a.length-1)!="s"&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}};for(var s=0;s<g.length;s++)j=g[s].toLowerCase(),b[j]=b[j+"s"]=q(g[s]),d[j]=d[j+"s"]=r(j);b._ss=q("Second");var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||b===0?this.moveToNthOccurrence(b,a):(this._nth=a,a!==2||b!==undefined&&b!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var u=0;u<i.length;u++)b[i[u]]=u===0?t(-1):t(u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[];for(var e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null)continue;try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null)continue;try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,c.length==1?c[0]:function(b){var f=null,g=null,h=[];for(var i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){var g=null,h=null,i=null,j=null,k=[[],f],l=!1;for(var m=0;m<c.length;m++){i=null,h=null,g=null,l=c.length==1;try{g=c[m].call(this,f)}catch(n){continue}j=[[g[0]],g[1]];if(g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;!l&&i[1].length===0&&(l=!0);if(!l){var p=[];for(var q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}j[1].length<k[1].length&&(k=j);if(k[1].length===0)break}if(k[0].length===0)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/);for(var e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/);for(var h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a){var b=[];for(var c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(d(a[c])):a[c]&&b.push(a[c]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):a=="Z"?this.timezoneOffset=0:this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<c.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;(this.hour||this.minute)&&!this.month&&!this.year&&!this.day&&(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),!this.month&&this.month!==0&&(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset!=null&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){b=b instanceof Array?d(b):[b];if(b.length===0)return null;for(var c=0;c<b.length;c++)typeof b[c]=="function"&&b[c].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f=!!(this.days&&this.days!==null||this.orient||this.operator),g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1,!this.now&&"hour minute second".indexOf(this.unit)!=-1&&e.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,f=!0);if(!f&&this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),this.month||(this.month=j.getMonth()),this.year=j.getFullYear()}f&&this.weekday&&this.unit!="month"&&(this.unit="day",g=a.getDayNumberFromName(this.weekday)-e.getDay(),h=7,this.days=g?(g+i*h)%h:i*h),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(e.set({day:this.value*1}),f||(this.day=this.value*1)),!this.month&&this.value&&this.unit=="month"&&!this.now&&(this.month=this.value,f=!0),f&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",g=this.month-e.getMonth(),h=12,this.months=g?(g+i*h)%h:i*h,this.month=null),this.unit||(this.unit="day");if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i;else if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this[this.unit+"s"]=this.value*i;this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){var j=Date[this.weekday]();this.day=j.getDate(),j.getMonth()!==e.getMonth()&&(this.month=j.getMonth())}return(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month?Date.today().setWeek(this.value):(f&&this.timezone&&this.day&&this.days&&(this.day=this.days),f?e.add(this):e.set(this))}};var e=a.Parsing.Operators,f=a.Grammar,g=a.Translator,h;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var i={};f.ctoken=function(a){var b=i[a];if(!b){var d=c.regexPatterns,f=a.split(/\s+/),g=[];for(var h=0;h<f.length;h++)g.push(e.replace(e.rtoken(d[f[h]]),f[h]));b=i[a]=e.any.apply(null,g)}return b},f.ctoken2=function(a){return e.rtoken(c.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.Z=e.cache(e.process(e.stoken("Z"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),h=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=h(f.d,f.dd),f.month=h(f.M,f.MMM),f.year=h(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM]),h=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=h(f.ddd,f.month,f.day,f.year),f.ymd=h(f.ddd,f.year,f.month,f.day),f.dmy=h(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[c.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?|Z)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstzZ]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var j={},k=function(a){return j[a]=j[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++)b.push(k(a[c]));return e.any.apply(null,b)}return k(a)},f._formats=f.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(b[1].length===0)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return c[1].length===0?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return b[1].length===0?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}(),define("vendor/date",function(){}),function(){function a(b,c,d){if(b===c)return b!==0||1/b==1/c;if(b==null||c==null)return b===c;b._chain&&(b=b._wrapped),c._chain&&(c=c._wrapped);if(b.isEqual&&x.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&x.isFunction(c.isEqual))return c.isEqual(b);var e=j.call(b);if(e!=j.call(c))return!1;switch(e){case"[object String]":return b==String(c);case"[object Number]":return b!=+b?c!=+c:b==0?1/b==1/c:b==+c;case"[object Date]":case"[object Boolean]":return+b==+c;case"[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if(typeof b!="object"||typeof c!="object")return!1;var f=d.length;while(f--)if(d[f]==b)return!0;d.push(b);var g=0,h=!0;if(e=="[object Array]"){g=b.length,h=g==c.length;if(h)while(g--)if(!(h=g in b==g in c&&a(b[g],c[g],d)))break}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var i in b)if(x.has(b,i)){g++;if(!(h=x.has(c,i)&&a(b[i],c[i],d)))break}if(h){for(i in c)if(x.has(c,i)&&!(g--))break;h=!g}}return d.pop(),h}var b=this,c=b._,d={},e=Array.prototype,f=Object.prototype,g=Function.prototype,h=e.slice,i=e.unshift,j=f.toString,k=f.hasOwnProperty,l=e.forEach,m=e.map,n=e.reduce,o=e.reduceRight,p=e.filter,q=e.every,r=e.some,s=e.indexOf,t=e.lastIndexOf,u=Array.isArray,v=Object.keys,w=g.bind,x=function(a){return new C(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):b._=x,x.VERSION="1.3.3";var y=x.each=x.forEach=function(a,b,c){if(a==null)return;if(l&&a.forEach===l)a.forEach(b,c);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(c,a[e],e,a)===d)return}else for(var g in a)if(x.has(a,g)&&b.call(c,a[g],g,a)===d)return};x.map=x.collect=function(a,b,c){var d=[];return a==null?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=x.toArray(a).reverse();return d&&!e&&(b=x.bind(b,d)),e?x.reduce(f,b,c,d):x.reduce(f,b)},x.find=x.detect=function(a,b,c){var d;return z(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},x.filter=x.select=function(a,b,c){var d=[];return a==null?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},x.reject=function(a,b,c){var d=[];return a==null?d:(y(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},x.every=x.all=function(a,b,c){var e=!0;return a==null?e:q&&a.every===q?a.every(b,c):(y(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d}),!!e)};var z=x.some=x.any=function(a,b,c){b||(b=x.identity);var e=!1;return a==null?e:r&&a.some===r?a.some(b,c):(y(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d}),!!e)};x.include=x.contains=function(a,b){var c=!1;return a==null?c:s&&a.indexOf===s?a.indexOf(b)!=-1:(c=z(a,function(a){return a===b}),c)},x.invoke=function(a,b){var c=h.call(arguments,2);return x.map(a,function(a){return(x.isFunction(b)?b||a:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-Infinity;var d={computed:-Infinity};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return Infinity;var d={computed:Infinity};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b=[],c;return y(a,function(a,d,e){c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a}),b},x.sortBy=function(a,b,c){var d=x.isFunction(b)?b:function(a){return a[b]};return x.pluck(x.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c===void 0?1:d===void 0?-1:c<d?-1:c>d?1:0}),"value")},x.groupBy=function(a,b){var c={},d=x.isFunction(b)?b:function(a){return a[b]};return y(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},x.sortedIndex=function(a,b,c){c||(c=x.identity);var d=0,e=a.length;while(d<e){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},x.toArray=function(a){return a?x.isArray(a)?h.call(a):x.isArguments(a)?h.call(a):a.toArray&&x.isFunction(a.toArray)?a.toArray():x.values(a):[]},x.size=function(a){return x.isArray(a)?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return b!=null&&!c?h.call(a,0,b):a[0]},x.initial=function(a,b,c){return h.call(a,0,a.length-(b==null||c?1:b))},x.last=function(a,b,c){return b!=null&&!c?h.call(a,Math.max(a.length-b,0)):a[a.length-1]},x.rest=x.tail=function(a,b,c){return h.call(a,b==null||c?1:b)},x.compact=function(a){return x.filter(a,function(a){return!!a})},x.flatten=function(a,b){return x.reduce(a,function(a,c){return x.isArray(c)?a.concat(b?c:x.flatten(c)):(a[a.length]=c,a)},[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c){var d=c?x.map(a,c):a,e=[];return a.length<3&&(b=!0),x.reduce(d,function(c,d,f){if(b?x.last(c)!==d||!c.length:!x.include(c,d))c.push(d),e.push(a[f]);return c},[]),e},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=x.intersect=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=x.flatten(h.call(arguments,1),!0);return x.filter(a,function(a){return!x.include(b,a)})},x.zip=function(){var a=h.call(arguments),b=x.max(x.pluck(a,"length")),c=new Array(b);for(var d=0;d<b;d++)c[d]=x.pluck(a,""+d);return c},x.indexOf=function(a,b,c){if(a==null)return-1;var d,e;if(c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;if(s&&a.indexOf===s)return a.indexOf(b);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===b)return d;return-1},x.lastIndexOf=function(a,b){if(a==null)return-1;if(t&&a.lastIndexOf===t)return a.lastIndexOf(b);var c=a.length;while(c--)if(c in a&&a[c]===b)return c;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);while(e<d)f[e++]=a,a+=c;return f};var A=function(){};x.bind=function(a,b){var c,d;if(a.bind===w&&w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return d=h.call(arguments,2),c=function(){if(this instanceof c){A.prototype=a.prototype;var e=new A,f=a.apply(e,d.concat(h.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);return b.length==0&&(b=x.functions(a)),y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b){var c,d,e,f,g,h,i=x.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}},x.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},x.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},x.wrap=function(a,b){return function(){var c=[a].concat(h.call(arguments,0));return b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){var b=arguments;for(var c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return a>0?function(){if(--a<1)return b.apply(this,arguments)}:b()},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&(b[b.length]=c);return b},x.values=function(a){return x.map(a,x.identity)},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={};return y(x.flatten(h.call(arguments,1)),function(c){c in a&&(b[c]=a[c])}),b},x.defaults=function(a){return y(h.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a},x.isEqual=function(b,c){return a(b,c,[])},x.isEmpty=function(a){if(a==null)return!0;if(x.isArray(a)||x.isString(a))return a.length===0;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!!a&&a.nodeType==1},x.isArray=u||function(a){return j.call(a)=="[object Array]"},x.isObject=function(a){return a===Object(a)},x.isArguments=function(a){return j.call(a)=="[object Arguments]"},x.isArguments(arguments)||(x.isArguments=function(a){return!!a&&!!x.has(a,"callee")}),x.isFunction=function(a){return j.call(a)=="[object Function]"},x.isString=function(a){return j.call(a)=="[object String]"},x.isNumber=function(a){return j.call(a)=="[object Number]"},x.isFinite=function(a){return x.isNumber(a)&&isFinite(a)},x.isNaN=function(a){return a!==a},x.isBoolean=function(a){return a===!0||a===!1||j.call(a)=="[object Boolean]"},x.isDate=function(a){return j.call(a)=="[object Date]"},x.isRegExp=function(a){return j.call(a)=="[object RegExp]"},x.isNull=function(a){return a===null},x.isUndefined=function(a){return a===void 0},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return b._=c,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},x.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},x.result=function(a,b){if(a==null)return null;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){E(b,x[b]=a[b])})};var B=0;x.uniqueId=function(a){var b=B++;return a?a+b:b},x.chain=function(a){return x(a).chain()};var C=function(a){this._wrapped=a};x.prototype=C.prototype;var D=function(a,b){return b?x(a).chain():a},E=function(a,b){C.prototype[a]=function(){var a=h.call(arguments);return i.call(a,this._wrapped),D(b.apply(x,a),this._chain)}};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=e[a];C.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],D(c,this._chain)}}),y(["concat","join","slice"],function(a){var b=e[a];C.prototype[a]=function(){return D(b.apply(this._wrapped,arguments),this._chain)}}),C.prototype.chain=function(){return this._chain=!0,this},C.prototype.value=function(){return this._wrapped}}.call(this),define("vendor/underscore",function(){}),define("underscore",["vendor/underscore"],function(){return _.noConflict()}),define("INST",["jquery"],function(a){typeof INST=="undefined"&&(INST={}),INST.browser={},a.each([7,8,9],function(b,c){a("html").hasClass("ie"+c)&&(INST.browser["ie"+c]=INST.browser.ie=!0,INST.browser.version=c)}),window.devicePixelRatio&&(INST.browser.webkit=!0,INST.browser[escape(navigator.javaEnabled.toString())=="function%20javaEnabled%28%29%20%7B%20%5Bnative%20code%5D%20%7D"?"chrome":"safari"]=!0),INST.browser.ff=a.browser.mozilla,INST.browser.touch="ontouchstart"in document,INST.browser["no-touch"]=!INST.browser.touch;var b=a.map(INST.browser,function(a,b){if(a===!0)return b}).join(" ");return a(function(){a("body").addClass(b)}),INST}),define("str/htmlEscape",["INST","jquery"],function(a,b){var c=b("<div/>"),d=function(a){return a&&a.htmlSafe?a.toString():c.text(a).html()},e=function(a){if(typeof a=="string")return d(a);var b,c;for(b in a)c=a[b],typeof c=="string"&&(a[b]=d(c));return a};return a.htmlEscape=e,e}),define("i18nObj",["jquery","str/htmlEscape","str/pluralize","str/escapeRegex","vendor/date"],function(a,b,c,d){var e=window.I18n={};return e.defaultLocale="en",e.defaultSeparator=".",e.locale=document.documentElement.getAttribute("lang"),e.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,e.isValidNode=function(a,b){var c=b.split(".");for(var d=0;d<c.length;d++)if(c[d]in a)a=a[c[d]];else return!1;return!0},e.lookup=function(a,b){var c=this.prepareOptions(e.translations),d=c[e.currentLocale()];b=this.prepareOptions(b);if(!d)return;typeof a=="object"&&(a=a.join(this.defaultSeparator)),b.scope&&(a=b.scope.toString()+this.defaultSeparator+a),a=a.split(this.defaultSeparator);while(a.length>0){var f=a.shift();d=d[f];if(!d)break}return!d&&this.isValidNode(b,"defaultValue")&&(d=b.defaultValue),d},e.prepareOptions=function(){var a={},b,c=arguments.length;for(var d=0;d<c;d++){b=arguments[d];if(!b)continue;for(var e in b)this.isValidNode(a,e)||(a[e]=b[e])}return a},e.interpolate=function(a,c){var d,e,f,g,h=!1;c=this.prepareOptions(c),c.wrapper&&(h=!0,a=this.applyWrappers(a,c.wrapper)),g=a.match(this.PLACEHOLDER)||[];for(var i=0;d=g[i];i++){f=d.replace(this.PLACEHOLDER,"$1");var j=f.split(".");e=c;for(var k=0;k<j.length;k++)e=e[j[k]];this.isValidNode(c,f)||(e="[missing "+d+" value]"),h?e.htmlSafe||(e=b(e)):e.htmlSafe&&(h=!0,a=b(a)),regex=new RegExp(d.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),a=a.replace(regex,e)}return a},e.wrapperRegexes={},e.applyWrappers=function(a,c){var e=[],f;a=b(a),typeof c=="string"&&(c={"*":c});for(f in c)e.push(f);e.sort().reverse();for(var g in e){f=e[g];if(!this.wrapperRegexes[f]){var h=d(f);this.wrapperRegexes[f]=new RegExp(h+"([^"+h+"]*)"+h,"g")}a=a.replace(this.wrapperRegexes[f],c[f])}return a},e.translate=function(a,b){b=this.prepareOptions(b);var c=this.lookup(a,b);try{return typeof c=="object"?typeof b.count=="number"?this.pluralize(b.count,a,b):c:this.interpolate(c,b)}catch(d){return this.missingTranslation(a)}},e.localize=function(a,b){switch(a){case"currency":return this.toCurrency(b);case"number":return a=this.lookup("number.format"),this.toNumber(b,a);case"percentage":return this.toPercentage(b);default:return a.match(/^(date|time)/)?this.toTime(a,b).replace(/\s{2,}/," "):b.toString()}},e.parseDate=function(a){var b,c;b=a.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ |T](\d{2}):(\d{2}):(\d{2}))?(Z)?/);if(b){for(var d=1;d<=6;d++)b[d]=parseInt(b[d],10)||0;b[2]-=1,b[7]?c=new Date(Date.UTC(b[1],b[2],b[3],b[4],b[5],b[6])):c=new Date(b[1],b[2],b[3],b[4],b[5],b[6])}else typeof a=="number"?(c=new Date,c.setTime(a)):(c=new Date,c.setTime(Date.parse(a)));return c},e.toTime=function(a,b){var c=this.parseDate(b),d=this.lookup(a);return c.toString().match(/invalid/i)?c.toString():d?this.strftime(c,d):c.toString()},e.strftime=function(a,b){var c=this.lookup("date");if(!c)return a.toString();c.meridian=c.meridian||["AM","PM"];var d=a.getDay(),e=a.getDate(),f=a.getFullYear(),g=a.getMonth()+1,h=1+Math.round((new Date(f,g-1,e)-new Date(f,0,1))/864e5),i=a.getHours(),j=i,k=i>11?1:0,l=a.getSeconds(),m=a.getMilliseconds(),n=a.getMinutes(),o=a.getTimezoneOffset(),p=Math.floor(a.getTime()/1e3),q=Math.floor(Math.abs(o/60)),r=Math.abs(o)-q*60,s=(o>0?"-":"+")+(q.toString().length<2?"0"+q:q)+(r.toString().length<2?"0"+r:r);j>12?j-=12:j===0&&(j=12);var t=function(a,b,c){typeof b=="undefined"&&(b="00"),typeof c=="undefined"&&(c=2);var d=b+a.toString();return d.substr(d.length-c)},u=b.replace(/%([DFrRTv])/g,function(a,b){return{D:"%m/%d/%y",F:"%Y-%m-%d",r:"%I:%M:%S %p",R:"%H:%M",T:"%H:%M:%S",v:"%e-%b-%Y"}[b]}).replace(/%(%|\-?[a-zA-Z]|3N)/g,function(a,b){switch(b){case"a":return c.abbr_day_names[d];case"A":return c.day_names[d];case"b":return c.abbr_month_names[g];case"B":return c.month_names[g];case"d":return t(e);case"-d":return e;case"e":return t(e," ");case"h":return c.abbr_month_names[g];case"H":return t(i);case"-H":return i;case"I":return t(j);case"-I":return j;case"j":return t(h,"00",3);case"k":return t(i," ");case"l":return t(j," ");case"L":return t(m,"00",3);case"m":return t(g);case"-m":return g;case"M":return t(n);case"-M":return n;case"n":return"\n";case"3N":return t(m,"00",3);case"p":return c.meridian[k];case"P":return c.meridian[k].toLowerCase();case"s":return p;case"S":return t(l);case"-S":return l;case"t":return"\t";case"u":return d||d+7;case"w":return d;case"y":return t(f);case"-y":return t(f).replace(/^0+/,"");case"Y":return f;case"z":return s;case"%":return"%";default:return a}});return u},e.toNumber=function(a,b){b=this.prepareOptions(b,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var c=a<0,d=Math.abs(a).toFixed(b.precision).toString(),e=d.split(".");a=e[0];var f=e[1],g=[];while(a.length>0)g.unshift(a.substr(Math.max(0,a.length-3),3)),a=a.substr(0,a.length-3);var h=g.join(b.delimiter);b.precision>0&&(h+=b.separator+e[1]),c&&(h="-"+h);if(b.strip_insignificant_zeros){var i={separator:new RegExp(b.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};h=h.replace(i.zeros,"").replace(i.separator,"")}return h},e.toCurrency=function(a,b){return b=this.prepareOptions(b,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),a=this.toNumber(a,b),a=b.format.replace("%u",b.unit).replace("%n",a),a},e.toHumanSize=function(a,b){var c=1024,d=a,e=0,f,g;while(d>=c&&e<4)d/=c,e+=1;return e===0?(f=this.t("number.human.storage_units.units.byte",{count:d}),g=0):(f=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][e]),g=d-Math.floor(d)===0?0:1),b=this.prepareOptions(b,{precision:g,format:"%n%u",delimiter:""}),a=this.toNumber(d,b),a=b.format.replace("%u",f).replace("%n",a),a},e.toPercentage=function(a,b){return b=this.prepareOptions(b,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),a=this.toNumber(a,b),a+"%"},e.pluralize=function(a,b,c){var d;try{d=this.lookup(b,c)}catch(e){}if(!d)return this.missingTranslation(b);var f;c=this.prepareOptions(c),c.count=a.toString();switch(Math.abs(a)){case 0:f=this.isValidNode(d,"zero")?d.zero:this.isValidNode(d,"none")?d.none:this.isValidNode(d,"other")?d.other:this.missingTranslation(b,"zero");break;case 1:f=this.isValidNode(d,"one")?d.one:this.missingTranslation(b,"one");break;default:f=this.isValidNode(d,"other")?d.other:this.missingTranslation(b,"other")}return this.interpolate(f,c)},e.missingTranslation=function(){var a='[missing "'+this.currentLocale(),b=arguments.length;for(var c=0;c<b;c++)a+="."+arguments[c];return a+='" translation]',a},e.currentLocale=function(){return e.locale||e.defaultLocale},e.t=e.translate,e.l=e.localize,e.p=e.pluralize,e.scoped=function(a,b){var c=new e.scope(a);return b&&b(c),c},e.scope=function(a){this.scope=a},e.scope.prototype={resolveScope:function(a){return typeof a=="object"&&(a=a.join(e.defaultSeparator)),a[0]=="#"?a.replace(/^#/,""):this.scope+e.defaultSeparator+a},translate:function(a,b,d){return d=d||{},typeof d.count!="undefined"&&typeof b=="string"&&b.match(/^[\w\-]+$/)&&(b=c.withCount(d.count,b)),d.defaultValue=b,e.translate(this.resolveScope(a),d)},localize:function(a,b){return e.localize(this.resolveScope(a),b)},pluralize:function(a,b,c){return e.pluralize(a,this.resolveScope(b),c)},beforeLabel:function(a,b){return typeof b!="undefined"&&(a=this.t("labels."+a,b)),this.t("#before_label_wrapper","%{text}:",{text:a})},toTime:function(a,b){return e.toTime(a,b)},toNumber:function(a,b){return e.toNumber(a,b)},toCurrency:function(a,b){return e.toCurrency(a,b)},toHumanSize:function(a,b){return e.toHumanSize(a,b)},toPercentage:function(a,b){return e.toPercentage(a,b)}},e.scope.prototype.t=e.scope.prototype.translate,e.scope.prototype.l=e.scope.prototype.localize,e.scope.prototype.p=e.scope.prototype.pluralize,e.translations?a.extend(!0,e.translations,{en:{}}):e.translations={en:{}},e}),define("jqueryui/datepicker",["jquery"],function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);if(!c.length)return;c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);if($.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])||!d.length)return;d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover")})}function extendRemove(a,b){$.extend(a,b);for(var c in b)if(b[c]==null||b[c]==undefined)a[c]=b[c];return a}function isArray(a){return a&&($.browser.safari&&typeof a=="object"&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"@VERSION"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]);if(c.hasClass(this.markerClassName))return;this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a)},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");(e=="focus"||e=="both")&&a.focus(this._showDatepicker);if(e=="button"||e=="both"){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(g==""?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){var b=0,c=0;for(var d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);if(c.hasClass(this.markerClassName))return;c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block")},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null;if(!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),d=="input"?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(d=="div"||d=="span")&&b.removeClass(this.markerClassName).empty()},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(!b.hasClass(this.markerClassName))return;var d=a.nodeName.toLowerCase();if(d=="input")a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(d=="div"||d=="span"){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(arguments.length==2&&typeof b=="string")return b=="defaults"?$.extend({},$.datepicker._defaults):d?b=="all"?$.extend({},d.settings):this._get(d,b):null;var e=b||{};typeof b=="string"&&(e={},e[b]=c);if(d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),g!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),h!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if($.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else a.keyCode==36&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(a){$.datepicker.log(a)}return!0},_showDatepicker:function(a){a=a.target||a,a.nodeName.toLowerCase()!="input"&&(a=$("input",a.parentNode)[0]);if($.datepicker._isDisabledDatepicker(a)||$.datepicker._lastInput==a)return;var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._datepickerShowing&&$.datepicker._triggerOnClose($.datepicker._curInst),$.datepicker._curInst.dpDiv.stop(!0,!0));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d===!1)return;extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return e|=$(this).css("position")=="fixed",!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"});if(!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(!!a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a));var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var e=this._getNumberOfMonths(a),f=e[1],g=17;a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(e[0]!=1||e[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus();if(a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+$(document).scrollLeft(),i=document.documentElement.clientHeight+$(document).scrollTop();return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){var b=this._getInst(a),c=this._get(b,"isRTL");while(a&&(a.type=="hidden"||a.nodeType!=1||$.expr.filters.hidden(a)))a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_triggerOnClose:function(a){var b=this._get(a,"onClose");b&&b.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a])},_hideDatepicker:function(a){var b=this._curInst;if(!b||a&&b!=$.data(a,PROP_NAME))return;if(this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b),this._curInst=null};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv[c=="slideDown"?"slideUp":c=="fadeIn"?"fadeOut":"hide"](c?d:null,e),c||e(),$.datepicker._triggerOnClose(b),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(!$.datepicker._curInst)return;var b=$(a.target);b[0].id!=$.datepicker._mainDivId&&b.parents("#"+$.datepicker._mainDivId).length==0&&!b.hasClass($.datepicker.markerClassName)&&!b.hasClass($.datepicker._triggerClass)&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)&&$.datepicker._hideDatepicker()},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);if(this._isDisabledDatepicker(d[0]))return;this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e)},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if($(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0]))return;var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))},_clearDate:function(a){var b=$(a),c=this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=b!=null?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],typeof d.input[0]!="object"&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(a==null||b==null)throw"Invalid arguments";b=typeof b=="object"?b.toString():b+"";if(b=="")return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d=typeof d!="string"?d:(new Date).getFullYear()%100+parseInt(d,10);var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d=a=="@"?14:a=="!"?20:a=="y"&&c?4:a=="o"?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;$.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase())return f=c[0],r+=d.length,!1});if(f!=-1)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0;for(var s=0;s<a.length;s++)if(m)a.charAt(s)=="'"&&!n("'")?m=!1:q();else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);i==-1?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i>d?-100:0));if(l>-1){j=1,k=l;do{var u=this._getDaysInMonth(i,j-1);if(k>u)j++,k-=u;else break}while(!0)}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))while(d.length<c)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)a.charAt(m)=="'"&&!h("'")?l=!1:k+=a.charAt(m);else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=b.getTime()*1e4+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c};for(var e=0;e<a.length;e++)if(c)a.charAt(e)=="'"&&!d("'")?c=!1:b+=a.charAt(e);else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()==a.lastVal)return;var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);while(i){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=parseInt(i[1],10)*7;break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))}i=h.exec(b)}return new Date(e,f,g)},f=b==null||b===""?c:typeof b=="string"?e(b):typeof b=="number"?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&f.toString()=="Invalid Date"?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=g[0]!=1||g[1]!=1,k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;n<0&&(n+=12,o--);if(m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));p=l&&p<l?l:p;while(this._daylightSavingAdjust(new Date(o,n,1))>p)n--,n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', -"+i+", 'M');\""+' title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+a.id+"', +"+i+", 'M');\""+' title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+a.id+"');\""+">"+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=this._get(a,"dayNamesShort"),C=this._get(a,"dayNamesMin"),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),I=this._get(a,"calculateWeek")||this.iso8601Week,J=this._getDefaultDate(a),K="";for(var L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){Q+='<div class="ui-datepicker-group';if(g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&L==0?c?t:r:"")+(/all|right/.test(P)&&L==0?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(var S=0;S<7;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7<5?"":' class="ui-datepicker-week-end"')+">"+'<span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j?this.maxRows>W?this.maxRows:W:W;this.maxRows=X;var Y=this._daylightSavingAdjust(new Date(o,n,1-V));for(var Z=0;Z<X;Z++){Q+="<tr>";var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"";for(var S=0;S<7;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&Y<l||m&&Y>m;_+='<td class="'+((S+y+6)%7<5?"":" ui-datepicker-week-end")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!bb||G)&&ba[2]?' title="'+ba[2]+'"':"")+(bc?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+a.id+"',"+Y.getMonth()+","+Y.getFullYear()+', this);return false;"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" "+">";for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}k||(l+=m+(f||!i||!j?"&#xa0;":""));if(!a.yearshtml){a.yearshtml="";if(f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" "+">";for(;t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}}return l+=this._get(a,"yearSuffix"),k&&(l+=(f||!i||!j?"&#xa0;":"")+m),l+="</div>",l},_adjustInstDate:function(a,b,c){var d=a.drawYear+(c=="Y"?b:0),e=a.drawMonth+(c=="M"?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+(c=="D"?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),(c=="M"||c=="Y")&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e,e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return b==null?[1,1]:typeof b=="number"?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return typeof a!="string"||a!="isDisabled"&&a!="getDate"&&a!="widget"?a=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="@VERSION",window["DP_jQuery_"+dpuuid]=$}),define("jqueryui/core",["jquery"],function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})}),define("jqueryui/widget",["jquery"],function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e=this.options[b];c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent)for(var f=a.event.props.length,g;f;)g=a.event.props[--f],c[g]=c.originalEvent[g];return this.element.trigger(c,d),!(a.isFunction(e)&&e.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}),define("jqueryui/mouse",["jquery","jqueryui/widget"],function(a,b,c){var d=!1;a(document).mouseup(function(a){d=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(d)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),d=!0,!0},_mouseMove:function(b){return a.browser.msie&&document.documentMode<9&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})}),define("jqueryui/sortable",["jquery","jqueryui/core","jqueryui/mouse","jqueryui/widget"],function(a,b,c,d,e){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData("sortable-item");return this},_setOption:function(b,c){b==="disabled"?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(b);var d=null,e=this,f=a(b.target).parents().each(function(){if(a.data(this,"sortable-item")==e)return d=a(this),!1});a.data(b.target,"sortable-item")==e&&(d=a(b.target));if(!d)return!1;if(this.options.handle&&!c){var g=!1;a(this.options.handle,d).find("*").andSelf().each(function(){this==b.target&&(g=!0)});if(!g)return!1}return this.currentItem=d,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(!h)continue;if(g!=this.currentItem[0]&&this.placeholder[h==1?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],g):!0)){this.direction=h==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(f))this._rearrange(b,f);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(!b)return;a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&g=="right"||f=="down"?2:1:f&&(f=="down"?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?f=="right"&&d||f=="left"&&!d:e&&(e=="down"&&c||e=="up"&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=this,d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data(sortable-item)");for(var b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=this,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f)for(var g=f.length-1;g>=0;g--){var h=a(f[g]);for(var i=h.length-1;i>=0;i--){var j=a.data(h[i],"sortable");j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))}}for(var g=e.length-1;g>=0;g--){var k=e[g][1],l=e[g][0];for(var i=0,m=l.length;i<m;i++){var n=a(l[i]);n.data("sortable-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])continue;var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){if(e&&!d.forcePlaceholderSize)return;b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){var c=null,d=null;for(var e=this.containers.length-1;e>=0;e--){if(a.ui.contains(this.currentItem[0],this.containers[e].element[0]))continue;if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"];for(var i=this.items.length-1;i>=0;i--){if(!a.ui.contains(this.containers[d].element[0],this.items[i].item[0]))continue;var j=this.items[i][this.containers[d].floating?"left":"top"];Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i])}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;return d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(d[0].style.width==""||c.forceHelperSize)&&d.width(this.currentItem.width()),(d[0].style.height==""||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e=a(c).css("overflow")!="hidden";this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition){this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top));if(c.grid){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment?i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2]?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i:i}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[],e=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if(this._storedCSS[f]=="auto"||this._storedCSS[f]=="static")this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return!1}c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"@VERSION"})}),define("jqueryui/button",["jquery","jqueryui/core","jqueryui/widget"],function(a,b,c,d){var e,f,g,h,i="ui-button ui-widget ui-state-default ui-corner-all",j="ui-state-hover ui-state-active ",k="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},m=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",l),typeof this.options.disabled!="boolean"&&(this.options.disabled=this.element.propAttr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,c=this.options,d=this.type==="checkbox"||this.type==="radio",j="ui-state-hover"+(d?"":" ui-state-active"),k="ui-state-focus";c.label===null&&(c.label=this.buttonElement.html()),this.element.is(":disabled")&&(c.disabled=!0),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter.button",function(){if(c.disabled)return;a(this).addClass("ui-state-hover"),this===e&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(c.disabled)return;a(this).removeClass(j)}).bind("click.button",function(a){c.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(k)}).bind("blur.button",function(){b.buttonElement.removeClass(k)}),d&&(this.element.bind("change.button",function(){if(h)return;b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(c.disabled)return;h=!1,f=a.pageX,g=a.pageY}).bind("mouseup.button",function(a){if(c.disabled)return;if(f!==a.pageX||g!==a.pageY)h=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(c.disabled||h)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(c.disabled||h)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var d=b.element[0];m(d).not(d).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return!1;a(this).addClass("ui-state-active"),e=this,a(document).one("mouseup",function(){e=null})}).bind("mouseup.button",function(){if(c.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(c.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",c.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" "+j+" "+k).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled"){c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?m(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(k),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){b==="disabled"&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(b?"ui-corner-right":"ui-corner-left").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}),define("jqueryui/draggable-unpatched",["jquery","jqueryui/core","jqueryui/mouse","jqueryui/widget"],function(a,b,c,d,e){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"@VERSION"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!e.length)return;var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}),define("jqueryui/draggable",["jquery","jqueryui/draggable-unpatched"],function(a,b){var c=a.ui.draggable.prototype._mouseMove;return a.ui.draggable.prototype._mouseMove=function(){var a=c.apply(this,arguments);return this.options.instructureHackToNotAutoSizeTop&&(this.helper[0].style.top=""),a},b}),define("jqueryui/position",["jquery"],function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f=a.fn.position,g=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return f.apply(this,arguments);b=a.extend({},b);var g=a(b.of),h=g[0],i=(b.collision||"flip").split(" "),j=b.offset?b.offset.split(" "):[0,0],k,l,m;return h.nodeType===9?(k=g.width(),l=g.height(),m={top:0,left:0}):h.setTimeout?(k=g.width(),l=g.height(),m={top:g.scrollTop(),left:g.scrollLeft()}):h.preventDefault?(b.at="left top",k=l=0,m={top:b.of.pageY,left:b.of.pageX}):(k=g.outerWidth(),l=g.outerHeight(),m=g.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),i.length===1&&(i[1]=i[0]),j[0]=parseInt(j[0],10)||0,j.length===1&&(j[1]=j[0]),j[1]=parseInt(j[1],10)||0,b.at[0]==="right"?m.left+=k:b.at[0]===e&&(m.left+=k/2),b.at[1]==="bottom"?m.top+=l:b.at[1]===e&&(m.top+=l/2),m.left+=j[0],m.top+=j[1],this.each(function(){var c=a(this),d=c.outerWidth(),f=c.outerHeight(),g=parseInt(a.curCSS(this,"marginLeft",!0))||0,h=parseInt(a.curCSS(this,"marginTop",!0))||0,n=d+g+(parseInt(a.curCSS(this,"marginRight",!0))||0),o=f+h+(parseInt(a.curCSS(this,"marginBottom",!0))||0),p=a.extend({},m),q;b.my[0]==="right"?p.left-=d:b.my[0]===e&&(p.left-=d/2),b.my[1]==="bottom"?p.top-=f:b.my[1]===e&&(p.top-=f/2),p.left=Math.round(p.left),p.top=Math.round(p.top),q={left:p.left-g,top:p.top-h},a.each(["left","top"],function(c,e){a.ui.position[i[c]]&&a.ui.position[i[c]][e](p,{targetWidth:k,targetHeight:l,elemWidth:d,elemHeight:f,collisionPosition:q,collisionWidth:n,collisionHeight:o,offset:j,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(p,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):g.call(this)})}),define("jqueryui/resizable",["jquery","jqueryui/core","jqueryui/mouse","jqueryui/widget"],function(a,b,c,d,e){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');/sw|se|ne|nw/.test(f)&&h.css({zIndex:++c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}if(!a(this.handles[c]).length)continue}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){if(c.disabled)return;a(this).removeClass("ui-resizable-autohide"),b._handles.show()},function(){if(c.disabled)return;b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var c=this.options,d=this.element.position(),e=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(e.is(".ui-draggable")||/absolute/.test(e.css("position")))&&e.css({position:"absolute",top:d.top,left:d.left}),a.browser.opera&&/relative/.test(e.css("position"))&&e.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy();var g=f(this.helper.css("left")),h=f(this.helper.css("top"));c.containment&&(g+=a(c.containment).scrollLeft()||0,h+=a(c.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()},this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio=typeof c.aspectRatio=="number"?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor",i=="auto"?this.axis+"-resize":i),e.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,d=this.options,e={},f=this,g=this.originalMousePosition,h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;var l=k.apply(this,[b,i,j]),m=a.browser.msie&&a.browser.version<7,n=this.sizeDiff;this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)l=this._updateRatio(l,b);return l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b=this.options,c,d,e,f,h;h={minWidth:g(b.minWidth)?b.minWidth:0,maxWidth:g(b.maxWidth)?b.maxWidth:Infinity,minHeight:g(b.minHeight)?b.minHeight:0,maxHeight:g(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)c=h.minHeight*this.aspectRatio,e=h.minWidth/this.aspectRatio,d=h.maxHeight*this.aspectRatio,f=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),e>h.minHeight&&(h.minHeight=e),d<h.maxWidth&&(h.maxWidth=d),f<h.maxHeight&&(h.maxHeight=f);this._vBoundaries=h},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),g(a.left)&&(this.position.left=a.left),g(a.top)&&(this.position.top=a.top),g(a.height)&&(this.size.height=a.height),g(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.options,d=this.position,e=this.size,f=this.axis;return g(a.height)?a.width=a.height*this.aspectRatio:g(a.width)&&(a.height=a.width/this.aspectRatio),f=="sw"&&(a.left=d.left+(e.width-a.width),a.top=null),f=="nw"&&(a.top=d.top+(e.height-a.height),a.left=d.left+(e.width-a.width)),a},_respectSize:function(a,b){var c=this.helper,d=this._vBoundaries,e=this._aspectRatio||b.shiftKey,f=this.axis,h=g(a.width)&&d.maxWidth&&d.maxWidth<a.width,i=g(a.height)&&d.maxHeight&&d.maxHeight<a.height,j=g(a.width)&&d.minWidth&&d.minWidth>a.width,k=g(a.height)&&d.minHeight&&d.minHeight>a.height;j&&(a.width=d.minWidth),k&&(a.height=d.minHeight),h&&(a.width=d.maxWidth),i&&(a.height=d.maxHeight);var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(f),o=/nw|ne|n/.test(f);j&&n&&(a.left=l-d.minWidth),h&&n&&(a.left=l-d.maxWidth),k&&o&&(a.top=m-d.minHeight),i&&o&&(a.top=m-d.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){var b=this.options;if(!this._proportionallyResizeElements.length)return;var c=this.helper||this.element;for(var d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}if(!a.browser.msie||!a(c).is(":hidden")&&!a(c).parents(":hidden").length)e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0});else continue}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var d=this.options,e=this.originalSize,f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),b!="resize"&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"@VERSION"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10),position:b.css("position")})})};typeof e.alsoResize=="object"&&!e.alsoResize.parentNode?e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,e){a(b).each(function(){var b=a(this),f=a(this).data("resizable-alsoresize"),g={},i=e&&e.length?e:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(i,function(a,b){var c=(f[b]||0)+(h[b]||0);c&&c>=0&&(g[b]=c||null)}),a.browser.opera&&/relative/.test(b.css("position"))&&(d._revertToRelativePosition=!0,b.css({position:"absolute",top:"auto",left:"auto"})),b.css(g)})};typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a,b){i(a,b)}):i(e.alsoResize)},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.css({position:b.data("resizable-alsoresize").position})})};d._revertToRelativePosition&&(d._revertToRelativePosition=!1,typeof e.alsoResize=="object"&&!e.alsoResize.nodeType?a.each(e.alsoResize,function(a){f(a)}):f(e.alsoResize)),a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,g=d.element,h=e.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(!i)return;d.containerElement=a(i);if(/document/.test(h)||h==document)d.containerOffset={left:0,top:0},d.containerPosition={left:0,top:0},d.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=f(j.css("padding"+b))}),d.containerOffset=j.offset(),d.containerPosition=j.position(),d.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=d.containerOffset,m=d.containerSize.height,n=d.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;d.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.containerSize,g=d.containerOffset,h=d.size,i=d.position,j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/e.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*e.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.position,g=d.containerOffset,h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof e.ghost=="string"?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable"),e=d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis,j=e._aspectRatio||b.shiftKey;e.grid=typeof e.grid=="number"?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)}});var f=function(a){return parseInt(a,10)||0},g=function(a){return!isNaN(parseInt(a,10))}}),define("jqueryui/dialog-unpatched",["jquery","jqueryui/core","jqueryui/widget","jqueryui/button","jqueryui/draggable","jqueryui/mouse","jqueryui/position","jqueryui/resizable","jqueryui/draggable"],function(a,b,c,d,e,f,g,h,i){var j="ui-dialog ui-widget ui-widget-content ui-corner-all ",k={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},l={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},m=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,c=b.options,d=c.title||a("<span>&#160;</span>"),e=a.ui.dialog.getTitleId(b.element),f=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(j+c.dialogClass).css({zIndex:c.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){c.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE&&(b.close(d),d.preventDefault())}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(a){b.moveToTop(!1,a)}),g=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f),h=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(h),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(i),l=a("<span></span>").addClass("ui-dialog-title").attr("id",e).prependTo(h);d.jquery?l.append(d):l.text(d),a.isFunction(c.beforeclose)&&!a.isFunction(c.beforeClose)&&(c.beforeClose=c.beforeclose),h.find("*").add(h).disableSelection(),c.draggable&&a.fn.draggable&&b._makeDraggable(),c.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(c.buttons),b._isOpen=!1,a.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1===c._trigger("beforeClose",b))return;return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keypress.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return e.focus(1),!1}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){if(a==="click")return;a in m?e[a](b):e.attr(a,b)}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=c.options,e=a(document),f;c.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,g){f=d.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),c._trigger("dragStart",e,b(g))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(g,h){d.position=[h.position.left-e.scrollLeft(),h.position.top-e.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(f),c._trigger("dragStop",g,b(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(b){function c(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}b=b===i?this.options.resizable:b;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof b=="string"?b:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,e){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,c(e))},resize:function(a,b){d._trigger("resize",a,c(b))},stop:function(b,f){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,c(f)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,d={},e=!1;a.each(b,function(a,b){c._setOption(a,b),a in k&&(e=!0),a in l&&(d[a]=b)}),e&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(b,c){var d=this,e=d.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":d._createButtons(c);break;case"closeText":d.uiDialogTitlebarCloseText.text(""+c);break;case"dialogClass":e.removeClass(d.options.dialogClass).addClass(j+c);break;case"disabled":c?e.addClass("ui-dialog-disabled"):e.removeClass("ui-dialog-disabled");break;case"draggable":var f=e.is(":data(draggable)");f&&!c&&e.draggable("destroy"),!f&&c&&d._makeDraggable();break;case"position":d._position(c);break;case"resizable":var g=e.is(":data(resizable)");g&&!c&&e.resizable("destroy"),g&&typeof c=="string"&&e.resizable("option","handles",c),!g&&c!==!1&&d._makeResizable(c);break;case"title":c||(c=a("<span>&#160;</span>")),c.jquery?a(".ui-dialog-title",d.uiDialogTitlebar).html("").append(c):a(".ui-dialog-title",d.uiDialogTitlebar).text(""+c)}a.Widget.prototype._setOption.apply(d,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"@VERSION",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}),define("jqueryui/dialog",["jquery","jqueryui/dialog-unpatched"],function(a){return a.widget("instructure.dialog",a.ui.dialog,{options:{modal:!0}}),a}),define("vendor/jquery.ba-hashchange",["jquery"],function(a){function b(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var c="hashchange",d=document,e,f=a.event.special,g=d.documentMode,h="on"+c in window&&(g===undefined||g>7);a.fn[c]=function(a){return a?this.bind(c,a):this.trigger(c)},a.fn[c].delay=50,f[c]=a.extend(f[c],{setup:function(){if(h)return!1;a(e.start)},teardown:function(){if(h)return!1;a(e.stop)}}),e=function(){function e(){var d=b(),f=l(i);d!==i?(k(i=d,f),a(window).trigger(c)):f!==i&&(location.href=location.href.replace(/#.*/,"")+f),g=setTimeout(e,a.fn[c].delay)}var f={},g,i=b(),j=function(a){return a},k=j,l=j;return f.start=function(){g||e()},f.stop=function(){g&&clearTimeout(g),g=undefined},a.browser.msie&&!h&&function(){var g,h;f.start=function(){g||(h=a.fn[c].src,h=h&&h+b(),g=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){h||k(b()),e()}).attr("src",h||"javascript:0").insertAfter("body")[0].contentWindow,d.onpropertychange=function(){try{event.propertyName==="title"&&(g.document.title=d.title)}catch(a){}})},f.stop=j,l=function(){return b(g.location.href)},k=function(b,e){var f=g.document,h=a.fn[c].domain;b!==e&&(f.title=d.title,f.open(),h&&f.write('<script>document.domain="'+h+'"</script>'),f.close(),g.location.hash=b)}}(),f}()}),define("i18n",{load:function(a,b,c,d){if(!d.translate){b(["i18nObj"],function(b){c(b.scoped(a))});return}b(["i18nObj","translations/"+a],function(a,b){c(d.isBuild?null:a.scoped())})}}),define("translations/course_list.wrapper",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{course_list:{wrapper:{close_course_menu_title:"cerrar",reset_course_menu:"Restablecer"}}}}})}),define("translations/dates",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),function(){define("compiled/util/semanticDateRange",["i18n!dates"],function(a){var b;return b=function(b,c){var d,e,f,g;return b?(f=$.parseFromISO(b),d=$.parseFromISO(c),g=$.dateString(f.date),f.timestamp!==d.timestamp?(e=$.dateString(d.date),g!==e?'<span class="date-range">\n  <time datetime=\''+f.time.toISOString()+"'>\n    "+g+" at "+f.time_formatted+"\n  </time> -\n  <time datetime='"+d.time.toISOString()+"'>\n    "+e+" at "+d.time_formatted+"\n  </time>\n</span>":'<span class="date-range">\n  <time datetime=\''+f.time.toISOString()+"'>\n    "+g+", "+f.time_formatted+"\n  </time> -\n  <time datetime='"+d.time.toISOString()+"'>\n    "+d.time_formatted+"\n  </time>\n</span>"):'<span class="date-range">\n  <time datetime=\''+f.time.toISOString()+"'>\n    "+g+" at "+f.time_formatted+"\n  </time>\n</span>"):'<span class="date-range date-range-no-date">\n  '+a.t("no_date","No Date")+"\n</span>"}})}.call(this),define("translations/instructure",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{buttons:{cancel:"Cancelar",done:"Completado"},date:{days:{today:"Hoy",tomorrow:"MaÃ±ana",yesterday:"Ayer"}},instructure:{alerts:{file_previews_disabled:"Vista previa de archivos ha sido desactivada para este sitio de Canvas",kaltura_disabled:"Kaltura ha sido desactivado para este sitio de Canvas"},browsers:{unrecognized:"Navegador no reconocido"},buttons:{next_module:"Siguiente MÃ³dulo",previous_module:"Module Anterior",search:"Buscar",search_by_tag:"Buscar por Etiqueta"},confirms:{default_delete_thing:"Â¿Seguro que quiere borrarlo?"},datepicker:{titles:{am_pm:"am/pm"}},errors:{cannot_view_document_inline:"Este documento no puede ser visto en lÃ­nea, puede que no tenga permiso para verlo o puede que estÃ© borrado.",field_is_required:"Este campo es requerido",invalid_datetime:"Valor de fecha/tiempo invÃ¡lido",invalid_entry_for_field:"Entrada invÃ¡lida: %{field}",invalid_number:"Este deberÃ­a ser un nÃºmero.",not_a_date:"Â¡Esa no es una fecha!",posting_message_failed:"ContribuciÃ³n FallÃ³, Intente de nuevo",search_failed:"BÃºsqueda fallÃ³, Intente de nuevo."},ignore_forever:"Ignorar por Siempre",ignore_until_new_submission:"Ignorar Hasta un Nuevo EnvÃ­o",labels:{datepicker:{time:"Hora"}},links:{minimize_embedded_kaltura_content:"Minimize el Contenido IncluÃ­do",minimize_file_preview:"Minimize la Vista Previa del Archivo",minimize_youtube_video:"Minimize el Video",view_equella_content_in_new_window:"ver el contenido en una ventana nueva"},loading:"Cargando...",no_description:"Sin descripciÃ³n",no_results_found:"No se Encontraron Resultados",status:{diigo_search_throttling:"Diigo limita los usuarios a una bÃºsqueda cada diez segundos. Por favor espere...",posting_message:"Publicando Mensaje...",searching:"Buscando..."},switched_roles_message:{designer:"Ha cambiado los roles temporalmente para este curso, y ahora lo estÃ¡ viendo como un diseÃ±ador. Puede restaurar su rol y permisos desde la pÃ¡gina de inicio de su curso.",observer:"Ha cambiado los roles temporalmente para este curso, y ahora lo estÃ¡ viendo como un observador.Puede restaurar su rol y permisos desde la pÃ¡gina de inicio de su curso.",student:"Ha cambiado los roles temporalmente para este curso, ahora lo estÃ¡ viendo como un estudiante. Puede restaurar su rol y permisos desde la pÃ¡gina de inicio de su curso.",ta:"Ha cambiado los roles temporalmente para este curso, ahora lo estÃ¡ viendo como un AP. Puede restaurar su rol y permisos desde la pÃ¡gina de inicio de su curso.",teacher:"Ha cambiado los roles temporalmente para este curso, ahora lo estÃ¡ viendo como un profesor. Puede restaurar su rol y permisos desde la pÃ¡gina de inicio de su curso."},titles:{bookmark_search:"BÃºsqueda de Favoritos: %{service_name}",cant_create_recordings:"Â¿No puede Crear Grabaciones?",equella_content_preview:"Vista Previa de Contenido de Equella",external_link:"Enlaces a un sitio externo.",image_search:"BÃºsqueda de Imagen: %{service_name}",keyboard_shortcuts:"Atajos de Teclado",preview_document:"Vista Previa del Documento",search_for_open_resources:"Buscar Recursos Abiertos",view_in_new_window:"Ver en una ventana nueva"},tooltips:{enter_search_terms:"ingresar los tÃ©rminos de bÃºsqueda"}},time:{am:"am",count_hours_ago:{one:"hace 1 hora",other:"hace %{count} horas"},count_minutes_ago:{one:"hace 1 minuto",other:"hace %{count} minutos"},less_than_a_minute_ago:"hace menos de un minuto",pm:"pm"}}}})}),define("vendor/jquery.ba-tinypubsub",["jquery"],function(a){var b=a({}),c,d,e;return a.subscribe=c=function(d,e){function f(){return e.apply(this,Array.prototype.slice.call(arguments,1))}if(a.isPlainObject(d))return a.each(d,function(a,b){c(a,b)});f.guid=e.guid=e.guid||a.guid++,b.bind(d,f)},a.unsubscribe=d=function(){b.unbind.apply(b,arguments)},a.publish=e=function(){b.trigger.apply(b,arguments)},{subscribe:c,unsubscribe:d,publish:e}}),define("translations/help_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),function(){define("compiled/fn/preventDefault",[],function(){var a;return a=function(a){return function(b){return b.preventDefault(),a.apply(this,arguments)}}})}.call(this),define("vendor/spin",[],function(){function a(a,b){var c=document.createElement(a||"div"),d;for(d in b)c[d]=b[d];return c}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(a*100),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),l=h&&"-"+h+"-"||"";return i[e]||(k.insertRule("@"+l+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",0),i[e]=1),e}function d(a,b){var c=a.style,d,e;if(c[b]!==undefined)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(e=0;e<h.length;e++){d=h[e]+b;if(c[d]!==undefined)return d}}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]===undefined&&(a[d]=c[d])}return a}function g(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var h=["webkit","Moz","ms","O"],i={},j,k=function(){var c=a("style");return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),l={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},m=function n(a){if(!this.spin)return new n(a);this.opts=f(a||{},n.defaults,l)};return m.defaults={},f(m.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:"relative",zIndex:d.zIndex}),h=d.radius+d.length+d.width,i,k;b&&(b.insertBefore(f,b.firstChild||null),k=g(b),i=g(f),e(f,{left:(d.left=="auto"?k.x-i.x+(b.offsetWidth>>1):d.left+h)+"px",top:(d.top=="auto"?k.y-i.y+(b.offsetHeight>>1):d.top+h)+"px"})),f.setAttribute("aria-role","progressbar"),c.lines(f,c.opts);if(!j){var l=0,m=d.fps,n=m/d.speed,o=(1-d.opacity)/(n*d.trail/100),p=n/d.lines;!function q(){l++;for(var a=d.lines;a;a--){var b=Math.max(1-(l+a*p)%n*o,d.opacity);c.opacity(f,d.lines-a,b,d)}c.timeout=c.el&&setTimeout(q,~~(1e3/m))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=undefined),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*h+f.rotate)+"deg) translate("+f.radius+"px"+",0)",borderRadius:(f.width>>1)+"px"})}var h=0,i;for(;h<f.lines;h++)i=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,h,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,g(f.color,"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),!function(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}var f=e(a("group"),{behavior:"url(#default#VML)"});!d(f,"transform")&&f.adj?(k.addRule(".spin-vml","behavior:url(#default#VML)"),m.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:i+" "+i,coordorigin:-h+" "+ -h}),{width:i,height:i})}function g(a,g,i){b(k,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:1}),{width:h,height:d.width,left:d.radius,top:-d.width>>1,filter:i}),c("fill",{color:d.color,opacity:d.opacity}),c("stroke",{opacity:0}))))}var h=d.length+d.width,i=2*h,j=-(d.width+d.length)*2+"px",k=e(f(),{position:"absolute",top:j,left:j}),l;if(d.shadow)for(l=1;l<=d.lines;l++)g(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=d.lines;l++)g(l);return b(a,k)},m.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}):j=d(f,"animation")}(),window.Spinner=m,m}),define("vendor/jquery.spin",["jquery","vendor/spin"],function(a,b){a.fn.spin=function(c){return this.each(function(){var d=a(this),e=d.data();e.spinner&&(e.spinner.stop(),delete e.spinner);if(c!==!1){var f=a.css(this,"display");d.show(),e.spinner=(new b(a.extend({color:d.css("color")},c))).spin(this),d.css("display",f)}})}}),define("translations/_core_en",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{en:{date:{abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days:{today:"Today",today_lower:"today",tomorrow:"Tomorrow",yesterday:"Yesterday"},formats:{"default":"%Y-%m-%d","long":"%B %d, %Y",medium:"%b %e, %Y",medium_month:"%b %Y","short":"%b %e",short_month:"%b",weekday:"%A"},month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],order:["year","month","day"]},datetime:{distance_in_words:{about_x_hours:{one:"about 1 hour",other:"about %{count} hours"},about_x_months:{one:"about 1 month",other:"about %{count} months"},about_x_years:{one:"about 1 year",other:"about %{count} years"},almost_x_years:{one:"almost 1 year",other:"almost %{count} years"},half_a_minute:"half a minute",less_than_x_minutes:{one:"less than a minute",other:"less than %{count} minutes"},less_than_x_seconds:{one:"less than 1 second",other:"less than %{count} seconds"},over_x_years:{one:"over 1 year",other:"over %{count} years"},x_days:{one:"1 day",other:"%{count} days"},x_minutes:{one:"1 minute",other:"%{count} minutes"},x_months:{one:"1 month",other:"%{count} months"},x_seconds:{one:"1 second",other:"%{count} seconds"}},prompts:{day:"Day",hour:"Hour",minute:"Minute",month:"Month",second:"Seconds",year:"Year"}},number:{currency:{format:{delimiter:",",format:"%u%n",precision:2,separator:".",unit:"$"}},format:{delimiter:",",precision:3,separator:"."},human:{format:{delimiter:"",precision:1},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},gb:"GB",kb:"KB",mb:"MB",tb:"TB"}}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}}},support:{array:{last_word_connector:", and ",or:{last_word_connector:", or ",two_words_connector:" or "},two_words_connector:" and ",words_connector:", "},select:{prompt:"Please select"}},time:{am:"am",count_hours_ago:{one:"1 hour ago",other:"%{count} hours ago"},count_minutes_ago:{one:"1 minute ago",other:"%{count} minutes ago"},due_date:"%{date} by %{time}",event:"%{date} at %{time}",formats:{"default":"%a, %d %b %Y %H:%M:%S %z","long":"%B %d, %Y %H:%M","short":"%d %b %H:%M",tiny:"%l:%M%P",tiny_on_the_hour:"%l%P"},less_than_a_minute_ago:"less than a minute ago",pm:"pm",ranges:{different_days:"%{start_date_and_time} to %{end_date_and_time}",same_day:"%{date} from %{start_time} to %{end_time}",times:"%{start_time} to %{end_time}"},unknown_date:"Unknown date",with_ago:"%{time} ago"}}}})}),function(){if(!("console"in window)){var a=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var b=0;b<a.length;b++)window.console[a[b]]=function(){}}}(),define("vendor/firebugx",function(){}),define("jquery.google-analytics",["INST","jquery"],function(a,b){var c=window._gaq=window._gaq||[],d=!1;return b.trackPage=function(a,e){if(!d){d=!0;var f=document.createElement("script");f.type="text/javascript",f.async=!0,f.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(f,g)}e=b.extend({status_code:200},e),c.push(["_setAccount",a]),e.domain&&c.push(["_setDomainName",e.domain]),c.push(["_trackPageview"]),c.push(["_trackPageLoadTime"]),e.status_code!=200&&c.push(["_trackEvent","Errors",e.status_code,"page: "+document.location.pathname+document.location.search+" ref: "+document.referrer,e.error_id])},b.setTrackingVar=function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("_setCustomVar"),c.push.apply(c,a)},b.trackEvent=function(a,b,d,e){c.push(["_trackEvent",a,b,d,e])},b.trackPageview=function(a){c.push(["_trackPageview",a])},a&&a.googleAnalyticsAccount&&b.trackPage(a.googleAnalyticsAccount,{status_code:a.http_status,error_id:a.error_id,domainName:document.location.hostname}),{trackPage:b.trackPage,setTrackingVar:b.setTrackingVar,trackEvent:b.trackEvent,trackPageView:b.trackPageView}}),define("vendor/swfobject/swfobject",[],function(){function a(){if(P)return;try{var a=E.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}P=!0;var c=H.length;for(var d=0;d<c;d++)H[d]()}function b(a){P?a():H[H.length]=a}function c(a){if(typeof D.addEventListener!=w)D.addEventListener("load",a,!1);else if(typeof E.addEventListener!=w)E.addEventListener("load",a,!1);else if(typeof D.attachEvent!=w)r(D,"onload",a);else if(typeof D.onload=="function"){var b=D.onload;D.onload=function(){b(),a()}}else D.onload=a}function d(){G?e():f()}function e(){if(U){storedVersion=localStorage.getItem("flashversion");if(storedVersion){ua.pv=JSON.parse(storedVersion),f();return}}var a=E.getElementsByTagName("body")[0],b=q(x);b.setAttribute("type",A);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=w){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),ua.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)],U&&localStorage.setItem("flashversion",JSON.stringify(ua.pv)))}else if(d<10){d++,setTimeout(arguments.callee,10);return}a.removeChild(b),c=null,f()})()}else f()}function f(){var a=I.length;if(a>0)for(var b=0;b<a;b++){var c=I[b].id,d=I[b].callbackFn,e={success:!1,id:c};if(ua.pv[0]>0){var f=p(c);if(f)if(!s(I[b].swfVersion)||!!ua.wk&&ua.wk<312)if(I[b].expressInstall&&h()){var k={};k.data=I[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));var l={},m=f.getElementsByTagName("param"),n=m.length;for(var o=0;o<n;o++)m[o].getAttribute("name").toLowerCase()!="movie"&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else{u(c,!0);if(d){var q=g(c);q&&typeof q.SetVariable!=w&&(e.success=!0,e.ref=q),d(e)}}}}function g(a){var b=null,c=p(a);if(c&&c.nodeName=="OBJECT")if(typeof c.SetVariable!=w)b=c;else{var d=c.getElementsByTagName(x)[0];d&&(b=d)}return b}function h(){return!Q&&s("6.0.65")&&(ua.win||ua.mac)&&(!ua.wk||ua.wk>=312)}function i(a,b,c,d){Q=!0,N=d||null,O={success:!1,id:c};var e=p(c);if(e){e.nodeName=="OBJECT"?(L=k(e),M=null):(L=e,M=c),a.id=B;if(typeof a.width==w||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==w||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";E.title=E.title.slice(0,47)+" - Flash Player Installation";var f=ua.ie&&ua.win?"ActiveX":"PlugIn",g="MMredirectURL="+D.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+E.title;typeof b.flashvars!=w?b.flashvars+="&"+g:b.flashvars=g;if(ua.ie&&ua.win&&e.readyState!=4){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(ua.ie&&ua.win&&a.readyState!=4){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(ua.win&&ua.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(x)[0];if(c){var d=c.childNodes;if(d){var e=d.length;for(var f=0;f<e;f++)(d[f].nodeType!=1||d[f].nodeName!="PARAM")&&d[f].nodeType!=8&&b.appendChild(d[f].cloneNode(!0))}}}return b}function l(a,b,c){var d,e=p(c);if(ua.wk&&ua.wk<312)return d;if(e){typeof a.id==w&&(a.id=c);if(ua.ie&&ua.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&(g.toLowerCase()=="data"?b.movie=a[g]:g.toLowerCase()=="styleclass"?f+=' class="'+a[g]+'"':g.toLowerCase()!="classid"&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",J[J.length]=a.id,d=p(a.id)}else{var j=q(x);j.setAttribute("type",A);for(var k in a)a[k]!=Object.prototype[k]&&(k.toLowerCase()=="styleclass"?j.setAttribute("class",a[k]):k.toLowerCase()!="classid"&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&b.nodeName=="OBJECT"&&(ua.ie&&ua.win?(b.style.display="none",function(){b.readyState==4?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=E.getElementById(a)}catch(c){}return b}function q(a){return E.createElement(a)}function r(a,b,c){a.attachEvent(b,c),K[K.length]=[a,b,c]}function s(a){var b=ua.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(ua.ie&&ua.mac)return;var e=E.getElementsByTagName("head")[0];if(!e)return;var f=c&&typeof c=="string"?c:"screen";d&&(R=null,S=null);if(!R||S!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),R=e.appendChild(g),ua.ie&&ua.win&&typeof E.styleSheets!=w&&E.styleSheets.length>0&&(R=E.styleSheets[E.styleSheets.length-1]),S=f}ua.ie&&ua.win?R&&typeof R.addRule==x&&R.addRule(a,b):R&&typeof E.createTextNode!=w&&R.appendChild(E.createTextNode(a+" {"+b+"}"))}function u(a,b){if(!T)return;var c=b?"visible":"hidden";P&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}function v(a){var b=/[\\\"<>\.;]/,c=b.exec(a)!=null;return c&&typeof encodeURIComponent!=w?encodeURIComponent(a):a}var w="undefined",x="object",y="Shockwave Flash",z="ShockwaveFlash.ShockwaveFlash",A="application/x-shockwave-flash",B="SWFObjectExprInst",C="onreadystatechange",D=window,E=document,F=navigator,G=!1,H=[d],I=[],J=[],K=[],L,M,N,O,P=!1,Q=!1,R,S,T=!0,U=!!window.localStorage;ua=function(){var a=typeof E.getElementById!=w&&typeof E.getElementsByTagName!=w&&typeof E.createElement!=w,b=F.userAgent.toLowerCase(),c=F.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof F.plugins!=w&&typeof F.plugins[y]==x)i=F.plugins[y].description,i&&(typeof F.mimeTypes==w||!F.mimeTypes[A]||!!F.mimeTypes[A].enabledPlugin)&&(G=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof D.ActiveXObject!=w)try{var j=new ActiveXObject(z);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}(),onDomLoad=function(){if(!ua.w3)return;(typeof E.readyState!=w&&E.readyState=="complete"||typeof E.readyState==w&&(E.getElementsByTagName("body")[0]||E.body))&&a(),P||(typeof E.addEventListener!=w&&E.addEventListener("DOMContentLoaded",a,!1),ua.ie&&ua.win&&(E.attachEvent(C,function(){E.readyState=="complete"&&(E.detachEvent(C,arguments.callee),a())}),D==top&&function(){if(P)return;try{E.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}()),ua.wk&&function(){if(P)return;if(!/loaded|complete/.test(E.readyState)){setTimeout(arguments.callee,0);return}a()}(),c(a))}();var V=function(){ua.ie&&ua.win&&window.attachEvent("onunload",function(){var a=K.length;for(var b=0;b<a;b++)K[b][0].detachEvent(K[b][1],K[b][2]);var c=J.length;for(var d=0;d<c;d++)n(J[d]);for(var e in ua)ua[e]=null;ua=null;for(var f in W)W[f]=null;W=null})}(),W={registerObject:function(a,b,c,d){if(ua.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,I[I.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(ua.w3)return g(a)},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};ua.w3&&(!ua.wk||ua.wk>=312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===x)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===x)for(var r in k)q[r]=k[r];if(j&&typeof j===x)for(var t in j)typeof q.flashvars!=w?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h()){b.data=g,i(b,q,c,n);return}u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return ua.w3?l(a,b,c):undefined},showExpressInstall:function(a,b,c,d){ua.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){ua.w3&&n(a)},createCSS:function(a,b,c,d){ua.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=E.location.search||E.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return v(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Q){var a=p(B);a&&L&&(a.parentNode.replaceChild(L,a),M&&(u(M,!0),ua.ie&&ua.win&&(L.style.display="block")),N&&N(O)),Q=!1}}};return window.swfobject=W,W}),define("translations/scribd",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{scribd:{upgrade_flash:"Hola, tiene una version vieja de Adobe Flash Player. Para usar iPaper (y muchas otras cosas en el internet) necesita %{link_tag} para obtener la versiÃ³n mÃ¡s nueva de Flash player %{end_link}."}}}})}),define("vendor/scribd.view",["INST","i18n!scribd"],function(a,b){if(typeof c=="undefined"){var c=new Object;c.Document=function(){this.__params=[],this.__callQueue=[],this.__listenerLookup={};if(arguments.length==2)return this.document_id=arguments[0],this.access_key=arguments[1],this;if(c.Document.caller!=c.Document.getDoc&&c.Document.caller!=c.Document.getDocFromUrl&&c.Document.caller!=c.Document.getDocFromUrlForExtension&&c.Document.caller!=undefined)throw new Error("There is no public constructor for scribd.Document.")},c.Document.getDoc=function(a,b){return scribd_doc=new c.Document,scribd_doc.document_id=a,scribd_doc.access_key=b,scribd_doc},c.Document.getDocFromUrl=function(a,b){return scribd_doc=new c.Document,scribd_doc.url=a,scribd_doc.publisher_id=b,scribd_doc},c.Document.getDocFromUrlForExtension=function(a,b){return scribd_doc=new c.Document,scribd_doc.url=a,scribd_doc.extension_id=b,scribd_doc.addParam("should_redirect",!0),scribd_doc},c.Document.prototype={__handleEvent:function(a){var b=this.__listenerLookup[a]||[];for(var c=0;c<b.length;c++)b[c]()},__addRoutedListener:function(a,b){if(this.__listenerExists(a,b))return;this.__listenerLookup[a]?this.__listenerLookup[a].push(b):this.__listenerLookup[a]=new Array(b)},__removeRoutedListener:function(a,b){var c=this.__listenerLookup[a];for(var d=0;d<c.length;d++)c[d]==b&&c.splice(d,1)},__listenerExists:function(a,b){var c=this.__listenerLookup[a]||[];for(var d=0;d<c.length;d++)if(c[d]==b)return!0;return!1},addEventListener:function(a,b,c){this.api?window.addEventListener?this.api.parentNode.addEventListener(a,b,!1):this.__addRoutedListener(a,b):this.__callQueue.push(["addEventListener",a,b,!1])},removeEventListener:function(a,b){this.api?window.addEventListener?this.api.removeEventListener(a,b,!1):this.__removeRoutedListener(a,b):this.__callQueue.push(["removeEventListener",a,b])},getElement:function(){return document.getElementsByName(this.__embedName)[0]},addParam:function(a,b){this.__params[a]=b},grantAccess:function(a,b,c){this.__params.user_identifier=a,this.__params.secure_session_id=b,this.__params.signature=c},write:function(a){var c=document.getElementById(a);quickswitch=this.__params["quickswitch"]==1;if(quickswitch){var d=document.createElement("div");d.style.width="100%",d.style.height="100%",document.body.appendChild(d)}var e=c.offsetWidth,f="",g="";this.__params.width&&this.__params["width"]!="parent"&&(e=this.__params.width),this.__params.mode&&(f=this.__params.mode,g+="&viewMode="+escape(this.__params.mode));if(this.__params["height"]!="parent"){var h=Math.round(e*11/8.5);f=="slideshow"&&(h=35+Math.round(e*3/4));var j=window.innerHeight!=null?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body!=null?document.body.clientHeight:0;j-=25,h<200&&(h=200),h>j&&(h=j);var k=h+"px"}else var k="100%";var m="100%",n=a+"_embed"+Math.round(Math.random()*9e9);this.__embedName=n;var o="ScribdViewer";this.__params["auto_size"]!=1&&(g+="&auto_size=false"),this.__params.height&&this.__params["height"]!="parent"&&(k=this.__params.height+"px"),this.__params.width&&this.__params["width"]!="parent"&&(m=this.__params.width+"px"),this.__params.swf_name&&(o=this.__params.swf_name),this.__params.disable_related_docs&&(g+="&disable_related_docs="+this.__params.disable_related_docs),this.__params.page&&(g+="&page="+this.__params.page),this.__params.extension&&(g+="&extension="+this.__params.extension),this.__params.title&&(g+="&title="+escape(this.__params.title)),this.__params.my_user_id&&(g+="&my_user_id="+this.__params.my_user_id),this.__params.api_url&&(g+="&api_url="+this.__params.api_url),this.__params.doctype&&(g+="&doctype="+this.__params.doctype),this.__params.current_user_id&&(g+="&current_user_id="+this.__params.current_user_id),this.__params.search_query&&(g+="&search_query="+escape(this.__params.search_query)),this.__params.search_keywords&&(g+="&search_keywords="+escape(this.__params.search_keywords)),this.__params["transferCookie"]==1&&(g+="&cookie="+escape(document.cookie)),this.__params.should_redirect&&(g+="&should_redirect="+this.__params.should_redirect),this.__params.secret_password&&(g+="&secret_password="+this.__params.secret_password),this.__params["public"]==1?g+="&privacy=0":g+="&privacy=1",this.__params.user_identifier&&(g+="&user_identifier="+escape(this.__params.user_identifier)),this.__params.secure_session_id&&(g+="&secure_session_id="+escape(this.__params.secure_session_id)),this.__params.signature&&(g+="&signature="+this.__params.signature),this.__params.docinfo&&(g+="&docinfo="+encodeURIComponent(this.__params.docinfo)),this.__params.useIntegratedUi&&(g+="&useIntegratedUi="+this.__params.useIntegratedUi),this.document_id&&(g+="&document_id="+this.document_id),this.access_key&&(g+="&access_key="+this.access_key),this.extension_id&&(g+="&extension_id="+this.extension_id),this.url&&(g+="&url="+escape(this.url)),this.publisher_id&&(g+="&publisher_id="+escape(this.publisher_id));var p="http://d1.scribdassets.com/",q="http://";this.__params["use_ssl"]==1&&(p="https://s3.amazonaws.com/documents.scribd.com/",g+="&use_ssl=true",q="https://"),this.__params.src_path&&(p=this.__params.src_path),this.__params.hide_sample_banner&&(g+="&hide_sample_banner="+this.__params.hide_sample_banner),this.__params["disable_resume_reading"]==1&&(g+="&disable_resume_reading=true"),this.__params["hide_full_screen_button"]==1&&(g+="&hide_full_screen_button=true"),this.__params["hide_disabled_buttons"]==1&&(g+="&hide_disabled_buttons=true"),this.__params.full_screen_type&&(g+="&full_screen_type="+this.__params.full_screen_type),this.__params.custom_logo_image_url&&(g+="&custom_logo_image_url="+escape(this.__params.custom_logo_image_url)),this.__params.custom_logo_click_url&&(g+="&custom_logo_click_url="+escape(this.__params.custom_logo_click_url));var r=l("codebase",q+"download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0","width",m,"height",k,"flashvars",g,"src",p+o,"quality","high","pluginspage",q+"www.macromedia.com/go/getflashplayer","align","middle","play","true","loop","true","scale","showall","wmode","opaque","devicefont","false","id",n,"bgcolor","#ffffff","name",n,"menu","true","allowFullScreen","true","allowScriptAccess","always","movie",p+o,"salign",""),s=i(9,0,0);s||(r='<span style="display:block;font-size:16px;width:300px;border:1px solid #dddddd;padding:3px">'+b.t("upgrade_flash","Hello, you have an old version of Adobe Flash Player. To use iPaper (and lots of other stuff on the web) you need to %{link_tag}get the latest Flash player%{end_link}.",{link_tag:'<a href="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash">',end_link:"</a>"})+"  </span>");if(quickswitch){d.innerHTML=r;if(c.hasChildNodes())while(c.childNodes.length>=1)c.removeChild(c.firstChild);c.appendChild(d)}else c.innerHTML=r;var t=this;window["_scribd_event_handler_"+n]=function(a){t.__handleEvent(a)};var u=function(a){var a=a||{},b=a.srcElement||document.getElementsByName(n)[0];if(b.getAttribute("name")==n){t.api=b;var c,d,e,f=[];for(var c=0;c<t.__callQueue.length;c++)e=t.__callQueue[c],e[0]=="addEventListener"?(d=e.shift(),t[d].apply(t,e)):f.push(e);t.__callQueue=f}},v=function(a){var a=a||{},b=a.srcElement||document.getElementsByName(n)[0];if(b.getAttribute("name")==n){t.onReady&&t.onReady();var c,d,e,f=[];for(c=0;c<t.__callQueue.length;c++)e=t.__callQueue.pop(),e[0]!="addEventListener"?(d=e.shift(),typeof d!="function"&&alert(typeof d),t[d].apply(t,e)):f.push(e);t.__callQueue=f}};window.addEventListener?(window.addEventListener("iPaperReady",v,!0),window.addEventListener("setupJsApi",u,!0)):(this.__addRoutedListener("iPaperReady",v),this.__addRoutedListener("setupJsApi",u))}};var d=navigator.appVersion.indexOf("MSIE")!=-1?!0:!1,e=navigator.appVersion.toLowerCase().indexOf("win")!=-1?!0:!1,f=navigator.userAgent.indexOf("Opera")!=-1?!0:!1;function g(){var a,b,c;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),a=b.GetVariable("$version")}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),a="WIN 6,0,21,0",b.AllowScriptAccess="always",a=b.GetVariable("$version")}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),a=b.GetVariable("$version")}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),a="WIN 3,0,18,0"}catch(c){}if(!a)try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),a="WIN 2,0,0,11"}catch(c){a=-1}return a}function h(){var a=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var b=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",c=navigator.plugins["Shockwave Flash"+b].description,h=c.split(" "),i=h[2].split("."),j=i[0],k=i[1],l=h[3];l==""&&(l=h[4]),l[0]=="d"?l=l.substring(1):l[0]=="r"&&(l=l.substring(1),l.indexOf("d")>0&&(l=l.substring(0,l.indexOf("d"))));var a=j+"."+k+"."+l}}else navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1?a=4:navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1?a=3:navigator.userAgent.toLowerCase().indexOf("webtv")!=-1?a=2:d&&e&&!f&&(a=g());return a}function i(a,b,c){versionStr=h();if(versionStr==-1)return!1;if(versionStr!=0){d&&e&&!f?(tempArray=versionStr.split(" "),tempString=tempArray[1],versionArray=tempString.split(",")):versionArray=versionStr.split(".");var g=versionArray[0],i=versionArray[1],j=versionArray[2];if(g>parseFloat(a))return!0;if(g==parseFloat(a)){if(i>parseFloat(b))return!0;if(i==parseFloat(b)&&j>=parseFloat(c))return!0}return!1}}function j(a,b){return a.indexOf("?")!=-1?a.replace(/\?/,b+"?"):a+b}function k(a,b,c){var g="";if(d&&e&&!f){g+="<object ";for(var h in a)g+=h+'="'+a[h]+'" ';g+=">";for(var h in b)g+='<param name="'+h+'" value="'+b[h]+'" /> ';g+="</object>"}else{g+="<embed ";for(var h in c)g+=h+'="'+c[h]+'" ';g+="> </embed>"}return g}function l(){var a=n(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");return k(a.objAttrs,a.params,a.embedAttrs)}function m(){var a=n(arguments,".dcr","src","clsid:166B1BCA-3F9C-11CF-8075-444553540000",null);return k(a.objAttrs,a.params,a.embedAttrs)}function n(a,b,c,d,e){var f=new Object;f.embedAttrs=new Object,f.params=new Object,f.objAttrs=new Object;for(var g=0;g<a.length;g+=2){var h=a[g].toLowerCase();switch(h){case"classid":break;case"pluginspage":f.embedAttrs[a[g]]=a[g+1];break;case"src":case"movie":a[g+1]=j(a[g+1],b),f.embedAttrs.src=a[g+1],f.params[c]=a[g+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblclick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":f.objAttrs[a[g]]=a[g+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":f.embedAttrs[a[g]]=f.objAttrs[a[g]]=a[g+1];break;default:f.embedAttrs[a[g]]=f.params[a[g]]=a[g+1]}}return f.objAttrs.classid=d,e&&(f.embedAttrs.type=e),f}typeof scribd_view_callback!="undefined"&&scribd_view_callback()}return c}),define("ENV",[],function(){return ENV}),define("translations/wiki.sidebar",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{wiki:{sidebar:{buttons:{uploading:"Cargando..."},errors:{no_valid_files_selected:"No se seleccionaron archivos vÃ¡lidos",no_valid_image_files_selected:"No se seleccionaron imagenes vÃ¡lidas",unexpected_upload_problem:"Problema inesperado en la carga de %{filename}. Intente de nuevo.",upload_failed:"La carga fallÃ³, intente de nuevo"},loading_more_results:"Cargando mÃ¡s resultados",titles:{select_folder_for_uploads:"Seleccione una carpeta para cargas de archivos"}}}}}})}),define("jqueryui/droppable",["jquery","jqueryui/core","jqueryui/widget","jqueryui/mouse","jqueryui/draggable","jqueryui/draggable"],function(a,b,c,d,e,f){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];for(var c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){b=="accept"&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return;this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"@VERSION"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();g:for(var h=0;h<d.length;h++){if(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))continue;for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible=d[h].element.css("display")!="none";if(!d[h].visible)continue;e=="mousedown"&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight}}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=d||this._drop.call(this,c)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var d=a.ui.intersect(b,this,this.options.tolerance),e=!d&&this.isover==1?"isout":d&&this.isover==0?"isover":null;if(!e)return;var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild=e=="isover"?1:0)}f&&e=="isover"&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this[e=="isout"?"isover":"isout"]=0,this[e=="isover"?"_over":"_out"].call(this,c),f&&e=="isout"&&(f.isout=0,f.isover=1,f._over.call(f,c))})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}),define("jquery.inst_tree",["jquery","jqueryui/draggable","jqueryui/droppable"],function(a){a.fn.instTree=function(b){return a(this).each(function(){var c=!1,d=a(this),e=this,f=null;e.options={autoclose:!0,overrideEvents:!1,multi:!0,dragdrop:!0,onClick:!1,onDblClick:!1,onExpand:!1,onCollapse:!1,onAddNode:!1,onEditNode:!1,onDeleteNode:!1,onDrag:!1,onDrop:!1},e.opts=a.extend({},e.options,b),a.fn.instTree.InitInstTree=function(b){d=a(b);var f='<li class="separator"></li>';d.find("li:not(.separator)").filter(function(){return!a(this).prev("li.separator").get(0)&&!a(this).parents("ul.non-instTree").get(0)}).each(function(){a(this).before(f)}),d.find("li > span").not(".sign").not(".clr").addClass("text").attr("unselectable","on"),d.find("li:not(.separator)").filter(function(){return!a(this).parents("ul.non-instTree").get(0)}).filter(":has(ul)").addClass("node").end().filter(":not(.node)").addClass("leaf"),e.IeSetStyles(),e.Clean(),e.AddSigns(),c||e.BindEvents(b),e.opts.dragdrop&&(e.CancelDragDrop(b),e.InitDragDrop(b))},e.InitDragDrop=function(b){d=a(b),d.find("span.text").draggable({cursor:a.browser.msie?"default":"move",distance:3,helper:function(){return a('<div id="instTree-drag"><span>'+a(this).text()+"</span></div>")},appendTo:d}),d.find("li.separator").droppable({accept:"span.text",hoverClass:"dd-hover"}),d.find("span.text").bind("dragstart",function(b,c){d=a(this).parents("ul.instTree:first");var f=a(this).parent("li"),g=a("div#instTree-drag");a.browser.msie&&d.find("li.separator").removeClass("dd-hover"),a.browser.opera&&g.css("margin-top","10px"),f.is(".leaf")?(g.addClass("leaf"),a.browser.msie&&g.css("background","#C3E1FF url("+e.opts.imgFolder+"leaf-drag.gif) left 3px no-repeat")):f.is(".node")&&g.addClass("node"),f.prev("li.separator").addClass("alt").end().addClass("alt"),typeof e.opts.onDrag=="function"&&e.opts.onDrag(b,f)}),d.find("li.separator").bind("dropover",function(b,c){f=a(this)}),d.find("li.separator").bind("dropout",function(a,b){f=null}),d.find("span.text").bind("dragstop",function(c,g){var h=!0;if(f){var i=d.find("li.alt:not(.separator):eq(0)"),j=f.parents("li.node:eq(0)");i.is(".node")&&j.is(".fixedLevel")&&(h=!1)}f&&h?(f.before(d.find("li.alt").remove().removeClass("alt")),f=null,typeof e.opts.onDrop=="function"&&e.opts.onDrop(c,i),a.fn.instTree.InitInstTree(b)):d.find("li.alt").removeClass("alt")})},e.CancelDragDrop=function(b){d=a(b),d.find("span.text").draggable("destroy"),d.find("li.separator").droppable("destroy"),d.find("li.separator").unbind(),d.find("span.text").unbind()},a.fn.instTree.AddNode=function(b,c){d=a(b);var f=d.find("span.active").get(0);if(f){var g=a(f).parents("li:first"),h=a(f).parents("li.node:first");if(!h.is(".fixedLevel")||c!="node"){var i=c=="leaf"?"":' class="node"',j='<li class="separator"></li>',k="<li"+i+'><span class="text">&nbsp;</span><input type="text" value="New item" /></li>',l=j+k,m=!1,n,o,p;g.is(".leaf")?(g.after(l),n=g.nextAll("li:not(.separator):first"),p=g.parent(),m=!0):g.is(".node")&&(o=g.children("ul").get(0),o?(a(o).append(l),n=a(o).children("li:not(.separator):last")):(g.append("<ul>"+l+"</ul>"),o=g.children("ul").get(0),n=a(o).children("li:not(.separator):last")),e.ExpandNode(b,g),p=g,m=!0),m&&(a(f).removeClass("active"),p.find("input:text").focus().select().blur(function(){e.SaveInput(b,a(this))})),a.fn.instTree.InitInstTree(b),typeof e.opts.onAddNode=="function"&&e.opts.onAddNode(n)}}},a.fn.instTree.EditNode=function(b){d=a(b);var c=d.find("span.active").get(0);if(c){var f=a(c).parents("li:first");a(c).replaceWith('<span class="text">&nbsp;</span><input type="text" value="'+a(c).text()+'" />'),f.find("input:text").focus().select().blur(function(){e.SaveInput(b,a(this))}),typeof e.opts.onEditNode=="function"&&e.opts.onEditNode(f)}},a.fn.instTree.DeleteNode=function(b){d=a(b);var c=d.find("span.active").get(0);if(c){var f=a(c).parents("li:first"),g=f.parents("li.node:first");f.prev("li.separator").remove().end().remove(),a.fn.instTree.InitInstTree(b),typeof e.opts.onDeleteNode=="function"&&e.opts.onDeleteNode(f,g)}},e.SaveInput=function(b,c){c.prev("span.text").remove();var d=a.trim(c.get(0).value)!==""?c.get(0).value:"_____";c.replaceWith('<span class="active text">'+d+"</span>"),a.fn.instTree.InitInstTree(b)},e.IeSetStyles=function(){a.browser.msie&&(d.find("li.node:not(.open) > ul").hide(),d.find("li.node.open > ul").css("margin-bottom","1px"))},e.Clean=function(){d.find("li:not(.separator)").each(function(){a(this).removeClass("last"),(!a(this).next("li").length||a(this).find("ul").length)&&a(this).addClass("last")})},e.AddSigns=function(){d.find("li.node").each(function(){a(this).hasClass("open")?a(this).find("span.sign").remove().end().append('<span class="sign minus"></span>'):a(this).find("span.sign").remove().end().append('<span class="sign plus"></span>')})},e.BindEvents=function(b){d.click(function(c){var d=a(this).closest(".instTree"),f=a(c.target),g;f.is("span.sign")?(g=f.parents("li:eq(0)"),e.ToggleNode(b,g)):f.is("span.text")&&(g=f.closest("li"),typeof e.opts.onClick=="function"?(e.opts.overrideEvents||((!e.opts.multi||!c.ctrlKey)&&d.find(".active").removeClass("active").end().find(".active-leaf").removeClass("active-leaf").end().find(".active-node").removeClass("active-node"),f.addClass("active"),g.hasClass("leaf")?g.addClass("active-leaf"):g.addClass("active-node")),e.opts.onClick.call(g,c,g)):((!e.opts.multi||!c.ctrlKey)&&d.find(".active").removeClass("active").end().find(".active-leaf").removeClass("active-leaf").end().find(".active-node").removeClass("active-node"),f.addClass("active"),g.hasClass("leaf")?g.addClass("active-leaf"):g.addClass("active-node")))}),d.dblclick(function(c){var d=a(c.target);if(d.is("span.text")){var f=d.parents("li:eq(0)");typeof e.opts.onDblClick=="function"?(!e.opts.overrideEvents&&f.is(".node")&&e.ToggleNode(b,f),e.opts.onDblClick.call(f,c,f)):f.is(".node")&&e.ToggleNode(b,f)}}),c=!0},e.ToggleNode=function(a,b){b.hasClass("open")?e.CollapseNode(b):e.ExpandNode(a,b),e.Clean()},e.ExpandNode=function(b,c){c.addClass("open"),e.opts.autoclose&&c.siblings(".open").each(function(){e.CollapseNode(a(this))}),a.browser.msie&&(c.children("ul").show().css({"margin-bottom":"1px",visibility:"visible"}),c.children("ul").find("li.node:not(.open) > ul").each(function(){a(this).css("visibility","hidden")}));var d=c.find("span.sign:last");d.removeClass("plus").addClass("minus"),e.opts.multi&&a.fn.instTree.InitInstTree(b),typeof e.opts.onExpand=="function"&&e.opts.onExpand(c)},e.CollapseNode=function(b){b.removeClass("open"),a.browser.msie&&b.children("ul").hide();var c=b.find("span.sign:last");c.removeClass("minus").addClass("plus"),typeof e.opts.onCollapse=="function"&&e.opts.onCollapse(b)},a(this).is("ul")&&(d=a(this),d.addClass("instTree"),a.fn.instTree.InitInstTree(e))})}}),define("instructure_helper",["INST","i18n!instructure","jquery","jqueryui/dialog"],function(a,b,c){function d(a){a=(a||"").split(":")[0];var b=a.split("."),c=b.length;return(c>1?[b[c-2],b[c-1]]:b).join("")}var e=d(window.location.hostname);c.expr[":"].external=function(a){var b=c(a).attr("href");return!!(b&&b.length&&!b.match(/^(mailto\:|javascript\:)/)&&a.hostname&&d(a.hostname)!=e)},window.equella={ready:function(a){c(document).triggerHandler("equella_ready",a)},cancel:function(){c(document).triggerHandler("equella_cancel")}},c(document).bind("equella_ready",function(a,b){c("#equella_dialog").triggerHandler("equella_ready",b)}).bind("equella_cancel",function(){c("#equella_dialog").dialog("close")}),window.external_tool={ready:function(a){c("#external_tool_button_dialog:visible").triggerHandler("selection",a),c("#resource_selection_dialog:visible").triggerHandler("selection",a)},cancel:function(){c("#external_tool_button_dialog").dialog("close"),c("#resource_selection_dialog").dialog("close")}},window.jsonFlickrApi=function(a){c("#instructure_image_search").triggerHandler("search_results",a)}}),define("jquery.dropdownList",["jquery"],function(a){a.fn.dropdownList=function(b){if(this.length){var c=a("#instructure_dropdown_list");if(b=="hide"||b=="remove"||c.data("current_dropdown_initiator")==this[0]){c.remove().data("current_dropdown_initiator",null);return}var b=a.extend({},a.fn.dropdownList.defaults,b),d=c.children("div.list");d.length||(c=a("<div id='instructure_dropdown_list'><div class='list ui-widget-content'></div></div>").appendTo("body"),a(document).mousedown(function(b){c.data("current_dropdown_initiator")&&!a(b.target).closest("#instructure_dropdown_list").length&&c.hide().data("current_dropdown_initiator",null)}).mouseup(function(b){c.data("current_dropdown_initiator")&&!a(b.target).closest("#instructure_dropdown_list").length&&(c.hide(),setTimeout(function(){c.data("current_dropdown_initiator",null)},100))}).add(this).add(c).keydown(function(a){if(c.data("current_dropdown_initiator")){var b=c.find(".ui-state-hover,.ui-state-active");if(a.keyCode==38)return b.length&&b.prev().length?b.removeClass("ui-state-hover ui-state-active").addClass("minimal").prev().addClass("ui-state-hover").removeClass("minimal").find("span").focus():$item.focus(),!1;if(a.keyCode==40)return b.length?b.next().length&&b.removeClass("ui-state-hover ui-state-active").addClass("minimal").next().addClass("ui-state-hover").removeClass("minimal").find("span").focus():c.find(".option:first").addClass("ui-state-hover").removeClass("minimal").find("span").focus(),!1;if(a.keyCode==13&&b.length)return b.click(),!1;c.hide().data("current_dropdown_initiator",null)}}),c.find(".option").removeClass("ui-state-hover ui-state-active").addClass("minimal"),c.click(function(a){c.hide().data("current_dropdown_initiator",null)}),d=c.children("div.list")),c.data("current_dropdown_initiator",this[0]),b.width&&c.width(b.width),b.height&&c.find(".list").css("maxHeight",b.height),d.empty(),a.each(b.options,function(b,c){var e=a("<div class='option minimal' style='cursor: pointer; padding: 2px 5px; overflow: hidden; white-space: nowrap;'>  <span tabindex='-1'>"+b+"</span>"+"</div>").appendTo(d);if(a.isFunction(c)){function f(){e.parent().find("div.option").removeClass("ui-state-hover ui-state-active").addClass("minimal")}e.addClass("ui-state-default").bind({mouseenter:function(){f(),e.addClass("ui-state-hover").removeClass("minimal")},mouseleave:f,mousedown:function(a){a.preventDefault(),f(),e.addClass("ui-state-active").removeClass("minimal")},mouseup:f,click:c})}else e.addClass("ui-state-disabled").bind({mousedown:function(a){a.preventDefault()}})});var e=this.offset(),f=this.outerHeight(),g=this.outerWidth();c.css({whiteSpace:"nowrap",position:"absolute",top:e.top+f,left:e.left+5,right:""}).hide().show(),c.offset().left+c.width()>a(window).width()&&c.css({left:"",right:0})}return this},a.fn.dropdownList.defaults={height:250,width:"auto"}}),define("jquery.loadingImg",["jquery"],function(a){a.fn.loadingImg=function(b){if(!this||this.length===0)return this;var c=this.filter(":first"),d;if(b=="hide"||b=="remove"){c.children(".loading_image").remove(),d=c.data("loading_images")||[];for(var e in d)d[e]&&d[e].remove();return c.data("loading_images",null),this}if(b=="remove_once"){c.children(".loading_image").remove(),d=c.data("loading_images")||[];var f=d.pop();return f&&f.remove(),c.data("loading_images",d),this}b=="register_image"&&arguments.length==3&&(a.fn.loadingImg.image_files[arguments[1]]=arguments[2]),b=a.extend({},a.fn.loadingImg.defaults,b);var g=a.fn.loadingImg.image_files.normal;b.image_size&&a.fn.loadingImg.image_files[b.image_size]&&(g=a.fn.loadingImg.image_files[b.image_size]),b.paddingTop&&(b.vertical=b.paddingTop);var h=0;b.vertical&&b.vertical!="top"&&(b.vertical=="bottom"?h=c.outerHeight():b.vertical=="middle"?h=c.outerHeight()/2-g.height/2:(h=parseInt(b.vertical,10),isNaN(h)&&(h=0)));var i=0;b.horizontal&&b.horizontal!="left"&&(b.horizontal=="right"?i=c.outerWidth()-g.width:b.horizontal=="middle"?i=c.outerWidth()/2-g.width/2:(i=parseInt(b.horizontal,10),isNaN(i)&&(i=0)));var j=c.zIndex()+1,k=a(document.createElement("div")).addClass("loading_image_holder"),l=a(document.createElement("img")).attr("src",g.url);k.append(l),d=c.data("loading_images")||[],d.push(k),c.data("loading_images",d);if(!c.css("position")||c.css("position")=="static"){var m=c.offset(),n=m.top,o=m.left;b.vertical&&(n+=h),b.horizontal&&(o+=i),k.css({zIndex:j,position:"absolute",top:n,left:o}),a("body").append(k)}else k.css({zIndex:j,position:"absolute",top:h,left:i}),c.append(k);return a(this)},a.fn.loadingImg.defaults={paddingTop:0,image_size:"normal",vertical:0,horizontal:0},a.fn.loadingImg.image_files={normal:{url:"/images/ajax-loader.gif",width:32,height:32},small:{url:"/images/ajax-loader-small.gif",width:16,height:16}},a.fn.loadingImage=a.fn.loadingImg}),function(){define("compiled/jquery/fixDialogButtons",["jquery","jqueryui/dialog"],function(a){return a.fn.fixDialogButtons=function(){return this.each(function(){var b,c,d;c=a(this),b=c.find(".button-container:last .button, button[type=submit]");if(b.length)return c.find(".button-container:last, button[type=submit]").hide(),d=a.map(b.toArray(),function(b){var d;return d=a(b),d.is(".dialog_closer")&&d.click(function(){return c.dialog("close")}),{text:d.text(),"data-text-while-loading":d.data("textWhileLoading"),click:function(){return d.click()}}}),c.dialog("option","buttons",d)})}})}.call(this),define("jqueryui/accordion",["jquery","jqueryui/core","jqueryui/widget"],function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey)return;var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(d.disabled)return;if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?!1:this.headers.index(h);if(this.running||!d.collapsible&&i)return;var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"));return},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(!g)return;return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data),g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};h.collapsible&&e?j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),a.extend(a.ui.accordion,{version:"@VERSION",animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i,j=b.toShow;i=j[0].style.width,j.width(parseInt(j.parent().width(),10)-parseInt(j.css("paddingLeft"),10)-parseInt(j.css("paddingRight"),10)-(parseInt(j.css("borderLeftWidth"),10)||0)-(parseInt(j.css("borderRightWidth"),10)||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){c.prop=="height"&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}),define("translations/ajax_errors",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{ajax_errors:{error_heading:"Error Ajax: %{status_code}",errors:{connection_lost:"La conexiÃ³n a %{host} se perdiÃ³. Por favor asegÃºrese que estÃ¡ conectado al internet e intente de nuevo.",timeout:"OcurriÃ³ un problema con su solicitud, posiblemente por un largo perÃ­odo de inactividad. Por favor recargue la pÃ¡gina e intente de nuevo.",unhandled:"Â¡Oops! La Ãºltima solicitud no funcionÃ³."},links:{details:"detalles..."},no_text:"Sin texto"}}}})}),define("translations/license_help",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{license_help:{content_license_help:"Ayuda del Contenido para ConcesiÃ³n de Licencias"}}}})}),function(){define("compiled/behaviors/ujsLinks",["jquery"],function(a){var b,c,d;return c=function(b){var c,d,e,f,g;return b.data("handled",!0),d=b.attr("href"),f=b.data("method"),g=b.attr("target"),c=a("<form method='post' action='"+d+"'></form>"),e="<input name='_method' value='"+f+"' type='hidden' />",ENV.AUTHENTICITY_TOKEN&&(e+="<input name='authenticity_token' value='"+ENV.AUTHENTICITY_TOKEN+"' type='hidden' />"),g&&c.attr("target",g),c.hide().append(e).appendTo("body").submit()},b=function(a){var b;return b=a.data("confirm"),b?confirm(b):!0},a(document).delegate("a[data-confirm], a[data-method], a[data-remove]","click",function(e){var f;f=a(this);if(f.data("handled")||!b(f))return!1;if(f.data("remove"))return d(f),!1;if(f.data("method"))return c(f),!1}),d=function(b){var c,d,e,f,g,h;return f=b.data("remove"),d=b,h=b.data("url"),e=b.closest(":ui-popup").popup("option","trigger").data("KyleMenu"),e&&e.opts.appendMenuTo&&(d=e.$placeholder),c=d.closest(f),c.bind({beforeremove:a.proxy(c,"hide"),remove:a.proxy(c,"remove")}),c.trigger("beforeremove"),g=function(){return c.trigger("remove")},h?a.ajaxJSON(h,"DELETE",g,a.proxy(c,"show")):g()}})}.call(this),function(){define("compiled/behaviors/elementToggler",["jquery","compiled/fn/preventDefault","compiled/jquery/fixDialogButtons"],function(a,b){var c,d;return d=function(b){return function(){var c,d,e,f;c=a(this);if(!(d=c.data("htmlWhileTarget"+b)))return;return e="htmlWhileTarget"+(b==="Hidden"?"Shown":"Hidden"),f=c.data(e),f||c.data(e,c.html()),c.html(d)}},c=function(b,e){var f,g;e==null&&(e=b.is(":ui-dialog:hidden")||b.attr("aria-expanded")!=="true"),f=a(".element_toggler[aria-controls="+b.attr("id")+"]"),f.filter(function(){return a(this).data("hideWhileTargetShown")}).toggle(!e),b.attr("aria-expanded",""+e).toggle(e);if(b.is(":ui-dialog")||(g=b.data("turnIntoDialog")))g&&e&&(g=a.extend({autoOpen:!1,close:function(){return c(b,!1)}},g),b.dialog(g).fixDialogButtons()),e?b.dialog("open"):b.dialog("isOpen")&&b.dialog("close");return e&&b.is(":focusable")&&b.focus(),f.each(d(e?"Shown":"Hidden"))},a(document).delegate(".element_toggler[aria-controls]:not(.user_content *)","click",b(function(){var b;b=a("#"+a(this).attr("aria-controls"));if(b.length)return c(b)}))})}.call(this),define("translations/media_comments",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{media_comments:{buttons:{submit:"Enviar Archivo de Media"},errors:{file_too_large:"*Este archivo es muy grande.* El tamaÃ±o mÃ¡ximo es de %{size}MB.",load_failed:"La carga de medios de aplicaciÃ³n de comentario parecen haber fallado. Intente de nuevo.",must_be_logged_in:"Debe estar conectado para grabar media.",persistent_problem:"Si este problema sigue ocurriendo, puede tratar de grabar su media localmente y luego cargar el archivo guardado.",save_failed:"El guardado parece haber fallado. Por favor cierre esta ventana emergente e intente de nuevo.",save_failed_try_again:"El guardado de la entrada fallÃ³. Intente de nuevo.",upload_failed:"La carga fallÃ³ con un error:"},links:{upgrade_flash:"Haga click aquÃ­ para actualizar"},messages:{file_failed_to_load:"La carga de este archivo de media fallÃ³",flash_required:"Este video requiere Flash version 9 o mayor (usted tiene %{version} instalada).",flash_required_record_audio:"Se requiere Flash para grabar audio.",flash_required_upload_audio:"Se requiere Flash para cargar audio.",flash_required_upload_video:"Se requiere Flash para cargar video.",loading:"Cargando...",submitted:"Â¡Se enviÃ³ un archivo de media!",submitting:"Enviando un Archivo de Media..."},titles:{click_to_view:"Haga click para ver",media_contribution:"ContribuciÃ³n de Media",play_comment:"Reproduzca Comentarios de Media",record_upload_media_comment:"Grabar/cargar comentario de media"}}}}})}),function(){function a(a){var b=a.currentTarget||a.srcElement,c,d,e;if(a.type==="load"||f.test(b.readyState)){d=b.getAttribute("data-requiremodule"),h[d]=!0;for(c=0;e=g[c];c++)if(h[e.name])e.req([e.name],e.onLoad);else break;c>0&&g.splice(0,c),setTimeout(function(){b.parentNode.removeChild(b)},15)}}function b(a){var b,c,d;a.setAttribute("data-orderloaded","loaded");for(b=0;d=j[b];b++){c=i[d];if(c&&c.getAttribute("data-orderloaded")==="loaded")delete i[d],require.addScriptToDom(c);else break}b>0&&j.splice(0,b)}var c=typeof document!="undefined"&&typeof window!="undefined"&&document.createElement("script"),d=c&&(c.async||window.opera&&Object.prototype.toString.call(window.opera)==="[object Opera]"||"MozAppearance"in document.documentElement.style),e=c&&c.readyState==="uninitialized",f=/^(complete|loaded)$/,g=[],h={},i={},j=[];c=null,define("order",{version:"1.0.0",load:function(c,f,h,k){var l=f.nameToUrl(c,null),m,n;require.s.skipAsync[l]=!0,d||k.isBuild?f([c],h):e?(n=require.s.contexts._,!n.urlFetched[l]&&!n.loaded[c]&&(n.urlFetched[l]=!0,require.resourcesReady(!1),n.scriptCount+=1,m=require.attach(l,n,c,null,null,b),i[c]=m,j.push(c)),f([c],h)):f.specified(c)?f([c],h):(g.push({name:c,req:f,onLoad:h}),require.attach(l,null,c,a,"script/cache"))}})}(),define("jqueryui/effects/core",["jquery"],function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function f(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function h(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}if(a.effects)return;a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i=a(this),j=i.attr("style")||" ",l=f(e.call(this)),m,n=i.attr("class");a.each(k,function(a,c){b[c]&&i[c+"Class"](b[c])}),m=f(e.call(this)),i.attr("class",n),i.animate(g(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&i[c+"Class"](b[c])}),typeof i.attr("style")=="object"?(i.attr("style").cssText="",i.attr("style").cssText=j):i.attr("style",j),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"@VERSION",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){unit=b.cssUnit(c),unit[0]>0&&(e[c]=unit[0]*d+unit[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=h.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},i=g.options.mode,j=a.effects[b];return a.fx.off||!j?i?this[i](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):j.call(this,g)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}}),a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),(c/=f/2)<1?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return c<f/2?a.easing.easeInBounce(b,c*2,0,e,f)*.5+d:a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}),define("jqueryui/effects/drop",["jquery","jqueryui/effects/core"],function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight({margin:!0})/2:c.outerWidth({margin:!0})/2);e=="show"&&c.css("opacity",0).css(g,h=="pos"?-i:i);var j={opacity:e=="show"?1:0};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}),define("jquery.rails_flash_notifications",["jquery","jqueryui/effects/drop"],function(a){var b=!1;a._flashBox=function(c,d,e){b||(b=!0,a("#flash_message_holder .close-link").live("click",function(a){a.preventDefault()})),a("#flash_"+c+"_message").stop(!0,!0).empty().append("<a href='' class='close-link'>#</a>").append(d).hide().css("opacity",1).show("drop",{direction:"up"}).slideDown("normal").delay(e||7e3).hide("drop",{direction:"up"},2e3,function(){a(this).empty().hide()})},a.flashMessage=function(b,c){a._flashBox("notice",b,c)},a.flashError=function(b,c){a._flashBox("error",b,c)}}),define("jqueryui/progressbar",["jquery","jqueryui/core","jqueryui/widget"],function(a,b,c,d){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===d?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"@VERSION"})}),define("jqueryui/tabs",["jquery","jqueryui/core","jqueryui/widget"],function(a,b){function c(){return++e}function d(){return++f}var e=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+d());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var e=this,f=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var d=a(c).attr("href"),h=d.split("#")[0],i;h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(d=c.hash,c.href=d);if(g.test(d))e.panels=e.panels.add(e.element.find(e._sanitizeSelector(d)));else if(d&&d!=="#"){a.data(c,"href.tabs",d),a.data(c,"load.tabs",d.replace(/#.*$/,""));var j=e._tabId(c);c.href="#"+j;var k=e.element.find("#"+j);k.length||(k=a(f.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),k.data("destroy.tabs",!0)),e.panels=e.panels.add(k)}else f.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),f.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return f.selected=a,!1}),typeof f.selected!="number"&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),typeof f.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||(this.lis.length?0:-1)):f.selected===null&&(f.selected=-1),f.selected=f.selected>=0&&this.anchors[f.selected]||f.selected<0?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return e.lis.index(a)}))).sort(),a.inArray(f.selected,f.disabled)!=-1&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),f.selected>=0&&this.anchors.length&&(e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash))[0]))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs"),e.lis=e.anchors=e.panels=null})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),f.cookie&&this._cookie(f.selected,f.cookie);for(var h=0,i;i=this.lis[h];h++)a(i)[a.inArray(h,f.disabled)!=-1&&!a(i).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");f.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(f.event!=="mouseover"){var j=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},k=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){j("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){k("hover",a(this))}),this.anchors.bind("focus.tabs",function(){j("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var l,m;f.fx&&(a.isArray(f.fx)?(l=f.fx[0],m=f.fx[1]):l=m=f.fx);var n=m?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(m,m.duration||"normal",function(){d(c,m),e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),e._trigger("show",null,e._ui(b,c[0]))},o=l?function(a,b){b.animate(l,l.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d(b,l),e.element.dequeue("tabs")})}:function(a,b,c){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(b).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=e.element.find(e._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||e.panels.filter(":animated").length||e._trigger("select",null,e._ui(this,g[0]))===!1)return this.blur(),!1;f.selected=e.anchors.index(this),e.abort();if(f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){o(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),this.blur(),!1}f.cookie&&e._cookie(f.selected,f.cookie);if(g.length)d.length&&e.element.queue("tabs",function(){o(b,d)}),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$="+a+"]"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e<this.lis.length?(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])):(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)),g.disabled=a.map(g.disabled,function(a,b){return a<e?a:++a}),this._tabify(),this.anchors.length==1&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a<b?a:--a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)==-1)return;return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;else return this;return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"@VERSION"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){t=d.selected,e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}),define("jquery.fancyplaceholder",["jquery"],function(a){a.fn.fancyPlaceholder=function(){function b(){a.each(d,function(a,b){b[1][b[0].val()?"hide":"show"]()})}var c,d=[];return this.each(function(){var e=a(this),f=a("label[for="+e.attr("id")+"]");f.addClass("placeholder").wrapInner("<span/>").css({"font-family":e.css("font-family"),"font-size":e.css("font-size")}),e.focus(function(){f.addClass("focus",300)}).blur(function(){f.removeClass("focus",300)}).bind("keyup",b);try{a("input:focus").get(0)==this&&e.triggerHandler("focus")}catch(g){}d.push([e,f]),c||window.setInterval(b,100)})}}),define("jqueryui/autocomplete",["jquery","jqueryui/core","jqueryui/widget","jqueryui/position"],function(a,b,c,d,e){var f=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._move("previous",c),c.preventDefault();break;case e.DOWN:b._move("next",c),c.preventDefault();break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.response=function(){return b._response.apply(b,arguments)},this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",autocompleteRequest:++f,success:function(a,b){this.autocompleteRequest===f&&e(a)},error:function(){this.autocompleteRequest===f&&e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this.response)},_response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(b,result)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}),define("translations/link_enrollment",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{link_enrollment:{buttons:{link:"Enlazar a Estudiante"},errors:{link_failed:"No se pudieron hacer los enlaces, intente de nuevo",load_failed:"No se pudieron cargar los Estudiantes, intente de nuevo"},messages:{linking_to_student:"Enlazando a Estudiante...",loading_students:"Cargando Estudiantes..."},options:{no_link:"[ Sin Enlace ]"},titles:{link_to_student:"Enlazar a Estudiante"}}}}})}),define("vendor/jquery.pageless",["jquery"],function(a){var b=!1,c=!b,d=".pageless",e="scroll"+d,f="resize"+d,g=null,h=function(g){var h,i=b,j,k={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"/images/load.gif",animate:!0},l,m,n=function(b){a.isFunction(b)?b.call():p(b)},o=function(){return k.loaderHtml||'<div id="pageless-loader" style="display:none;text-align:center;width:100%;">  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>  <img src="'+k.loaderImage+'" alt="loading more results" style="margin:10px auto" /></div>'},p=function(b){b&&a.extend(k,b),l=k.container,m=a(l),k.pagination&&a(k.pagination).remove(),u()},q=function(b,c){var d=a(c.loader,b);h=b,c.loader&&d.length?j=d:(j=a(o()),b.append(j),c.loaderHtml||a("#pageless-loader .msg").html(c.loaderMsg)),r(i)},r=function(a){i=a;if(!j)return;i?j.parents().first().is(":visible")&&k.animate?j.fadeIn("normal"):j.show():j.parents().first().is(":visible")&&k.animate?j.fadeOut("normal"):j.hide()},s=function(){return l===window?a(document).height()-m.scrollTop()-m.height():m[0].scrollHeight-m.scrollTop()-m.height()},t=function(){m.unbind(d)},u=function(){m.bind(e+" "+f,v).trigger(e)},v=function(){if(k.totalPages>k.currentPage)!i&&s()<k.distance&&(r(c),k.currentPage++,a.extend(k.params,{page:k.currentPage}),a.get(k.url,k.params,function(c,d,e){var c=a.isFunction(k.scrape)?k.scrape(c,e):c;j?j.before(c):h.append(c),r(b),k.complete&&k.complete.call()},"html"));else{t(),k.end&&k.end.call();return}};return{activate:n,applyContext:q}};a.pageless=function(a){return g===null&&(g=h(a),g.activate(a)),g},a.fn.pageless=function(b){return this.hasOwnProperty("pagelessInstance")||(this.pagelessInstance=h(b),this.pagelessInstance.activate(b)),this.pagelessInstance.applyContext(a(this),b),this}}),define("vendor/jquery.scrollTo",["jquery"],function(a){function b(a){return typeof a=="object"?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)<1.3?1:0},c.window=function(b){return a(window)._scrollable()},a.fn._scrollable=function(){return this.map(function(){var b=this,c=!b.nodeName||a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!c)return b;var d=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||d.compatMode=="BackCompat"?d.body:d.documentElement})},a.fn.scrollTo=function(d,e,f){return typeof e=="object"&&(f=e,e=0),typeof f=="function"&&(f={onAfter:f}),d=="max"&&(d=9e9),f=a.extend({},c.defaults,f),e=e||f.speed||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(e/=2),f.offset=b(f.offset),f.over=b(f.over),this._scrollable().each(function(){function g(a){i.animate(l,e,f.easing,a&&function(){a.call(this,d,f)})}var h=this,i=a(h),j=d,k,l={},m=i.is("html,body");switch(typeof j){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(j)){j=b(j);break}j=a(j,this);case"object":if(j.is||j.style)k=(j=a(j)).offset()}a.each(f.axis.split(""),function(a,b){var d=b=="x"?"Left":"Top",e=d.toLowerCase(),n="scroll"+d,o=h[n],p=c.max(h,b);if(k)l[n]=k[e]+(m?0:o-i.offset()[e]),f.margin&&(l[n]-=parseInt(j.css("margin"+d))||0,l[n]-=parseInt(j.css("border"+d+"Width"))||0),l[n]+=f.offset[e]||0,f.over[e]&&(l[n]+=j[b=="x"?"width":"height"]()*f.over[e]);else{var q=j[e];l[n]=q&&q.slice&&q.slice(-1)=="%"?parseFloat(q)/100*p:q}/^\d+$/.test(l[n])&&(l[n]=l[n]>0?Math.min(l[n],p):0),!a&&f.queue&&(o!=l[n]&&g(f.onAfterFirst),delete l[n])}),g(f.onAfter)}).end()},c.max=function(b,c){var d=c=="x"?"Width":"Height",e="scroll"+d;if(!a(b).is("html,body"))return b[e]-a(b)[d.toLowerCase()]();var f="client"+d,g=b.ownerDocument.documentElement,h=b.ownerDocument.body;return Math.max(g[e],h[e])-Math.min(g[f],h[f])}}),define("jquery.scrollToVisible",["jquery","vendor/jquery.scrollTo"],function(a){a.fn.scrollToVisible=function(b){var c={},d=a(b),e=a("body").offset();this.each(function(){try{return e=a(this).offset(),!1}catch(b){}});if(d.length===0)return;var f=d.offset(),g=d.outerWidth(),h=d.outerHeight(),i=f.top-e.top,j=i+h,k=f.left-e.left,l=k+g,m=this.selector=="html,body"?a.windowScrollTop():this.scrollTop(),n=this.scrollLeft(),o=this.outerHeight(),p=this.outerWidth();if(this[0].tagName=="HTML"||this[0].tagName=="BODY")o=a(window).height(),a("#wizard_box:visible").length>0&&(o-=a("#wizard_box:visible").height()),p=a(window).width(),i-=m,k-=n,j-=m,l-=n;return i<0||o<h&&j>o?c.scrollTop=i+m:j>o&&(c.scrollTop=j+m-o+20),k<0?c.scrollLeft=k+n:l>p&&(c.scrollLeft=l+n-p+20),c.scrollTop==1&&(c.scrollTop=0),c.scrollLeft==1&&(c.scrollLeft=0),this.scrollTop(c.scrollTop),this.scrollLeft(c.scrollLeft),this}}),define("jquery.keycodes",["jquery","jquery.instructure_date_and_time"],function(a){a.fn.keycodes=function(b,c){var d={27:"esc",9:"tab",32:"space",13:"return",8:"backspace",145:"scroll",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"del",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/"};a.browser.mozilla&&(d=a.extend(d,{96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",0:"191"})),typeof b=="string"&&(b={keyCodes:b}),this.filter(":input,object,embed").length>0&&(b.ignore="");var b=a.extend({},a.fn.keycodes.defaults,b),e=[],f=[],g=b.keyCodes.split(" ");return a.each(g,function(a,b){f.push(b),b=b.split("+").sort().join("+").toLowerCase(),e.push(b)}),this.bind("keydown",function(g,h){g=h&&h.keyCode?h:g;if(b.ignore&&a(g.target).is(b.ignore))return;var i=[];g.shiftKey&&i.push("Shift"),g.ctrlKey&&i.push("Ctrl"),g.metaKey&&i.push("Meta"),g.altKey&&i.push("Alt");var j=d[g.keyCode];j=j||String.fromCharCode(g.keyCode),i.push(j),i=i.sort().join("+").toLowerCase(),g.keyMatches=function(a){return a=a.split("+").sort().join("+").toLowerCase(),a==i};var k=a.inArray(i,e),l=a(document).data("last_datepicker");if(l&&l[0]==this&&g.keyCode==27)return g.preventDefault(),!1;k!=-1&&(g.keyString=f[k],c.call(this,g))}),this},a.fn.keycodes.defaults={ignore:":input,object,embed",keyCodes:""}}),define("jquery.instructure_date_and_time",["i18n!instructure","jquery","str/htmlEscape","jquery.keycodes","vendor/date","jqueryui/datepicker","jqueryui/sortable","jqueryui/widget"],function(a,b,c){b.parseDateTime=function(a,c){var a=b.datepicker.parseDate("mm/dd/yy",a);if(c){var d=c.split(":"),e=parseInt(d[0],10);e==12&&(e=0),c.match(/pm/i)&&(e+=12);var f=0;d[1]&&(f=d[1].replace(/(am|pm)/gi,"")),a.setHours(e),a.setMinutes(f)}else a.setHours(0),a.setMinutes(0);return a.date=a,a},b.formatDateTime=function(a,b){var c="",d="";a&&(a.date=a.date||a),b.object_name&&(c+=b.object_name+"[",d="]"+d),b.property_name&&(c+=b.property_name);var e={};return a&&!isNaN(a.date.getFullYear())?(e[c+"(1i)"+d]=a.getFullYear(),e[c+"(2i)"+d]=a.getMonth()+1,e[c+"(3i)"+d]=a.getDate(),e[c+"(4i)"+d]=a.getHours(),e[c+"(5i)"+d]=a.getMinutes()):(e[c+"(1i)"+d]="",e[c+"(2i)"+d]="",e[c+"(3i)"+d]="",e[c+"(4i)"+d]="",e[c+"(5i)"+d]=""),e},b.parseFromISO=function(a,c){var d=parseInt(b("#time_zone_offset").text(),10)/-60,e=new Date;c=c||"event";try{var f={};if(!a)return b.parseFromISO.defaults;var g=a.substring(0,4),h=a.substring(5,7),i=a.substring(8,10),j=parseInt(a.substring(19),10)||0;f.date=new Date(g,h-1,i),f.date.getTimezoneOffset()!=e.getTimezoneOffset()&&(d-=(f.date.getTimezoneOffset()-e.getTimezoneOffset())/60);var k=d-j;f.date_sortable=a.substring(0,10),f.date_string=h+"/"+i+"/"+g,f.date_formatted=b.dateString(f.date);var l=a.substring(11,13),m=a.substring(14,16),n=a.substring(17,19),o=parseInt(l,10)*1e3*3600;k&&!isNaN(k)&&(o+=k*1e3*3600);var p=parseInt(m,10)*1e3*60,q=parseInt(n,10)*1e3,r=o+p+q||0,s=Date.UTC(g,h-1,i)||0;f.time_timestamp=r/1e3,f.date_timestamp=s/1e3;var t=f.date.getTimezoneOffset()*6e4,u=new Date(s+r+t),v="am";o=u.getHours(),o>12?(o-=12,v="pm"):o==12?v="pm":o===0&&(o=12);var w=o,x=":";u.getMinutes()<10&&(x+="0"),x+=u.getMinutes(),u.getMinutes()!==0&&(w+=x);var y=c=="due_date"?"by":"at",z=" "+y+" "+w+v;f.show_time=!0;var A=u.getHours();return A<10&&(A="0"+A),f.time_sortable=A+x,w+=v,f.time_formatted=w,f.time_string=o+x+v,f.time=u,f.datetime=u,f.date_formatted=b.dateString(f.datetime),f.datetime_formatted=f.date_formatted+z,f.timestamp=(r+s)/1e3,f.minute_timestamp=f.timestamp-f.timestamp%60,f}catch(B){return b.parseFromISO.defaults}},b.fudgeDateForProfileTimezone=function(a,c){var d=new Date,e=parseInt(b("#time_zone_offset").text(),10)*-1;a.getTimezoneOffset()!=d.getTimezoneOffset()&&(e-=a.getTimezoneOffset()-d.getTimezoneOffset());var f=e+a.getTimezoneOffset();if(f==0)return a;time=a.getTime(),time+=f*60*1e3*(c===!0?-1:1);var g=new Date;return g.setTime(time),g},b.unfudgeDateForProfileTimezone=function(a){return b.fudgeDateForProfileTimezone(a,!0)},b.parseFromDateUTC=function(a,c){return b.parseFromISO(b.dateToISO8601UTC(a),c)},b.parseFromISO.ref_date=new Date,b.parseFromISO.offset=b.parseFromISO.ref_date.getTimezoneOffset()*6e4,b.parseFromISO.defaults={date:new Date(b.parseFromISO.offset),date_sortable:"0000-00-00",date_string:"",date_formatted:"",time_timestamp:0,date_timestamp:0,timestamp:0,time:new Date(b.parseFromISO.offset),time_formatted:"",time_string:""},b.dateToISO8601UTC=function(a){var b=function(a){return a<10?"0"+a:a};return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())+"Z"},b.dateToISO8601=function(a){var b=function(a){a<10?"0"+a:a};return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T"+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+"Z"};var d=new Date;b.thisYear=function(a){return a&&a.getFullYear()==d.getFullYear()},b.dateString=function(a){return a&&a.toString(b.thisYear(a)?"MMM d":"MMM d, yyyy")||""},b.timeString=function(a){return a&&a.toString("h:mmtt").toLowerCase()||""},b.friendlyDatetime=function(c,d){var e=Date.today();return Date.equals(c.clone().clearTime(),e)?a.l("#time.formats.tiny",c):b.friendlyDate(c,d)},b.friendlyDate=function(b,c){c==null&&(c="past");var d=Date.today(),e=b.clone().clearTime();return Date.equals(e,d)?a.t("#date.days.today","Today"):Date.equals(e,d.add(-1).days())?a.t("#date.days.yesterday","Yesterday"):Date.equals(e,d.add(1).days())?a.t("#date.days.tomorrow","Tomorrow"):c=="past"&&e<d&&e>=d.add(-6).days()?a.l("#date.formats.weekday",e):c=="future"&&e<d.add(7).days()&&e>=d?a.l("#date.formats.weekday",e):a.l("#date.formats.medium",e)},b.fn.parseFromISO=b.parseFromISO,b.datepicker.oldParseDate=b.datepicker.parseDate,b.datepicker.parseDate=function(a,c,d){return Date.parse((c||"").toString().replace(/ (at|by)/,""))||b.datepicker.oldParseDate(a,c,d)},b.datepicker._generateDatepickerHTML=b.datepicker._generateHTML,b.datepicker._generateHTML=function(d){var e=b.datepicker._generateDatepickerHTML(d);if(d.settings.timePicker){var f=d.input.data("time-hour")||"";f=f.replace(/'/g,"");var g=d.input.data("time-minute")||"";g=g.replace(/'/g,"");var h=d.input.data("time-ampm")||"",i=h=="am"?"selected":"",j=h=="pm"?"selected":"";e+="<div class='datepicker-time'><label for='ui-datepicker-time-hour'>"+c(a.beforeLabel("datepicker.time","Time"))+"</label> <input id='ui-datepicker-time-hour' type='text' value='"+f+"' title='hr' class='ui-datepicker-time-hour' style='width: 20px;'/>:<input type='text' value='"+g+"' title='min' class='ui-datepicker-time-minute' style='width: 20px;'/> <select class='ui-datepicker-time-ampm' title='"+c(a.t("datepicker.titles.am_pm","am/pm"))+"'><option value=''>&nbsp;</option><option value='am' "+i+">"+c(a.t("#time.am","am"))+"</option><option value='pm' "+j+">"+c(a.t("#time.pm","pm"))+"</option></select>&nbsp;&nbsp;&nbsp;<button type='button' class='button small-button ui-datepicker-ok'>"+c(a.t("#buttons.done","Done"))+"</button></div>"}return e},b.fn.realDatepicker=b.fn.datepicker;var e=b.datepicker._selectDay;b.datepicker._selectDay=function(a,c,d,f){var g=b(a);if(b(f).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0]))return;var h=this._getInst(g[0]);if(h.settings.timePicker&&!b.datepicker.okClicked&&!h._keyEvent){var i=h.inline;h.inline=!0,b.data(g,"datepicker",h),e.call(this,a,c,d,f),h.inline=i,b.data(g,"datepicker",h)}else e.call(this,a,c,d,f)},b.fn.datepicker=function(a){return a=b.extend({},a),a.prevOnSelect=a.onSelect,a.onSelect=function(c,d){a.prevOnSelect&&a.prevOnSelect.call(this,c,d);var e=d.dpDiv,f=e.find(".ui-datepicker-time-hour").val()||b(this).data("time-hour"),g=e.find(".ui-datepicker-time-minute").val()||b(this).data("time-minute"),h=e.find(".ui-datepicker-time-ampm").val()||b(this).data("time-ampm");if(f){g=g||"00",h=h||"pm";var i=f+":"+g+" "+h;c+=" "+i}d.input.val(c).change()},b.fn.datepicker.timepicker_initialized||(b(document).delegate(".ui-datepicker-ok","click",function(a){var c=b.datepicker._curInst,d=c,e=b("td."+b.datepicker._dayOverClass+", td."+b.datepicker._currentClass,d.dpDiv);e[0]?(b.datepicker.okClicked=!0,b.datepicker._selectDay(c.input[0],d.selectedMonth,d.selectedYear,e[0]),b.datepicker.okClicked=!1):b.datepicker._hideDatepicker(null,b.datepicker._get(d,"duration"))}),b(document).delegate(".ui-datepicker-time-hour","change keypress focus blur",function(a){var c=b.datepicker._curInst;if(c){var d=b(this).val();c.input.data("time-hour",d)}}).delegate(".ui-datepicker-time-minute","change keypress focus blur",function(a){var c=b.datepicker._curInst;if(c){var d=b(this).val();c.input.data("time-minute",d)}}).delegate(".ui-datepicker-time-ampm","change keypress focus blur",function(a){var c=b.datepicker._curInst;if(c){var d=b(this).val();c.input.data("time-ampm",d)}}),b(document).delegate(".ui-datepicker-time-hour,.ui-datepicker-time-minute,.ui-datepicker-time-ampm","mousedown",function(a){b(this).focus()}),b(document).delegate(".ui-datepicker-time-hour,.ui-datepicker-time-minute,.ui-datepicker-time-ampm","change keypress focus blur",function(a){if(a.keyCode&&a.keyCode==13){var c=b.datepicker._curInst,d=c,e=b("td."+b.datepicker._dayOverClass+", td."+b.datepicker._currentClass,d.dpDiv);e[0]?(b.datepicker.okClicked=!0,b.datepicker._selectDay(c.input[0],d.selectedMonth,d.selectedYear,e[0]),b.datepicker.okClicked=!1):b.datepicker._hideDatepicker(null,b.datepicker._get(d,"duration"))}else a.keyCode&&a.keyCode==27&&b.datepicker._hideDatepicker(null,"")}),b.fn.datepicker.timepicker_initialized=!0),this.realDatepicker(a),b(document).data("last_datepicker",this),this},b.fn.date_field=function(a){return a=b.extend({},a),a.dateOnly=!0,this.datetime_field(a),this},b.fn.time_field=function(a){return a=b.extend({},a),a.timeOnly=!0,this.datetime_field(a),this},b.fn.datetime_field=function(c){return c=b.extend({},c),this.each(function(){var d=b(this);if(d.hasClass("datetime_field_enabled"))return;d.addClass("datetime_field_enabled"),c.timeOnly||d.datepicker({timePicker:!c.dateOnly,constrainInput:!1,dateFormat:"M d, yy",showOn:"button",buttonImage:"/images/datepicker.gif?1234",buttonImageOnly:!0});var e=b(this);d.next(".ui-datepicker-trigger").length>0&&(e=d.next());var f=b(document.createElement("div")).addClass("datetime_suggest");e.after(f),f=e.next(),d.bind("change focus blur keyup",function(){var d=b(this).val();c.timeOnly&&d&&parseInt(d,10)==d&&(d<8?d+="pm":d+="am");var e=Date.parse((d||"").toString().replace(/ (at|by)/,"")),f=a.t("errors.not_a_date","That's not a date!"),g=f;b(this).val()||(g=""),e&&(b(this).data("date",e),!c.timeOnly&&!c.dateOnly&&(e.getHours()||e.getMinutes()||c.alwaysShowTime)?(g=e.toString("ddd MMM d, yyyy h:mmtt"),b(this).data("time-hour",e.toString("h")).data("time-minute",e.toString("mm")).data("time-ampm",e.toString("tt").toLowerCase())):c.timeOnly?g=e.toString("h:mmtt").toLowerCase():g=e.toString("ddd MMM d, yyyy"));var h=b(this).parent().children(".datetime_suggest");h&&(h.toggleClass("invalid_datetime",g==f),h.text(g))}).triggerHandler("change")}),this},b.datetime={},b.datetime.shortFormat="MMM d, yyyy",b.datetime.defaultFormat="MMM d, yyyy h:mmtt",b.datetime.sortableFormat="yyyy-MM-ddTHH:mm:ss",b.datetime.clean=function(a){var c=Date.parse((a||"").toString("yyyy-MM-ddTHH:mm:ss").replace(/ (at|by)/,""))||a,d="";return c&&(c.getHours()||c.getMinutes()?d=c.toString(b.datetime.defaultFormat):d=c.toString(b.datetime.shortFormat)),d},b.datetime.process=function(a){var c=a;typeof a=="string"&&(c=Date.parse((a||"").toString().replace(/ (at|by)/,"")));var d="";return c&&(d=c.toString(b.datetime.sortableFormat)),d},b.fn.timepicker=function(){var a=b("#time_picker");return a.length===0&&(a=b._initializeTimepicker()),this.each(function(){b(this).focus(function(){var a=b(this).offset(),c=b(this).outerHeight(),d=b(this).outerWidth(),e=b("#time_picker");e.css({left:-1e3,height:"auto",width:"auto"}).show();var f=e.offset(),g=e.outerHeight(),h=e.outerWidth();e.css({top:a.top+c,left:a.left}).end(),b("#time_picker .time_slot").removeClass("ui-state-highlight").removeClass("ui-state-active"),e.data("attached_to",b(this)[0]);var i=b(window).height(),j=b(window).width(),k=b.windowScrollTop();a.top+c-k+g>i&&e.css({top:a.top-g}),a.left+h>j&&e.css({left:a.left+d-h}),b("#time_picker").hide().slideDown()}).blur(function(){b("#time_picker").data("attached_to")==b(this)[0]&&(b("#time_picker").data("attached_to",null),b("#time_picker").hide().find(".time_slot.ui-state-highlight").removeClass("ui-state-highlight"))}).keycodes("esc return",function(a){b(this).triggerHandler("blur")}).keycodes("ctrl+up ctrl+right ctrl+left ctrl+down",function(a){if(b("#time_picker").data("attached_to")!=b(this)[0])return;a.preventDefault();var c=b("#time_picker .time_slot.ui-state-highlight:first"),d=b(b("#time_picker").data("attached_to")).val(),e=12,f="00",g="pm",h;d&&d.length>=7&&(e=d.substring(0,2),f=d.substring(3,5),g=d.substring(5,7));if(c.length===0){h=parseInt(d,10)-1,isNaN(h)&&(h=0),b("#time_picker .time_slot").eq(h).triggerHandler("mouseover");return}if(a.keyString=="ctrl+up"){var i=c.parent(".widget_group");h=i.children(".time_slot").index(c),i.hasClass("ampm_group")?h=f/15:i.hasClass("minute_group")&&(h=parseInt(e,10)-1),i.prev(".widget_group").find(".time_slot").eq(h).triggerHandler("mouseover")}else if(a.keyString=="ctrl+right")c.next(".time_slot").triggerHandler("mouseover");else if(a.keyString=="ctrl+left")c.prev(".time_slot").triggerHandler("mouseover");else if(a.keyString=="ctrl+down"){i=c.parent(".widget_group"),h=i.children(".time_slot").index(c);var j=i.next(".widget_group").find(".time_slot");h=Math.min(h,j.length-1),i.hasClass("hour_group")?h=f/15:i.hasClass("minute_group")&&(h=g=="am"?0:1),j.eq(h).triggerHandler("mouseover")}})}),this},b._initializeTimepicker=function(){var d=b(document.createElement("div"));d.attr("id","time_picker").css({position:"absolute",display:"none"});var e="<div class='widget_group hour_group'>";return e+="<div class='ui-widget ui-state-default time_slot'>01</div>",e+="<div class='ui-widget ui-state-default time_slot'>02</div>",e+="<div class='ui-widget ui-state-default time_slot'>03</div>",e+="<div class='ui-widget ui-state-default time_slot'>04</div>",e+="<div class='ui-widget ui-state-default time_slot'>05</div>",e+="<div class='ui-widget ui-state-default time_slot'>06</div>",e+="<div class='ui-widget ui-state-default time_slot'>07</div>",e+="<div class='ui-widget ui-state-default time_slot'>08</div>",e+="<div class='ui-widget ui-state-default time_slot'>09</div>",e+="<div class='ui-widget ui-state-default time_slot'>10</div>",e+="<div class='ui-widget ui-state-default time_slot'>11</div>",e+="<div class='ui-widget ui-state-default time_slot'>12</div>",e+="<div class='clear'></div>",e+="</div>",e+="<div class='widget_group minute_group'>",e+="<div class='ui-widget ui-state-default time_slot'>00</div>",e+="<div class='ui-widget ui-state-default time_slot'>15</div>",e+="<div class='ui-widget ui-state-default time_slot'>30</div>",e+="<div class='ui-widget ui-state-default time_slot'>45</div>",e+="<div class='clear'></div>",e+="</div>",e+="<div class='widget_group ampm_group'>",e+="<div class='ui-widget ui-state-default time_slot'>"+c(a.t("#time.am","am"))+"</div>",e+="<div class='ui-widget ui-state-default time_slot'>"+c(a.t("#time.pm","pm"))+"</div>",e+="<div class='clear'></div>",e+="</div>",d.html(e),b("body").append(d),d.find(".time_slot").mouseover(function(){d.find(".time_slot.ui-state-highlight").removeClass("ui-state-highlight"),b(this).addClass("ui-state-highlight");var a=b(d.data("attached_to")||"none"),c=a.val(),e=12,f="00",g="pm";c&&c.length>=7&&(e=c.substring(0,2),f=c.substring(3,5),g=c.substring(5,7));var h=b(this).text();h>0&&h<=12?e=h:h=="am"||h=="pm"?g=h:f=h,a.val(e+":"+f+g)}).mouseout(function(){b(this).removeClass("ui-state-highlight")}).mousedown(function(a){a.preventDefault(),b(this).triggerHandler("mouseover"),b(this).removeClass("ui-state-highlight").addClass("ui-state-active")}).mouseup(function(){b(this).removeClass("ui-state-active")}).click(function(a){a.preventDefault(),b(this).triggerHandler("mouseover"),d.data("attached_to")&&b(d.data("attached_to")).focus(),d.stop().hide().data("attached_to",null)}),d}}),define("jquery.disableWhileLoading",["i18n!instructure","compiled/util/objectCollection","jquery","jquery.ajaxJSON","vendor/jquery.spin"],function(a,b,c){c.fn.disableWhileLoading=function(d,e){return this.each(function(){var f=c.extend(!0,{},c.fn.disableWhileLoading.defaults,e),g=c(this),h=g.data(),i=h.disabledWhileLoadingDeferreds||(h.disabledWhileLoadingDeferreds=b([])),j=c.Deferred();c.when.apply(c,i).done(function(){var b="disabled_"+c.guid++,h=g.add(g.nextAll(".ui-dialog-buttonpane")),k=h.find("*").andSelf().filter(":input").not(":disabled,[type=file]"),l=g.find(".spin_holder"),m=l.length?l:g,n=m.css("display"),o=!1,p=setTimeout(function(){o=!0,k.prop("disabled",!0),m.show().spin(e),h.css("opacity",function(a,d){return c(this).data(b+"opacityBefore",this.style.opacity),f.opacity}),c.each(f.buttons,function(d,e){c.isArray(f.buttons)&&(d=e,e=null),h.find(d).text(function(d,f){return c(this).data(b,f),e||c(this).data("textWhileLoading")||c(this).is(".ui-button-text")&&c(this).closest(".ui-button").data("textWhileLoading")||a.t("loading","Loading...")})})},13);c.when(d).always(function(){clearTimeout(p),o&&(m.css("display",n).spin(!1),h.css("opacity",function(){return c(this).data(b+"opacityBefore")}),k.prop("disabled",!1),c.each(f.buttons,function(){h.find(""+this).text(function(){return c(this).data(b)})}),i.erase(j),j.resolve())})}),i.push(j)})},c.fn.disableWhileLoading.defaults={opacity:.5,buttons:['button[type="submit"], .ui-dialog-buttonpane .ui-button .ui-button-text']}}),define("jquery.instructure_misc_plugins",["i18n!instructure","jquery","jquery.ajaxJSON","jqueryui/dialog","jquery.scrollToVisible","vendor/jquery.ba-hashchange","vendor/jquery.scrollTo"],function(a,b){return b.fn.ifExists=function(a){return this.length&&a.call(this,this),this},b.fn.scrollbarWidth=function(){var a=b('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>').appendTo(this),c=a.find("div"),d=c.innerWidth();a.css("overflow-y","scroll");var e=c.innerWidth();return a.remove(),d-e},b.fn.dim=function(a){return this.animate({opacity:.4},a)},b.fn.undim=function(a){return this.animate({opacity:1},a)},b.fn.confirmDelete=function(c){var c=b.extend({},b.fn.confirmDelete.defaults,c),d=this,e=null,f=!0;c.noMessage=c.noMessage||c.no_message;var g=function(){if(!f){c.cancelled&&b.isFunction(c.cancelled)&&c.cancelled.call(d);return}c.confirmed||(c.confirmed=function(){d.dim()}),c.confirmed.call(d);if(c.url){c.success||(c.success=function(a){d.fadeOut("slow",function(){d.remove()})});var a=c.prepareData?c.prepareData.call(d,e):{};c.token&&(a.authenticity_token=c.token),a.authenticity_token||(a.authenticity_token=b("#ajax_authenticity_token").text()),b.ajaxJSON(c.url,"DELETE",a,function(a){c.success.call(d,a)},function(a,e,f,g){c.error&&b.isFunction(c.error)?c.error.call(d,a,e,f,g):b.ajaxJSON.unhandledXHRs.push(e)})}else c.success||(c.success=function(){d.fadeOut("slow",function(){d.remove()})}),c.success.call(d)};if(c.message&&!c.noMessage&&!b.skipConfirmations){if(c.dialog){f=!1;var h=typeof c.dialog=="object"?c.dialog:{};e=b(c.message).dialog(b.extend({},{modal:!0,close:g,buttons:[{text:a.t("#buttons.delete","Delete"),"class":"ui-button-primary",click:function(){f=!0,b(this).dialog("close")}},{text:a.t("#buttons.cancel","Cancel"),click:function(){b(this).dialog("close")}}]},h));return}f=confirm(c.message)}g()},b.fn.confirmDelete.defaults={message:a.t("confirms.default_delete_thing","Are you sure you want to delete this?")},b.fn.fragmentChange=function(a){if(a&&a!==!0){var c=(window.location.search||"").replace(/^\?/,"").split("&"),d,e=null;for(d in c){var f=c[d];f&&f.indexOf("hash=")===0&&(e="#"+f.substring(5))}this.bind("document_fragment_change",a);var g=this,h=!1;for(d in b._checkFragments.fragmentList){var i=b._checkFragments.fragmentList[d];i.doc[0]==g[0]&&(h=!0)}h||b._checkFragments.fragmentList.push({doc:g,fragment:""}),b(window).bind("hashchange",b._checkFragments),setTimeout(function(){e&&e.length>0?g.triggerHandler("document_fragment_change",e):g&&g[0]&&g[0].location&&g[0].location.hash.length>0&&g.triggerHandler("document_fragment_change",g[0].location.hash)},500)}else this.triggerHandler("document_fragment_change",this[0].location.hash);return this},b._checkFragments=function(){var a=b._checkFragments.fragmentList;for(var c in a){var d=a[c],e=d.doc;e[0].location.hash!=d.fragment&&(e.triggerHandler("document_fragment_change",e[0].location.hash),d.fragment=e[0].location.hash,b._checkFragments.fragmentList[c]=d)}},b._checkFragments.fragmentList=[],b.fn.clickLink=function(){var a=this.eq(0);a.hasClass("disabled_link")||a.click()},b.fn.showIf=function(a){return b.isFunction(a)?this.each(function(c){b(this).showIf(a.call(this))}):(a?this.show():this.hide(),this)},b.fn.disableIf=function(a){return b.isFunction(a)&&(a=a.call(this)),this.prop("disabled",!!a),this},b.fn.indicate=function(a){a=a||{};var c;if(a=="remove"){c=this.data("indicator"),c&&c.remove();return}b(".indicator_box").remove();var d=this.offset();a&&a.offset&&(d=a.offset);var e=this.width(),f=this.height(),g=(a.container||this).zIndex();c=b(document.createElement("div")),c.css({width:e+6,height:f+6,top:d.top-3,left:d.left-3,zIndex:g+1,position:"absolute",display:"block","-moz-border-radius":5,opacity:.8,border:"2px solid #870",backgroundColor:"#fd0"}),c.addClass("indicator_box"),c.mouseover(function(){b(this).stop().fadeOut("fast",function(){b(this).remove()})}),this.data("indicator")&&this.indicate("remove"),this.data("indicator",c),b("body").append(c),a&&a.singleFlash?c.hide().fadeIn().animate({opacity:.8},500).fadeOut("slow",function(){b(this).remove()}):c.hide().fadeIn().animate({opacity:.8},500).fadeOut("slow").fadeIn("slow").animate({opacity:.8},2500).fadeOut("slow",function(){b(this).remove()}),a&&a.scroll&&b("html,body").scrollToVisible(c)},b.fn.hasScrollbar=function(){return this.length&&this[0].clientHeight<this[0].scrollHeight},b.fn.log=function(a){return console.log("%s: %o",a,this),this},b.fn.chevronCrumbs=function(a){return this.each(function(){b(this).show().addClass("chevron-crumbs").children().not("#hide-scratch").addClass("chevron-crumb").append('<span class="chevron-outer"><span class="chevron-inner"></span></span>').filter(".active").prev().addClass("before-active")})},b.fn.fillWindowWithMe=function(a){function c(){j.height(0);var a=i.height()-(f.offset().top+f.height())+(g.height()-h.height()),c=Math.max(400,a);j.height(c),b.isFunction(d.onResize)&&d.onResize.call(e,c)}var d=b.extend({minHeight:400},a),e=b(this),f=b("#wrapper-container"),g=b("#main"),h=b("#not_right_side"),i=b(window),j=b(this).add(d.alsoResize);return c(),i.unbind("resize.fillWindowWithMe").bind("resize.fillWindowWithMe",c),this},b.fn.autoGrowInput=function(a){return a=b.extend({maxWidth:1e3,minWidth:0,comfortZone:70},a),this.filter("input:text").each(function(){var c=a.minWidth||b(this).width(),d="",e=b(this),f=b("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"}),g=function(){setTimeout(function(){if(d===(d=e.val()))return;var b=d.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");f.html(b);var g=f.width(),h=g+a.comfortZone<c?c:g+a.comfortZone,i=e.width(),j=h<i&&h>=c||h>c&&h<a.maxWidth;j&&e.width(h)})};f.insertAfter(e),b(this).bind("keyup keydown blur update change",g)}),this},b}),define("reminders",["jquery","jqueryui/draggable","jquery.instructure_misc_plugins"],function(a){a(document).ready(function(){a("#floating_reminders").draggable(),a(".show_reminders_link").click(function(b){b.preventDefault(),a(this).blur();var c=a("#floating_reminders"),d=c.clone();d.children().css("visibility","hidden");var e=a("#reminders_icon").offset(),f=a("#floating_reminders").offset().top;c.after(d),d.css({width:20,height:20,left:e.left,top:e.top-f,opacity:0}),c.css("visibility","hidden").css("left",""),d.animate({top:c.css("top"),left:c.css("left"),width:c.width(),height:c.height(),opacity:1},"slow",function(){a(this).remove(),c.css("visibility","visible"),c.find("a:not(.hide_reminders_link):visible:first").focus(),a("#reminders_icon").hide()});var g=c.find(".update_session_url").attr("href")}),a(".hide_reminders_link").click(function(b){b.preventDefault();var c=a(this).parents("#floating_reminders"),d=c.clone();c.after(d).css("left",-2e3),d.children().css("visibility","hidden");var e=a("#reminders_icon").show().offset(),f=d.offset().top;d.animate({width:20,height:20,left:e.left,top:e.top-f,opacity:0},"slow",function(){a(this).remove()});var g=c.find(".update_session_url").attr("href")}),a(".drop_held_context_link").click(function(b){b.preventDefault();var c=a(this).parents(".reminder");c.confirmDelete({url:a(this).attr("href"),message:"Are you sure you want to drop this "+c.find(".item_type").text()+"?",success:function(b){a(this).fadeOut("fast",function(){a(this).remove(),a("#floating_reminders .reminder").length===0&&a("#floating_reminders").fadeOut("fast",function(){a(this).remove(),a("#reminders_icon").remove()})})}})})})}),define("tinymce.editor_box",["i18nObj","jquery","jqueryui/draggable","jquery.instructure_misc_plugins","vendor/jquery.scrollTo","vendor/jquery.ba-tinypubsub","vendor/scribd.view"],function(a,b){function c(){this._textareas={},this._editors={},this._editor_boxes={}}function d(a,c){var d=b("#"+a+"_ifr");if(d.length){var e=b(window).height()-(d.offset().top+c.height()+1);d.height(e)}b("#"+a+"_tbl").css("height","")}function e(a,c,e,h,i){i=b.extend({},i),i.fullHeight&&b(window).resize(function(){d(a,i.elementToLeaveInViewport)}).triggerHandler("resize");var j=b("#"+a);j.data("enable_bookmarking",f);var k=j.width();k==0&&(k=j.closest(":visible").width());var l=",instructure_embed,instructure_equation";for(var m in INST.editorButtons)INST.editorButtons.length<=INST.maxVisibleEditorButtons||m<INST.maxVisibleEditorButtons-1?l=l+",instructure_external_button_"+INST.editorButtons[m].id:l.match(/instructure_external_button_clump/)||(l+=",instructure_external_button_clump");INST&&INST.allowMediaComments&&(l+=",instructure_record");var n=INST&&INST.equellaEnabled?",instructure_equella":"";l+=n;var o="bold,italic,underline,forecolor,backcolor,removeformat,sepleft,separator,justifyleft,justifycenter,justifyright,sepleft,separator,bullist,outdent,indent,numlist,sepleft,separator,table,instructure_links,unlink"+l+",|,fontsizeselect,formatselect",p="",q="";k<359&&k>0?(o="bold,italic,underline,forecolor,backcolor,removeformat,sepleft,separator,justifyleft,justifycenter,justifyright",p="outdent,indent,bullist,numlist,sepleft,separator,table,instructure_links,unlink"+l,q="fontsizeselect,formatselect"):k<629&&(o="bold,italic,underline,forecolor,backcolor,removeformat,sepleft,separator,justifyleft,justifycenter,justifyright,sepleft,separator,outdent,indent,bullist,numlist",p="table,instructure_links,unlink"+l+",|,fontsizeselect,formatselect");var r="/javascripts/tinymce/jscripts/tiny_mce/themes/advanced/skins/default/ui.css,/stylesheets/compiled/tiny_like_ck_with_external_tools.css";tinyMCE.init({mode:"exact",elements:a,theme:"advanced",plugins:"autolink,instructure_external_tools,instructure_contextmenu,instructure_links,instructure_embed,instructure_equation,instructure_record,instructure_equella,media,paste,table,inlinepopups",dialog_type:"modal",language_load:!1,relative_urls:!1,remove_script_host:!0,theme_advanced_buttons1:o,theme_advanced_toolbar_location:"top",theme_advanced_buttons2:p,theme_advanced_buttons3:q,theme_advanced_resize_horizontal:!1,theme_advanced_resizing:!0,theme_advanced_fonts:'Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Myriad="Myriad Pro",Myriad,Arial,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats;',theme_advanced_blockformats:"p,h2,h3,h4,pre",theme_advanced_more_colors:!1,extended_valid_elements:"iframe[src|width|height|name|align|style|class]",content_css:"/stylesheets/compiled/instructure_style.css,/stylesheets/compiled/tinymce.editor_box.css",editor_css:r,handle_event_callback:function(c){if(c.type.indexOf("keydown")===0||c.type.indexOf("keypress")===0)if(c.keyCode===9){if(c.shiftKey){c.preventDefault();var d=b("#"+a),e=d.closest("form,#main").find(":tabbable,#"+a);m=e.index(d),d.filter(":visible").length>0?b(e.eq(m-1)).focus():b(e.eq(m+1)).focus()}}else b("#"+a).triggerHandler(c.type,b.event.fix(c))},onchange_callback:function(c){b("#"+a).trigger("change")},setup:function(c){var d=b("#"+c.editorId),e=function(){b(document).triggerHandler("editor_box_focus",d),b.publish("editorBox/focus",d)};c.onClick.add(e),c.onKeyPress.add(e),c.onActivate.add(e),c.onEvent.add(function(){f&&c.selection&&j.data("last_bookmark",c.selection.getBookmark(1))}),c.onInit.add(function(){b(window).triggerHandler("resize"),b(c.contentDocument).bind("DOMNodeInserted",function(a){var c=a.target,d;c.nodeType===1&&c.nodeName==="IMG"&&(d=b(c).data("url"))&&b(c).attr("src",tinyMCE.activeEditor.documentBaseURI.toAbsolute(d))}),"onfocusout"in c.contentWindow||b(c.contentWindow).blur(function(a){!c.removed&&c.undoManager.typing&&(c.undoManager.typing=!1,c.undoManager.add())}),b("#"+c.editorId+"_tbl").find("td.mceToolbar span.mceSeparator").parent().each(function(){b(this).after("<td class='mceSeparatorLeft'><span/></td>").after("<td class='mceSeparatorMiddle'><span/></td>").after("<td class='mceSeparatorRight'><span/></td>").remove()});if(!i.unresizable)var d=b("#"+a+"_ifr"),e=d.closest(".mceEditor"),f,g,h,j=i.minHeight||200,k=b('<div class="editor_box_resizer" unselectable="on"><div class="ui-icon ui-icon-grip-diagonal-se" unselectable="on"></div></div>').appendTo(d.parent()).draggable({axis:"y",instructureHackToNotAutoSizeTop:!0,containment:[0,d.offset().top+j,9999999,9999999],start:function(){h=e.css("overflow"),e.css("overflow","hidden"),f=d.offset().top,k.draggable("option","containment",[0,f+j,9999999,9999999]),g=b('<div style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></div>').appendTo(k.parent())},drag:function(a,b){k.removeAttr("style"),d.height(b.offset.top-f)},stop:function(a,b){g.remove(),e.css("overflow",h),k.removeAttr("style"),d.height(b.offset.top-f)}})})}}),this._textarea=j,this._editor=null,this._id=a,this._searchURL=c,this._submitURL=e,this._contentURL=h,g._addEditorBox(a,this),j.bind("blur change",function(){g._getEditor(a)&&g._getEditor(a).isHidden()&&b(this).editorBox("set_code",g._getTextArea(a).val())})}var f=b("body").hasClass("ie");b(document).ready(function(){f=b("body").hasClass("ie")}),b.extend(c.prototype,{_addEditorBox:function(a,c){b.publish("editorBox/add",a,c),this._editor_boxes[a]=c,this._editors[a]=tinyMCE.get(a),this._textareas[a]=b("textarea#"+a)},_removeEditorBox:function(a){delete this._editor_boxes[a],delete this._editors[a],delete this._textareas[a],b.publish("editorBox/remove",a),b.isEmptyObject(this._editors)&&b.publish("editorBox/removeAll")},_getTextArea:function(a){return this._textareas[a]||(this._textareas[a]=b("textarea#"+a)),this._textareas[a]},_getEditor:function(a){return this._editors[a]||(this._editors[a]=tinyMCE.get(a)),this._editors[a]},_getEditorBox:function(a){return this._editor_boxes[a]}});var g=new c,h={getSelection:function(){var a=this.jquery?this[0]:this;return("selectionStart"in a&&function(){var b=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:b,text:a.value.substr(a.selectionStart,b)}}||document.selection&&function(){a.focus();var b=document.selection.createRange();if(b==null)return{start:0,end:a.value.length,length:0};var c=a.createTextRange(),d=c.duplicate();return c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),{start:d.text.length,end:d.text.length+b.text.length,length:b.text.length,text:b.text}}||function(){return{start:0,end:a.value.length,length:0}})()},replaceSelection:function(){var a=this.jquery?this[0]:this,b=arguments[0]||"";return("selectionStart"in a&&function(){return a.value=a.value.substr(0,a.selectionStart)+b+a.value.substr(a.selectionEnd,a.value.length),this}||document.selection&&function(){return a.focus(),document.selection.createRange().text=b,this}||function(){return a.value+=b,this})()}};jQuery.each(h,function(a){jQuery.fn[a]=this});var i=1;b.fn.editorBox=function(a,c){var d=arguments;if(this.length>1)return this.each(function(){var a=b(this);a.editorBox.apply(a,d)});var f=this.attr("id");if(typeof a=="string"&&a!="create"){if(a=="get_code")return this._getContentCode(c);if(a=="set_code")this._setContentCode(c);else if(a=="insert_code")this._insertHTML(c);else{if(a=="selection_offset")return this._getSelectionOffset();if(a=="selection_link")return this._getSelectionLink();if(a=="create_link")this._linkSelection(c);else{if(a=="focus")return this._editorFocus(c);if(a=="toggle")this._toggleView();else{if(a=="execute"){var h=[];for(var j=1;j<arguments.length;j++)h.push(arguments[j]);return b.fn._execCommand.apply(this,h)}a=="destroy"&&this._removeEditor(c)}}}return this}this.data("rich_text",!0),f||(f="editor_box_unique_id_"+i++,this.attr("id",f));if(g._getEditor(f))return this._setContentCode(this.val()),this;var k="";a&&a.search_url&&(k=a.search_url);var l=new e(f,k,"","",a);return this},b.fn._execCommand=function(){var a=b(this).attr("id"),c=g._getEditor(a);return c&&c.execCommand&&c.execCommand.apply(c,arguments),this},b.fn._justGetCode=function(){var a=this.attr("id")||"",b="";try{g._getEditor(a).isHidden()?b=g._getTextArea(a).val():b=g._getEditor(a).getContent()}catch(c){tinyMCE&&tinyMCE.getInstanceById(a)?b=tinyMCE.getInstanceById(a).getContent():b=this.val()||""}return b},b.fn._getContentCode=function(a){if(a==1){var b=this._justGetCode();this._setContentCode(b)}return this._justGetCode()},b.fn._getSearchURL=function(){return g._getEditorBox(this.attr("id"))._searchURL},b.fn._getSubmitURL=function(){return g._getEditorBox(this.attr("id"))._submitURL},b.fn._getContentURL=function(){return g._getEditorBox(this.attr("id"))._contentURL},b.fn._getSelectionOffset=function(){var a=this.attr("id"),c=g._getEditor(a).getContainer(),d=b(c).find("iframe").offset(),e=g._getEditor(a).selection.getNode(),f=b(e).offset(),h=b(c).scrollTop(),i={left:d.left+f.left+10,top:d.top+f.top+10-h};return i},b.fn._getSelectionNode=function(){var a=this.attr("id"),b=g._getEditor(a).getContainer(),c=g._getEditor(a).selection.getNode();return c},b.fn._getSelectionLink=function(){var a=this.attr("id"),c=tinyMCE.get(a).selection.getNode();while(c.nodeName!="A"&&c.nodeName!="BODY"&&c.parentNode)c=c.parentNode;if(c.nodeName=="A"){var d=b(c).attr("href"),e=b(c).attr("title");if(!e||e=="")e=d;var f={url:d,title:e};return f}return null},b.fn._toggleView=function(){var a=this.attr("id");this._setContentCode(this._getContentCode()),tinyMCE.execCommand("mceToggleEditor",!1,a)},b.fn._removeEditor=function(){var a=this.attr("id");this.data("rich_text",!1),tinyMCE&&tinyMCE.execCommand&&(tinyMCE.execCommand("mceRemoveControl",!1,a),g._removeEditorBox(a))},b.fn._setContentCode=function(a){var c=this.attr("id");g._getTextArea(c).val(a),tinyMCE.get(c)&&b.isFunction(tinyMCE.get(c).execCommand)&&tinyMCE.get(c).execCommand("mceSetContent",!1,a)},b.fn._insertHTML=function(a){var b=this.attr("id");g._getEditor(b).isHidden()?this.replaceSelection(a):tinyMCE.get(b).execCommand("mceInsertContent",!1,a)},b.fn._editorFocus=function(a){var c=this,d=c.attr("id"),e=g._getEditor(d);return a&&(!e||!e.dom.doc.hasFocus())&&setTimeout(function(){c.editorBox("focus",!0)},50),e?(g._getEditor(d).isHidden()?g._getTextArea(d).focus().select():(tinyMCE.execCommand("mceFocus",!1,d),b.publish("editorBox/focus",c)),!0):!1},b.fn._linkSelection=function(a){typeof a=="string"&&(a={url:a});var c=a.title,d=a.url||"";d.match(/@/)&&!d.match(/\//)&&!d.match(/^mailto:/)?d="mailto:"+d:!d.match(/^\w+:\/\//)&&!d.match(/^mailto:/)&&!d.match(/^\//)&&(d="http://"+d);var e=a.classes||"",h=a.text||a.title||"Link",i=a.target||null,j=b(this).attr("id");d.indexOf("@")!=-1?(a.file=!1,a.image=!1,d.indexOf("mailto:")!=0&&(d="mailto:"+d)):d.indexOf("/")==-1&&(c=d,d=d.replace(/\s/g,""),d=location.href+d),a.file&&(e+="instructure_file_link "),a.scribdable&&(e+="instructure_scribd_file ");var k="";a.kaltura_entry_id&&a.kaltura_media_type&&(k="media_comment_"+a.kaltura_entry_id,a.kaltura_media_type=="video"?e+="instructure_video_link ":e+="instructure_audio_link "),a.image&&(e+="instructure_image_thumbnail "),e=b.unique(e.split(/\s+/)).join(" ");var l="";f&&this.data("last_bookmark")&&tinyMCE.get(j).selection.moveToBookmark(this.data("last_bookmark"));var m=tinyMCE.get(j).selection,n=m.getNode();while(n.nodeName!="A"&&n.nodeName!="BODY"&&n.parentNode)n=n.parentNode;n.nodeName!="A"&&(n=null);var o=m.getContent();if(g._getEditor(j).isHidden()){l=h;var p=b("<div><a/></div>");p.find("a")[k?"attr":"removeAttr"]("id",k).attr({title:c,href:d,target:i})[e?"attr":"removeAttr"]("class",e).text(l);var q=p.html();b(this).replaceSelection(q)}else if(!o||o=="")if(n)b(n).attr({href:d,_mce_href:d,title:c||"",id:k,"class":e,target:i});else{l=h;var p=b("<div/>");p.append(b("<a/>",{id:k,target:i,title:c,href:d,"class":e}).text(l)),tinyMCE.get(j).execCommand("mceInsertContent",!1,p.html())}else tinyMCE.get(j).execCommand("mceInsertLink",!1,{target:i||"",title:c||"",href:d,"class":e,id:k});var r=tinyMCE.get(j),s=r.selection.getNode();s.nodeName!="A"&&(s=b(s).children("a:last")[0]);if(s){var t={top:s.offsetTop,left:s.offsetLeft},u=s;while((u=u.offsetParent)&&u.tagName!="BODY")t.top=t.top+u.offsetTop||0,t.left=t.left+u.offsetLeft||0;var v=r.getContainer(),w=b(v).find("iframe").offset(),x=b(r.dom.doc).find("html").scrollTop()||b(r.dom.doc).find("body").scrollTop(),y={left:w.left+t.left,top:w.top+t.top-x};b(s).indicate({offset:y,singleFlash:!0,scroll:!0,container:b(v).find("iframe")})}}}),define("jquery.instructure_forms",["INST","i18n!instructure","jquery","underscore","jquery.ajaxJSON","jquery.disableWhileLoading","jquery.google-analytics","jquery.instructure_date_and_time","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.rails_flash_notifications","tinymce.editor_box","vendor/jquery.scrollTo"],function(a,b,c,d){c.fn.formSubmit=function(b){return this.submit(function(e){var f=c(this);if(f.data("submitting"))return;f.data("trigger_event",e),f.hideErrors();var g=!1,h=f.validateForm(b);if(!h)return!1;var i=f.getFormData(b);if(b.processData&&c.isFunction(b.processData)){var j=null;try{j=b.processData.call(f,i)}catch(k){g=k}if(j===!1)return!1;j&&(i=j)}var l=f.data("method")||f.find("input[name='_method']").val()||f.attr("method"),m=f.attr("id"),n=f.attr("action"),o=null;if(c.isFunction(b.beforeSubmit)){o=null;try{o=b.beforeSubmit.call(f,i)}catch(k){g=k}if(o===!1)return!1}if(b.disableWhileLoading){var p=c.Deferred(),q={};f.disableWhileLoading(p),c.each(["success","error"],function(a,d){q[d]=b[d],b[d]=function(){p[d==="success"?"resolve":"reject"]();if(c.isFunction(q[d]))return q[d].apply(this,arguments)}})}var r=b.fileUpload;if(c.isFunction(b.fileUpload))try{r=b.fileUpload.call(f,i)}catch(k){g=k}r&&b.fileUploadOptions&&c.extend(b,b.fileUploadOptions),f.attr("action")&&(n=f.attr("action"));if(g&&!b.preventDegradeToFormSubmit){p&&p.reject(),a&&a.environment=="development"&&c.flashError("formSubmit error, trying to gracefully degrade. See console for details");return}e.preventDefault(),e.stopPropagation();if(b.noSubmit)c.isFunction(b.success)&&(p&&p.resolve(),b.success.call(f,i,o));else if(r&&b.preparedFileUpload&&b.context_code)c.ajaxJSONPreparedFiles.call(this,{handle_files:b.upload_only?b.success:b.handle_files,single_file:b.singleFile,context_code:c.isFunction(b.context_code)?b.context_code.call(f):b.context_code,asset_string:b.asset_string,intent:b.intent,folder_id:c.isFunction(b.folder_id)?b.folder_id.call(f):b.folder_id,file_elements:f.find("input[type='file']:visible"),url:b.upload_only?null:n,uploadDataUrl:b.uploadDataUrl,formData:i,formDataTarget:b.formDataTarget,success:b.success,error:b.error});else if(r&&c.handlesHTML5Files&&f.hasClass("handlingHTML5Files")){var s=c.extend({},i);f.find("input[type='file']").each(function(){var a=c(this),b=a.data("file_list");b&&b instanceof FileList&&(s[a.attr("name")]=b)}),c.toMultipartForm(s,function(a){c.sendFormAsBinary({url:n,body:a.body,content_type:a.content_type,form_data:a.form_data,method:l,success:function(a){b.success&&c.isFunction(b.success)&&b.success.call(f,a,o)},error:function(a,d){var e=f,g=!0;if(b.error&&c.isFunction(b.error)){a=a||{};var h=b.error.call(f,a.errors||a,o);h&&(e=h),g=!1}else g=!0;e.parents("html").get(0)==c("html").get(0)&&b.formErrors!==!1?e.formErrors(a,b):g&&c.ajaxJSON.unhandledXHRs.push(d)}})})}else if(r){var t=d.uniqueId(m+"_"),u=c("<div style='display: none;' id='box_"+t+"'><form id='form_"+t+"'></form><iframe id='frame_"+t+"' name='frame_"+t+"' src='about:blank' onload='$(\"#frame_"+t+'").triggerHandler("form_response_loaded");\'></iframe>').appendTo("body").find("#frame_"+t),v=c(this),w=l,x=v.attr("target"),y=v.attr("ENCTYPE"),z=new c.fakeXHR(0,""),A=f;v.attr({method:l,action:n,ENCTYPE:"multipart/form-data",encoding:"multipart/form-data",target:"frame_"+t}),b.onlyGivenParameters&&(v.find("input[name='_method']").remove(),v.find("input[name='authenticity_token']").remove()),c.ajaxJSON.storeRequest(z,n,l,i),u.bind("form_response_loaded",function(){var a=A,d=u[0],e,f;d.contentDocument?e=d.contentDocument:d.contentWindow?e=d.contentWindow.document:e=window.frames[t].document;var g="",h=null,f=null;try{if(e.location.href=="about:blank")return;g=c(e).text();var i=c.parseJSON(g);b.success&&c.isFunction(b.success)&&i&&!i.errors&&b.success.call(a,i,o)}catch(j){i={},f=j}if(f||i.errors){var k=a,l=!0;z.responseText=g;if(b.error&&c.isFunction(b.error)){var m=b.error.call(a,i.errors||g,o);m&&(k=m),l=!1}else c.fn.formSubmit.defaultAjaxErrorObject&&c.isFunction(c.fn.formSubmit.defaultAjaxErrorFunction)&&(l=!0);k.parents("html").get(0)==c("html").get(0)&&b.formErrors!==!1?k.formErrors(i.errrors||i,b):l&&c.ajaxJSON.unhandledXHRs.push(z),c.fn.defaultAjaxError.func.call(c.fn.defaultAjaxError.object,null,z,"0",f)}setTimeout(function(){a.attr({ENCTYPE:y,encoding:y,target:x}),c("#box_"+t).remove()},5e3)}),v.data("submitting",!0).submit().data("submitting",!1)}else c.ajaxJSON(n,l,i,function(a){c.isFunction(b.success)&&b.success.call(f,a,o)},function(a,d,e,g){a=a||{};var h=f,i=!0;if(c.isFunction(b.error)){var j=b.error.call(f,a.errors||a,o);j&&(h=j),i=!1}else i=!0;h.parents("html").get(0)==c("html").get(0)&&b.formErrors!==!1?h.formErrors(a,b):i&&c.ajaxJSON.unhandledXHRs.push(d)})}),this},c.handlesHTML5Files=!!(window.File&&window.FileReader&&window.FileList&&XMLHttpRequest),c.handlesHTML5Files&&c("input[type='file']").live("change",function(a){var b=this.files;b&&(c(this).data("file_list",b),c(this).parents("form").addClass("handlingHTML5Files"))}),c.ajaxFileUpload=function(a){a.data.authenticity_token||(a.data.authenticity_token=ENV.AUTHENTICITY_TOKEN),c.toMultipartForm(a.data,function(b){c.sendFormAsBinary({url:a.url,body:b.body,content_type:b.content_type,form_data:b.form_data,method:a.method,success:function(b){a.success&&c.isFunction(a.success)&&a.success.call(this,b)},progress:function(b){a.progress&&c.isFunction(a.progress)&&a.progress.call(this,b)},error:function(b,d){if(a.error&&c.isFunction(a.error)){b=b||{};var e=a.error.call(this,b.errors||b)}else c.ajaxJSON.unhandledXHRs.push(d)}},a.binary===!1)})},c.httpSuccess=function(a){try{return!a.status&&location.protocol=="file:"||a.status>=200&&a.status<300||a.status==304||jQuery.browser.safari&&a.status==undefined}catch(b){}return!1},c.sendFormAsBinary=function(a,b){var d=a.body,e=a.url,f=a.method,g=new XMLHttpRequest;g.upload&&(g.upload.addEventListener("progress",function(b){a.progress&&c.isFunction(a.progress)&&a.progress.call(this,b)},!1),g.upload.addEventListener("error",function(b){a.error&&c.isFunction(a.error)&&a.error.call(this,"uploading error",g,b)},!1),g.upload.addEventListener("abort",function(b){a.error&&c.isFunction(a.error)&&a.error.call(this,"aborted by the user",g,b)},!1),g.onreadystatechange=function(b){if(g.readyState==4){var d=null;try{d=c.parseJSON(g.responseText)}catch(e){}c.httpSuccess(g)?d&&!d.errors?a.success&&c.isFunction(a.success)&&a.success.call(this,d,g,b):a.error&&c.isFunction(a.error)&&a.error.call(this,d||g.responseText,g,b):a.error&&c.isFunction(a.error)&&a.error.call(this,d||g.responseText,g,b)}}),g.open(f,e),g.setRequestHeader("Accept","application/json, text/javascript, */*"),g.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.form_data?g.send(a.form_data):(g.overrideMimeType(a.content_type||"multipart/form-data"),g.setRequestHeader("Content-Type",a.content_type||"multipart/form-data"),g.setRequestHeader("Content-Length",d.length),b?g.send(d):g.sendAsBinary?g.sendAsBinary(d):console.log("xhr.sendAsBinary not supported"))},c.fileData=function(a){return{name:a.name||a.fileName,size:a.size||a.fileSize,type:a.type,forced_type:a.type||"application/octet-stream"}},c.toMultipartForm=function(a,b){function e(a){return a.replace(/\"/g,"")}function f(){i.body=j.substring(0,j.length-2)+"--",b(i)}function g(){if(k.length===0){f();return}var a=k.shift(),b=a[0],i=a[1];window.FileList&&i instanceof FileList&&(i=i[0]);if(window.FileList&&i instanceof FileList){var l="-----BbC04y"+d.uniqueId(),m=[];j+='Content-Disposition: form-data; name="'+e(b)+"\r\n"+"Content-Type: multipart/mixed; boundary="+l+"\r\n\r\n";for(var n in i)m.push(i);function o(){j+="--"+l+"--\r\n"+"--"+h+"\r\n",g()}function p(){if(m.length===0){o();return}var a=m.shift(),b=c.fileData(a),d=new FileReader;d.onloadend=function(){j+="--"+l+"\r\n"+'Content-Disposition: file; filename="'+e(b.name)+'"\r\n'+"Content-Type: "+b.forced_type+"\r\n"+"Content-Transfer-Encoding: binary\r\n"+"\r\n"+d.result,p()},d.readAsBinaryString(a)}p()}else if(window.File&&i instanceof File){var q=c.fileData(i),r=new FileReader;r.onloadend=function(){j+='Content-Disposition: file; name="'+e(b)+'"; filename="'+q.name+'"\r\n'+"Content-Type: "+q.forced_type+"\r\n"+"Content-Transfer-Encoding: binary\r\n"+"\r\n"+r.result+"\r\n--"+h+"\r\n",g()},r.readAsBinaryString(i)}else i&&i.fake_file?(j+='Content-Disposition: file; name="'+e(b)+'"; filename="'+i.name+'"\r\n'+"Content-Type: "+i.content_type+"\r\n"+"Content-Transfer-Encoding: binary\r\n"+"\r\n"+i.content+"\r\n--"+h+"\r\n",g()):(j+='Content-Disposition: form-data; name="'+e(b)+'"\r\n'+"\r\n"+(i||"").toString()+"\r\n"+"--"+h+"\r\n",g())}var h="-----AaB03x"+d.uniqueId(),i={content_type:"multipart/form-data; boundary="+h},j="--"+h+"\r\n",k=[],l=!1;for(var m in a)k.push([m,a[m]]),a[m]&&a[m].fake_file&&(l=!0);if(window.FormData&&!l){var n=new FormData;for(var m in a){var o=a[m];window.FileList&&o instanceof FileList&&(o=o[0]);if(o instanceof Array)for(var p=0;p<o.length;p++)n.append(m,o[p]);else n.append(m,o)}i.form_data=n,b(i);return}g()},c.fakeXHR=function(a,b){this.status=a,this.responseText=b},c.fn.defaultAjaxError=function(b){c.fn.defaultAjaxError.object=this,c.fn.defaultAjaxError.func=function(d,e,f,g){var h=a.environment=="production",i=c.inArray(e,c.ajaxJSON.unhandledXHRs)!=-1,j=c.inArray(e,c.ajaxJSON.ignoredXHRs)!=-1;if((!h||i)&&!j){c.ajaxJSON.unhandledXHRs=c.grep(c.ajaxJSON.unhandledXHRs,function(a,b){return a!=e});var k=!1;i||(k=!0),b.call(this,d,e,f,g,k)}},this.ajaxError(c.fn.defaultAjaxError.func)},c.fn.fillFormData=function(a,b){if(this.length){a=a||[];var d=c.extend({},c.fn.fillFormData.defaults,b);d.object_name&&(a=c._addObjectName(a,d.object_name,!0)),this.find(":input").each(function(){var b=c(this),e=b.attr("name"),f=b.attr("type");if(e in a&&e){if(f!="hidden"||b.next("input:checkbox").attr("name")!=e)if(f!="checkbox"&&f!="radio"){var g=a[e];if(typeof g=="undefined"||g===null)g="";b.val(g.toString())}else b.val()==a[e]?b.attr("checked",!0):b.attr("checked",!1);b&&b.change&&d.call_change&&b.change()}})}return this},c.fn.fillFormData.defaults={object_name:null,call_change:!0},c.fn.getFormData=function(a){var a=c.extend({},c.fn.getFormData.defaults,a),b={},d=this;return d.find(":input").not(":button").each(function(){var e=c(this),f=e.attr("type");if((f=="radio"||f=="checkbox")&&!e.attr("checked"))return;var g=e.val();if(e.hasClass("suggestion_title")&&e.attr("title")==g)g="";else if(e.hasClass("datetime_field_enabled")){var h=e.parent().children(".datetime_suggest").text();h&&(g=h)}try{e.data("rich_text")&&(g=e.editorBox("get_code",!1))}catch(i){}var j=e.prop("name")||"",k=j.match(/\[\]$/);if(f=="hidden"&&!k&&d.find("[name='"+j+"']").filter("textarea,:radio:checked,:checkbox:checked,:text,:password,select,:hidden")[0]!=e[0])return;j&&j!==""&&(f=="checkbox"||typeof b[j]=="undefined"||k)&&(!a.values||c.inArray(j,a.values)!=-1)&&(k?(b[j]=b[j]||[],b[j].push(g)):b[j]=g);var l=j}),a.object_name&&(b=c._stripObjectName(b,a.object_name,!0)),b},c.fn.getFormData.defaults={object_name:null},c._addObjectName=function(a,b,c){if(!a)return a;var d={};a instanceof Array&&(d=[]);var e,f,g;for(var h in a)a instanceof Array?e=a[h]:e=h,g=e.indexOf("["),g<0?f=b+"["+e+"]":f=b+"["+e.substring(0,g)+"]"+e.substring(g),typeof e=="string"&&e.indexOf("=")===0&&(f=e.substring(1),e=f),a instanceof Array?(d.push(f),c&&d.push(e)):(d[f]=a[h],c&&(d[e]=a[h]));return d},c._stripObjectName=function(a,b,c){var d={},e;a instanceof Array&&(d=[]);for(var f in a){var g,h;a instanceof Array?g=a[f]:g=f;if(h=g.indexOf(b+"[")===0)e=g.replace(b+"[",""),closing=e.indexOf("]"),e=e.substring(0,closing)+e.substring(closing+1),a instanceof Array?d.push(e):d[e]=a[f];if(!h||c)a instanceof Array?d.push(a[f]):d[f]=a[f]}return d},c.fn.validateForm=function(a){if(this.length===0)return!1;var a=c.extend({},c.fn.validateForm.defaults,a),d=this,e={},f=a.data||d.getFormData(a);a.object_name&&(a.required=c._addObjectName(a.required,a.object_name),a.date_fields=c._addObjectName(a.date_fields,a.object_name),a.dates=c._addObjectName(a.dates,a.object_name),a.times=c._addObjectName(a.times,a.object_name),a.numbers=c._addObjectName(a.numbers,a.object_name),a.property_validations=c._addObjectName(a.property_validations,a.object_name)),a.required&&c.each(a.required,function(a,c){f[c]||(e[c]||(e[c]=[]),e[c].push(b.t("errors.field_is_required","This field is required")))}),a.date_fields&&c.each(a.date_fields,function(a,c){var f=d.find("input[name='"+c+"']").filter(".datetime_field_enabled");f.length&&f.parent().children(".datetime_suggest").hasClass("invalid_datetime")&&(e[c]||(e[c]=[]),e[c].push(b.t("errors.invalid_datetime","Invalid date/time value")))}),a.numbers&&c.each(a.numbers,function(a,c){var d=parseFloat(f[c]);isNaN(d)&&(e[c]||(e[c]=[]),e[c].push(b.t("errors.invalid_number","This should be a number.")))}),a.property_validations&&c.each(a.property_validations,function(a,g){if(c.isFunction(g)){var h=g.call(d,f[a],f);h&&(typeof h!="string"&&(h=b.t("errors.invalid_entry_for_field","Invalid entry: %{field}",{field:a})),e[a]||(e[a]=[]),e[a].push(h))}});var g=!1;for(var h in e){g=!0;break}return g?(d.formErrors(e,a),c.trackEvent("Form Errors",this.attr("id")||this.attr("class")||document.title,JSON.stringify(e)),!1):!0},c.fn.validateForm.defaults={object_name:null,required:null,dates:null,times:null},c.fn.formErrors=function(a,b){if(this.length===0)return;var d=this,e={},f=[];a&&a.errors&&(a=a.errors),typeof a=="string"&&(a={base:a}),c.each(a,function(a,b){if(typeof b=="string"){var g=[];g.push(b),b=g}else{if(typeof a=="number"&&b.length==2&&b[0]instanceof jQuery&&typeof b[1]=="string"){f.push(b);return}if(typeof a=="number"&&b.length==2&&typeof b[1]=="string")g=[],g.push(b[1]),a=b[0],b=g;else try{g=[];for(var h in b)typeof b[h]=="object"&&b[h].message?g.push(b[h].message.toString()):g.push(b[h].toString());b=g}catch(i){b=b.toString()}}d.find(":input[name='"+a+"'],:input[name*='["+a+"]']").length>0?c.each(b,function(b,c){e[a]?e[a]+="<br/>"+c:e[a]=c}):c.each(b,function(a,b){e.general?e.general+="<br/>"+b:e.general=b})});var g=!1,h=0,i=c(document).scrollTop(),j={};c.each(e,function(a,b){var c=d.find(":input[name='"+a+"'],:input[name*='["+a+"]']").filter(":first");if(!c||c.length===0||a=="general")c=d;c[0].tagName=="TEXTAREA"&&c.next(".mceEditor").length&&(c=c.next().find(".mceIframeContainer")),j[a]={object:c,message:b},g=!0;var e=c.errorBox(b).offset();e.top>h&&(h=e.top)});for(var k in f){var l=f[k][0],m=f[k][1];g=!0;var n=l.errorBox(m).offset();n.top>h&&(h=n.top)}return g&&(b&&b.onFormError&&b.onFormError.call(d,j),c("html,body").scrollTo({top:h,left:0})),this},c.fn.errorBox=function(a,b){if(this.length){var d=this,e=d.data("associated_error_box");e&&e.remove();var f=c("#error_box_template");f.length||(f=c("<div id='error_box_template' class='error_box errorBox' style=''><div class='error_text' style=''></div><img src='/images/error_bottom.png' class='error_bottom'/></div>").appendTo("body"));var g=f.clone(!0).attr("id","").css("zIndex",d.zIndex()+1).appendTo("body");g.find(".error_text").html(a);var h=d.offset(),i=g.outerHeight(),j=Math.round(d.outerWidth()/5);return d[0].tagName=="FORM"&&(j=Math.min(j,50)),g.hide().css({top:h.top-i+2,left:h.left+j}).fadeIn("fast"),d.data({associated_error_box:g,associated_error_object:d}).focus(function(){g.fadeOut("slow",function(){g.remove()})}),g.click(function(){c(this).fadeOut("fast",function(){c(this).remove()})}),c.fn.errorBox.errorBoxes.push(d),c.fn.errorBox.isBeingAdjusted||c.moveErrorBoxes(),b&&c("html,body").scrollTo(g),g}},c.fn.errorBox.errorBoxes=[],c.moveErrorBoxes=function(){var a=[],b=c.fn.errorBox.errorBoxes;for(var d in b){var e=b[d],f=e.data("associated_error_box");if(f.length&&f[0].parentNode){a.push(e);if(e.filter(":visible").length){var g=e.offset(),h=f.outerHeight(),i=Math.round(e.outerWidth()/5);e[0].tagName=="FORM"&&(i=Math.min(i,50)),f.css({top:g.top-h+2,left:g.left+i}).show()}else f.hide()}}c.fn.errorBox.errorBoxes=a,a.length?c.fn.errorBox.isBeingAdjusted=setTimeout(c.moveErrorBoxes,500):delete c.fn.errorBox.isBeingAdjusted},c.fn.hideErrors=function(a){if(this.length){var b=this.data("associated_error_box");b&&(b.remove(),this.data("associated_error_box",null)),this.find(":input").each(function(){var a=c(this),b=a.data("associated_error_box");b&&(b.remove(),a.data("associated_error_box",null))})}return this},c.fn.formSuggestion=function(){return this.each(function(){var a=c(this);a.focus(function(a){var b=c(this),d=b.attr("title");b.addClass("suggestionFocus");if(!d||d==="")return;b.val()==d&&b.select(),b.removeClass("form_text_hint")}).blur(function(a){var b=c(this),d=b.attr("title");b.removeClass("suggestionFocus");if(!d||d==="")return;b.val()===""&&b.val(d),b.val()==d&&b.addClass("form_text_hint")}).mouseup(!1).change(function(a){var b=c(this),d;!b.hasClass("suggestionFocus")&&(d=c(this).attr("title"))&&(b.removeClass("suggestionFocus"),b.val()===""&&b.val(d),b.toggleClass("form_text_hint",b.val()==d))}).addClass("suggestion_title");var b=a.attr("title"),d=a.val();b&&(d===""||d==b)&&a.addClass("form_text_hint").val(b)})},c.fn.formSuggestion.suggestions=[]}),define("jquery.ajaxJSON",["jquery","jquery.instructure_forms"],function(a){a.originalGetJSON=a.getJSON,a.getJSON=function(b,c,d){var e=a.originalGetJSON(b,c,d);return a.ajaxJSON.storeRequest(e,b,"GET",c),e};var b=function(a,b){if(!a[b])throw b+" option is required"};a.ajaxJSONPreparedFiles=function(c){b(c,"context_code");var d=[],e=this,f=c.files||c.file_elements||[];for(var g=0;g<f.length;g++){var h=f[g];h.name=(h.value||h.name).split(/(\/|\\)/).pop(),d.push(h)}var i=[],j=function(){var b=c.formDataTarget=="url"?c.formData:{};if(c.handle_files){var d=i;c.single_file&&(d=i[0]),b=c.handle_files.call(this,d,b)}c.url&&c.success&&b!==!1&&a.ajaxJSON(c.url,c.method,b,c.success,c.error)},k=function(b,d){a.ajaxJSON(c.uploadDataUrl||"/files/pending","POST",b,function(b){try{if(b&&b.upload_url){var f=b.upload_params,g=a(d).attr("name");a(d).attr("name",b.file_param),a.ajaxJSONFiles(b.upload_url,"POST",f,a(d),function(b){i.push(b),a(d).attr("name",g),l.call(e)},function(b){a(d).attr("name",g),(c.upload_error||c.error).call(e,b)},{onlyGivenParameters:b.remote_url})}else(c.upload_error||c.error).call(e,b)}catch(h){var j=h}},function(){return(c.upload_error||c.error).apply(this,arguments)})},l=function(){var b=d.shift();b?k.call(e,a.extend({"attachment[folder_id]":c.folder_id,"attachment[intent]":c.intent,"attachment[asset_string]":c.asset_string,"attachment[filename]":b.name,"attachment[context_code]":c.context_code},c.formDataTarget=="uploadDataUrl"?c.formData:{}),b):j.call(e)};l.call(e)},a.ajaxJSONFiles=function(b,c,d,e,f,g,h){var i=a(document.createElement("form"));i.attr("action",b).attr("method",c),d.authenticity_token||(d.authenticity_token=a("#ajax_authenticity_token").text());var j={};e.each(function(){j[a(this).attr("name")]=!0});for(var k in d)if(!j[k]){var l=a(document.createElement("input"));l.attr("type","hidden").attr("name",k).attr("value",d[k]),i.append(l)}e.each(function(){var b=a(this).clone(!0);a(this).after(b),i.append(a(this)),a(this).removeAttr("id")}),a("body").append(i.hide()),i.formSubmit({fileUpload:!0,success:f,onlyGivenParameters:h?h.onlyGivenParameters:!1,error:g}),function(){i.submit()}.call(i)},a.ajaxJSON=function(b,c,d,e,f,g){d=d||{};if(!b&&f){f(null,null,"URL required for requests",null);return}b=b||".",c!="GET"&&(d._method=c,c="POST",d.authenticity_token||(d.authenticity_token=a("#ajax_authenticity_token").text())),a("#page_view_id").length>0&&!d.page_view_id&&(!g||!g.skipPageViewLog)&&(d.page_view_id=a("#page_view_id").text());var h=function(b,c,d){var e=b;if(b.responseText){var h=b.responseText.replace(/(<([^>]+)>)/ig,"");e={message:h};try{e=a.parseJSON(b.responseText)}catch(i){}}g&&g.skipDefaultError&&a.ajaxJSON.ignoredXHRs.push(b),f&&a.isFunction(f)?f(e,b,c,d):a.ajaxJSON.unhandledXHRs.push(b)},i={url:b,dataType:"json",type:c,success:function(b){b=b||{};var c=null;j&&j.getResponseHeader&&(c=j.getResponseHeader("X-Canvas-Page-View-Id"))&&setTimeout(function(){a(document).triggerHandler("page_view_id_received",c)},50),!b.length&&b.errors?(h(b.errors,null,""),!g||!g.skipDefaultError?a.fn.defaultAjaxError.func.call(a.fn.defaultAjaxError.object,null,b,"0",b.errors):a.ajaxJSON.ignoredXHRs.push(j)):e&&a.isFunction(e)&&e(b,j)},error:function(){h.apply(this,arguments)},data:d};g&&g.timeout&&(i.timeout=g.timeout);var j=a.ajax(i);return a.ajaxJSON.storeRequest(j,b,c,d),j},a.ajaxJSON.unhandledXHRs=[],a.ajaxJSON.ignoredXHRs=[],a.ajaxJSON.passedRequests=[],a.ajaxJSON.storeRequest=function(b,c,d,e){a.ajaxJSON.passedRequests.push({xhr:b,url:c,submit_type:d,data:e})},a.ajaxJSON.findRequest=function(b){var c=a.ajaxJSON.passedRequests;for(var d in c)if(c[d]&&c[d].xhr==b)return c[d];return null}}),define("jquery.instructure_misc_helpers",["INST","i18n!instructure","jquery","underscore","str/htmlEscape","jquery.ajaxJSON","jquery.instructure_forms","jqueryui/dialog","vendor/jquery.scrollTo"],function(a,b,c,d,e){c.detect=function(a,b){var d;return c.each(a,function(c,e){if(b.call(e,e,c,a))return d=e,!1}),d},c.mimeClass=function(a){return{"video/mp4":"video","application/x-rar-compressed":"zip","application/vnd.oasis.opendocument.spreadsheet":"xls","application/x-docx":"doc","application/x-shockwave-flash":"flash","audio/x-mpegurl":"audio","image/png":"image","text/xml":"code","video/x-ms-asf":"video","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xls","text/html":"html","video/x-msvideo":"video","audio/x-pn-realaudio":"audio","application/x-zip-compressed":"zip","text/css":"code","video/x-sgi-movie":"video","audio/x-aiff":"audio","application/zip":"zip","application/xml":"code","application/x-zip":"zip","text/rtf":"doc",text:"text","video/mpeg":"video","video/quicktime":"video","audio/3gpp":"audio","audio/mid":"audio","application/x-rar":"zip","image/x-psd":"image","application/vnd.ms-excel":"xls","application/msword":"doc","video/x-la-asf":"video","image/gif":"image","application/rtf":"doc","video/3gpp":"video","image/pjpeg":"image","image/jpeg":"image","application/vnd.oasis.opendocument.text":"doc","audio/x-wav":"audio","audio/basic":"audio","audio/mpeg":"audio","application/vnd.openxmlformats-officedocument.presentationml.presentation":"ppt","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"doc","application/pdf":"pdf","text/plain":"text","text/x-csharp":"code"}[a]||"file"},c.encodeToHex=function(a){var b="",c=a.length,d=0,e;for(var f=0;f<a.length;f++){part=a.charCodeAt(f).toString(16);while(part.length<2)part="0"+part;b+=part}return b},c.decodeFromHex=function(a){var b="",c=0;while(c<a.length)b+=unescape("%"+a.substring(c,c+2)),c+=2;return b},c.raw=function(a){return a=new String(a),a.htmlSafe=!0,a},c.replaceOneTag=function(a,b,c){if(!a)return a;b=(b||"").toString(),c=(c||"").toString().replace(/\s/g,"+");var d=new RegExp("(%7B|{){2}[\\s|%20|+]*"+b+"[\\s|%20|+]*(%7D|}){2}","g");return a.replace(d,c)},c.replaceTags=function(a,b,d){if(typeof b=="object"){for(var e in b)a=c.replaceOneTag(a,e,b[e]);return a}return c.replaceOneTag(a,b,d)};var f=!1;c.scrollSidebar=function(){if(!f){var a=c("#right-side"),b=c("body"),e=c("#main"),g=c("#not_right_side"),h=c(window),i=a.offset().top,j=c("#right-side-wrapper").height()-a.outerHeight();function k(){var c=h.scrollTop(),d=c>i;if(d)var f=g.height(),k=a.height(),l=f>k,m=i+e.height()-c<=k+j;(d&&l&&!m)^b.hasClass("with-scrolling-right-side")&&b.toggleClass("with-scrolling-right-side"),(d&&l&&m)^b.hasClass("with-sidebar-pinned-to-bottom")&&b.toggleClass("with-sidebar-pinned-to-bottom")}var l=d.throttle(k,50);l(),h.scroll(l),setInterval(l,1e3),f=!0}},c.underscore=function(a){return(a||"").replace(/([A-Z])/g,"_$1").replace(/^_/,"").toLowerCase()},c.titleize=function(a){var b=(a||"").replace(/([A-Z])/g," $1").replace(/_/g," ").replace(/\s+/," ").replace(/^\s/,"");return c.map(b.split(/\s/),function(a){return(a[0]||"").toUpperCase()+a.substring(1)}).join(" ")},c.parseUserAgentString=function(a){a=(a||"").toLowerCase();var c={version:(a.match(/.+(?:me|ox|it|ra|ie|er)[\/: ]([\d.]+)/)||[0,null])[1],chrome:/chrome/.test(a),safari:/webkit/.test(a),opera:/opera/.test(a),msie:/msie/.test(a)&&!/opera/.test(a),firefox:/firefox/.test(a),mozilla:/mozilla/.test(a)&&!/(compatible|webkit)/.test(a),speedgrader:/speedgrader/.test(a)},d=null;return c.chrome?d="Chrome":c.safari?d="Safari":c.opera?d="Opera":c.msie?d="Internet Explorer":c.firefox?d="Firefox":c.mozilla?d="Mozilla":c.speedgrader&&(d="SpeedGrader for iPad"),d?c.version&&(c.version=c.version.split(/\./).slice(0,2).join("."),d=d+" "+c.version):d=b.t("browsers.unrecognized","Unrecognized Browser"),d},c.fileSize=function(a){var b=1024;return a<b?parseInt(a,10)+" bytes":a<b*b?parseInt(a/b,10)+"KB":Math.round(10*a/b/b)/10+"MB"},c.getUserServices=function(a,b,d){c.isArray(a)||(a=[a]);var e="/services?service_types="+a.join(",");c.ajaxJSON(e,"GET",{},function(a){b&&b(a)},function(a){d&&d(a)})};var g;c.findLinkForService=function(a,d){var f=c("#instructure_bookmark_search");f.length||(f=c("<div id='instructure_bookmark_search'/>"),f.append("<form id='bookmark_search_form' style='margin-bottom: 5px;'><img src='/images/blank.png'/>&nbsp;&nbsp;<input type='text' class='query' style='width: 230px;'/><button class='button search_button' type='submit'>"+e(b.t("buttons.search","Search"))+"</button></form>"),f.append("<div class='results' style='max-height: 200px; overflow: auto;'/>"),f.find("form").submit(function(d){d.preventDefault(),d.stopPropagation();var h=new Date;if(a=="diigo"&&g&&h-g<15e3){setTimeout(function(){f.find("form").submit()},15e3-(h-g)),f.find(".results").empty().append(e(b.t("status.diigo_search_throttling","Diigo limits users to one search every ten seconds.  Please wait...")));return}f.find(".results").empty().append(e(b.t("status.searching","Searching..."))),g=new Date;var i=f.find(".query").val(),j=c.replaceTags(f.data("reference_url"),"query",i);c.ajaxJSON(j,"GET",{},function(a){f.find(".results").empty(),a.length||f.find(".results").append(e(b.t("no_results_found","No Results Found")));for(var d in a)a[d].short_title=a[d].title,a[d].title==a[d].description&&(a[d].short_title=c.truncateText(a[d].description,30)),c("<div class='bookmark'/>").appendTo(f.find(".results")).append(c('<a class="bookmark_link" style="font-weight: bold;"/>').attr({href:a[d].url,title:a[d].title}).text(a[d].short_title)).append(c("<div style='margin: 5px 10px; font-size: 0.8em;'/>").text(a[d].description||b.t("no_description","No description")))},function(){f.find(".results").empty().append(e(b.t("errors.search_failed","Search failed, please try again.")))})}),f.delegate(".bookmark_link","click",function(a){a.preventDefault();var b=c(this).attr("href"),e=c(this).attr("title")||c(this).text();f.dialog("close"),d({url:b,title:e})})),f.find(".search_button").text(a=="delicious"?b.t("buttons.search_by_tag","Search by Tag"):b.t("buttons.search","Search")),f.find("form img").attr("src","/images/"+a+"_small_icon.png");var h="/search/bookmarks?q=%7B%7B+query+%7D%7D&service_type=%7B%7B+service_type+%7D%7D";h=c.replaceTags(h,"service_type",a),f.data("reference_url",h),f.find(".results").empty().end().find(".query").val(""),f.dialog("close").dialog({autoOpen:!1,title:b.t("titles.bookmark_search","Bookmark Search: %{service_name}",{service_name:c.titleize(a)}),open:function(){f.find("input:visible:first").focus().select()},width:400}).dialog("open")},c.findImageForService=function(a,d){var f=c("#instructure_image_search");f.find("button").attr("disabled",!1),f.length||(f=c("<div id='instructure_image_search'/>").append("<form id='image_search_form' style='margin-bottom: 5px;'><img src='/images/flickr_creative_commons_small_icon.png'/>&nbsp;&nbsp;<input type='text' class='query' style='width: 250px;' title='"+e(b.t("tooltips.enter_search_terms","enter search terms"))+"'/>"+"<button class='button' type='submit'>"+e(b.t("buttons.search","Search"))+"</button></form>").append("<div class='results' style='max-height: 240px; overflow: auto;'/>"),f.find("form .query").formSuggestion(),f.find("form").submit(function(a){a.preventDefault(),a.stopPropagation();var d=new Date;f.find("button").attr("disabled",!0),f.find(".results").empty().append(b.t("status.searching","Searching...")),f.bind("search_results",function(a,d){f.find("button").attr("disabled",!1);if(d&&d.photos&&d.photos.photo){f.find(".results").empty();for(var g in d.photos.photo){var h=d.photos.photo[g],i="https://farm"+h.farm+".static.flickr.com/"+h.server+"/"+h.id+"_"+h.secret+"_s.jpg",j="https://farm"+h.farm+".static.flickr.com/"+h.server+"/"+h.id+"_"+h.secret+".jpg",k="https://secure.flickr.com/photos/"+h.owner+"/"+h.id;f.find(".results").append(c('<div class="image" style="float: left; padding: 2px; cursor: pointer;"/>').append(c("<img/>",{data:{source:k,big_image_url:j},"class":"image_link",src:i,title:"embed "+(h.title||""),alt:h.title||""})))}}else f.find(".results").empty().append(e(b.t("errors.search_failed","Search failed, please try again.")))});var g=encodeURIComponent(f.find(".query").val());c.getScript("https://secure.flickr.com/services/rest/?method=flickr.photos.search&format=json&api_key=734839aadcaa224c4e043eaf74391e50&per_page=25&license=1,2,3,4,5,6&sort=relevance&text="+g)}),f.delegate(".image_link","click",function(a){a.preventDefault(),f.dialog("close"),d({image_url:c(this).data("big_image_url")||c(this).attr("src"),link_url:c(this).data("source"),title:c(this).attr("alt")})})),f.find("form img").attr("src","/images/"+a+"_small_icon.png");var g=c("#editor_tabs .bookmark_search_url").attr("href");g=c.replaceTags(g,"service_type",a),f.data("reference_url",g||""),f.find(".results").empty(),f.find(".query").val(""),f.dialog({title:b.t("titles.image_search","Image Search: %{service_name}",{service_name:c.titleize(a)}),width:440,open:function(){f.find("input:visible:first").focus().select()},height:320})},c.truncateText=function(a,b){b=b||30;if(!a)return"";var c=(a||"").split(/\s/),d="",e=!1;for(var f in c){var g=c[f];e||(g&&d.length<b?(d.length>0&&(d+=" "),d+=g):(e=!0,d+="..."))}return d},c.toSentence=function(a,d){typeof d=="undefined"?d={}:d=="or"&&(d={two_words_connector:b.t("#support.array.or.two_words_connector"),last_word_connector:b.t("#support.array.or.last_word_connector")}),d=c.extend({words_connector:b.t("#support.array.words_connector"),two_words_connector:b.t("#support.array.two_words_connector"),last_word_connector:b.t("#support.array.last_word_connector")},d);switch(a.length){case 0:return"";case 1:return""+a[0];case 2:return a[0]+d.two_words_connector+a[1];default:return a.slice(0,-1).join(d.words_connector)+d.last_word_connector+a[a.length-1]}},c.queryParam=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(window.location.search);return c==null?c:decodeURIComponent(c[1].replace(/\+/g," "))},c.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},a.youTubeRegEx=/^https?:\/\/(www\.youtube\.com\/watch.*v(=|\/)|youtu\.be\/)([^&#]*)/,c.youTubeID=function(b){var c=b.match(a.youTubeRegEx);return c&&c[c.length-1]?c[c.length-1]:null}}),function(){var a=[].slice;define("compiled/handlebars_helpers",["vendor/handlebars.vm","i18nObj","jquery","underscore","str/htmlEscape","compiled/util/semanticDateRange","jquery.instructure_date_and_time","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins"],function(b,c,d,e,f,g){var h,i,j;j={t:function(a,b,e){var f,g,h;g={},e=(h=e!=null?e.hash:void 0)!=null?h:{};for(a in e){f=e[a];if(!a.match(/^w\d+$/))continue;g[(new Array(parseInt(a.replace("w",""))+2)).join("*")]=f,delete e[a]}return g["*"]&&(e.wrapper=g),this instanceof String||typeof this=="string"||(e=d.extend(e,this)),c.scoped(e.scope).t(a,b,e)},hiddenIf:function(a){if(a)return" display:none; "},hiddenUnless:function(a){if(!a)return" display:none; "},semanticDateRange:function(){return new b.SafeString(g.apply(null,arguments))},friendlyDatetime:function(a,c){var e,f;return f=c.hash.pubdate,e=d.parseFromISO(a),new b.SafeString("<time title='"+e.datetime_formatted+"' datetime='"+e.datetime.toISOString()+"' "+(f?"pubdate":void 0)+">"+d.friendlyDatetime(e.datetime)+"</time>")},datetimeFormatted:function(a){return a.datetime||(a=d.parseFromISO(a)),a.datetime_formatted},dateToString:function(a,b){return a==null&&(a=""),a.toString(b)},mimeClass:function(a){return d.mimeClass(a)},convertNativeToMediaCommentThumnail:function(a){var c;return c=d("<div />").html(a),c.find("video.instructure_inline_media_comment,audio.instructure_inline_media_comment").replaceWith(function(){return d("<a id='media_comment_"+d(this).data("media_comment_id")+"'              data-media_comment_type='"+d(this).data("media_comment_type")+"'              class='instructure_inline_media_comment' />")}),new b.SafeString(c.html())},newlinesToBreak:function(a){return new b.SafeString(f(a).replace(/\n/g,"<br />"))},ifEqual:function(){var b,c,d,e,f,g,i,j;e=arguments[0],c=3>arguments.length?(f=1,[]):a.call(arguments,1,f=arguments.length-1),j=arguments[f++],h=j.fn,d=j.inverse;for(g=0,i=c.length;g<i;g++){b=c[g];if(b!==e)return d(this);e=b}return h(this)},ifAll:function(){var b,c,d,e,f,g,i;c=2>arguments.length?(e=0,[]):a.call(arguments,0,e=arguments.length-1),i=arguments[e++],h=i.fn,d=i.inverse;for(f=0,g=c.length;f<g;f++){b=c[f];if(!b)return d(this)}return h(this)},eachWithIndex:function(a,b){var c,d,e,f;h=b.fn,e=b.inverse,f="";if(a&&a.length>0)for(d in a)c=a[d],c._index=d,f+=h(c);else f=e(this);return f},eachProp:function(a,b){var c;return function(){var d;d=[];for(c in a)d.push(b.fn({property:c,value:a[c]}));return d}().join("")},toSentence:function(a,b){var c;return c=e.map(a,function(a){return b.fn(a)}),d.toSentence(c)}};for(i in j)h=j[i],b.registerHelper(i,h);return b})}.call(this),define("jst/courseList/wrapper",["compiled/handlebars_helpers","i18n!course_list.wrapper"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["courseList/wrapper"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<div class="customListWrapper">\n  <a class="customListClose" title=\'',g="close",h="close_course_menu_title",i={},j="courseList.wrapper",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='\'></a>\n  <button class="button small-button customListRestore">',g="Reset",h="reset_course_menu",i={},j="courseList.wrapper",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+='</button>\n  <ul class="customListContent menu-item-drop-column-list"></ul>\n</div>',f}),c["courseList/wrapper"]}),define("jst/courseList/content",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["courseList/content"]=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+='\n  <li class="customListItem" data-id="',e=c.id||a.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"id",{hash:{}})),d+=n(e)+'">\n    <a href="',e=c.href||a.href,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"href",{hash:{}})),d+=n(e)+'">\n      <span class="name ellipsis" title="',e=c.longName||a.longName,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"longName",{hash:{}})),d+=n(e)+'">',e=c.shortName||a.shortName,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"shortName",{hash:{}})),d+=n(e)+"</span>\n      ",e=c.term||a.term,f=c["if"],i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+='\n      <span class="subtitle ellipsis">',e=c.subtitle||a.subtitle,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"subtitle",{hash:{}})),d+=n(e)+"</span>\n    </a>\n  </li>\n",d}function p(a,b){var d="",e;return d+='\n        <span class="subtitle ellipsis enrollment_term menu-item-drop-float-right">',e=c.term||a.term,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"term",{hash:{}})),d+=n(e)+"</span>\n      ",d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;g=c.items||b.items,h=c.each,i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n",f}),c["courseList/content"]}),function(){define("compiled/widget/CustomList",["jquery","compiled/util/objectCollection","jst/courseList/wrapper","jst/courseList/content","jquery.ajaxJSON"],function(a,b,c,d){var e;return e=function(){function e(b,c,d){this.options=a.extend({},this.options,d),this.appendTarget=a(this.options.appendTarget),this.element=a(b),this.targetList=this.element.find("> ul"),this.wrapper=a(this.options.wrapper({})),this.sourceList=this.wrapper.find("> ul"),this.contentTemplate=this.options.content,this.ghost=a("<ul/>").addClass("customListGhost"),this.requests={add:{},remove:{}},this.doc=a(document.body),this.attach(),this.setItems(c),this.options.autoOpen&&this.open()}return e.name="CustomList",e.prototype.options={animationDuration:200,model:"Course",dataAttribute:"id",wrapper:c,content:d,url:"/favorites",appendTarget:"body",resetCount:12,onToggle:!1},e.prototype.open=function(){var a=this;return this.wrapper.appendTo(this.appendTarget).show(),setTimeout(function(){var b;return a.element.addClass("customListEditing"),typeof (b=a.options).onToggle=="function"?b.onToggle(!0):void 0},1)},e.prototype.close=function(){var a,b=this;this.wrapper.hide(0,function(){return b.teardown()}),this.element.removeClass("customListEditing"),typeof (a=this.options).onToggle=="function"&&a.onToggle(!1);if(this.pinned.length===0)return this.resetList()},e.prototype.attach=function(){return this.element.delegate(".customListOpen","click",a.proxy(this,"open")),this.wrapper.delegate(".customListClose","click",a.proxy(this,"close")),this.wrapper.delegate(".customListRestore","click",a.proxy(this,"reset")),this.wrapper.delegate("a","click.customListTeardown",function(a){return a.preventDefault()}),this.wrapper.delegate(".customListItem","click.customListTeardown",a.proxy(this,"sourceClickHandler"))},e.prototype.teardown=function(){return this.wrapper.detach()},e.prototype.add=function(a,b){var c,d,e,f;return e=this.items.findBy("id",a),c=b.clone().hide(),e.element=c,b.addClass("on"),this.pinned.push(e),this.pinned.sortBy("shortName"),d=this.pinned.indexOf(e)+1,f=this.targetList.find("li:nth-child("+d+")"),f.length!==0?c.insertBefore(f):c.appendTo(this.targetList),c.slideDown(this.options.animationDuration),this.animateGhost(b,c),this.onAdd(e)},e.prototype.animateGhost=function(a,b){var c,d,e,f=this;return d=a.offset(),e=b.offset(),c=a.clone(),d.position="absolute",this.ghost.append(c),this.ghost.appendTo(this.doc).css(d).animate(e,this.options.animationDuration,function(){return f.ghost.detach().empty()})},e.prototype.remove=function(a,b){var c=this;return b.removeClass("on"),this.animating=!0,this.onRemove(a),a.element.slideUp(this.options.animationDuration,function(){return a.element.remove(),c.pinned.eraseBy("id",a.id),c.animating=!1})},e.prototype.abortAll=function(){var a,b,c,d,e;c=this.requests.add;for(a in c)b=c[a],b.abort();d=this.requests.remove,e=[];for(a in d)b=d[a],e.push(b.abort());return e},e.prototype.reset=function(){var b,c=this;return this.abortAll(),b=function(){return delete c.requests.reset},this.requests.reset=a.ajaxJSON(this.options.url+"/"+this.options.model,"DELETE",{},b,b),this.resetList()},e.prototype.resetList=function(){var a,b;return a=this.items.slice(0,this.options.resetCount),b=this.contentTemplate({items:a}),this.targetList.empty().html(b),this.setPinned()},e.prototype.onAdd=function(b){var c,d,e,f,g=this;if(this.requests.remove[b.id]){this.requests.remove[b.id].abort();return}return f=function(){var a;return a=[].slice.call(arguments),a.unshift(b.id),g.addSuccess.apply(g,a)},d=function(){var a;return a=[].slice.call(arguments),a.unshift(b.id),g.addError.apply(g,a)},c={favorite:{context_type:this.options.model,context_id:b.id}},e=a.ajaxJSON(this.options.url,"POST",c,f,d),this.requests.add[b.id]=e},e.prototype.onRemove=function(b){var c,d,e,f,g=this;if(this.requests.add[b.id]){this.requests.add[b.id].abort();return}return e=function(){var a;return a=[].slice.call(arguments),a.unshift(b.id),g.removeSuccess.apply(g,a)},c=function(){var a;return a=[].slice.call(arguments),a.unshift(b.id),g.removeError.apply(g,a)},f=this.options.url+"/"+b.id,d=a.ajaxJSON(f,"DELETE",{context_type:this.options.model},e,c),this.requests.remove[b.id]=d},e.prototype.addSuccess=function(a){return delete this.requests.add[a]},e.prototype.addError=function(a){return delete this.requests.add[a]},e.prototype.removeSuccess=function(a){return delete this.requests.remove[a]},e.prototype.removeError=function(a){return delete this.requests.remove[a]},e.prototype.setItems=function(a){var c;return this.items=b(a),this.items.sortBy("shortName"),c=this.contentTemplate({items:this.items}),this.sourceList.html(c),this.setPinned()},e.prototype.setPinned=function(){var c,d,e,f,g,h,i=this;this.pinned=b([]),this.element.find("> ul > li").each(function(b,c){var d,e;c=a(c),d=c.data("id"),e=i.items.findBy("id",d);if(!e)return;return e.element=c,i.pinned.push(e)}),this.wrapper.find("ul > li").removeClass("on"),g=this.pinned,h=[];for(e=0,f=g.length;e<f;e++)c=g[e],d=this.wrapper.find("ul > li[data-id="+c.id+"]"),h.push(d.addClass("on"));return h},e.prototype.sourceClickHandler=function(b){return this.checkElement(a(b.currentTarget))},e.prototype.checkElement=function(a){var b,c;if(this.animating||this.requests.reset)return;return b=a.data("id"),c=this.pinned.findBy("id",b),c?this.remove(c,a):this.add(b,a)},e}()})}.call(this),function(){define("compiled/widget/courseList",["jquery","compiled/widget/CustomList","jst/courseList/wrapper","jst/courseList/content","vendor/jquery.ba-tinypubsub"],function(a,b,c,d){return{init:function(){return a(function(){var e,f,g;e=a("#menu_enrollments"),f=e.closest(".menu-item-drop");if(e.length===0)return;return a.subscribe("menu/hovered",g=function(h){var i;if(!$(h).find(e).find(".customListOpen").length)return;return a.unsubscribe("menu/hovered",g),i=!1,e.delegate(".customListOpen","click",function(){return i=!0}),a.getJSON("/all_menu_courses",function(a){var e;return e=new b("#menu_enrollments",a,{appendTarget:"#menu_enrollments",autoOpen:i,wrapper:c,content:d,onToggle:function(a){return f.toggleClass("menuCustomListEditing",a)}})})})})}}})}.call(this),define("jst/helpDialog",["compiled/handlebars_helpers","i18n!help_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.helpDialog=b(function(a,b,c,d,e){function q(a,b){var d="",e,f;d+='\n      <li>\n        <a href="',e=c.url||a.url,f=c["if"],k=l.program(2,r,b),k.hash={},k.fn=k,k.inverse=l.program(4,s,b),e=f.call(a,e,k);if(e||e===0)d+=e;return d+='" target="_blank">\n          <span class="text">',e=c.text||a.text,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"text",{hash:{}})),d+=p(e)+'</span>\n          <span class="subtext">',e=c.subtext||a.subtext,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"subtext",{hash:{}})),d+=p(e)+"</span>\n        </a>\n      </li>\n    ",d}function r(a,b){var d;return d=c.url||a.url,typeof d===m?d=d.call(a,{hash:{}}):d===o&&(d=n.call(a,"url",{hash:{}})),p(d)}function s(a,b){return"#"}function t(a,b){var d="",e,f,g,h;d+='\n      <div class="ui-state-error">\n        <span class="ui-icon ui-icon-alert"></span>\n        <strong>',e="Wait! A *better browser* may help solve the problem.",f="wait_a_better_browser_may_help_solve_the_problem",g={},h="helpDialog",g.scope=h,h='<a target="_blank" href="http://guides.instructure.com/s/2204/m/4214/l/41056-Which-browsers-does-Canvas-support-">$1</a>',g.w0=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+="</strong>\n        <div>",e="You are using Internet Explorer version %{browserVersion}, Try again using the latest version of *Chrome* or **Firefox**",f="you_are_using_browser_version_version_try_again_using_the_latest_version_of_chrome_or_firefox",g={},h="helpDialog",g.scope=h,h='<a href="http://getfirefox.com">$1</a>',g.w1=h,h='<a href="http://google.com/chrome">$1</a>',g.w0=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</div>\n      </div>\n    ",d}function u(a,b){var d="",e,f,g,h;d+='\n      <div class="ui-state-highlight">\n        <span class="ui-icon ui-icon-info"></span>\n        <strong>',e="For an instant answer:",f="for_an_instant_answer",g={},h="helpDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+="</strong>\n        <div>",e="See if your issue is addressed in the *Canvas Guides*.",f="see_if_your_issue_is_addressed_in_the_canvas_guides",g={},h="helpDialog",g.scope=h,h='<a target="_blank" href="http://guides.instructure.com/">$1</a>',g.w0=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</div>\n      </div>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<div id="help-dialog">\n  <ul id="help-dialog-options" class="help-dialog-pane">\n    ',g=c.helpLinks||b.helpLinks,h=c.each,k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n  </ul>\n  <form class="help-dialog-pane" id="teacher_feedback" style="display:none" action="/api/v1/conversations" method="POST">\n    <label for="teacher-feedback-recipients">\n      ',g="Which course is this question about?",h="which_course_is_this_question_about",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n      <small>",g="Message will be sent to all the Teachers / TA's in the course.",h="message_will_be_sent_to_all_the_teachers_tas_in_the_course",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</small>\n    </label>\n    <select name="recipients[]" id="teacher-feedback-recipients"></select>\n    <label for="teacher-feedback-body">',g="Message",h="message",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n    <textarea id="teacher-feedback-body" name="body"></textarea>\n    <div class="button-container">\n      <button type="submit" class="button" data-text-while-loading="',g="Sending...",h="sending",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">',g="Send Message",h="send_message",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</button>\n    </div>\n  </form>\n  <form class="help-dialog-pane" id="create_ticket" style="display:none" action="/errors" method="POST">\n    <h4>',g="File a ticket for a personal response from our support team",h="file_a_ticket_for_a_personal_response_from_our_support_team",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</h4>\n    ",g=c.showBadBrowserMessage||b.showBadBrowserMessage,h=c["if"],k=l.program(6,t,e),k.hash={},k.fn=k,k.inverse=l.program(8,u,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n    <div>\n      <label for="error_subject">',g="Subject",h="subject",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n      <input id="error_subject" name="error[subject]" />\n    </div>\n    <div>\n      <label for="error-comments">\n        ',g="Description",h="description",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n        <small>",g="Include a link to a screencast/screenshot using something like *Jing*.",h="include_a_link_to_a_screencast_or_screenshot_using_something_like_jing",i={},j="helpDialog",i.scope=j,j='<a target="_blank" href="http://www.techsmith.com/download/jing">$1</a>',i.w0=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</small>\n      </label>\n      <textarea id="error-comments" name="error[comments]"></textarea>\n    </div>\n    <label for="severity">',g="How is this affecting you?",h="how_is_this_affecting_you",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n    <select name="error[user_perceived_severity]" id="severity">\n      <option value="">',g="Please select one...",h="please_select_one",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="just_a_comment">',g="Just a casual question, comment, idea, suggestion",h="just_a_casual_question_comment_idea_suggestion",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="not_urgent">',g="I need some help but it's not urgent",h="i_need_some_help_but_its_not_urgent",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="workaround_possible">',g="Something's broken but I can work around it for now",h="somethings_broken_but_i_can_work_around_it_for_now",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="blocks_what_i_need_to_do">',g="I can't get things done until I hear back from you",h="i_cant_get_things_done_until_i_hear_back_from_you",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n      <option value="extreme_critical_emergency">',g="EXTREME CRITICAL EMERGENCY!!",h="extreme_critical_emergency",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</option>\n    </select>\n    <div style="',g=c.showEmail||b.showEmail,h=c.hiddenUnless||b.hiddenUnless,typeof h===m?g=h.call(b,g,{hash:{}}):h===o?g=n.call(b,"hiddenUnless",g,{hash:{}}):g=h,f+=p(g)+'">\n      <label for="error-email">',g="Your email address",h="your_email_address",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n      <input type="email" name="error[email]" id="error-email">\n    </div>\n    <input type="hidden" name="error[url]" value="',g=c.url||b.url,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"url",{hash:{}})),f+=p(g)+'">\n    <div class="button-container">\n      <button type="submit" data-text-while-loading="',g="Submitting Ticket...",h="Submitting_Ticket",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='" class="button submit_button"><img src="/images/email.png" alt=""/>',g="Submit Ticket",h="submit_this_support_request",i={},j="helpDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n    </div>\n  </form>\n</div>\n",f}),c.helpDialog}),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/helpDialog",["i18n!help_dialog","jst/helpDialog","jquery","underscore","INST","str/htmlEscape","compiled/fn/preventDefault","jquery.instructure_misc_helpers","jqueryui/dialog","jquery.disableWhileLoading"],function(b,c,d,e,f,g,h){var i;return i={defaultLinks:[{available_to:["student"],text:b.t("instructor_question","Ask Your Instructor a Question"),subtext:b.t("instructor_question_sub","Questions are submitted to your instructor"),url:"#teacher_feedback"},{available_to:["user","student","teacher","admin"],text:b.t("search_the_canvas_guides","Search the Canvas Guides"),subtext:b.t("canvas_help_sub","Find answers to common questions"),url:"http://guides.instructure.com"},{available_to:["user","student","teacher","admin"],text:b.t("report_problem","Report a Problem"),subtext:b.t("report_problem_sub","If Canvas misbehaves, tell us about it"),url:"#create_ticket"}],defaultTitle:b.t("Help","Help"),initDialog:function(){var b=this;return this.$dialog=d('<div style="padding:0; overflow: visible;" />').dialog({resizable:!1,width:400,title:this.defaultTitle,close:function(){return b.switchTo("#help-dialog-options")}}),this.$dialog.dialog("widget").delegate('a[href="#teacher_feedback"],                                          a[href="#create_ticket"],                                          a[href="#help-dialog-options"]',"click",h(function(a){var c;return c=a.currentTarget,b.switchTo(d(c).attr("href"))})),this.helpLinksDfd=d.getJSON("/help_links").done(function(g){var h;return g=d.grep(b.defaultLinks.concat(g),function(b){return e.detect(b.available_to,function(b){return b==="user"||ENV.current_user_roles&&a.call(ENV.current_user_roles,b)>=0})}),h={showEmail:!ENV.current_user_id,helpLinks:g,showBadBrowserMessage:f.browser.ie,browserVersion:f.browser.version,url:window.location},b.$dialog.html(c(h)),b.initTicketForm(),d(b).trigger("ready")}),this.$dialog.disableWhileLoading(this.helpLinksDfd),this.dialogInited=!0},initTicketForm:function(){var a,b=this;return a=this.$dialog.find("#create_ticket").formSubmit({disableWhileLoading:!0,required:["error[subject]","error[comments]","error[user_perceived_severity]"],success:function(){return b.$dialog.dialog("close"),a.find(":input").val("")}})},switchTo:function(a){var c,e,f,g=this;return f="#teacher_feedback, #create_ticket",this.$dialog.find(f).hide(),c=this.$dialog.find(a).show().outerHeight(),this.$dialog.animate({left:f.match(a)?-400:0,height:c},{step:function(){return g.$dialog.dialog("option","position","center")},duration:100}),(e=this.$dialog.find("a[href='"+a+"'] .text").text())?e=d("          <a class='ui-dialog-header-backlink' href='#help-dialog-options'>            "+b.t("Back","Back")+"          </a>          <span>"+e+"</span>        "):e=this.defaultTitle,this.$dialog.dialog("option","title",e)},open:function(){return i.dialogInited||i.initDialog(),i.$dialog.dialog("open"),i.initTeacherFeedback()},initTeacherFeedback:function(){var b,c,e,f=this;e=ENV.current_user_roles&&a.call(ENV.current_user_roles,"student")>=0;if(!this.teacherFeedbackInited&&e)return this.teacherFeedbackInited=!0,c=d.getJSON("/api/v1/courses.json"),b=null,this.helpLinksDfd.done(function(){return b=f.$dialog.find("#teacher_feedback").disableWhileLoading(c).formSubmit({disableWhileLoading:!0,required:["recipients[]","body"],success:function(){return f.$dialog.dialog("close")}})}),d.when(c,this.helpLinksDfd).done(function(a){var c,e;return c=a[0],e=d.map(c,function(a){return"<option value='course_"+a.id+"_admins' "+(ENV.context_id===a.id?"selected":"")+">              "+g(a.name)+"            </option>"}),b.find('[name="recipients[]"]').html(e.join(""))})},initTriggers:function(){return d(".help_dialog_trigger").click(h(this.open))}}})}.call(this),function(){var a=[].slice;define("compiled/userSettings",["underscore","jquery","jquery.instructure_misc_helpers"],function(b,c){var d,e,f,g,h,i;f={},d=function(){var c,d;return c=arguments[0],d=2>arguments.length?[]:a.call(arguments,1),function(a,e){var f,g,h;h=JSON.stringify(e),f=b(d).map(function(a){return ENV[a]}).join("_"),g=localStorage[""+c+"Item"]("_"+f+"_"+a,h);if(g)return JSON.parse(g)}},i=["get","set","remove"];for(g=0,h=i.length;g<h;g++)e=i[g],f[e]=d(e,"current_user_id"),f["context"+c.capitalize(e)]=d(e,"current_user_id","context_asset_string");return f})}.call(this),define("jquery.templateData",["jquery","str/htmlEscape","jquery.instructure_misc_helpers"],function(a,b){a.fn.fillTemplateData=function(c){if(this.length&&c){c.iterator&&this.find("*").andSelf().each(function(){var b=a(this);a.each(["name","id","class"],function(a,d){b.attr(d)&&b.attr(d,b.attr(d).replace(/-iterator-/,c.iterator))})}),c.id&&this.attr("id",c.id);var d=!1;if(c.data)for(var e in c.data){if(c.except&&a.inArray(e,c.except)!=-1)continue;c.data[e]&&c.dataValues&&a.inArray(e,c.dataValues)!=-1&&this.data(e,c.data[e].toString());var f=this.find("."+e),g=c.avoid||"";f.each(function(){var f=a(this);if(f.length>0&&f.closest(g).length===0){if(typeof c.data[e]=="undefined"||c.data[e]===null)c.data[e]="";if(c.htmlValues&&a.inArray(e,c.htmlValues)!=-1)f.html(c.data[e].toString()),f.hasClass("user_content")&&(d=!0,f.removeClass("enhanced"),f.data("unenhanced_content_html",c.data[e].toString()));else if(f[0].tagName.toUpperCase()=="INPUT")f.val(c.data[e]);else try{var h=c.data[e].toString();f.html(b(h))}catch(i){}}})}c.hrefValues&&c.data&&this.find("a,span[rel]").each(function(){var b=a(this),d,e,f;for(var g in c.hrefValues){var h=c.hrefValues[g];if(d=b.attr("href")){var i=a.replaceTags(d,h,encodeURIComponent(c.data[h])),j=b.text()==b.html()?b.text():null;d!=i&&(b.attr("href",i),j&&b.text(j))}(e=b.attr("rel"))&&b.attr("rel",a.replaceTags(e,h,c.data[h])),(f=b.attr("name"))&&b.attr("name",a.replaceTags(f,h,c.data[h]))}}),d&&a(document).triggerHandler("user_content_change")}return this},a.fn.fillTemplateData.defaults={htmlValues:null,hrefValues:null},a.fn.getTemplateData=function(b){if(!this.length||!b)return{};var c={},d,e;if(b.textValues)for(d in b.textValues){var f=this.find("."+b.textValues[d].replace(/\[/g,"\\[").replace(/\]/g,"\\]")+":first");e=a.trim(f.text()),f.html()=="&nbsp;"&&(e=""),e.length==1&&e.charCodeAt(0)==160&&(e=""),c[b.textValues[d]]=e}if(b.dataValues)for(d in b.dataValues){var e=this.data(b.dataValues[d]);e&&(c[b.dataValues[d]]=e)}if(b.htmlValues)for(d in b.htmlValues){var g=this.find("."+b.htmlValues[d].replace(/\[/g,"\\[").replace(/\]/g,"\\]")+":first");e=null,g.hasClass("user_content")&&g.data("unenhanced_content_html")?e=g.data("unenhanced_content_html"):e=a.trim(g.html()),c[b.htmlValues[d]]=e}return c},a.fn.getTemplateValue=function(b,c){var d=a.extend({},c,{textValues:[b]});return this.getTemplateData(d)[b]}}),define("jquery.doc_previews",["INST","i18n!instructure","jquery","underscore","vendor/scribd.view","str/htmlEscape","jquery.ajaxJSON","jquery.google-analytics","jquery.instructure_misc_helpers","jquery.loadingImg"],function(a,b,c,d,e,f){var g={"application/vnd.openxmlformats-officedocument.wordprocessingml.template":[1,1],"application/vnd.oasis.opendocument.spreadsheet":[1,1],"application/vnd.sun.xml.writer":[1,1],"application/excel":[1,1],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[1,1],"text/rtf":[1,!1],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":[1,1],"application/vnd.sun.xml.impress":[1,1],"application/vnd.sun.xml.calc":[1,1],"application/vnd.ms-excel":[1,1],"application/msword":[1,1],"application/mspowerpoint":[1,1],"application/rtf":[1,1],"application/vnd.oasis.opendocument.presentation":[1,1],"application/vnd.oasis.opendocument.text":[1,1],"application/vnd.openxmlformats-officedocument.presentationml.template":[1,1],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":[1,1],"text/plain":[1,!1],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[1,1],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[1,1],"application/postscript":[1,1],"application/pdf":[1,1],"application/vnd.ms-powerpoint":[1,1]};c.filePreviewsEnabled=function(){return!a.disableScribdPreviews||!a.disableGooglePreviews},c.isPreviewable=function(b,d){return c.filePreviewsEnabled()&&g[b]&&(!d||!a["disable"+c.capitalize(d)+"Previews"]&&g[b][{scribd:0,google:1}[d]])},c.fn.loadDocPreview=function(g){var h=swfobject.getFlashPlayerVersion(),i=h&&h.major>9;return this.each(function(){function h(a){k.attachment_view_inline_ping_url&&(c.ajaxJSON(k.attachment_view_inline_ping_url,"POST",{},function(){},function(){}),c.trackEvent("Doc Previews",a,JSON.stringify(k)))}var j=c(this),k=c.extend({height:"400px"},j.data(),g);if(!a.disableScribdPreviews&&k.scribd_doc_id&&k.scribd_access_key&&i&&e){var l=e.Document.getDoc(k.scribd_doc_id,k.scribd_access_key),m=j.attr("id"),n=c.extend({jsapi_version:1,disable_related_docs:!0,auto_size:!1,height:k.height,use_ssl:"https:"==document.location.protocol},k.scribdParams);m||(m=d.uniqueId("scribd_preview_"),j.attr("id",m)),c.each(n,function(a,b){l.addParam(a,b)}),c.isFunction(k.ready)&&l.addEventListener("iPaperReady",k.ready),l.write(m),this.childNodes[0].keyboardShortcutDown=this.childNodes[0].keyboardShortcutUp=function(){},h("scribd")}else if(!a.disableGooglePreviews&&(!k.mimeType||c.isPreviewable(k.mimeType,"google"))&&k.attachment_id||k.public_url){function o(){var a="//docs.google.com/viewer?"+c.param({embedded:!0,url:k.public_url});c('<iframe src="'+a+'" height="'+k.height+'" width="100%" />').appendTo(j).load(function(){h("google"),c.isFunction(k.ready)&&k.ready()})}if(k.public_url)o();else if(k.attachment_id){var p="/files/"+k.attachment_id+"/public_url.json";k.submission_id&&(p+="?"+c.param({submission_id:k.submission_id})),j.loadingImage(),c.ajaxJSON(p,"GET",{},function(a){j.loadingImage("remove"),a&&a.public_url&&(c.extend(k,a),o())})}}else j.html("<p>"+f(b.t("errors.cannot_view_document_inline","This document cannot be viewed inline, you might not have permission to view it or it might have been deleted."))+"</p>")})}}),define("page_views",["INST","jquery","jquery.ajaxJSON"],function(a,b){b(document).ready(function(){var c=0,d=b("#page_view_id"),e=b("#page_view_update_path").attr("href"),f=!1;a.interaction_contexts={};if(document.cookie&&document.cookie.match(/last_page_view/)){var g=document.cookie.match(/last_page_view=([^;]+)/);if(g&&g[1])try{var h=b.parseJSON(unescape(g[1]));h&&h.url&&h.seconds&&setTimeout(function(){b.ajaxJSON(h.url,"PUT",{interaction_seconds:h.seconds},function(){},function(){},3e3)})}catch(i){}document.cookie="last_page_view=;expires=Thu, 01-Jan-1970 00:00:01 GMT"}if(d.length>0){var j=0,k=300;b(document).bind("page_view_id_received",function(a,c){b("#page_view_id").text(c),e="/page_views/"+c}),b(document).bind("page_view_update",function(a,f){var g={};d.hasClass("contributed")&&(g.contributed=!0);if(f||c>10&&j<k)g.interaction_seconds=c,b.ajaxJSON(e,"PUT",g,function(a){a&&a.id&&b(document).triggerHandler("page_view_id_receved",a.id)},function(){}),c=0}),setInterval(function(){b(document).triggerHandler("page_view_update")},1e3*k),window.onbeforeunload=function(){if(c>30){var a=new Date;a.setDate(a.getDate()+1);var b=JSON.stringify({url:e,seconds:c});document.cookie="last_page_view="+escape(b)}};var f=!1;b(document).bind("mousemove keypress mousedown focus",function(){f=!0}),setInterval(function(){f?(c++,a&&a.interaction_context&&a.interaction_contexts&&(a.interaction_contexts[a.interaction_context]=(a.interaction_contexts[a.interaction_context]||0)+1),f=!1,j>=k&&(j=0,b(document).triggerHandler("page_view_update")),j=0):j++},1e3)}})}),define("ajax_errors",["INST","i18n!ajax_errors","jquery","str/htmlEscape","jquery.ajaxJSON","jquery.instructure_forms","jquery.rails_flash_notifications","jqueryui/effects/drop"],function(a,b,c,d){var e=window.iTest;a.errorURL="/record_js_error",a.errorCount=0,a.errorLastHandledTimes={},a.log_error=function(b){b=b||{};var d=+(new Date);if(a.errorLastHandledTimes[b.message]>d-5e3)return;a.errorLastHandledTimes[b.message]=d;var e="";try{e=c&&c.fn&&c.fn.text&&c("#identity .user_name").text()}catch(f){}var g="?";b.url=b.url||location.href,b.platform=b.platform||navigator.platform,b.action=b.action||location.href,b.user_name=e,b.user_agent=navigator.userAgent,b.parentPage=window.location;for(var h in b)g=g+"error["+h+"]="+escape(b[h])+"&";a.errorCount+=1;var i=document.createElement("img");i.src=a.errorURL+g.substring(0,2e3),i.style.position="absolute",i.style.left="-10000px",i.style.top=0,document.body.appendChild(i)},window.onerror=function(b,c,d){var f=["webkitSafeEl","NPMethod called on non-NPObject wrapped JSObject!"];for(var g in f)if(f[g]&&b&&b.match&&b.match(f[g]))return!0;if(c&&c.match&&!c.match(window.location.hostname))return!0;a.log_error({message:b,line:d,url:c});if(a.environment=="production")return!0;e&&e.ok(!1,"unexpected error: "+b)},c(document).ready(function(){c("#instructure_ajax_error_result").defaultAjaxError(function(e,f,g,h,i){if(h==="abort")return;var j="0",k=b.t("no_text","No text"),l={};try{j=f.status,k=f.responseText,l=c.parseJSON(k)}catch(m){}c.ajaxJSON(location.protocol+"//"+location.host+"/simple_response.json?rnd="+Math.round(Math.random()*9999999),"GET",{},function(){l&&l.status=="AUT"?o(b.t("errors.timeout","There was a problem with your request, possibly due to a long period of inactivity.  Please reload the page and try again."),f):o(b.t("errors.unhandled","Oops! The last request didn't work out."),f)},function(){o(b.t("errors.connection_lost","Connection to %{host} was lost.  Please make sure you're connected to the Internet and try again.",{host:location.host}),f)},{skipDefaultError:!0});var n=c(this),o=function(e,f){var g=n[0];if(!g)return;var h=g.contentDocument||g.contentWindow&&g.contentWindow.document||window.frames[n.attr("id")].document,l=c(h).find("body");l.html(c("<h1 />").text(b.t("error_heading","Ajax Error: %{status_code}",{status_code:j}))),l.append(k),c("#instructure_ajax_error_box").hide();var m="";i&&(e+="<br/><span style='font-size: 0.7em;'>(Development Only)</span>");if(i||a.environment!="production")e+="<br/><a href='#' class='last_error_details_link'>"+d(b.t("links.details","details..."))+"</a>";c.flashError(e)};window.ajaxErrorFlash=o;var p=c.ajaxJSON.findRequest(f);p=p||{};if(p.data){p.params="";for(var q in p.data)p.params+="&"+q+"="+p.data[q]}var r="";try{r=c("#identity .user_name").text()}catch(m){}if(a.ajaxErrorURL){var s="&Msg="+escape(k)+"&StatusCode="+escape(j)+"&URL="+escape(p.url||"unknown")+"&Page="+escape(location.href)+"&Method="+escape(p.submit_type||"unknown")+"&UserName="+escape(r)+"&Platform="+escape(navigator.platform)+"&UserAgent="+escape(navigator.userAgent)+"&Params="+escape(p.params||"unknown");c("body").append("<img style='position: absolute; left: -1000px; top: 0;' src='"+a.ajaxErrorURL+s.substring(0,2e3)+"' />")}}),c(".last_error_details_link").live("click",function(a){a.preventDefault(),a.stopPropagation(),c("#instructure_ajax_error_box").show()}),c(".close_instructure_ajax_error_box_link").click(function(a){a.preventDefault(),c("#instructure_ajax_error_box").hide()}),c("#flash_notice_message,#flash_error_message").each(function(){var a=c(this);if(a.css("display")!="none"){var b=c("#flash_notice_message").hasClass("long_show")?3e4:7e3;c("#flash_notice_message").removeClass("long_show"),a.delay(b).hide("drop",{direction:"up"},2e3,function(){a.empty().hide()})}a.click(function(){a.stop(!0,!0).hide("drop",{direction:"up"},"fast",function(){a.empty().hide()})})})})}),define("wikiSidebar",["i18n!wiki.sidebar","jquery","str/htmlEscape","jquery.ajaxJSON","jquery.inst_tree","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.rails_flash_notifications","jquery.templateData","tinymce.editor_box","vendor/jquery.pageless","jqueryui/accordion","jqueryui/tabs","vendor/scribd.view"],function(a,b,c){var d,e,f,g,h,i,j;b(function(){d=b("#editor_tabs"),e=d.find("ul#tree1"),f=d.find("#editor_tabs_3 .image_list"),g=b("#course_show_secondary"),h=b("form#sidebar_upload_image_form"),i=b("form#sidebar_upload_file_form"),j=b("#wiki_sidebar_select_folder_dialog")});var k={fileSelected:function(a){var b=a.find("span.text"),c=b.attr("rel"),d=b.text();k.editor.editorBox("create_link",{title:d,url:c,file:!0,image:a.hasClass("image"),scribdable:a.hasClass("scribdable"),kaltura_entry_id:a.attr("data-media-entry-id"),kaltura_media_type:a.hasClass("video_playback")?"video":"audio"})},imageSelected:function(a){var b=a.data("url")||a.attr("src"),c=a.attr("alt");k.editor.editorBox("insert_code",'<img alt="'+c+'" src="'+b+'"/>')},fileAdded:function(a,c,g){var h,i,j,k;b.isFunction(c)?(i=!0,j=c):typeof c=="object"?h=c:i=c,h==null&&(h=e.find(".initialized.folder_"+a.folder_id+">ul"));if(h.length||g){var l=a;k=e.find(".file_blank").clone(!0),k.attr("class","file").addClass(l.mime_class).toggleClass("scribdable",l["scribdable?"]),l.media_entry_id&&k.addClass("kalturable").attr("data-media-entry-id",l.media_entry_id).addClass(l.content_type&&l.content_type.match(/video/)?"video_playback":"audio_playback"),l.name=l.display_name,k.fillTemplateData({data:l,hrefValues:["id"]}),h&&(h.append(k),k.show(),e.instTree.InitInstTree(e)),g&&g(k)}if(i&&(a.mime_class=="image"||a.content_type.match(/^image/))&&f.hasClass("initialized")){var m=b.replaceTags(b("#editor_tabs_3 .file_url").attr("href"),"id",a.id),n=d.find("#wiki_sidebar_image_uploads .img_link").clone();n.find(".img").attr({src:a.thumbnail_url||m,alt:a.display_name}).data("url",m).end().fillTemplateData({data:a}).prependTo(f),j?n.slideDown(j):n.slideDown()}},show:function(){d.addClass("showing"),d.show(),g.hide()},hide:function(){d.removeClass("showing").hide(),g.show()},toggle:function(){d.hasClass("showing")?k.hide():k.show()},loadFolder:function(a){a.data("includes_files",!0);var c=b.replaceTags(b("#editor_tabs_2 #folder_url").attr("href"),"id",a.data("id"));$loading=e.find(">.loading").clone(),$loading.show(),a.append($loading),b.ajaxJSON(c,"GET",{},function(b){$loading.remove();var c=a.find("ul");for(var d in b.sub_folders){var f=b.sub_folders[d].folder,g=e.find(".folder_blank").clone(!0);g.attr("class","folder").data("id",f.id).addClass("folder_"+f.id),g.find(".name").text(f.name),c.append(g),g.show()}for(var d in b.files)k.fileAdded(b.files[d].attachment,c);a.addClass("initialized"),e.instTree.InitInstTree(e)},function(){$loading.remove()})},addFolder:function(a,d,e){var f=a[d];if(e!=0){var g=c(f.name);g="- "+g,g.length+e+1>38&&(g=g.substring(0,35)+"...");for(var l=0;l<e;l++)g="&nbsp;&nbsp;"+g;var m=b("<option />");m.val(f.id),m.html(g),i.find("#attachment_folder_id").append(m.clone()),h.find("#image_folder_id").append(m.clone()),j.find(".folder_id").append(m.clone())}for(var l in f.sub_folders)k.addFolder(a,f.sub_folders[l],e+1)},loadFolders:function(){if(!i.hasClass("initialized")){i.addClass("initialized");var a=i.find(".json_upload_url").attr("href");b.ajaxJSON(a,"GET",{},function(a){var b={},c;for(var d in a.folders){var e=a.folders[d].folder;b[e.id]=e;if(!e.parent_folder_id){c=e.id;continue}b[e.parent_folder_id]||(b[e.parent_folder_id]={}),b[e.parent_folder_id].sub_folders||(b[e.parent_folder_id].sub_folders=[]),b[e.parent_folder_id].sub_folders.push(e.id)}k.addFolder(b,c,0)})}},init:function(){k.inited=!0,d.find("#pages_accordion a.add").click(function(a){a.preventDefault(),d.find("#new_page_drop_down").slideToggle("fast",function(){b(this).find(":text:visible:first").focus().select()})}),d.find(".upload_new_image_link").click(function(a){a.preventDefault(),k.loadFolders(),h.slideToggle("fast")}),d.find(".find_new_image_link").click(function(a){a.preventDefault(),k.editor.editorBox("execute","instructureEmbed","flickr")}),d.find(".upload_new_file_link").click(function(a){a.preventDefault(),k.loadFolders(),i.slideToggle("fast")}),d.bind("tabsshow tagselect",function(b,c){c.index===1&&!e.hasClass("initialized")&&(e.addClass("initialized unstyled_list"),e.instTree({multi:!1,dragdrop:!1,onExpand:function(a){a.hasClass("folder")&&!a.data("includes_files")&&k.loadFolder(a)},onClick:function(a,b){b.hasClass("leaf")||b.hasClass("file")?k.fileSelected(b):b.hasClass("node")&&b.children(".sign").click()}})),c.index===2&&!f.hasClass("initialized")&&(f.addClass("initialized"),f.pageless({container:f,currentPage:0,totalPages:1,distance:500,url:f.data("url"),loaderMsg:a.t("loading_more_results","Loading more results"),scrape:function(a,b){return this.totalPages=parseInt(b.getResponseHeader("X-Total-Pages")),a}}))}),d.tabs(),b(".wiki_pages li a").live("click",function(a){a.preventDefault(),k.editor.editorBox("create_link",{title:b(this).text(),url:b(this).attr("href")})}),d.find("#pages_accordion").accordion({header:".header",autoHeight:!1}),b("#new_page_drop_down").submit(function(a){a.preventDefault();var c=b.trim(b("#new_page_name").val()).replace(/\s/g,"-").toLowerCase();k.editor.editorBox("create_link",{title:b("#new_page_name").val(),url:b("#new_page_url_prefix").val()+"/"+c}),b("#new_page_drop_down").slideUp("fast"),b("#new_page_name").val("")}),f.delegate(".img_link","click",function(a){a.preventDefault(),k.imageSelected(b(this).find(".img"))}),b.handlesHTML5Files&&(b("#editor_tabs_2 .file_list_holder").bind("dragenter dragover",function(a){if(!b(this).hasClass("file_drop"))return;a.preventDefault(),a.stopPropagation(),b(this).addClass("file_drag")},!1).bind("dragleave dragout",function(a){if(!b(this).hasClass("file_drop"))return;b(this).closest(".file_list_holder")||b(this).removeClass("file_drag")},!1).bind("drop",function(c){if(!b(this).hasClass("file_drop"))return;c.preventDefault(),c.stopPropagation(),b(this).removeClass("file_drag");var d=[],e=c.originalEvent.dataTransfer,f=e.files;for(var g=0;g<f.length;g++)f[g]&&d.push(f[g]);if(d.length===0){alert(a.t("errors.no_valid_files_selected","No valid files were selected"));return}var h=function(a){b("#wiki_sidebar_file_uploads").triggerHandler("files_added",{files:d,folder_id:a})};return j.data("folder_select",h),j.find(".file_count").text(d.length),j.find(".folder_id").empty(),k.loadFolders(),j.dialog("close").dialog({autoOpen:!1,title:a.t("titles.select_folder_for_uploads","Select folder for file uploads")}).dialog("open"),!1},!1),j.find(".select_button").click(function(a){var b=j.find(".folder_id").val();if(b){var c=j.data("folder_select");c&&c(b),j.dialog("close")}}),j.find(".cancel_button").click(function(a){j.data("folder_select",null),j.dialog("close")}),b("#editor_tabs_3 .image_list_holder").bind("dragenter dragover",function(a){if(!b(this).hasClass("file_drop"))return;a.preventDefault(),a.stopPropagation(),b(this).addClass("file_drag")},!1).bind("dragleave dragout",function(a){if(!b(this).hasClass("file_drop"))return;b(this).parents(".image_list_holder").length||b(this).removeClass("file_drag")},!1).bind("drop",function(c){if(!b(this).hasClass("file_drop"))return;c.preventDefault(),c.stopPropagation(),b(this).removeClass("file_drag");var d=[],e=c.originalEvent.dataTransfer,f=e.files;for(var g=0;g<f.length;g++)f[g]&&(!f[g].type||f[g].type.match(/^image/))&&d.push(f[g]);if(d.length===0){alert(a.t("errors.no_valid_image_files_selected","No valid image files were selected"));return}var h=function(a){b("#wiki_sidebar_image_uploads").triggerHandler("files_added",{files:d,folder_id:a})};return j.data("folder_select",h),j.find(".file_count").text(d.length),j.find(".folder_id").empty(),k.loadFolders(),j.dialog("close").dialog({autoOpen:!1,title:a.t("titles.select_folder_for_uploads","Select folder for file uploads")}).dialog("open"),!1},!1));var c=[],g=!0;b("#wiki_sidebar_file_uploads").bind("files_added",function(a,d){for(var e in d.files)c.push({file:d.files[e],folder_id:d.folder_id});b(this).triggerHandler("file_list_update")}).bind("file_list_update",function(a){c.length===0?b(this).slideUp():(b(this).triggerHandler("file_upload_check"),b(this).slideDown())}).bind("file_upload_check",function(d){var e=b(this);if(g){var f=c.shift(),h=b.fileData(f.file);e.fillTemplateData({data:{filename:h.name,files_remaining:c.length}}),g=!1,b.ajaxFileUpload({url:i.attr("action"),data:{"attachment[uploaded_data]":f.file,"attachment[display_name]":h.name,"attachment[folder_id]":f.folder_id},method:"POST",success:function(a){k.fileAdded(a.attachment,!0),g=!0,e.triggerHandler("file_list_update")},progress:function(a){console.log("progress!")},error:function(c){b.flashError(a.t("errors.unexpected_upload_problem","Unexpected problem uploading %{filename}.  Please try again.",{filename:h.name})),e.triggerHandler("file_list_update"),g=!0}}),c.length===0&&e.find(".remaining").slideUp()}else e.fillTemplateData({data:{files_remaining:c.length}})});var l=[],m=!0;b("#wiki_sidebar_image_uploads").bind("files_added",function(a,c){for(var d in c.files)l.push({file:c.files[d],folder_id:c.folder_id});b(this).triggerHandler("file_list_update")}).bind("file_list_update",function(a){l.length?(b(this).triggerHandler("file_upload_check"),b(this).slideDown()):b(this).slideUp()}).bind("file_upload_check",function(c){var d=b(this);if(m){var e=l.shift(),f=b.fileData(e.file);d.fillTemplateData({data:{filename:f.name,files_remaining:l.length}}),m=!1,b.ajaxFileUpload({url:h.attr("action"),data:{"attachment[uploaded_data]":e.file,"attachment[display_name]":f.name,"attachment[folder_id]":e.folder_id},method:"POST",success:function(a){k.fileAdded(a.attachment,!0),m=!0,d.triggerHandler("file_list_update")},progress:function(a){console.log("progress!")},error:function(c){b.flashError(a.t("errors.unexpected_upload_problem","Unexpected problem uploading %{filename}.  Please try again.",{filename:f.name})),d.triggerHandler("file_list_update"),m=!0}}),l.length===0&&d.find(".remaining").slideUp()}else d.fillTemplateData({data:{files_remaining:l.length}})}),h.formSubmit({fileUpload:!0,preparedFileUpload:!0,singleFile:!0,context_code:b("#editor_tabs .context_code").text(),folder_id:function(){return b(this).find("[name='attachment[folder_id]']").val()},upload_only:!0,object_name:"attachment",processData:function(a){return a["attachment[display_name]"]=b(this).find(".file_name").val(),a},beforeSubmit:function(a){h.find(".uploading").slideDown(),h.attr("action",h.find(".json_upload_url").attr("href"))},success:function(a){h.slideUp(function(){h.find(".uploading").hide()}),k.fileAdded(a.attachment,function(){k.imageSelected(b(this).find(".img"))})},error:function(a){h.find(".uploading").slideUp()}}),i.formSubmit({fileUpload:!0,preparedFileUpload:!0,singleFile:!0,object_name:"attachment",context_code:b("#editor_tabs .context_code").text(),folder_id:function(){return b(this).find("[name='attachment[folder_id]']").val()},upload_only:!0,processData:function(a){return a["attachment[display_name]"]=i.find(".file_name").val(),a},beforeSubmit:function(c){i.find(".uploading").slideDown(),i.attr("action",i.find(".json_upload_url").attr("href")),b(this).find("button").attr("disabled",!0).text(a.t("buttons.uploading","Uploading..."))},success:function(a){b(this).find("button").attr("disabled",!1).text("Upload"),i.slideUp(function(){i.find(".uploading").hide()}),k.fileAdded(a.attachment,!0,function(a){k.fileSelected(a)})},error:function(c){b(this).find("button").attr("disabled",!1).text(a.t("errors.upload_failed","Upload Failed, please try again")),i.find(".uploading").slideUp()}})},attachToEditor:function(a){return k.editor=b(a),k}};return k}),function(){define("compiled/license_help",["i18n!license_help","jquery","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.loadingImg"],function(a,b){var c,d,e,f;return d=["by","nc","nd","sa"],e=function(a,c){return b(a).toggleClass("selected",!!c).attr("aria-checked",!!c)},c=function(a){return e(a,!0)},f=function(a){return e(a,!1)},b(".license_help_link").live("click",function(g){var h,i;return g.preventDefault(),h=b("#license_help_dialog"),i=b(this).prev("select"),h.length===0&&(h=b("<div/>").attr("id","license_help_dialog").hide().loadingImage().appendTo("body").delegate(".option","click",function(a){var d;a.preventDefault(),d=!b(this).is(".selected"),e(this,d),d?(c(h.find(".option.by")),b(this).hasClass("sa")?f(h.find(".option.nd")):b(this).hasClass("nd")&&f(h.find(".option.sa"))):b(this).hasClass("by")&&f(h.find(".option")),h.triggerHandler("option_change")}).delegate(".select_license","click",function(){return h.data("select")&&h.data("select").val(h.data("current_license")||"private"),h.dialog("close")}).bind("license_change",function(a,b){var e,g,i,j;h.find(".license").removeClass("active").filter("."+b).addClass("active"),f(h.find(".option")),h.find(".license.active").length===0&&(b="private",h.find(".license.private").addClass("active")),h.data("current_license",b);if(b.match(/^cc/)){j=[];for(g=0,i=d.length;g<i;g++)e=d[g],(e==="by"||b.match("_"+e))&&j.push(c(h.find(".option."+e)));return j}}).bind("option_change",function(){var a,b,c,e,f;a=["cc"];for(e=0,f=d.length;e<f;e++)c=d[e],h.find(".option."+c).is(".selected")&&a.push(c);return b=a.length===1?"private":a.join("_"),h.triggerHandler("license_change",b)}).dialog({autoOpen:!1,title:a.t("content_license_help","Content Licensing Help"),width:700}),b.get("/partials/_license_help.html",function(a){return h.loadingImage("remove").html(a).triggerHandler("license_change",i.val()||"private")})),h.find(".select_license").showIf(i.length),h.data("select",i),h.triggerHandler("license_change",i.val()||"private"),h.dialog("open")})})}.call(this),define("media_comments",["i18n!media_comments","jquery","str/htmlEscape","jquery.ajaxJSON","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jqueryui/progressbar","jqueryui/tabs"],function(a,b,c){(function(b,d){var e=null;try{e=swfobject.getFlashPlayerVersion().major+"."+swfobject.getFlashPlayerVersion().minor,e=" (you have "+e+" installed)"}catch(f){}var g="<div>"+c(a.t("messages.flash_required","This video requires Flash version 9 or higher (you have %{version} installed).",{version:e}))+"<br/><a target='_blank' href='http://get.adobe.com/flashplayer/'>"+c(a.t("links.upgrade_flash","Click here to upgrade"))+"</a></div>";b.fn.mediaComment=function(c,e,f,h,i){var j=e,k=f,l=h;if(!d.kalturaSettings){console.log("Kaltura has not been enabled for this account");return}if(c=="create"){k=e;var m=f,n=h,o=i;b("#media_recorder_container").removeAttr("id").addClass("old_recorder_container"),this.attr("id","media_recorder_container").removeClass("old_recorder_container"),b(document).unbind("media_comment_created");var p=this;b(document).bind("media_comment_created",function(a,b){m.call(p,b.id,b.mediaType)}),b.mediaComment.init(k,{modal:!1,close:function(){n&&b.isFunction(n)&&n.call(p)},defaultTitle:o})}else if(c=="show_inline"){var q=b("<span/>");k!="video"&&k!="audio"&&(b(this).hasClass("audio_playback")?k="audio":k="video"),q.attr("id","media_comment_holder_"+Math.round(Math.random()*1e4));var r=b(this);b(this).parent(".instructure_file_link_holder").length>0&&(r=b(this).parent(".instructure_file_link_holder"));var s=function(a){r.append(q);var b=r.width(),c={},d={allowScriptAccess:"always",allowNetworking:"all",allowFullScreen:!0,bgcolor:"#000000",wmode:"opaque"},e="/media_objects/"+a+"/redirect",b=Math.min(r.closest("div,p,table").width()||550,550),f=b/550*448;k=="audio"&&(f=125,b=Math.min(b,350)),swfobject.embedSWF(e,q.attr("id"),b.toString(),f.toString(),"9.0.0",!1,c,d)};if(j=="maybe"){var t=l.replace(/\/download.*/,"");r.text("Loading..."),b.ajaxJSON(t,"GET",{},function(b){b.attachment&&b.attachment.media_entry_id&&b.attachment.media_entry_id!="maybe"?(r.text(""),s(b.attachment.media_entry_id)):r.text(a.t("messages.file_failed_to_load","This media file failed to load"))},function(){r.text(a.t("messages.file_failed_to_load","This media file failed to load"))})}else s(j)}else if(c=="show"){var u={},v={allowScriptAccess:"always",allowNetworking:"all",allowFullScreen:!0,bgcolor:"#000000",wmode:"opaque"},w="/media_objects/"+j+"/redirect",x=b("#media_comment_player_dialog");x.length||(x=b("<div id='media_comment_player_dialog'/>").appendTo("body")),x.dialog({title:a.t("titles.play_comment","Play Media Comment"),width:575,height:493,modal:!0,draggable:!1}).empty().css({padding:0,overflow:"hidden"}).append(b('<div id="media_comment_play" />').html(g)),swfobject.embedSWF(w,"media_comment_play","100%","100%","9.0.0",!1,u,v)}return this};var h=[],i=!1,j=function(){if(!h.length)return;i=!0;var a=Math.min(h.length,30),b;for(var c=0;c<a;c++)(b=h.shift())&&b.elem.createMediaCommentThumbnail(b);h.length>0?setTimeout(j,500):i=!1};b.fn.mediaCommentThumbnail=function(a,c){return b(this).each(function(){h.push({size:a,elem:b(this),keepOriginalText:c})}),i||(i=!0,setTimeout(j,500)),this},b.fn.createMediaCommentThumbnail=function(c){if(!d.kalturaSettings){console.log("Kaltura has not been enabled for this account");return}var e=c.size||"normal",f=c.only_show_icon,g=c.keepOriginalText,h=b.fn.mediaCommentThumbnail.sizes[e]||b.fn.mediaCommentThumbnail.sizes.normal;return this.each(function(){var c=b.trim(b(this).find(".media_comment_id:first").text());!c&&b(this).attr("id")&&b(this).attr("id").match(/^media_comment_/)&&(c=b(this).attr("id").substring(14)),c=c||b.trim(b(this).parent().find(".media_comment_id:first").text());if(c){var i="http://"+d.kalturaSettings.resource_domain;location.protocol==="https:"&&(i="https://"+(d.kalturaSettings.secure_resource_domain||d.kalturaSettings.domain)),i=i+"/p/"+d.kalturaSettings.partner_id+"/thumbnail/entry_id/",i+=c,i=i+"/width/"+h.width+"/height/"+h.height+"/bgcolor/000000/type/2/vid_sec/5";var j=b("<img/>");j.addClass("media_comment_thumbnail"),j.addClass("media_comment_thumbnail-"+e),f?j.attr("src","/images/media_comment.png"):(j.attr("src","/images/blank.png"),b(this).addClass("no-hover").addClass("no-underline"),j.hover(function(){j.attr("src","/images/play_overlay.png")},function(){j.attr("src","/images/blank.png")})),j.css("backgroundImage","url("+i+")"),j.attr("title",a.t("titles.click_to_view","Click to View"));var k=b(this);if(!g)b(this).empty();else{var k=b(this).clone().empty().removeClass("instructure_file_link");b(this).parent(".instructure_file_link_holder").length>0?b(this).parent(".instructure_file_link_holder").append(k):b(this).after(k)}k.addClass("instructure_inline_media_comment"),k.append(j).css({backgroundImage:"",padding:0}),b(this).append("<span class='media_comment_id' style='display: none;'>"+c+"</span>")}}),this},b.fn.mediaCommentThumbnail.sizes={normal:{width:140,height:100},small:{width:70,height:50}},b.mediaComment=function(a,c,d){var e=b("<div/>");b("body").append(e.hide()),b.fn.mediaComment.apply(e,arguments)},b.mediaComment.partnerData=function(a){return a=a||{},a.context_code=b.mediaComment.contextCode(),a.root_account_id=parseInt(b("#domain_root_account_id").text(),10)||0,JSON.stringify(a)},b.mediaComment.contextCode=function(){var a="";try{a=b.trim(b("#current_context_code").text())||b.trim("user_"+b("#identity .user_id").text())}catch(c){}return a};var k={};b.mediaComment.entryAdded=function(a,c,d,e){if(!a||k[a])return;k[a]=!0;var f={mediaType:c,entryId:a,title:d,userTitle:e},g=b.mediaComment.contextCode();if(f.mediaType==1||f.mediaType==2||f.mediaType==5||!0){var h="video";f.mediaType==2?h="image":f.mediaType==5&&(h="audio"),g&&b.ajaxJSON("/media_objects","POST",{id:f.entryId,type:h,context_code:g,title:f.title,user_entered_title:f.userTitle},function(a){b(document).triggerHandler("media_object_created",a)},function(a){}),b(document).triggerHandler("media_comment_created",{id:f.entryId,mediaType:h})}},b.mediaComment.audio_delegate={readyHandler:function(){b("#audio_upload")[0].setMediaType("audio")},selectHandler:function(){b.mediaComment.upload_delegate.selectHandler("audio")},singleUploadCompleteHandler:function(a){b.mediaComment.upload_delegate.singleUploadCompleteHandler("audio",a)},allUploadsCompleteHandler:function(){b.mediaComment.upload_delegate.allUploadsCompleteHandler("audio")},entriesAddedHandler:function(a){b.mediaComment.upload_delegate.entriesAddedHandler("audio",a)},progressHandler:function(a){b.mediaComment.upload_delegate.progressHandler("audio",a[0],a[1],a[2])},uploadErrorHandler:function(){b.mediaComment.upload_delegate.uploadErrorHandler("audio")}},b.mediaComment.video_delegate={readyHandler:function(){b("#video_upload")[0].setMediaType("video")},selectHandler:function(){b.mediaComment.upload_delegate.selectHandler("video")},singleUploadCompleteHandler:function(a){b.mediaComment.upload_delegate.singleUploadCompleteHandler("video",a)},allUploadsCompleteHandler:function(){b.mediaComment.upload_delegate.allUploadsCompleteHandler("video")},entriesAddedHandler:function(a){b.mediaComment.upload_delegate.entriesAddedHandler("video",a)},progressHandler:function(a){b.mediaComment.upload_delegate.progressHandler("video",a[0],a[1],a[2])},uploadErrorHandler:function(){b.mediaComment.upload_delegate.uploadErrorHandler("video")}},b.mediaComment.upload_delegate={currentType:"audio",submit:function(){var c=b.mediaComment.upload_delegate.currentType,d=b("#"+c+"_upload")[0].getFiles();d.length>1&&b("#"+c+"_upload")[0].removeFiles(0,d.length-2),d=b("#"+c+"_upload")[0].getFiles();if(d.length==0)return;b("#media_upload_progress").css("visibility","visible").progressbar({value:1}),b("#media_upload_submit").attr("disabled",!0).text(a.t("messages.submitting","Submitting Media File...")),b("#"+c+"_upload")[0].upload()},selectHandler:function(c){b.mediaComment.upload_delegate.currentType=c;var e=b("#"+c+"_upload")[0].getFiles();e.length>1&&b("#"+c+"_upload")[0].removeFiles(0,e.length-2);var f=b("#"+c+"_upload")[0].getFiles()[0];b("#media_upload_settings .icon").attr("src","/images/file-"+c+".png"),b("#media_upload_submit").show(),b("#media_upload_submit").attr("disabled",f?!1:!0),b("#media_upload_settings").css("visibility",f?"visible":"hidden"),b("#media_upload_title").val(f.title),b("#media_upload_display_title").text(f.title),b("#media_upload_file_size").text(b.fileSize(f.bytesTotal)),b("#media_upload_feedback_text").html(""),b("#media_upload_feedback").css("visibility","hidden");if(f.bytesTotal>d.kalturaSettings.max_file_size_bytes){b("#media_upload_feedback_text").html(a.t("errors.file_too_large","*This file is too large.* The maximum size is %{size}MB.",{size:d.kalturaSettings.max_file_size_bytes/1048576,wrapper:"<b>$1</b>"})),b("#media_upload_feedback").css("visibility","visible"),b("#media_upload_submit").hide();return}b("#media_upload_submit").click()},singleUploadCompleteHandler:function(a,c){b("#media_upload_progress").progressbar("option","value",100)},allUploadsCompleteHandler:function(a){b("#media_upload_progress").progressbar("option","value",100),b("#"+a+"_upload")[0].addEntries()},entriesAddedHandler:function(c,d){b("#media_upload_progress").progressbar("option","value",100);var e=d[0];b("#media_upload_submit").text(a.t("messages.submitted","Submitted Media File!")),setTimeout(function(){b("#media_comment_dialog").dialog("close")},1500),c=="audio"?e.entryType=5:c=="video"&&(e.entryType=1),b.mediaComment.entryAdded(e.entryId,e.entryType,e.title)},progressHandler:function(a,c,d,e){var f=100*c/d;b("#media_upload_progress").progressbar("option","value",f)},uploadErrorHandler:function(c){var d=b("#"+c+"_upload")[0].getError();b("#media_upload_errors").text(a.t("errors.upload_failed","Upload failed with error:")+" "+d),b("#media_upload_progress").hide()}};var l=!1,m=null;b.mediaComment.init=function(c,e){m=m||new Date,c=c||"any",e=e||{};var f=b.trim(b("#identity .user_name").text()||"");f&&(f=f+": "+(new Date).toString("ddd MMM d, yyyy"));var g=e.defaultTitle||f||a.t("titles.media_contribution","Media Contribution"),h=function(){b("#video_record_title,#audio_record_title").val(g),j.dialog({title:a.t("titles.record_upload_media_comment","Record/Upload Media Comment"),width:560,height:460,modal:!1}),j.dialog("option","close",function(){b("#audio_record").before("<div id='audio_record'/>").remove(),b("#video_record").before("<div id='video_record'/>").remove(),e&&e.close&&b.isFunction(e.close)&&e.close.call(j)}),b("#audio_record").before("<div id='audio_record'/>").remove(),b("#video_record").before("<div id='video_record'/>").remove();var f=j.data("ks");c=="video"?(b("#video_record_option").click(),b("#media_record_option_holder").hide(),b("#audio_upload_holder").hide(),b("#video_upload_holder").show()):c=="audio"?(b("#audio_record_option").click(),b("#media_record_option_holder").hide(),b("#audio_upload_holder").show(),b("#video_upload_holder").hide()):(b("#video_record_option").click(),b("#audio_upload_holder").show(),b("#video_upload_holder").show()),b(document).triggerHandler("reset_media_comment_forms");var h=b.trim(b("#identity .user_name").text())+" "+(new Date).toISOString();setTimeout(function(){var c={host:location.protocol+"//"+d.kalturaSettings.domain,rtmpHost:"rtmp://"+(d.kalturaSettings.rtmp_domain||d.kalturaSettings.domain),kshowId:"-1",pid:d.kalturaSettings.partner_id,subpid:d.kalturaSettings.subpartner_id,uid:j.data("uid")||"ANONYMOUS",ks:f,themeUrl:"/media_record/skin.swf",localeUrl:"/media_record/locale.xml",thumbOffset:"1",licenseType:"CC-0.1",showUi:"true",useCamera:"0",maxFileSize:d.kalturaSettings.max_file_size_bytes/1048576,maxUploads:1,partnerData:b.mediaComment.partnerData(),partner_data:b.mediaComment.partnerData(),entryName:h},e={align:"middle",quality:"high",bgcolor:"#ffffff",name:"KRecordAudio",allowScriptAccess:"sameDomain",type:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer",wmode:"opaque"};b("#audio_record").text(a.t("messages.flash_required_record_audio","Flash required for recording audio.")),swfobject.embedSWF("/media_record/KRecord.swf","audio_record","400","300","9.0.0",!1,c,e);var e=b.extend({},e,{name:"KRecordVideo"}),c=b.extend({},c,{useCamera:"1"});b("#video_record").html("Flash required for recording video."),swfobject.embedSWF("/media_record/KRecord.swf","video_record","400","300","9.0.0",!1,c,e)},d.browser.ie?500:10);var i={host:location.protocol+"//"+d.kalturaSettings.domain,partnerId:d.kalturaSettings.partner_id,subPId:d.kalturaSettings.subpartner_id,uid:j.data("uid")||"ANONYMOUS",entryId:"-1",ks:f,thumbOffset:"1",licenseType:"CC-0.1",maxFileSize:d.kalturaSettings.max_file_size_bytes/1048576,maxUploads:1,uiConfId:d.kalturaSettings.upload_ui_conf,jsDelegate:"$.mediaComment.audio_delegate"},k={align:"middle",quality:"high",bgcolor:"#ffffff",name:"KUpload",allowScriptAccess:"always",type:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer",wmode:"transparent"};b("#audio_upload").text(a.t("messages.flash_required_upload_audio","Flash required for uploading audio."));var m="180",n="50";swfobject.embedSWF("//"+d.kalturaSettings.domain+"/kupload/ui_conf_id/"+d.kalturaSettings.upload_ui_conf,"audio_upload",m,n,"9.0.0",!1,i,k),i=b.extend({},i,{jsDelegate:"$.mediaComment.video_delegate"}),b("#video_upload").text(a.t("messages.flash_required_upload_video","Flash required for uploading video."));var m="180",n="50";swfobject.embedSWF("//"+d.kalturaSettings.domain+"/kupload/ui_conf_id/"+d.kalturaSettings.upload_ui_conf,"video_upload",m,n,"9.0.0",!1,i,k);var o,p,q,r,s,t,u,v,w,x,y,z=!1;l=!0,setInterval(function(){l&&(o=b("#audio_record_holder"),p=b("#audio_record"),q=b("#audio_record_meter"),r=0,s=0,u=b("#video_record_holder"),v=b("#video_record"),w=b("#video_record_meter"),x=0,y=0,l=!1),r++,x++;var a=null,c=null;p&&p[0]&&p[0].getMicophoneActivityLevel&&p.parent().length?a=p[0].getMicophoneActivityLevel():p=b("#audio_record"),v&&v[0]&&v[0].getMicophoneActivityLevel&&v.parent().length?c=v[0].getMicophoneActivityLevel():v=b("#video_record");if(a!=null){a=Math.max(a,s),a>-1&&!o.hasClass("with_volume")&&(q.css("display","none"),b("#audio_record_holder").addClass("with_volume").animate({width:420},function(){q.css("display","")}));if(r>4){s=0,r=0;var d=(a-a%10)/10;q.attr("class","volume_meter band_"+d)}else s=a}if(c!=null){c=Math.max(c,y),c>-1&&!u.hasClass("with_volume")&&(w.css("display","none"),b("#video_record_holder").addClass("with_volume").animate({width:420},function(){w.css("display","")}));if(x>4){y=0,x=0;var d=(c-c%10)/10;w.attr("class","volume_meter band_"+d)}else y=c}},20)},i=new Date;i-m>3e5&&b("#media_comment_dialog").dialog("close").remove(),m=i;var j=b("#media_comment_dialog");if(j.length==0){var k=b("<div/>").attr("id","media_comment_dialog");k.text(a.t("messages.loading","Loading...")),k.dialog({title:a.t("titles.record_upload_media_comment","Record/Upload Media Comment"),resizable:!1,width:470,height:300,modal:!1}),b.ajaxJSON("/api/v1/services/kaltura_session","POST",{},function(a){k.data("ks",a.ks),k.data("uid",a.uid)},function(b){b.logged_in==0?k.data("ks-error",a.t("errors.must_be_logged_in","You must be logged in to record media.")):k.data("ks-error",a.t("errors.load_failed","Media Comment Application failed to load.  Please try again."))}),b.get("/partials/_media_comments.html",function(a){var c=function(){k.data("ks")?(k.html(a),k.find("#media_record_tabs").tabs({select:function(){b(document).triggerHandler("reset_media_comment_forms")}}),h()):k.data("ks-error")?k.html(k.data("ks-error")):setTimeout(c,500)};c(),j=b("#media_comment_dialog")}),j=k}else h()},b(document).ready(function(){b(document).bind("reset_media_comment_forms",function(){b("#audio_record_holder_message,#video_record_holder_message").removeClass("saving").find(".recorder_message").html("Saving Recording...<img src='/images/media-saving.gif'/>"),b("#audio_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),b("#video_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),b("#media_upload_submit").text(a.t("buttons.submit","Submit Media File")).attr("disabled",!0),b("#media_upload_settings").css("visibility","hidden"),b("#media_upload_progress").css("visibility","hidden").progressbar().progressbar("option","value",1),b("#media_upload_title").val("");var c=b("#audio_upload")[0]&&b("#audio_upload")[0].getFiles&&b("#audio_upload")[0].getFiles();c&&b("#audio_upload")[0].removeFiles&&c.length>0&&b("#audio_upload")[0].removeFiles(0,c.length-1),c=b("#video_upload")[0]&&b("#video_upload")[0].getFiles&&b("#video_upload")[0].getFiles(),c&&b("#video_upload")[0].removeFiles&&c.length>0&&b("#video_upload")[0].removeFiles(0,c.length-1)}),b("#media_upload_submit").live("click",function(a){b.mediaComment.upload_delegate.submit()}),b("#video_record_option,#audio_record_option").live("click",function(a){a.preventDefault(),b("#video_record_option,#audio_record_option").removeClass("selected_option"),b(this).addClass("selected_option"),b("#audio_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),b("#video_record_holder").stop(!0,!0).clearQueue().css("width","").removeClass("with_volume"),b(this).attr("id")=="audio_record_option"?(b("#video_record_holder_holder").hide(),b("#audio_record_holder_holder").show()):(b("#video_record_holder_holder").show(),b("#audio_record_holder_holder").hide())})}),b(document).bind("media_recording_error",function(){b("#audio_record_holder_message,#video_record_holder_message").find(".recorder_message").html(c(a.t("errors.save_failed","Saving appears to have failed.  Please close this popup to try again."))+"<div style='font-size: 0.8em; margin-top: 20px;'>"+c(a.t("errors.persistent_problem","If this problem keeps happening, you may want to try recording your media locally and then uploading the saved file instead."))+"</div>")})})(b,INST),window.mediaCommentCallback=function(a){var c=b.trim(b("#current_context_code").text())||b.trim("user_"+b("#identity .user_id").text());for(var d in a){var e=a[d];if(e.mediaType==1||e.mediaType==2||e.mediaType==5||!0){var f="video";e.mediaType==2?f="image":e.mediaType==5&&(f="audio"),c&&b.ajaxJSON("/media_objects","POST",{id:e.entryId,type:f,context_code:c,title:e.name},function(a){b(document).triggerHandler("media_object_created",a)},function(a){}),b(document).triggerHandler("media_comment_created",{id:e.entryId,mediaType:f})}}b("#media_comment_create_dialog").empty().dialog("close")},window.beforeAddEntry=function(){var a=Math.random();b.mediaComment.lastAddAttemptId=a,setTimeout(function(){b.mediaComment.lastAddAttemptId==a&&b(document).triggerHandler("media_recording_error")},3e4),b("#audio_record_holder_message,#video_record_holder_message").addClass("saving")},window.addEntryFail=function(){b(document).triggerHandler("media_recording_error")},window.addEntryFailed=function(){b(document).triggerHandler("media_recording_error")},window.addEntryComplete=function(c){b.mediaComment.lastAddAttemptId=null,b("#audio_record_holder_message,#video_record_holder_message").removeClass("saving");try{var d=null;b.isArray(c)||(c=[c]);for(var e=0;e<c.length;e++){var f=c[e];b("#media_record_tabs").tabs("option","selected")==0?d=b("#video_record_title,#audio_record_title").filter(":visible:first").val():b("#media_record_tabs").tabs("option","selected")!=1,f.entryType==1&&b("#audio_record_option").hasClass("selected_option")&&(f.entryType=5),b.mediaComment.entryAdded(f.entryId,f.entryType,f.entryName,d),b("#media_comment_dialog").dialog("close")}}catch(g){console.log(g),alert(a.t("errors.save_failed_try_again","Entry failed to save.  Please try again."))}}}),define("instructure",["ENV","INST","i18n!instructure","jquery","underscore","compiled/userSettings","str/htmlEscape","wikiSidebar","instructure_helper","jqueryui/draggable","jquery.ajaxJSON","jquery.doc_previews","jquery.dropdownList","jquery.google-analytics","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.keycodes","jquery.loadingImg","jquery.rails_flash_notifications","jquery.templateData","compiled/jquery/fixDialogButtons","media_comments","tinymce.editor_box","vendor/date","vendor/jquery.ba-tinypubsub","jqueryui/accordion","jqueryui/resizable","jqueryui/sortable","jqueryui/tabs","vendor/scribd.view"],function(a,b,c,d,e,f,g,h){var i=function(b){a.AUTHENTICITY_TOKEN&&b.setRequestHeader("X-CSRF-Token",a.AUTHENTICITY_TOKEN)};d.ajaxPrefilter(function(a,b,c){a.crossDomain||i(c);var e=a.url,f=(new Date).getTime();c.done(function(a,b,c){var g=(new Date).getTime()-f;if(g>1e3){var h='{"requestingPage": "'+window.location+'," "status": "'+b+'", "X-Request-Context-Id" : "'+c.getResponseHeader("X-Request-Context-Id")+'", "X-Runtime": '+c.getResponseHeader("X-Runtime")+"}";d.trackEvent("XHRs",e,h,g)}})}),d(function(){function a(){window.clearTimeout(r),q.find(".menu-item").removeClass("hover hover-pending")}function i(){return p.filter(".hover-pending").removeClass("hover-pending"),r=window.setTimeout(a,400),!1}function j(b){var c=p.filter(".hover").length>0;a();var e=d(this);return e.addClass("hover-pending"),c&&e.addClass("hover"),setTimeout(function(){e.hasClass("hover-pending")&&e.addClass("hover")},300),d.publish("menu/hovered",e),!1}function k(){var a=500,b=s.find("li:visible:first").height()*1.5;t=t||s.find(".ellipsible"),t.css("maxWidth",""),t.ifExists(function(){for(var c=0;s.height()>b&&c<20;c++)u||(u=!0,t.addClass("ellipsis")),t.css("maxWidth",a-=20)})}function l(){var a=d("#content");d(".user_content:not(.enhanced):visible").addClass("unenhanced"),d(".user_content.unenhanced:visible").each(function(){var b=d(this);b.find("img").css("maxWidth",Math.min(a.width(),b.width())),b.data("unenhanced_content_html",b.html())}).find(".enhanceable_content").show().filter(".dialog").each(function(){var a=d(this);a.hide(),a.closest(".user_content").find("a[href='#"+a.attr("id")+"']").click(function(b){b.preventDefault(),a.dialog()})}).end().filter(".draggable").draggable().end().filter(".resizable").resizable().end().filter(".sortable").sortable().end().filter(".accordion").accordion().end().filter(".tabs").each(function(){d(this).tabs()}).end().end().find("a:not(.not_external, .external):external").each(function(){d(this).not(":has(img)").addClass("external").html("<span>"+d(this).html()+"</span>").attr("target","_blank").append('<span class="ui-icon ui-icon-extlink ui-icon-inline" title="'+g(c.t("titles.external_link","Links to an external site."))+'"/>')}).end().find("a.instructure_file_link").each(function(){var a=d(this),b=d("<span class='instructure_file_link_holder link_holder'/>");a.removeClass("instructure_file_link").before(b).appendTo(b),a.attr("target")!="_blank"&&b.append("<a href='"+a.attr("href")+"' target='_blank' title='"+g(c.t("titles.view_in_new_window","View in a new window"))+"' style='padding-left: 5px;'><img src='/images/popout.png'/></a>")}),d.filePreviewsEnabled()&&d("a.instructure_scribd_file").not(".inline_disabled").each(function(){var a=d(this);if(d.trim(a.text())){var b=d("<span class='instructure_scribd_file_holder link_holder'/>"),e=d("<a class='scribd_file_preview_link' href='"+a.attr("href")+"' title='"+g(c.t("titles.preview_document","Preview the document"))+"' style='padding-left: 5px;'><img src='/images/preview.png'/></a>");a.removeClass("instructure_scribd_file").before(b).appendTo(b),b.append(e),a.hasClass("auto_open")&&e.click()}}),d(".user_content.unenhanced a").find("img.media_comment_thumbnail").each(function(){d(this).closest("a").addClass("instructure_inline_media_comment")}).end().filter(".instructure_inline_media_comment").removeClass("no-underline").mediaCommentThumbnail("normal").end().filter(".instructure_video_link, .instructure_audio_link").mediaCommentThumbnail("normal",!0).end().not(".youtubed").each(function(){var a=d(this),b=a.attr("href"),e=d.youTubeID(b||"");if(!a.hasClass("inline_disabled")&&e){var f=d('<a href="'+b+'" class="youtubed"><img src="/images/play_overlay.png" class="media_comment_thumbnail" style="background-image: url(//img.youtube.com/vi/'+e+'/2.jpg)"/></a>').click(function(a){a.preventDefault();var b=d("<span class='youtube_holder' style='display: block;'><object width='425' height='344'><param name='wmode' value='opaque'></param><param name='movie' value='//www.youtube.com/v/"+e+"&autoplay=1&hl=en_US&fs=1&'></param><param name='allowFullScreen' value='true'></param><param name='allowscriptaccess' value='always'></param><embed src='//www.youtube.com/v/"+e+"&autoplay=1&hl=en_US&fs=1&' type='application/x-shockwave-flash' allowscriptaccess='always' allowfullscreen='true' width='425' height='344' wmode='opaque'></embed></object><br/><a href='#' style='font-size: 0.8em;' class='hide_youtube_embed_link'>"+g(c.t("links.minimize_youtube_video","Minimize Video"))+"</a></span>");b.find(".hide_youtube_embed_link").click(function(a){a.preventDefault(),b.remove(),f.show(),d.trackEvent("hide_embedded_content","hide_you_tube")}),d(this).after(b).hide()});d.trackEvent("show_embedded_content","show_you_tube"),a.addClass("youtubed").after(f)}}),d(".user_content.unenhanced").removeClass("unenhanced").addClass("enhanced"),setTimeout(function(){d(".user_content form.user_content_post_form:not(.submitted)").submit().addClass("submitted")},10)}function m(){x=d(".time_ago_date:visible").toArray(),n()}function n(){var a=x.shift();if(a){var b=d(a),e=b.data("original_date")||"",f=b.data("parsed_date")||(e?Date.parse(e.replace(/ (at|by)/,"")):Date.parse((b.text()||"").replace(/ (at|by)/,"")));if(f){var g=new Date;g.setDate(g.getDate()+1);if(!e&&f>g&&f-g>36e5){var h=f.getUTCFullYear().toString();f>g&&f.getUTCFullYear()==g.getUTCFullYear()&&!b.text().match(h)&&f.setUTCFullYear(f.getUTCFullYear()-1)}var i=g.getTimezoneOffset()-w;isNaN(i)&&(i=0);var j=g-f+i*60*1e3;b.data("original_date",f.toString("MMM d, yyyy h:mmtt")),b.data("parsed_date",f);var k=f.toString("MMM d, yyyy")+f.toString(" h:mmtt").toLowerCase(),l=k;if(j<864e5)if(j<36e5)if(j<6e4)l=c.t("#time.less_than_a_minute_ago","less than a minute ago");else{var o=parseInt(j/6e4,10);l=c.t("#time.count_minutes_ago",{one:"1 minute ago",other:"%{count} minutes ago"},{count:o})}else{var p=parseInt(j/36e5,10);l=c.t("#time.count_hours_ago",{one:"1 hour ago",other:"%{count} hours ago"},{count:p})}b.text(l),b.attr("title",k)}setTimeout(n,1)}else setTimeout(m,6e4)}function o(a){d("#wizard_spacer_box").height(z.height()||0).showIf(a==="show")}window._earlyClick&&(document.removeEventListener?document.removeEventListener("click",_earlyClick,!1):document.detachEvent("onclick",_earlyClick),_earlyClick.clicks&&setTimeout(function(){d.each(e.uniq(_earlyClick.clicks),function(){var a=d.Event("click");a.preventDefault(),d(this).trigger(a)})},1)),d("#main:not(.already_sized)").css({minHeight:Math.max(d("#left_side").height(),parseInt((d("#main").css("minHeight")||"").replace("px",""),10))});var p=d(".menu-item"),q=d("#menu"),r;q.delegate(".menu-item","mouseenter focusin",j).delegate(".menu-item","mouseleave focusout",i),b.browser.ie7&&d(".menu-item-drop").width(function(){var a=d(this).find(".menu-item-drop-column");return a.length*a.css("width").replace("px","")}),p.live("touchstart",function(){if(!d(this).hasClass("hover"))return j.call(this,event)}),d(document).bind("touchstart",function(a){d(a.target).closest(".menu-item").length||i()});var s=d("#breadcrumbs"),t,u=!1;k(),d(window).resize(k),d("#ajax_authenticity_token").ifExists(function(){this.text()&&d("input[name='authenticity_token']").val(this.text())}),d(document).keycodes("shift+/",function(a){d("#keyboard_navigation").dialog("close").dialog({title:c.t("titles.keyboard_shortcuts","Keyboard Shortcuts"),width:400,height:"auto",autoOpen:!1}).dialog("open")}),d("#switched_role_type").ifExists(function(){var a=d(this).attr("class"),b=d("<img/>"),e=null;switch(d(this).data("role")){case"TeacherEnrollment":e=c.t("switched_roles_message.teacher","You have switched roles temporarily for this course, and are now viewing the course as a teacher.  You can restore your role and permissions from the course home page.");break;case"StudentEnrollment":e=c.t("switched_roles_message.student","You have switched roles temporarily for this course, and are now viewing the course as a student.  You can restore your role and permissions from the course home page.");break;case"TaEnrollment":e=c.t("switched_roles_message.ta","You have switched roles temporarily for this course, and are now viewing the course as a TA.  You can restore your role and permissions from the course home page.");break;case"ObserverEnrollment":e=c.t("switched_roles_message.observer","You have switched roles temporarily for this course, and are now viewing the course as an observer.  You can restore your role and permissions from the course home page.");break;case"DesignerEnrollment":e=c.t("switched_roles_message.designer","You have switched roles temporarily for this course, and are now viewing the course as a designer.  You can restore your role and permissions from the course home page.");break;default:e=c.t("switched_roles_message.student","You have switched roles temporarily for this course, and are now viewing the course as a student.  You can restore your role and permissions from the course home page.")}b.attr("src","/images/warning.png").attr("title",e).css({paddingRight:2,width:12,height:12}),d("#crumb_"+a).find("a").prepend(b)}),d("a.show_quoted_text_link").live("click",function(a){var b=d(this).parents(".quoted_text_holder").children(".quoted_text");b.length>0&&(a.preventDefault(),b.show(),d(this).hide())}),d(".custom_search_results_link").click(function(a){a.preventDefault();var b=d("#custom_search_results_dialog");b.dialog("close").dialog({autoOpen:!1,title:c.t("titles.search_for_open_resources","Search for Open Resources"),width:600,height:400}).dialog("open");var e=b.data("searchControl");e&&e.execute(d("title").text())}),d("a.instructure_inline_media_comment").live("click",function(a){a.preventDefault();if(b.kalturaSettings){var e=d(this),f=d("<span><span></span></span>"),g="video",h=e.data("media_comment_id")||e.find(".media_comment_id:first").text();f.css("display","block"),!h&&e.attr("id")&&e.attr("id").match(/^media_comment_/)&&(h=e.attr("id").substring(14)),e.after(f),e.hide();if(e.data("media_comment_type")==="audio"||e.is(".audio_playback, .audio_comment, .instructure_audio_link"))g="audio";f.children("span").mediaComment("show_inline",h,g,e.attr("href")),f.append("<br/><a href='#' style='font-size: 0.8em;' class='hide_flash_embed_link'>"+c.t("links.minimize_embedded_kaltura_content","Minimize Embedded Content")+"</a>"),f.find(".hide_flash_embed_link").click(function(a){a.preventDefault(),f.remove(),e.show(),d.trackEvent("hide_embedded_content","hide_media")}),d.trackEvent("show_embedded_content","show_media")}else alert(c.t("alerts.kaltura_disabled","Kaltura has been disabled for this Canvas site"))}),d("a.equella_content_link").live("click",function(a){a.preventDefault();var b=d("#equella_preview_dialog");if(!b.length){b=d("<div/>"),b.attr("id","equella_preview_dialog").hide(),b.html("<h2/><iframe style='background: url(/images/ajax-loader-medium-444.gif) no-repeat left top; width: 800px; height: 350px; border: 0;' src='about:blank' borderstyle='0'/><div style='text-align: right;'><a href='#' class='original_link external external_link' target='_blank'>"+g(c.t("links.view_equella_content_in_new_window","view the content in a new window"))+"</a>"),b.find("h2").text(d(this).attr("title")||d(this).text()||c.t("titles.equella_content_preview","Equella Content Preview"));var e=b.find("iframe");setTimeout(function(){e.css("background","#fff")},2500),d("body").append(b),b.dialog({autoOpen:!1,width:"auto",resizable:!1,title:c.t("titles.equella_content_preview","Equella Content Preview"),close:function(){b.find("iframe").attr("src","about:blank")}})}b.find(".original_link").attr("href",d(this).attr("href")),b.dialog("close").dialog("open"),b.find("iframe").attr("src",d(this).attr("href"))}),d(".dialog_opener[aria-controls]:not(.user_content *)").live("click",function(a){var b=this;d("#"+d(this).attr("aria-controls")).ifExists(function(c){a.preventDefault(),c.data("dialog")||(c.dialog(d.extend({autoOpen:!1,modal:!0},d(b).data("dialogOpts"))),c.fixDialogButtons()),c.dialog("open")})}),d.filePreviewsEnabled()?d("a.scribd_file_preview_link").live("click",function(a){a.preventDefault();var b=d(this).loadingImage({image_size:"small"}).hide();d.ajaxJSON(b.attr("href").replace(/\/download.*/,""),"GET",{},function(a){var e=a&&a.attachment,f=e&&e.scribd_doc&&e.scribd_doc.attributes;b.loadingImage("remove");if(e&&(f||d.isPreviewable(e.content_type,"google"))){var h=d("<span><br /></span>").insertAfter(b.parents(".link_holder:last")).loadDocPreview({scribd_doc_id:f&&f.doc_id,scribd_access_key:f&&f.access_key,mimeType:e.content_type,public_url:e.authenticated_s3_url}).append(d('<a href="#" style="font-size: 0.8em;" class="hide_file_preview_link">'+g(c.t("links.minimize_file_preview","Minimize File Preview"))+"</a>").click(function(a){a.preventDefault(),b.show(),h.remove(),d.trackEvent("hide_embedded_content","hide_file_preview")}));d.trackEvent("show_embedded_content","show_file_preview")}},function(){b.loadingImage("remove").hide()})}):d("a.scribd_file_preview_link").live("click",function(a){a.preventDefault(),alert(c.t("alerts.file_previews_disabled","File previews have been disabled for this Canvas site"))});var v;d.subscribe("userContent/change",function(){clearTimeout(v),v=setTimeout(l,50)}),d(document).bind("user_content_change",l),setInterval(l,15e3),setTimeout(l,1e3),d(".zone_cached_datetime").each(function(){if(d(this).attr("title")){var a=d.parseFromISO(d(this).attr("title"));a.timestamp&&d(this).text(a.datetime_formatted)}}),d(".show_sub_messages_link").click(function(a){a.preventDefault(),d(this).parents(".subcontent").find(".communication_sub_message.toggled_communication_sub_message").removeClass("toggled_communication_sub_message"),d(this).parents(".communication_sub_message").remove()}),d(".show_comments_link").click(function(a){a.preventDefault(),d(this).closest("ul").find("li").show(),d(this).closest("li").remove()}),d(".communication_message .message_short .read_more_link").click(function(a){a.preventDefault(),d(this).parents(".communication_message").find(".message_short").hide().end().find(".message").show()}),d(".communication_message .close_notification_link").live("click",function(a){a.preventDefault();var b=d(this).parents(".communication_message");b.confirmDelete({url:d(this).attr("rel"),noMessage:!0,success:function(){d(this).slideUp(function(){d(this).remove()})}})}),d(".communication_message .add_entry_link").click(function(a){a.preventDefault();var b=d(this).parents(".communication_message"),c=b.find(".reply_message").hide(),f=b.find(".communication_sub_message.blank").clone(!0).removeClass("blank");c.before(f.show());var g=e.uniqueId("textarea_");f.find("textarea.rich_text").attr("id",g),d(document).triggerHandler("richTextStart",d("#"+g)),f.find("textarea:first").focus().select()}),d(document).bind("richTextStart",function(a,b){if(!b||b.length===0)return;b=d(b);if(!b||b.length===0)return;b.editorBox(),b.editorBox("focus",!0),h&&(h.attachToEditor(b),d("#sidebar_content").hide(),h.show())}).bind("richTextEnd",function(a,b){if(!b||b.length===0)return;b=d(b);if(!b||b.length===0)return;b.editorBox("destroy"),h&&(d("#sidebar_content").show(),h.hide())}),d(".cant_record_link").click(function(a){a.preventDefault(),d("#cant_record_dialog").dialog("close").dialog({autoOpen:!1,modal:!0,title:c.t("titles.cant_create_recordings","Can't Create Recordings?"),width:400}).dialog("open")}),d(".communication_message .content .links .show_users_link,.communication_message .header .show_users_link").click(function(a){a.preventDefault(),d(this).parents(".communication_message").find(".content .users_list").slideToggle()}),d(".communication_message .delete_message_link").click(function(a){a.preventDefault(),d(this).parents(".communication_message").confirmDelete({noMessage:!0,url:d(this).attr("href"),success:function(){d(this).slideUp()}})}),d(".communication_sub_message .add_conversation_message_form").formSubmit({beforeSubmit:function(a){d(this).find("button").attr("disabled",!0),d(this).find(".submit_button").text(c.t("status.posting_message","Posting Message...")),d(this).loadingImage()},success:function(a){d(this).loadingImage("remove");var b=d(this).parents(".communication_sub_message"),c=b.parents(".communication_message");message_data=a.messages[0],b.fillTemplateData({data:{post_date:d.parseFromISO(message_data.created_at).datetime_formatted,message:message_data.body},htmlValues:["message"]}),b.find(".message").show(),d(this).remove(),c.find(".reply_message").show(),d.flashMessage("Message Sent!"),d(document).triggerHandler("user_content_change"),location.href.match(/dashboard/)&&d.trackEvent("dashboard_comment","create")},error:function(a){d(this).loadingImage("remove"),d(this).find("button").attr("disabled",!1),d(this).find(".submit_button").text("Post Failed, Try Again"),d(this).formErrors(a)}}),d(".communication_sub_message .add_sub_message_form").formSubmit({beforeSubmit:function(a){d(this).find("button").attr("disabled",!0),d(this).find(".submit_button").text(c.t("status.posting_message","Posting Message...")),d(this).loadingImage()},success:function(a){d(this).loadingImage("remove");var b=d(this).parents(".communication_sub_message");if(d(this).hasClass("submission_comment_form")){var c=d(this).getTemplateData({textValues:["submission_user_id"]}).submission_user_id,e=null;for(var f in a){var g=a[f].submission;g.user_id==c&&(e=g)}if(e){var h=e.submission_comments[e.submission_comments.length-1].submission_comment;h.post_date=d.parseFromISO(h.created_at).datetime_formatted,h.message=h.formatted_body||h.comment,b.fillTemplateData({data:h,htmlValues:["message"]})}}else{var i=a.discussion_entry;i.post_date=d.parseFromISO(i.created_at).datetime_formatted,b.find(".content > .message_html").val(i.message),b.fillTemplateData({data:i,htmlValues:["message"]})}b.find(".message").show(),b.find(".user_content").removeClass("enhanced"),b.parents(".communication_message").find(".reply_message").removeClass("lonely_behavior_message").show(),d(document).triggerHandler("richTextEnd",d(this).find("textarea.rich_text")),d(document).triggerHandler("user_content_change"),d(this).remove(),location.href.match(/dashboard/)&&d.trackEvent("dashboard_comment","create")},error:function(a){d(this).loadingImage("remove"),d(this).find("button").attr("disabled",!1),d(this).find(".submit_button").text(c.t("errors.posting_message_failed","Post Failed, Try Again")),d(this).formErrors(a)}}),d(".communication_sub_message form .cancel_button").click(function(){var a=d(this).parents(".communication_sub_message"),b=d(this).parents(".communication_message");d(document).triggerHandler("richTextEnd",a.find("textarea.rich_text")),a.remove(),b.find(".reply_message").show()}),d(".communication_message,.communication_sub_message").bind("focusin mouseenter",function(){d(this).addClass("communication_message_hover")}).bind("focusout mouseleave",function(){d(this).removeClass("communication_message_hover")}),d(".communication_sub_message .more_options_reply_link").click(function(a){a.preventDefault();var b=d(this).parents("form"),c=null;b.hasClass("submission_comment_form")?c={comment:b.find("textarea:visible:first").val()||""}:c={message:b.find("textarea:visible:first").val()||""},location.href=d(this).attr("href")+"?message="+encodeURIComponent(c.message)}),d(".communication_message.new_activity_message").ifExists(function(){this.find(".message_type img").click(function(){var a=d(this),b=d.trim(a.attr("class"));a.parents(".message_type").find("img").removeClass("selected"),a.addClass("selected").parents(".new_activity_message").find(".message_type_text").text(a.attr("title")).end().find(".activity_form").hide().end().find("textarea, :text").val("").end().find("."+b+"_form").show().find(".context_select").change()}),this.find(".context_select").change(function(){var a=d(this),b=a.val(),c=a.parents(".communication_message"),e=c.find("form");e.attr("action",c.find("."+b+"_form_url").attr("href")),e.data("context_name",this.options[this.selectedIndex].text),e.data("context_code",b),c.find(".roster_list").hide().find(":checkbox").each(function(){d(this).attr("checked",!1)}),c.find("."+b+"_roster_list").show()}).triggerHandler("change"),this.find(".cancel_button").click(function(a){d(this).parents(".communication_message").hide().prev(".new_activity_message").show()}),this.find(".new_activity_message_link").click(function(a){a.preventDefault(),d(this).parents(".communication_message").hide().next(".new_activity_message").find(".message_type img.selected").click().end().show().find(":text:visible:first").focus().select()}),this.find("form.message_form").formSubmit({beforeSubmit:function(a){d("button").attr("disabled",!0),d("button.submit_button").text(c.t("status.posting_message","Posting Message..."))},success:function(a){d("button").attr("disabled",!1),d("button.submit_button").text("Post Message");var b=d(this).data("context_code")||"",c=d(this).data("context_name")||"";if(d(this).hasClass("discussion_topic_form")){var e=a.discussion_topic;e.context_code=c,e.user_name=d("#identity .user_name").text(),e.post_date=d.parseFromISO(e.created_at).datetime_formatted,e.topic_id=e.id;var f=d(this).parents(".communication_message").find(".template"),g=f.find(".communication_message").clone(!0);g.find(".header .title,.behavior_content .less_important a").attr("href",f.find("."+b+"_topic_url").attr("href")),g.find(".add_entry_link").attr("href",f.find("."+b+"_topics_url").attr("href")),g.find(".user_name").attr("href",f.find("."+b+"_user_url").attr("href")),g.find(".topic_assignment_link,.topic_assignment_url").attr("href",f.find("."+b+"_assignment_url").attr("href")),g.find(".attachment_name,.topic_attachment_url").attr("href",f.find("."+b+"_attachment_url").attr("href"));var h={discussion_topic_id:e.id};g.fillTemplateData({data:e,hrefValues:["topic_id","user_id","assignment_id","attachment_id"],avoid:".subcontent"}),g.find(".subcontent").fillTemplateData({data:h,hrefValues:["topic_id","user_id"]}),g.find(".subcontent form").attr("action",f.find("."+b+"_entries_url").attr("href")),g.fillFormData(h,{object_name:"discussion_entry"}),d(this).parents(".communication_message").after(g.hide()),g.slideDown(),d(this).parents(".communication_message").slideUp(),d(this).parents(".communication_message").prev(".new_activity_message").slideDown()}else d(this).hasClass("announcement_form")||location.reload()},error:function(a){d("button").attr("disabled",!1),d("button.submit_button").text(c.t("errors.posting_message_failed","Post Failed, Try Again")),d(this).formErrors(a)}})}),d("#topic_list .show_all_messages_link").show().click(function(a){a.preventDefault(),d("#topic_list .topic_message").show(),d(this).hide()});var w=parseInt(d("#time_zone_offset").text(),10),x=[];setTimeout(m,100);var y=d("#sequence_footer .sequence_details_url").filter(":last").attr("href");y&&d.ajaxJSON(y,"GET",{},function(a){var b=d("#sequence_footer");a.current_item&&(d("#sequence_details .current").fillTemplateData({data:a.current_item.content_tag}),d.each({previous:".prev",next:".next"},function(e,f){var g=b.find(f);if(a[e+"_item"]||a[e+"_module"]){var h=a[e+"_item"]&&a[e+"_item"].content_tag||a[e+"_module"]&&a[e+"_module"].context_module;a[e+"_item"]||(h.title=h.title||h.name,h.text=e=="previous"?c.t("buttons.previous_module","Previous Module"):c.t("buttons.next_module","Next Module"),g.addClass("module_button")),g.fillTemplateData({data:h}),a[e+"_item"]?g.attr("href",d.replaceTags(b.find(".module_item_url").attr("href"),"id",h.id)):g.attr("href",d.replaceTags(b.find(".module_url").attr("href"),"id",h.id)+"/items/"+(e==="previous"?"last":"first"))}else g.hide()}),b.show(),d(window).resize())}),d(".module_legend_link").click(function(a){var b=d(this).parents(".module_legend");b.hide(),b.next(".module_legend").show()});var z=d("#wizard_box"),A=window.location.pathname;d(".close_wizard_link").click(function(a){a.preventDefault(),f.set("hide_wizard_"+A,!0),z.slideUp("fast",function(){d(".wizard_popup_link").slideDown("fast"),o("hide")})}),d(".wizard_popup_link").click(function(a){a.preventDefault(),d(".wizard_popup_link").slideUp("fast"),z.slideDown("fast",function(){z.triggerHandler("wizard_opened"),d([document,window]).triggerHandler("scroll")})}),z.ifExists(function(a){a.bind("wizard_opened",function(){var b=a.find(".wizard_options"),c=b.height();b.height(c),a.find(".wizard_details").css({maxHeight:c-5,overflow:"auto"}),o("show")}),a.find(".wizard_options_list .option").click(function(b){var c=d(this),e=d(b.target).closest("a");if(e.length>0&&e.attr("href")!="#")return;b.preventDefault(),c.parents(".wizard_options_list").find(".option.selected").removeClass("selected"),c.addClass("selected");var f=a.find(".wizard_details"),g=c.getTemplateData({textValues:["header"]});g.link=g.header,f.fillTemplateData({data:g}),f.find(".details").remove(),f.find(".header").after(c.find(".details").clone(!0).show());var h=c.find(".header").attr("href");h!="#"?f.find(".link").show().attr("href",h):f.find(".link").hide(),f.hide().fadeIn("fast")}),setTimeout(function(){f.get("hide_wizard_"+A)||d(".wizard_popup_link.auto_open:first").click()},500)}),d(".more_link").click(function(a){return d(this).closest("li").slideUp().parents("ul").children(":hidden").slideDown().first().find(":tabbable:first").focus(),!1}),d(".to-do-list, #topic_list").delegate(".disable_item_link","click",function(a){function b(a){e.confirmDelete({url:a,noMessage:!0,success:function(){d(this).slideUp(function(){d(this).remove()})}})}a.preventDefault();var e=d(this).parents("li, div.topic_message"),f=d(this).data("api-href");d(this).hasClass("grading")?(options={},options['<span class="ui-icon ui-icon-trash">&nbsp;</span> '+g(c.t("ignore_forever","Ignore Forever"))]=function(){b(f+"?permanent=1")},options['<span class="ui-icon ui-icon-star">&nbsp;</span> '+g(c.t("ignore_until_new_submission","Ignore Until New Submission"))]=function(){b(f)},d(this).dropdownList({options:options})):b(f+"?permanent=1")}),d("h1").length||d('<h1 class="ui-helper-hidden-accessible" />').text(document.title).prependTo("#content");if(!d("h2").length&&d("#breadcrumbs li:last").text().length){var B=d('<h2 class="ui-helper-hidden-accessible" />').text(d("#breadcrumbs li:last").text()),C=d("#content h1");C.length?C.after(B):B.prependTo("#content")}setTimeout(function(){d("#content a:external,#content a.explicit_external_link").each(function(){d(this).not(":has(img)").not(".not_external").addClass("external").children("span.ui-icon-extlink").remove().end().html("<span>"+d(this).html()+"</span>").attr("target","_blank").append('<span class="ui-icon ui-icon-extlink ui-icon-inline" title="'+g(c.t("titles.external_link","Links to an external site."))+'"/>')})},2e3)})}),define("link_enrollment",["i18n!link_enrollment","jquery","jquery.ajaxJSON","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.templateData"],function(a,b){window.link_enrollment=function(){return{choose:function(c,d,e,f){var g=b(this).parents(".user"),h=b("#link_student_dialog"),i={};i.short_name=c,h.fillTemplateData({data:i}),h.data("callback",f);if(!h.data("loaded")){h.find(".loading_message").text(a.t("messages.loading_students","Loading Students...")),h.find(".student_options option:not(.blank)").remove();var j=h.find(".student_url").attr("href");b.ajaxJSON(j,"GET",{},function(c){for(var f in c){var g=c[f],i=b("<option/>");g.id&&g.name&&(i.val(g.id).text(g.name),h.find(".student_options").append(i))}var i=b("<option/>");i.val("none").text(a.t("options.no_link","[ No Link ]")),h.find(".student_options").append(i),h.find(".loading_message").hide().end().find(".students_link").show(),link_enrollment.updateDialog(h,d,e),h.data("loaded",!0)},function(){h.find(".loading_message").text(a.t("errors.load_failed","Loading Students Failed, please try again"))})}else link_enrollment.updateDialog(h,d,e);h.find(".existing_user").showIf(e),h.dialog("close").dialog({autoOpen:!1,title:a.t("titles.link_to_student","Link to Student"),width:400}).dialog("open")},updateDialog:function(a,b,c){a.find(".enrollment_id").val(b),a.find(".existing_user").showIf(c),a.find(".student_options").val("none").val(c);var d={};d.existing_user_name=a.find(".student_options option[value='"+c+"']").first().text(),a.fillTemplateData({data:d})}}}(),b(document).ready(function(){b(document).bind("enrollment_added",function(){b("#link_student_dialog").data("loaded",!1)}),b("#link_student_dialog .cancel_button").click(function(){b("#link_student_dialog").dialog("close")}),b("#link_student_dialog_form").formSubmit({beforeSubmit:function(c){b(this).find("button").attr("disabled",!0).end().find(".save_button").text(a.t("messages.linking_to_student","Linking to Student..."))},success:function(c){b(this).find("button").attr("disabled",!1).end().find(".save_button").text(a.t("buttons.link","Link to Student"));var d=c.enrollment,e=b("#link_student_dialog").data("callback");b("#link_student_dialog").dialog("close"),b.isFunction(e)&&d&&e(d)},error:function(c){b(this).find("button").attr("disabled",!1).find(".save_button").text(a.t("errors.link_failed","Linking Failed, please try again"))}})})}),function(){require(["compiled/widget/courseList","compiled/helpDialog","translations/_core_en","jquery.ajaxJSON","vendor/firebugx","jquery.google-analytics","vendor/swfobject/swfobject","reminders","jquery.instructure_forms","instructure","ajax_errors","page_views","compiled/license_help","compiled/behaviors/ujsLinks","compiled/behaviors/elementToggler","media_comments","order","jqueryui/effects/core","jqueryui/effects/drop","jqueryui/progressbar","jqueryui/tabs","jquery.fancyplaceholder","jqueryui/autocomplete","link_enrollment","media_comments","vendor/jquery.pageless","vendor/jquery.scrollTo"],function(a,b){return a.init(),b.initTriggers()})}.call(this),define("common",function(){})