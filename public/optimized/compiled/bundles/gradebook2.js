/*! 
 * jquery.event.drag - v 2.0.0 
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */
/**
 * @license
 * (c) 2009-2010 Michael Leibman
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 * Distributed under MIT license.
 * All rights reserved.
 *
 * SlickGrid v2.0 alpha
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */
/*!
 * jQuery UI @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(){define("compiled/grade_calculator",["INST","jquery"],function(a,b){var c;return c=function(){function a(){}return a.name="GradeCalculator",a.calculate=function(a,c,d){var e,f=this;return e={},e.group_sums=b.map(c,function(b){return{group:b,current:f.create_group_sum(b,a,!0),"final":f.create_group_sum(b,a,!1)}}),e.current=this.calculate_total(e.group_sums,!0,d),e["final"]=this.calculate_total(e.group_sums,!1,d),e},a.create_group_sum=function(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;l={submissions:[],score:0,possible:0,submission_count:0},y=a.assignments;for(m=0,q=y.length;m<q;m++){e=y[m],f={score:0,possible:0,percent:0,drop:!1,submitted:!1},k=null;for(n=0,r=c.length;n<r;n++){j=c[n];if(j.assignment_id!==e.id)continue;k=j;break}k==null&&(k={score:null}),k.assignment_group_id=a.id,k.points_possible==null&&(k.points_possible=e.points_possible),f.submission=k,l.submissions.push(f);if(!d||k.score!=null&&k.score!=="")f.score=this.parse(k.score),f.possible=this.parse(e.points_possible),f.percent=this.parse(f.score/f.possible),f.submitted=k.score!=null&&k.score!=="",f.submitted&&(l.submission_count+=1)}l.submissions.sort(function(a,b){return a.percent-b.percent}),i=b.extend({drop_lowest:0,drop_highest:0,never_drop:[]},a.rules),g=0,z=["low","high"];for(o=0,s=z.length;o<s;o++){h=z[o],A=l.submissions;for(p=0,t=A.length;p<t;p++)f=A[p],!f.drop&&i["drop_"+h+"est"]>0&&b.inArray(f.assignment_id,i.never_drop)===-1&&f.possible>0&&f.submitted&&(f.drop=!0,(B=f.submission)!=null&&(B.drop=!0),i["drop_"+h+"est"]-=1,g+=1)}g>0&&g===l.submission_count&&(l.submissions[l.submissions.length-1].drop=!1,(C=l.submissions[l.submissions.length-1].submission)!=null&&(C.drop=!1),g-=1),l.submission_count-=g,D=l.submissions;for(w=0,u=D.length;w<u;w++)j=D[w],j.drop||(l.score+=j.score);E=l.submissions;for(x=0,v=E.length;x<v;x++)j=E[x],j.drop||(l.possible+=j.possible);return l},a.calculate_total=function(a,b,c){var d,e,f,g,h,i,j,k,l;e=b?"current":"final";if(c==="percent"){h=0,g=0,j=0;for(k=0,l=a.length;k<l;k++){d=a[k];if(d.group.group_weight>0)d[e].submission_count>0&&d[e].possible>0&&(i=d[e].score/d[e].possible,h+=d.group.group_weight*i,g+=d.group.group_weight),j+=d.group.group_weight;else continue}return b&&g<100&&(f=j<100?j:100,h=h*f/g),{score:h,possible:100}}return{score:this.sum(function(){var b,c,f;f=[];for(b=0,c=a.length;b<c;b++)d=a[b],f.push(d[e].score);return f}()),possible:this.sum(function(){var b,c,f;f=[];for(b=0,c=a.length;b<c;b++)d=a[b],f.push(d[e].possible);return f}())}},a.sum=function(a){var b,c,d,e;b=0;for(d=0,e=a.length;d<e;d++)c=a[d],b+=c;return b},a.parse=function(a){var b;return b=parseFloat(a),b&&isFinite(b)?b:0},a.letter_grade=function(a,c){var d,e;return c<0&&(c=0),e=b.grep(a,function(b,d){return c>=b[1]*100||d===a.length-1}),d=e[0],d[0]},a}(),window.INST.GradeCalculator=c})}).call(this),function(){var a={};define("use",{version:"0.2.0",load:function(b,c,d,e){e||(e=require.rawConfig);var f=e.use&&e.use[b];if(!f)throw new TypeError("Module '"+b+"' is undefined or does not"+" have a `use` config. Make sure it exists, add a `use` config, or"+" don't use use! on it");a[b]={deps:f.deps||[],attach:f.attach},c(f.deps||[],function(){var a=arguments;c([b],function(){var b=f.attach;return e.isBuild?d():typeof b=="function"?d(b.apply(window,a)):d(window[b])})})},write:function(b,c,d){var e=a[c],f=e.deps,g={attach:null,deps:""};typeof e.attach=="function"?g.attach=e.attach.toString():g.attach="function() {return window['"+e.attach+"'];"+"}",f.length&&(g.deps="'"+f.toString().split(",").join("','")+"'"),d(["define('",b,"!",c,"', ","[",g.deps,"],",g.attach,");\n"].join(""))}})}(),function(a){a.fn.drag=function(b,c,d){var e=typeof b=="string"?b:"",f=a.isFunction(b)?b:a.isFunction(c)?c:null;return e.indexOf("drag")!==0&&(e="drag"+e),d=(b==f?c:d)||{},f?this.bind(e,d,f):this.trigger(e)};var b=a.event,c=b.special,d=c.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",livekey:"livedrag",add:function(c){var e=a.data(this,d.datakey),f=c.data||{};e.related+=1,!e.live&&c.selector&&(e.live=!0,b.add(this,"draginit."+d.livekey,d.delegate)),a.each(d.defaults,function(a,b){f[a]!==undefined&&(e[a]=f[a])})},remove:function(){a.data(this,d.datakey).related-=1},setup:function(){if(a.data(this,d.datakey))return;var c=a.extend({related:0},d.defaults);a.data(this,d.datakey,c),b.add(this,"mousedown",d.init,c),this.attachEvent&&this.attachEvent("ondragstart",d.dontstart)},teardown:function(){if(a.data(this,d.datakey).related)return;a.removeData(this,d.datakey),b.remove(this,"mousedown",d.init),b.remove(this,"draginit",d.delegate),d.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",d.dontstart)},init:function(e){var f=e.data,g;if(f.which>0&&e.which!=f.which)return;if(a(e.target).is(f.not))return;if(f.handle&&!a(e.target).closest(f.handle,e.currentTarget).length)return;f.propagates=1,f.interactions=[d.interaction(this,f)],f.target=e.target,f.pageX=e.pageX,f.pageY=e.pageY,f.dragging=null,g=d.hijack(e,"draginit",f);if(!f.propagates)return;g=d.flatten(g),g&&g.length&&(f.interactions=[],a.each(g,function(){f.interactions.push(d.interaction(this,f))})),f.propagates=f.interactions.length,f.drop!==!1&&c.drop&&c.drop.handler(e,f),d.textselect(!1),b.add(document,"mousemove mouseup",d.handler,f);var h=a.data(document,"events").mousemove,i=h.pop();return h.splice(0,0,i),!1},interaction:function(b,c){return{drag:b,callback:new d.callback,droppable:[],offset:a(b)[c.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(a){var e=a.data;switch(a.type){case!e.dragging&&"mousemove":if(Math.pow(a.pageX-e.pageX,2)+Math.pow(a.pageY-e.pageY,2)<Math.pow(e.distance,2))break;a.target=e.target,d.hijack(a,"dragstart",e),e.propagates&&(e.dragging=!0);case"mousemove":if(e.dragging){d.hijack(a,"drag",e);if(e.propagates){e.drop!==!1&&c.drop&&c.drop.handler(a,e);break}a.type="mouseup"};case"mouseup":b.remove(document,"mousemove mouseup",d.handler),e.dragging&&(e.drop!==!1&&c.drop&&c.drop.handler(a,e),d.hijack(a,"dragend",e)),d.textselect(!0),e.click===!1&&e.dragging&&(jQuery.event.triggered=!0,setTimeout(function(){jQuery.event.triggered=!1},20),e.dragging=!1)}},delegate:function(c){var e=[],f,g=a.data(this,"events")||{};return a.each(g.live||[],function(g,h){if(h.preType.indexOf("drag")!==0)return;f=a(c.target).closest(h.selector,c.currentTarget)[0];if(!f)return;b.add(f,h.origType+"."+d.livekey,h.origHandler,h.data),a.inArray(f,e)<0&&e.push(f)}),e.length?a(e).bind("dragend."+d.livekey,function(){b.remove(this,"."+d.livekey)}):!1},hijack:function(c,e,f,g,h){if(!f)return;var i={event:c.originalEvent,type:c.type},j=e.indexOf("drop")?"drag":"drop",k,l=g||0,m,n,o,p=isNaN(g)?f.interactions.length:g;c.type=e,c.originalEvent=null,f.results=[];do if(m=f.interactions[l]){if(e!=="dragend"&&m.cancelled)continue;o=d.properties(c,f,m),m.results=[],a(h||m[j]||f.droppable).each(function(g,h){o.target=h,k=h?b.handle.call(h,c,o):null,h&&h!==document&&e==="draginit"&&b.handle.call(document,c,o),k===!1?(j=="drag"&&(m.cancelled=!0,f.propagates-=1),e=="drop"&&(m[j][g]=null)):e=="dropinit"&&m.droppable.push(d.element(k)||h),e=="dragstart"&&(m.proxy=a(d.element(k)||m.drag)[0]),m.results.push(k),delete c.result;if(e!=="dropinit")return k}),f.results[l]=d.flatten(m.results),e=="dropinit"&&(m.droppable=d.flatten(m.droppable)),e=="dragstart"&&!m.cancelled&&o.update()}while(++l<p);return c.type=i.type,c.originalEvent=i.event,d.flatten(f.results)},properties:function(a,b,c){var e=c.callback;return e.drag=c.drag,e.proxy=c.proxy||c.drag,e.startX=b.pageX,e.startY=b.pageY,e.deltaX=a.pageX-b.pageX,e.deltaY=a.pageY-b.pageY,e.originalX=c.offset.left,e.originalY=c.offset.top,e.offsetX=a.pageX-(b.pageX-e.originalX),e.offsetY=a.pageY-(b.pageY-e.originalY),e.drop=d.flatten((c.drop||[]).slice()),e.available=d.flatten((c.droppable||[]).slice()),e},element:function(a){if(a&&(a.jquery||a.nodeType==1))return a},flatten:function(b){return a.map(b,function(b){return b&&b.jquery?a.makeArray(b):b&&b.length?d.flatten(b):b})},textselect:function(b){a(document)[b?"unbind":"bind"]("selectstart",d.dontstart).attr("unselectable",b?"off":"on").css("MozUserSelect",b?"":"none")},dontstart:function(){return!1},callback:function(){}};d.callback.prototype={update:function(){c.drop&&this.available.length&&a.each(this.available,function(a){c.drop.locate(this,a)})}},c.draginit=c.dragstart=c.dragend=d}(jQuery),define("vendor/slickgrid/lib/jquery.event.drag-2.0.min",function(){}),define("use!vendor/slickgrid/lib/jquery.event.drag-2.0.min",["jquery"],function(){return window.$}),function(a){function b(){var a=!1,b=!1;this.stopPropagation=function(){a=!0},this.isPropagationStopped=function(){return a},this.stopImmediatePropagation=function(){b=!0},this.isImmediatePropagationStopped=function(){return b}}function c(){var a=[];this.subscribe=function(b){a.push(b)},this.unsubscribe=function(b){for(var c=a.length-1;c>=0;c--)a[c]===b&&a.splice(c,1)},this.notify=function(c,d,e){d=d||new b,e=e||this;var f;for(var g=0;g<a.length&&!d.isPropagationStopped()&&!d.isImmediatePropagationStopped();g++)f=a[g].call(e,d,c);return f}}function d(){var a=[];this.subscribe=function(b,c){a.push({event:b,handler:c}),b.subscribe(c)},this.unsubscribe=function(b,c){var d=a.length;while(d--)if(a[d].event===b&&a[d].handler===c){a.splice(d,1),b.unsubscribe(c);return}},this.unsubscribeAll=function(){var b=a.length;while(b--)a[b].event.unsubscribe(a[b].handler);a=[]}}function e(a,b,c,d){c===undefined&&d===undefined&&(c=a,d=b),this.fromRow=Math.min(a,c),this.fromCell=Math.min(b,d),this.toRow=Math.max(a,c),this.toCell=Math.max(b,d),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(a,b){return a>=this.fromRow&&a<=this.toRow&&b>=this.fromCell&&b<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function f(){this.__nonDataRow=!0}function g(){this.__group=!0,this.__updated=!1,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null}function h(){this.__groupTotals=!0,this.group=null}function i(){var a=null;this.isActive=function(b){return b?a===b:a!==null},this.activate=function(b){if(b===a)return;if(a!==null)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!b.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!b.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";a=b},this.deactivate=function(b){if(a!==b)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";a=null},this.commitCurrentEdit=function(){return a?a.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return a?a.cancelCurrentEdit():!0}}a.extend(!0,window,{Slick:{Event:c,EventData:b,EventHandler:d,Range:e,NonDataRow:f,Group:g,GroupTotals:h,EditorLock:i,GlobalEditorLock:new i}}),g.prototype=new f,g.prototype.equals=function(a){return this.value===a.value&&this.count===a.count&&this.collapsed===a.collapsed},h.prototype=new f}(jQuery),define("vendor/slickgrid/slick.core",function(){}),define("use!vendor/slickgrid/slick.core",["jquery","use!vendor/slickgrid/lib/jquery.event.drag-2.0.min"],function(){return window.Slick});if(typeof jQuery=="undefined")throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if(typeof Slick=="undefined")throw"slick.core.js not loaded";(function($){function SlickGrid(container,data,columns,options){function init(){$container=$(container);if($container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),columnDefaults.width=options.defaultColumnWidth;if(options.enableColumnReorder&&!$.fn.sortable)throw new Error('SlickGrid\'s "enableColumnReorder = true" option requires jquery-ui.sortable module to be loaded');editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().attr("tabIndex",0).attr("hideFocus",!0).css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='width:10000px; left:-1000px' />").appendTo($headerScroller),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo($container),$canvas=$("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo($viewport),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(a){return $(a.target).is("input,textarea")}),viewportW=parseFloat($.css($container[0],"width",!0)),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeAndRender(),bindAncestorScrollEvents(),$viewport.bind("scroll.slickgrid",handleScroll),$container.bind("resize.slickgrid",resizeAndRender),$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick),$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd),$canvas.delegate(".slick-cell","mouseenter",handleMouseEnter),$canvas.delegate(".slick-cell","mouseleave",handleMouseLeave)}function registerPlugin(a){plugins.unshift(a),a.init(self)}function unregisterPlugin(a){for(var b=plugins.length;b>=0;b--)if(plugins[b]===a){plugins[b].destroy&&plugins[b].destroy(),plugins.splice(b,1);break}}function setSelectionModel(a){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=a,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var a=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),b={width:a.width()-a[0].clientWidth,height:a.height()-a[0].clientHeight};return a.remove(),b}function getRowWidth(){var a=0,b=columns.length;while(b--)a+=columns[b].width||columnDefaults.width;return a}function setCanvasWidth(a){$canvas.width(a),$headerRow.width(a),viewportHasHScroll=a>viewportW-scrollbarDimensions.width}function disableSelection(a){a&&a.jquery&&a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){var a=1e6,b=a,c=$.browser.mozilla?5e6:1e9,d=$("<div style='display:none' />").appendTo(document.body);while(b<=c){d.css("height",b+a);if(d.height()!==b+a)break;b+=a}return d.remove(),b}function bindAncestorScrollEvents(){var a=$canvas[0];while((a=a.parentNode)!=document.body)(a==$viewport[0]||a.scrollWidth!=a.clientWidth||a.scrollHeight!=a.clientHeight)&&$(a).bind("scroll.slickgrid",handleActiveCellPositionChange)}function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid")}function updateColumnHeader(a,b,c){var d=getColumnIndex(a),e=$headers.children().eq(d);e&&(columns[d].name=b,columns[d].toolTip=c,e.attr("title",c||b||"").children().eq(0).html(b))}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(a){var b=getColumnIndex(a),c=$headerRow.children().eq(b);return c&&c[0]}function createColumnHeaders(){function a(){$(this).addClass("ui-state-hover")}function b(){$(this).removeClass("ui-state-hover")}var c;$headers.empty(),$headerRow.empty(),columnsById={};for(c=0;c<columns.length;c++){var d=columns[c]=$.extend({},columnDefaults,columns[c]);columnsById[d.id]=c;var e=$("<div class='ui-state-default slick-header-column' id='"+uid+d.id+"' />").html("<span class='slick-column-name'>"+d.name+"</span>").width(d.width-headerColumnWidthDiff).attr("title",d.toolTip||d.name||"").data("fieldId",d.id).addClass(d.headerCssClass||"").appendTo($headers);(options.enableColumnReorder||d.sortable)&&e.hover(a,b),d.sortable&&e.append("<span class='slick-sort-indicator' />"),options.showHeaderRow&&$("<div class='ui-state-default slick-headerrow-column l"+c+" r"+c+"'></div>").appendTo($headerRow)}setSortColumn(sortColumnId,sortAsc),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(a){if($(a.target).hasClass("slick-resizable-handle"))return;var b=$(a.target).closest(".slick-header-column");if(!b.length)return;var c=columns[getColumnIndex(b.data("fieldId"))];if(c.sortable){if(!getEditorLock().commitCurrentEdit())return;c.id===sortColumnId?sortAsc=!sortAsc:(sortColumnId=c.id,sortAsc=!0),setSortColumn(sortColumnId,sortAsc),trigger(self.onSort,{sortCol:c,sortAsc:sortAsc},a)}})}function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,start:function(a,b){$(b.helper).addClass("slick-header-column-active")},beforeStop:function(a,b){$(b.helper).removeClass("slick-header-column-active")},stop:function(a){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return}var b=$headers.sortable("toArray"),c=[];for(var d=0;d<b.length;d++)c.push(columns[getColumnIndex(b[d].replace(uid,""))]);setColumns(c),trigger(self.onColumnsReordered,{}),a.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var a,b,c,d,e,f,g,h,i,j;e=$headers.children(),e.find(".slick-resizable-handle").remove(),e.each(function(a,b){columns[a].resizable&&(h===undefined&&(h=a),i=a)});if(h===undefined)return;e.each(function(k,l){if(k<h||options.forceFitColumns&&k>=i)return;a=$(l),$("<div class='slick-resizable-handle' />").appendTo(l).bind("dragstart",function(a,h){if(!getEditorLock().commitCurrentEdit())return!1;d=a.pageX,$(this).parent().addClass("slick-header-column-active");var i=null,l=null;e.each(function(a,b){columns[a].previousWidth=$(b).outerWidth()});if(options.forceFitColumns){i=0,l=0;for(b=k+1;b<e.length;b++)c=columns[b],c.resizable&&(l!==null&&(c.maxWidth?l+=c.maxWidth-c.previousWidth:l=null),i+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth))}var m=0,n=0;for(b=0;b<=k;b++)c=columns[b],c.resizable&&(n!==null&&(c.maxWidth?n+=c.maxWidth-c.previousWidth:n=null),m+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth));i===null&&(i=1e5),m===null&&(m=1e5),l===null&&(l=1e5),n===null&&(n=1e5),g=d+Math.min(i,n),f=d-Math.min(m,l),j=$canvas.width()}).bind("drag",function(a,h){var i,l=Math.min(g,Math.max(f,a.pageX))-d,m,n;if(l<0){m=l;for(b=k;b>=0;b--)c=columns[b],c.resizable&&(i=Math.max(c.minWidth||0,absoluteColumnMinWidth),m&&c.previousWidth+m<i?(m+=c.previousWidth-i,c.width=i):(c.width=c.previousWidth+m,m=0));if(options.forceFitColumns){m=-l;for(b=k+1;b<e.length;b++)c=columns[b],c.resizable&&(m&&c.maxWidth&&c.maxWidth-c.previousWidth<m?(m-=c.maxWidth-c.previousWidth,c.width=c.maxWidth):(c.width=c.previousWidth+m,m=0))}else options.syncColumnCellResize&&setCanvasWidth(j+l)}else{m=l;for(b=k;b>=0;b--)c=columns[b],c.resizable&&(m&&c.maxWidth&&c.maxWidth-c.previousWidth<m?(m-=c.maxWidth-c.previousWidth,c.width=c.maxWidth):(c.width=c.previousWidth+m,m=0));if(options.forceFitColumns){m=-l;for(b=k+1;b<e.length;b++)c=columns[b],c.resizable&&(i=Math.max(c.minWidth||0,absoluteColumnMinWidth),m&&c.previousWidth+m<i?(m+=c.previousWidth-i,c.width=i):(c.width=c.previousWidth+m,m=0))}else options.syncColumnCellResize&&setCanvasWidth(j+l)}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(a,d){var f;$(this).parent().removeClass("slick-header-column-active");for(b=0;b<e.length;b++)c=columns[b],f=$(e[b]).outerWidth(),c.previousWidth!==f&&c.rerenderOnResize&&invalidateAllRows();applyColumnWidths(),resizeCanvas(),trigger(self.onColumnsResized,{})})})}function getVBoxDelta(a){var b=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],c=0;return $.each(b,function(b,d){c+=parseFloat(a.css(d))||0}),c}function measureCellPaddingAndBorder(){var a,b=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];a=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,$.each(b,function(b,c){headerColumnWidthDiff+=parseFloat(a.css(c))||0}),$.each(c,function(b,c){headerColumnHeightDiff+=parseFloat(a.css(c))||0}),a.remove();var d=$("<div class='slick-row' />").appendTo($canvas);a=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(d),cellWidthDiff=cellHeightDiff=0,$.each(b,function(b,c){cellWidthDiff+=parseFloat(a.css(c))||0}),$.each(c,function(b,c){cellHeightDiff+=parseFloat(a.css(c))||0}),d.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var a=options.rowHeight-cellHeightDiff,b=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+a+"px; }","."+uid+" .slick-row { width:"+getRowWidth()+"px; height:"+options.rowHeight+"px; }"],c=getRowWidth(),d=0,e;for(var f=0;f<columns.length;f++)e=columns[f].width,b.push("."+uid+" .l"+f+" { left: "+d+"px; }"),b.push("."+uid+" .r"+f+" { right: "+(c-d-e)+"px; }"),d+=columns[f].width;$style[0].styleSheet?$style[0].styleSheet.cssText=b.join(" "):$style[0].appendChild(document.createTextNode(b.join(" ")));var g=document.styleSheets;for(var f=0;f<g.length;f++)if((g[f].ownerNode||g[f].owningElement)==$style[0]){stylesheet=g[f];break}}function findCssRule(a){var b=stylesheet.cssRules||stylesheet.rules;for(var c=0;c<b.length;c++)if(b[c].selectorText==a)return b[c];return null}function removeCssRules(){$style.remove()}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var a=0;a<plugins.length;a++)unregisterPlugin(plugins[a]);options.enableColumnReorder&&$headers.sortable&&$headers.sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(a,b,c){return c=c||new Slick.EventData,b=b||{},b.grid=self,a.notify(b,c,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(a){return columnsById[a]}function autosizeColumns(){var a,b,c=[],d=0,e=options.autoHeight?viewportW:viewportW-scrollbarDimensions.width,f=0,g=0;for(a=0;a<columns.length;a++)b=columns[a],c.push(b.width),g+=b.width,d+=b.width-Math.max(b.minWidth||0,absoluteColumnMinWidth);f=g,invalidateAllRows();while(f>e){if(!d)return;var h=(f-e)/d;for(a=0;a<columns.length&&f>e;a++){b=columns[a];if(!b.resizable||b.minWidth===b.width||b.width===absoluteColumnMinWidth)continue;var i=Math.floor(h*(b.width-Math.max(b.minWidth||0,absoluteColumnMinWidth)))||1;f-=i,c[a]-=i}}var j=f;while(f<e){var k=e/f;for(a=0;a<columns.length&&f<e;a++){b=columns[a];if(!b.resizable||b.maxWidth<=b.width)continue;var l=Math.min(Math.floor(k*b.width)-b.width,b.maxWidth-b.width||1e6)||1;f+=l,c[a]+=l}if(j==f)break;j=f}for(a=0;a<columns.length;a++)columns[a].width=c[a];applyColumnHeaderWidths(),applyColumnWidths(),resizeCanvas()}function applyColumnHeaderWidths(){var a;for(var b=0,c=$headers.children(),d=c.length;b<d;b++)a=$(c[b]),a.width()!==columns[b].width-headerColumnWidthDiff&&a.width(columns[b].width-headerColumnWidthDiff)}function applyColumnWidths(){var a=getRowWidth(),b=0,c,d;for(var e=0;e<columns.length;e++)c=columns[e].width,d=findCssRule("."+uid+" .l"+e),d.style.left=b+"px",d=findCssRule("."+uid+" .r"+e),d.style.right=a-b-c+"px",b+=columns[e].width;d=findCssRule("."+uid+" .slick-row"),d.style.width=a+"px"}function setSortColumn(a,b){sortColumnId=a,sortAsc=b;var c=getColumnIndex(sortColumnId);$headers.children().removeClass("slick-header-column-sorted"),$headers.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),c!=null&&$headers.children().eq(c).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}function handleSelectedRangesChanged(a,b){selectedRows=[];var c={};for(var d=0;d<b.length;d++)for(var e=b[d].fromRow;e<=b[d].toRow;e++){c[e]||selectedRows.push(e),c[e]={};for(var f=b[d].fromCell;f<=b[d].toCell;f++)canCellBeSelected(e,f)&&(c[e][columns[f].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,c),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},a)}function getColumns(){return columns}function setColumns(a){columns=a,invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeAndRender(),handleScroll()}function getOptions(){return options}function setOptions(a){if(!getEditorLock().commitCurrentEdit())return;makeActiveCellNormal(),options.enableAddRow!==a.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,a),render()}function setData(a,b){invalidateAllRows(),data=a,b&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataItem(a){return data.getItem?data.getItem(a):data[a]}function getTopPanel(){return $topPanel[0]}function showTopPanel(){options.showTopPanel=!0,$topPanelScroller.slideDown("fast",resizeCanvas)}function hideTopPanel(){options.showTopPanel=!1,$topPanelScroller.slideUp("fast",resizeCanvas)}function showHeaderRowColumns(){options.showHeaderRow=!0,$headerRowScroller.slideDown("fast",resizeCanvas)}function hideHeaderRowColumns(){options.showHeaderRow=!1,$headerRowScroller.slideUp("fast",resizeCanvas)}function scrollTo(a){var b=offset;page=Math.min(n-1,Math.floor(a/ph)),offset=Math.round(page*cj);var c=a-offset;if(offset!=b){var d=getVisibleRange(c);cleanupRows(d.top,d.bottom),updateRowPositions()}prevScrollTop!=c&&(scrollDir=prevScrollTop+b<c+offset?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=c,trigger(self.onViewportChanged,{}))}function defaultFormatter(a,b,c,d,e){return c===null||c===undefined?"":c}function getFormatter(a,b){var c=data.getItemMetadata&&data.getItemMetadata(a),d=c&&c.columns&&(c.columns[b.id]||c.columns[getColumnIndex(b.id)]);return d&&d.formatter||c&&c.formatter||b.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(b)||defaultFormatter}function getEditor(a,b){var c=columns[b],d=data.getItemMetadata&&data.getItemMetadata(a),e=d&&d.columns;return e&&e[c.id]&&e[c.id].editor!==undefined?e[c.id].editor:e&&e[b]&&e[b].editor!==undefined?e[b].editor:c.editor||options.editorFactory&&options.editorFactory.getEditor(c)}function getDataItemValueForColumn(a,b){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(a,b):a[b.field]}function appendRowHtml(a,b){var c=getDataItem(b),d=b<getDataLength()&&!c,e,f="slick-row "+(d?" loading":"")+(b%2==1?" odd":" even"),g=data.getItemMetadata&&data.getItemMetadata(b);g&&g.cssClasses&&(f+=" "+g.cssClasses),a.push("<div class='ui-widget-content "+f+"' row='"+b+"' style='top:"+(options.rowHeight*b-offset)+"px'>");var h,i;for(var j=0,k=columns.length;j<k;j++){i=columns[j],h=getColspan(b,j),e="slick-cell l"+j+" r"+Math.min(columns.length-1,j+h-1)+(i.cssClass?" "+i.cssClass:""),b===activeRow&&j===activeCell&&(e+=" active");for(var l in cellCssClasses)cellCssClasses[l][b]&&cellCssClasses[l][b][i.id]&&(e+=" "+cellCssClasses[l][b][i.id]);a.push("<div class='"+e+"'>"),c&&a.push(getFormatter(b,i)(b,j,getDataItemValueForColumn(c,i),i,c)),a.push("</div>"),h&&(j+=h-1)}a.push("</div>")}function cleanupRows(a){for(var b in rowsCache)(b=parseInt(b,10))!==activeRow&&(b<a.top||b>a.bottom)&&removeRowFromCache(b)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var a in rowsCache)removeRowFromCache(a)}function removeRowFromCache(a){var b=rowsCache[a];if(!b)return;$canvas[0].removeChild(b),delete rowsCache[a],delete postProcessedRows[a],renderedRows--,counter_rows_removed++}function invalidateRows(a){var b,c;if(!a||!a.length)return;scrollDir=0;for(b=0,c=a.length;b<c;b++)currentEditor&&activeRow===b&&makeActiveCellNormal(),rowsCache[a[b]]&&removeRowFromCache(a[b])}function invalidateRow(a){invalidateRows([a])}function updateCell(a,b){var c=getCellNode(a,b);if(!c)return;var d=columns[b],e=getDataItem(a);currentEditor&&activeRow===a&&activeCell===b?currentEditor.loadValue(e):(c.innerHTML=e?getFormatter(a,d)(a,b,getDataItemValueForColumn(e,d),d,e):"",invalidatePostProcessingResults(a))}function updateRow(a){if(!rowsCache[a])return;$(rowsCache[a]).children().each(function(b){var c=columns[b],d=getDataItem(a);a===activeRow&&b===activeCell&&currentEditor?currentEditor.loadValue(getDataItem(activeRow)):d?this.innerHTML=getFormatter(a,c)(a,b,getDataItemValueForColumn(d,c),c,getDataItem(a)):this.innerHTML=""}),invalidatePostProcessingResults(a)}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-options.headerHeight-getVBoxDelta($headers)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){options.autoHeight?viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0)):viewportH=getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),$viewport.height(viewportH);var a=0,b=columns.length;while(b--)a+=columns[b].width;setCanvasWidth(a),updateRowCount(),render()}function resizeAndRender(){options.forceFitColumns?autosizeColumns():resizeCanvas()}function updateRowCount(){var a=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0),b=h,c=options.enableAddRow?getDataLength():getDataLength()-1;for(var d in rowsCache)d>=c&&removeRowFromCache(d);th=Math.max(options.rowHeight*a,viewportH-scrollbarDimensions.height),th<maxSupportedCssHeight?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==b&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var e=scrollTop+offset<=th-viewportH;th==0||scrollTop==0?page=offset=0:e?scrollTo(scrollTop+offset):scrollTo(th-viewportH),h!=b&&options.autoHeight&&resizeCanvas()}function getVisibleRange(a){return a==null&&(a=scrollTop),{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)}}function getRenderedRange(a){var b=getVisibleRange(a),c=Math.round(viewportH/options.rowHeight),d=3;return scrollDir==-1?(b.top-=c,b.bottom+=d):scrollDir==1?(b.top-=d,b.bottom+=c):(b.top-=d,b.bottom+=d),b.top=Math.max(0,b.top),b.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,b.bottom),b}function renderRows(a){var b,c,d=$canvas[0],e=renderedRows,f=[],g=[],h=new Date,i=!1;for(b=a.top;b<=a.bottom;b++){if(rowsCache[b])continue;renderedRows++,g.push(b),appendRowHtml(f,b),activeCellNode&&activeRow===b&&(i=!0),counter_rows_rendered++}var j=document.createElement("div");j.innerHTML=f.join("");for(b=0,c=j.childNodes.length;b<c;b++)rowsCache[g[b]]=d.appendChild(j.firstChild);i&&(activeCellNode=getCellNode(activeRow,activeCell)),renderedRows-e>5&&(avgRowRenderTime=(new Date-h)/(renderedRows-e))}function startPostProcessing(){if(!options.enableAsyncPostRender)return;clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay)}function invalidatePostProcessingResults(a){delete postProcessedRows[a],postProcessFromRow=Math.min(postProcessFromRow,a),postProcessToRow=Math.max(postProcessToRow,a),startPostProcessing()}function updateRowPositions(){for(var a in rowsCache)rowsCache[a].style.top=a*options.rowHeight-offset+"px"}function render(){var a=getVisibleRange(),b=getRenderedRange();cleanupRows(b),renderRows(b),postProcessFromRow=a.top,postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,a.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,h_render=null}function handleScroll(){scrollTop=$viewport[0].scrollTop;var a=$viewport[0].scrollLeft,b=Math.abs(scrollTop-prevScrollTop);a!==prevScrollLeft&&(prevScrollLeft=a,$headerScroller[0].scrollLeft=a,$topPanelScroller[0].scrollLeft=a,$headerRowScroller[0].scrollLeft=a);if(b){scrollDir=prevScrollTop<scrollTop?1:-1,prevScrollTop=scrollTop;if(b<viewportH)scrollTo(scrollTop+offset);else{var c=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),c!=offset&&invalidateAllRows()}h_render&&clearTimeout(h_render),Math.abs(lastRenderedScrollTop-scrollTop)<viewportH?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{})}trigger(self.onScroll,{scrollLeft:a,scrollTop:scrollTop})}function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var a=scrollDir<0?postProcessToRow--:postProcessFromRow++,b=rowsCache[a];if(!b||postProcessedRows[a]||a>=getDataLength())continue;var c=getDataItem(a),d=b.childNodes;for(var e=0,f=0,g=columns.length;e<g;++e){var h=columns[e];h.asyncPostRender&&h.asyncPostRender(d[f],postProcessFromRow,c,h),++f}postProcessedRows[a]=!0,h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return}}function addCellCssStyles(a,b){if(cellCssClasses[a])throw"addCellCssStyles: cell CSS hash with key '"+a+"' already exists.";cellCssClasses[a]=b;var c;for(var d in rowsCache)if(b[d])for(var e in b[d])c=getCellNode(d,getColumnIndex(e)),c&&$(c).addClass(b[d][e])}function removeCellCssStyles(a){if(!cellCssClasses[a])return;var b;for(var c in rowsCache)if(cellCssClasses[a][c])for(var d in cellCssClasses[a][c])b=getCellNode(c,getColumnIndex(d)),b&&$(b).removeClass(cellCssClasses[a][c][d]);delete cellCssClasses[a]}function setCellCssStyles(a,b){removeCellCssStyles(a),addCellCssStyles(a,b)}function flashCell(a,b,c){c=c||100;if(rowsCache[a]){var d=$(getCellNode(a,b));function e(a){if(!a)return;setTimeout(function(){d.queue(function(){d.toggleClass(options.cellFlashingCssClass).dequeue(),e(a-1)})},c)}e(4)}}function handleDragInit(a,b){var c=getCellFromEvent(a);return!c||!cellExists(c.row,c.cell)?!1:(retval=trigger(self.onDragInit,b,a),a.isImmediatePropagationStopped()?retval:!1)}function handleDragStart(a,b){var c=getCellFromEvent(a);if(!c||!cellExists(c.row,c.cell))return!1;var d=trigger(self.onDragStart,b,a);return a.isImmediatePropagationStopped()?d:!1}function handleDrag(a,b){return trigger(self.onDrag,b,a)}function handleDragEnd(a,b){trigger(self.onDragEnd,b,a)}function handleKeyDown(a){trigger(self.onKeyDown,{},a);var b=a.isImmediatePropagationStopped();if(!b)if(!a.shiftKey&&!a.altKey&&!a.ctrlKey)if(a.which==27){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else if(a.which==37)navigateLeft();else if(a.which==39)navigateRight();else if(a.which==38)navigateUp();else if(a.which==40)navigateDown();else if(a.which==9)navigateNext();else if(a.which==13)options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable());else return;else if(a.which==9&&a.shiftKey&&!a.ctrlKey&&!a.altKey)navigatePrev();else return;a.stopPropagation(),a.preventDefault();try{a.originalEvent.keyCode=0}catch(c){}}function handleClick(a){var b=getCellFromEvent(a);if(!b||currentEditor!==null&&activeRow==b.row&&activeCell==b.cell)return;trigger(self.onClick,{row:b.row,cell:b.cell},a);if(a.isImmediatePropagationStopped())return;canCellBeActive(b.row,b.cell)&&(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit())&&(scrollRowIntoView(b.row,!1),setActiveCellInternal(getCellNode(b.row,b.cell),b.row===getDataLength()||options.autoEdit))}function handleContextMenu(a){var b=$(a.target).closest(".slick-cell",$canvas);if(b.length===0)return;if(activeCellNode===b[0]&&currentEditor!==null)return;trigger(self.onContextMenu,{},a)}function handleDblClick(a){var b=getCellFromEvent(a);if(!b||currentEditor!==null&&activeRow==b.row&&activeCell==b.cell)return;trigger(self.onDblClick,{row:b.row,cell:b.cell},a);if(a.isImmediatePropagationStopped())return;options.editable&&gotoCell(b.row,b.cell,!0)}function handleHeaderContextMenu(a){var b=$(a.target).closest(".slick-header-column",".slick-header-columns"),c=b&&columns[self.getColumnIndex(b.data("fieldId"))];trigger(self.onHeaderContextMenu,{column:c},a)}function handleHeaderClick(a){var b=$(a.target).closest(".slick-header-column",".slick-header-columns"),c=b&&columns[self.getColumnIndex(b.data("fieldId"))];trigger(self.onHeaderClick,{column:c},a)}function handleMouseEnter(a){trigger(self.onMouseEnter,{},a)}function handleMouseLeave(a){trigger(self.onMouseLeave,{},a)}function cellExists(a,b){return a>=0&&a<getDataLength()&&b>=0&&b<columns.length}function getCellFromPoint(a,b){var c=Math.floor((b+offset)/options.rowHeight),d=0,e=0;for(var f=0;f<columns.length&&e<a;f++)e+=columns[f].width,d++;return d<0&&(d=0),{row:c,cell:d-1}}function getCellFromNode(a){var b=/l\d+/.exec(a.className)||/c\d+/.exec(a.className);if(!b)throw"getCellFromNode: cannot get cell - "+a.className;return parseInt(b[0].substr(1,b[0].length-1),10)}function getCellFromEvent(a){var b=$(a.target).closest(".slick-cell",$canvas);return b.length?{row:b.parent().attr("row")|0,cell:getCellFromNode(b[0])}:null}function getCellNodeBox(a,b){if(!cellExists(a,b))return null;var c=a*options.rowHeight-offset,d=c+options.rowHeight-1,e=0;for(var f=0;f<b;f++)e+=columns[f].width;var g=e+columns[b].width;return{top:c,left:e,bottom:d,right:g}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){$.browser.msie?$canvas[0].setActive():$canvas[0].focus()}function scrollActiveCellIntoView(){if(activeCellNode){var a=$(activeCellNode).position().left,b=a+$(activeCellNode).outerWidth(),c=$viewport.scrollLeft(),d=c+$viewport.width();a<c?$viewport.scrollLeft(a):b>d&&$viewport.scrollLeft(Math.min(a,b-$viewport[0].clientWidth))}}function setActiveCellInternal(a,b){activeCellNode!==null&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"));var c=activeCellNode!==a;activeCellNode=a,activeCellNode!=null?(activeRow=parseInt($(activeCellNode).parent().attr("row")),activeCell=activePosX=getCellFromNode(activeCellNode),$(activeCellNode).addClass("active"),options.editable&&b&&isCellPotentiallyEditable(activeRow,activeCell)?(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable()):setFocus()):activeRow=activeCell=null,c&&(scrollActiveCellIntoView(),trigger(self.onActiveCellChanged,getActiveCell()))}function clearTextSelection(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}}function isCellPotentiallyEditable(a,b){return a<getDataLength()&&!getDataItem(a)?!1:columns[b].cannotTriggerInsert&&a>=getDataLength()?!1:getEditor(a,b)?!0:!1}function makeActiveCellNormal(){if(!currentEditor)return;trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null;if(activeCellNode){var a=getDataItem(activeRow);$(activeCellNode).removeClass("editable invalid");if(a){var b=columns[activeCell];activeCellNode.innerHTML=getFormatter(activeRow,b)(activeRow,activeCell,getDataItemValueForColumn(a,b),b,getDataItem(activeRow)),invalidatePostProcessingResults(activeRow)}}$.browser.msie&&clearTextSelection(),getEditorLock().deactivate(editController)}function makeActiveCellEditable(a){if(!activeCellNode)return;if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell))return;var b=columns[activeCell],c=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:c,column:b})===!1){setFocus();return}getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),a||(activeCellNode.innerHTML=""),currentEditor=new(a||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:b,item:c||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),c&&currentEditor.loadValue(c),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(a){var b={top:a.offsetTop,left:a.offsetLeft,bottom:0,right:0,width:$(a).outerWidth(),height:$(a).outerHeight(),visible:!0};b.bottom=b.top+b.height,b.right=b.left+b.width;var c=a.offsetParent;while((a=a.parentNode)!=document.body)b.visible&&a.scrollHeight!=a.offsetHeight&&$(a).css("overflowY")!="visible"&&(b.visible=b.bottom>a.scrollTop&&b.top<a.scrollTop+a.clientHeight),b.visible&&a.scrollWidth!=a.offsetWidth&&$(a).css("overflowX")!="visible"&&(b.visible=b.right>a.scrollLeft&&b.left<a.scrollLeft+a.clientWidth),b.left-=a.scrollLeft,b.top-=a.scrollTop,a===c&&(b.left+=a.offsetLeft,b.top+=a.offsetTop,c=a.offsetParent),b.bottom=b.top+b.height,b.right=b.left+b.width;return b}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(!activeCellNode)return;var a;trigger(self.onActiveCellPositionChanged,{}),currentEditor&&(a=a||getActiveCellPosition(),currentEditor.show&&currentEditor.hide&&(a.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(a))}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(a,b){var c=a*options.rowHeight,d=(a+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(a+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(b?c:d),render()):a*options.rowHeight<scrollTop+offset&&(scrollTo(b?d:c),render())}function getColspan(a,b){var c=data.getItemMetadata&&data.getItemMetadata(a);if(!c||!c.columns)return 1;var d=c.columns[columns[b].id]||c.columns[b],e=d&&d.colspan;return e==="*"&&(e=columns.length-b),e||1}function findFirstFocusableCell(a){var b=0;while(b<columns.length){if(canCellBeActive(a,b))return b;b+=getColspan(a,b)}return null}function findLastFocusableCell(a){var b=0,c=null;while(b<columns.length)canCellBeActive(a,b)&&(c=b),b+=getColspan(a,b);return c}function gotoRight(a,b,c){if(b<columns.length){do b+=getColspan(a,b);while(b<columns.length&&!canCellBeActive(a,b));return b<columns.length?{row:a,cell:b,posX:b}:null}return null}function gotoLeft(a,b,c){if(b<=0)return null;var d=findFirstFocusableCell(a);if(d===null||d>=b)return null;var e={row:a,cell:d,posX:d},f;for(;;){f=gotoRight(e.row,e.cell,e.posX);if(!f)return null;if(f.cell<b)e=f;else return e}}function gotoDown(a,b,c){var d;for(;;){if(++a>=getDataLength()+(options.enableAddRow?1:0))return null;d=b=0;while(b<=c)d=b,b+=getColspan(a,b);if(canCellBeActive(a,d))return{row:a,cell:d,posX:c}}}function gotoUp(a,b,c){var d;for(;;){if(--a<0)return null;d=b=0;while(b<=c)d=b,b+=getColspan(a,b);if(canCellBeActive(a,d))return{row:a,cell:d,posX:c}}}function gotoNext(a,b,c){var d=gotoRight(a,b,c);if(d)return d;var e=null;while(++a<getDataLength()+(options.enableAddRow?1:0)){e=findFirstFocusableCell(a);if(e!==null)return{row:a,cell:e,posX:e}}return null}function gotoPrev(a,b,c){var d,e;while(!d){d=gotoLeft(a,b,c);if(d)break;if(--a<0)return null;b=0,e=findLastFocusableCell(a),e!==null&&(d={row:a,cell:e,posX:e})}return d}function navigateRight(){navigate("right")}function navigateLeft(){navigate("left")}function navigateDown(){navigate("down")}function navigateUp(){navigate("up")}function navigateNext(){navigate("next")}function navigatePrev(){navigate("prev")}function navigate(a){if(!activeCellNode||!options.enableCellNavigation)return;if(!getEditorLock().commitCurrentEdit())return;var b={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},c=b[a],d=c(activeRow,activeCell,activePosX);if(d){var e=d.row==getDataLength();scrollRowIntoView(d.row,!e),setActiveCellInternal(getCellNode(d.row,d.cell),e||options.autoEdit),activePosX=d.posX}}function getCellNode(a,b){if(rowsCache[a]){var c=$(rowsCache[a]).children(),d;for(var e=0;e<c.length;e++){d=getCellFromNode(c[e]);if(d===b)return c[e];if(d>b)return null}}return null}function setActiveCell(a,b){if(a>getDataLength()||a<0||b>=columns.length||b<0)return;if(!options.enableCellNavigation)return;scrollRowIntoView(a,!1),setActiveCellInternal(getCellNode(a,b),!1)}function canCellBeActive(a,b){if(!options.enableCellNavigation||a>=getDataLength()+(options.enableAddRow?1:0)||a<0||b>=columns.length||b<0)return!1;var c=data.getItemMetadata&&data.getItemMetadata(a);if(c&&typeof c.focusable=="boolean")return c.focusable;var d=c&&c.columns;return d&&d[columns[b].id]&&typeof d[columns[b].id].focusable=="boolean"?d[columns[b].id].focusable:d&&d[b]&&typeof d[b].focusable=="boolean"?d[b].focusable:typeof columns[b].focusable=="boolean"?columns[b].focusable:!0}function canCellBeSelected(a,b){if(a>=getDataLength()||a<0||b>=columns.length||b<0)return!1;var c=data.getItemMetadata&&data.getItemMetadata(a);if(c&&typeof c.selectable=="boolean")return c.selectable;var d=c&&c.columns&&(c.columns[columns[b].id]||c.columns[b]);return d&&typeof d.selectable=="boolean"?d.selectable:typeof columns[b].selectable=="boolean"?columns[b].selectable:!0}function gotoCell(a,b,c){if(!canCellBeActive(a,b))return;if(!getEditorLock().commitCurrentEdit())return;scrollRowIntoView(a,!1);var d=getCellNode(a,b);setActiveCellInternal(d,c||a===getDataLength()||options.autoEdit),currentEditor||setFocus()}function commitCurrentEdit(){var a=getDataItem(activeRow),b=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var c=currentEditor.validate();if(c.valid){if(activeRow<getDataLength()){var d={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(a,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(a,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(a,b,d)):(d.execute(),makeActiveCellNormal()),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:a})}else{var e={};currentEditor.applyValue(e,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:e,column:b})}return!getEditorLock().isActive()}return $(activeCellNode).addClass("invalid"),$(activeCellNode).stop(!0,!0).effect("highlight",{color:"red"},300),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:c,row:activeRow,cell:activeCell,column:b}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(a){var b=[],c=columns.length-1;for(var d=0;d<a.length;d++)b.push(new Slick.Range(a[d],0,a[d],c));return b}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(a){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(a))}var defaults={headerHeight:25,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:60,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null},maxSupportedCssHeight,th,h,ph,n,cj,page=0,offset=0,scrollDir=1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$headerScroller,$headers,$headerRow,$headerRowScroller,$topPanelScroller,$topPanel,$viewport,$canvas,$style,stylesheet,viewportH,viewportW,viewportHasHScroll,headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff,absoluteColumnMinWidth,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,prevScrollLeft=0,avgRowRenderTime=10,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumnId,sortAsc=!0,h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0;this.debug=function(){var a="";a+="\ncounter_rows_rendered:  "+counter_rows_rendered,a+="\ncounter_rows_removed:  "+counter_rows_removed,a+="\nrenderedRows:  "+renderedRows,a+="\nnumVisibleRows:  "+numVisibleRows,a+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,a+="\nn(umber of pages):  "+n,a+="\n(current) page:  "+page,a+="\npage height (ph):  "+ph,a+="\nscrollDir:  "+scrollDir,alert(a)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.0a1",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,getCanvasNode:getCanvasNode,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,gotoCell:gotoCell,getTopPanel:getTopPanel,showTopPanel:showTopPanel,hideTopPanel:hideTopPanel,showHeaderRowColumns:showHeaderRowColumns,hideHeaderRowColumns:hideHeaderRowColumns,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions})(jQuery),define("vendor/slickgrid/slick.grid",function(){}),define("use!vendor/slickgrid/slick.grid",["use!vendor/slickgrid/slick.core"],function(){return window.Slick}),function(a){var b={SelectorCellFormatter:function(a,b,c,d,e){return e?a:""},PercentCompleteCellFormatter:function(a,b,c,d,e){return c==null||c===""?"-":c<50?"<span style='color:red;font-weight:bold;'>"+c+"%</span>":"<span style='color:green'>"+c+"%</span>"},GraphicalPercentCompleteCellFormatter:function(a,b,c,d,e){if(c==null||c==="")return"";var f;return c<30?f="red":c<70?f="silver":f="green","<span class='percent-complete-bar' style='background:"+f+";width:"+c+"%'></span>"},YesNoCellFormatter:function(a,b,c,d,e){return c?"Yes":"No"},BoolCellFormatter:function(a,b,c,d,e){return c?"<img src='../images/tick.png'>":""},TaskNameFormatter:function(a,b,c,d,e){var f="<span style='display:inline-block;height:1px;width:"+(2+15*e.indent)+"px'></span>";return f+" <img src='../images/expand.gif'>&nbsp;"+c},ResourcesFormatter:function(a,b,c,d,e){var f=e.resources;return!f||f.length==0?"":d.width<50?(f.length>1?"<center><img src='../images/user_identity_plus.gif' ":"<center><img src='../images/user_identity.gif' ")+" title='"+f.join(", ")+"'></center>":f.join(", ")},StarFormatter:function(a,b,c,d,e){return c?"<img src='../images/bullet_star.png' align='absmiddle'>":""},TextCellEditor:function(b){var c,d,e=this;this.init=function(){c=a("<INPUT type=text class='editor-text' />").appendTo(b.container).bind("keydown.nav",function(b){(b.keyCode===a.ui.keyCode.LEFT||b.keyCode===a.ui.keyCode.RIGHT)&&b.stopImmediatePropagation()}).focus().select()},this.destroy=function(){c.remove()},this.focus=function(){c.focus()},this.getValue=function(){return c.val()},this.setValue=function(a){c.val(a)},this.loadValue=function(a){d=a[b.column.field]||"",c.val(d),c[0].defaultValue=d,c.select()},this.serializeValue=function(){return c.val()},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return(c.val()!=""||d!=null)&&c.val()!=d},this.validate=function(){if(b.column.validator){var a=b.column.validator(c.val());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()},IntegerCellEditor:function(b){var c,d,e=this;this.init=function(){c=a("<INPUT type=text class='editor-text' />"),c.bind("keydown.nav",function(b){(b.keyCode===a.ui.keyCode.LEFT||b.keyCode===a.ui.keyCode.RIGHT)&&b.stopImmediatePropagation()}),c.appendTo(b.container),c.focus().select()},this.destroy=function(){c.remove()},this.focus=function(){c.focus()},this.loadValue=function(a){d=a[b.column.field],c.val(d),c[0].defaultValue=d,c.select()},this.serializeValue=function(){return parseInt(c.val(),10)||0},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return(c.val()!=""||d!=null)&&c.val()!=d},this.validate=function(){return isNaN(c.val())?{valid:!1,msg:"Please enter a valid integer"}:{valid:!0,msg:null}},this.init()},DateCellEditor:function(b){var c,d,e=this,f=!1;this.init=function(){c=a("<INPUT type=text class='editor-text' />"),c.appendTo(b.container),c.focus().select(),c.datepicker({showOn:"button",buttonImageOnly:!0,buttonImage:"../images/calendar.gif",beforeShow:function(){f=!0},onClose:function(){f=!1}}),c.width(c.width()-18)},this.destroy=function(){a.datepicker.dpDiv.stop(!0,!0),c.datepicker("hide"),c.datepicker("destroy"),c.remove()},this.show=function(){f&&a.datepicker.dpDiv.stop(!0,!0).show()},this.hide=function(){f&&a.datepicker.dpDiv.stop(!0,!0).hide()},this.position=function(b){if(!f)return;a.datepicker.dpDiv.css("top",b.top+30).css("left",b.left)},this.focus=function(){c.focus()},this.loadValue=function(a){d=a[b.column.field],c.val(d),c[0].defaultValue=d,c.select()},this.serializeValue=function(){return c.val()},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return(c.val()!=""||d!=null)&&c.val()!=d},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoSelectCellEditor:function(b){var c,d,e=this;this.init=function(){c=a("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>"),c.appendTo(b.container),c.focus()},this.destroy=function(){c.remove()},this.focus=function(){c.focus()},this.loadValue=function(a){c.val((d=a[b.column.field])?"yes":"no"),c.select()},this.serializeValue=function(){return c.val()=="yes"},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return c.val()!=d},this.validate=function(){return{valid:!0,msg:null}},this.init()},YesNoCheckboxCellEditor:function(b){var c,d,e=this;this.init=function(){c=a("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>"),c.appendTo(b.container),c.focus()},this.destroy=function(){c.remove()},this.focus=function(){c.focus()},this.loadValue=function(a){d=a[b.column.field],d?c.attr("checked","checked"):c.removeAttr("checked")},this.serializeValue=function(){return c.attr("checked")},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return c.attr("checked")!=d},this.validate=function(){return{valid:!0,msg:null}},this.init()},PercentCompleteCellEditor:function(b){var c,d,e,f=this;this.init=function(){c=a("<INPUT type=text class='editor-percentcomplete' />"),c.width(a(b.container).innerWidth()-25),c.appendTo(b.container),d=a("<div class='editor-percentcomplete-picker' />").appendTo(b.container),d.append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>"),d.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>"),c.focus().select(),d.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:e,slide:function(a,b){c.val(b.value)}}),d.find(".editor-percentcomplete-buttons button").bind("click",function(b){c.val(a(this).attr("val")),d.find(".editor-percentcomplete-slider").slider("value",a(this).attr("val"))})},this.destroy=function(){c.remove(),d.remove()},this.focus=function(){c.focus()},this.loadValue=function(a){c.val(e=a[b.column.field]),c.select()},this.serializeValue=function(){return parseInt(c.val(),10)||0},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return(c.val()!=""||e!=null)&&(parseInt(c.val(),10)||0)!=e},this.validate=function(){return isNaN(parseInt(c.val(),10))?{valid:!1,msg:"Please enter a valid positive number"}:{valid:!0,msg:null}},this.init()},StarCellEditor:function(b){function c(a){if(a.type=="keydown"&&a.which!=32)return;return d.css("opacity")=="1"?d.css("opacity",.5):d.css("opacity",1),a.preventDefault(),a.stopPropagation(),!1}var d,e,f=this;this.init=function(){d=a("<IMG src='../images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",c).appendTo(b.container).focus()},this.destroy=function(){d.unbind("click keydown",c),d.remove()},this.focus=function(){d.focus()},this.loadValue=function(a){e=a[b.column.field],d.css("opacity",e?1:.2)},this.serializeValue=function(){return d.css("opacity")=="1"},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return e!=(d.css("opacity")=="1")},this.validate=function(){return{valid:!0,msg:null}},this.init()},LongTextCellEditor:function(b){var c,d,e,f=this;this.init=function(){var e=a("body");d=a("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo(e),c=a("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo(d),a("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo(d),d.find("button:first").bind("click",this.save),d.find("button:last").bind("click",this.cancel),c.bind("keydown",this.handleKeyDown),f.position(b.position),c.focus().select()},this.handleKeyDown=function(b){b.which==a.ui.keyCode.ENTER&&b.ctrlKey?f.save():b.which==a.ui.keyCode.ESCAPE?(b.preventDefault(),f.cancel()):b.which==a.ui.keyCode.TAB&&b.shiftKey?(b.preventDefault(),grid.navigatePrev()):b.which==a.ui.keyCode.TAB&&(b.preventDefault(),grid.navigateNext())},this.save=function(){b.commitChanges()},this.cancel=function(){c.val(e),b.cancelChanges()},this.hide=function(){d.hide()},this.show=function(){d.show()},this.position=function(a){d.css("top",a.top-5).css("left",a.left-5)},this.destroy=function(){d.remove()},this.focus=function(){c.focus()},this.loadValue=function(a){c.val(e=a[b.column.field]),c.select()},this.serializeValue=function(){return c.val()},this.applyValue=function(a,c){a[b.column.field]=c},this.isValueChanged=function(){return(c.val()!=""||e!=null)&&c.val()!=e},this.validate=function(){return{valid:!0,msg:null}},this.init()}};a.extend(window,b)}(jQuery),define("vendor/slickgrid/slick.editors",function(){}),define("use!vendor/slickgrid/slick.editors",["use!vendor/slickgrid/slick.core"],function(){return window.Slick}),function(a){function b(b){function c(c){u=a.extend(!0,{},v,b),p=c,s.subscribe(p.onActiveCellChanged,e(m)),s.subscribe(p.onKeyDown,e(n)),s.subscribe(p.onClick,e(o))}function d(){s.unsubscribeAll()}function e(a){return function(){t||(t=!0,a.apply(this,arguments),t=!1)}}function f(a){var b=[];for(var c=0;c<a.length;c++)for(var d=a[c].fromRow;d<=a[c].toRow;d++)b.push(d);return b}function g(a){var b=[],c=p.getColumns().length-1;for(var d=0;d<a.length;d++)b.push(new Slick.Range(a[d],0,a[d],c));return b}function h(a,b){var c,d=[];for(c=a;c<=b;c++)d.push(c);for(c=b;c<a;c++)d.push(c);return d}function i(){return f(q)}function j(a){k(g(a))}function k(a){q=a,r.onSelectedRangesChanged.notify(q)}function l(){return q}function m(a,b){u.selectActiveRow&&k([new Slick.Range(b.row,0,b.row,p.getColumns().length-1)])}function n(a){var b=p.getActiveCell();if(b&&a.shiftKey&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&(a.which==38||a.which==40)){var c=i();c.sort(function(a,b){return a-b}),c.length||(c=[b.row]);var d=c[0],e=c[c.length-1],f;a.which==40?f=b.row<e||d==e?++e:++d:f=b.row<e?--e:--d,f>=0&&f<p.getDataLength()&&(p.scrollRowIntoView(f),q=g(h(d,e)),k(q)),a.preventDefault(),a.stopPropagation()}}function o(b){var c=p.getCellFromEvent(b);if(!c||!p.canCellBeActive(c.row,c.cell))return!1;var d=f(q),e=a.inArray(c.row,d);if(!b.ctrlKey&&!b.shiftKey&&!b.metaKey)return!1;if(p.getOptions().multiSelect)if(e===-1&&(b.ctrlKey||b.metaKey))d.push(c.row),p.setActiveCell(c.row,c.cell);else if(e!==-1&&(b.ctrlKey||b.metaKey))d=a.grep(d,function(a,b){return a!==c.row}),p.setActiveCell(c.row,c.cell);else if(d.length&&b.shiftKey){var h=d.pop(),i=Math.min(c.row,h),j=Math.max(c.row,h);d=[];for(var l=i;l<=j;l++)l!==h&&d.push(l);d.push(h),p.setActiveCell(c.row,c.cell)}return q=g(d),k(q),b.stopImmediatePropagation(),!0}var p,q=[],r=this,s=new Slick.EventHandler,t,u,v={selectActiveRow:!0};a.extend(this,{getSelectedRows:i,setSelectedRows:j,getSelectedRanges:l,setSelectedRanges:k,init:c,destroy:d,onSelectedRangesChanged:new Slick.Event})}a.extend(!0,window,{Slick:{RowSelectionModel:b}})}(jQuery),define("vendor/slickgrid/plugins/slick.rowselectionmodel",function(){}),define("use!vendor/slickgrid/plugins/slick.rowselectionmodel",["use!vendor/slickgrid/slick.core"],function(){return window.Slick}),define("vendor/slickgrid",["use!vendor/slickgrid/slick.grid","use!vendor/slickgrid/slick.editors","use!vendor/slickgrid/plugins/slick.rowselectionmodel"],function(a){return a}),function(){define("compiled/multi_grid",["jquery","vendor/slickgrid","vendor/jquery.scrollTo"],function(a,b){var c,d,e,f,g,h;c=c=function(){function c(c,d,e,f){var g,h,i,j=this;this.data=c,this.parent_grid_idx=f,this.grids=function(){var c,f,j;j=[];for(c=0,f=e.length;c<f;c++)h=e[c],i=a.extend({},d,h.options),g=new b.Grid(h.selector,this.data,h.columns,i),g.multiview_grid_opts=h,h.$viewport=a(h.selector).find(".slick-viewport"),h===e[this.parent_grid_idx]?this.parent_grid=g:h.$viewport.css("overflow-y","hidden"),j.push(g);return j}.call(this),this.parent_grid.onViewportChanged.subscribe(function(){var a,b,c,d,e;d=j.grids,e=[];for(b=0,c=d.length;b<c;b++){a=d[b];if(a===j.parent_grid)continue;a.multiview_grid_opts.$viewport[0].scrollTop=j.parent_grid.multiview_grid_opts.$viewport[0].scrollTop,e.push(a.multiview_grid_opts.$viewport.trigger("scroll.slickgrid"))}return e})}return c.name="MultiGrid",c}(),h=["render","invalidateRow","updateRowCount","autosizeColumns","resizeCanvas","invalidate"],e=function(a){return c.prototype[a]=function(){var b,c,d,e,f;e=this.grids,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],f.push(b[a].apply(b,arguments));return f}};for(f=0,g=h.length;f<g;f++)d=h[f],e(d);return c})}.call(this),define("translations/gradebook2",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),function(){define("compiled/gradebook2/GRADEBOOK_TRANSLATIONS",["i18n!gradebook2"],function(a){var b;return b={submission_tooltip_dropped:a.t("dropped_for_grading","Dropped for grading purposes"),submission_tooltip_late:a.t("submitted_late","Submitted late"),submission_tooltip_muted:a.t("assignment_muted","Assignment muted"),submission_tooltip_resubmitted:a.t("resubmitted","Resubmitted since last graded"),submission_tooltip_ungraded:a.t("ungraded","Not factored into grading"),submission_tooltip_online_url:a.t("titles.url","URL Submission"),submission_tooltip_discussion_topic:a.t("titles.discussion","Discussion Submission"),submission_tooltip_online_upload:a.t("titles.upload","File Upload Submission"),submission_tooltip_online_text_entry:a.t("titles.text","Text Entry Submission"),submission_tooltip_pending_review:a.t("titles.quiz_review","This quiz needs review"),submission_tooltip_media_comment:a.t("titles.media","Media Comment Submission"),submission_tooltip_quiz:a.t("title.quiz","Quiz Submission")}})}.call(this),define("translations/submission_details_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{submission_details_dialog:{add_a_comment:"Agregar un comentario",comments:"Comentarios",late:"TARDE",links:{click_to_view:"haga click aqu para ver"},loading_comments:"Cargando comentarios...",more_details_in_the_speedgrader:"Ms detalles en el Calificador Rpido",post_comment:"Publicar Comentario",submitted:"Enviado:",this_was_submitted_multiple_times_choose_a_submission_to_view:"Enviado varias veces, escoja cual ver:",view_rubric_assessment_in_the_speedgrader:"Ver la Rbrica de la Evaluacin en el Calificador Rpido"}}}})}),define("translations/submission_detail",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{submission_detail:{go_to_submission_url:"Ir al URL de envo",no_submission:"No hay envo",online_text_entry_see_details_in_the_speedgrader:"Ingreso de Texto En Lnea, *vea los detalles en el Calificador Rpido*.",submitted_files:"Archivos Enviados:"}}}})}),define("translations/assignment_group_weights_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{assignment_group_weights_dialog:{buttons:{save:"Guardar"},titles:{assignment_group_weights:"Manejar la asignacin de importancia a los grupos de trabajo",total:"Total"},weight_final:"Asignar peso a la calificacin final basado en grupos"}}}})}),define("translations/message_students",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{message_students:{buttons:{send_message:"Enviar Mensaje",send_message_failed:"Envo del Mensaje Fall, intente de nuevo",sending_message:"Enviando Mensaje..."},message_student:"Enviar Mensaje a Estudiantes para %{course_name}",send_message:"Enviar el Mensaje"}}}})}),define("translations/assignment_details_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{assignment_details_dialog:{average_score:"Calificacin Promedio:",count_of_submissions:"%{cnt} envos",grading_statistics_for_assignment:"Estadsticas de calificacin para: %{assignment.name}",high_score:"Calificacin Alta:",low_score:"Calificacin Baja:",no_one_scored_higher:"Nadie obtuvo una calificacin mayor de %{max}",no_one_scored_lower:"Nadie obtuvo una calificacin menor de %{min}",scores_higher_than_the_average:"Calificaciones mayores del promedio de %{average}",scores_lower_than_the_average:"Calificaciones menores del promedio de %{average}",total_submitted:"Total Enviado:"}}}})}),define("translations/assignment_muter",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/mute_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{mute_dialog:{curving_assignments:"Aplicando Curvas a tareas",grade_change_notifications:"Notificaciones de Cambios de Calificaciones",how_to_unmute:'Una vez que ha obviado esta tarea, puede comenzar a enviar notificaciones otra vez haciendo click en el enlace "Obviar Tarea".',mute_assignment:"Obviar Tarea",score_change_notifications:"Notificaciones de cambio en calificaciones",students_will_see:"Los estudiantes podrn ver que esta tarea est obviada.",submission_comments:"Comentarios de los envos",sure_you_want_to_mute:"Est seguro que quiere obviar esta tarea? Mientras esta tarea est obviada, los estudiantes no recibirn nuevas notificaciones acerca o podr ver:"}}}})}),define("translations/set_default_grade_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{set_default_grade_dialog:{default_grades:"Dar a todos los estudiantes la misma calificacin para *%{assignment.name}* ingresando y enviando un valor de la calificacin a continuacin:",dialog_title:"Calificacin Predeterminada para %{assignment.name}",overwrite:"Sobrescribir calificaciones que ya se han ingresado",set_grades_button:"Establecer una Calificacin Predeterminada",set_grades_button_loading:"Estableciendo Calificaciones..."}}}})}),define("translations/grading_box",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{gradebooks:{grades:{complete:"Completo",incomplete:"Incompleto"}},grading_box:{out_of_points_possible:"de %{assignment.points_possible}"}}}})}),define("translations/curve_grades_dialog",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{curve_grades_dialog:{average_score:"Calificacin Promedio",buttons:{curve_grades:"Aplicar Curva a Calificaciones",curving_grades:"Aplicando Curva a las Calificaciones..."},curve_average:"Ingrese una calificacin promedio para *%{assignment.name}*. El cuadro muestra el mejor intento en aplicar la curva a las calificaciones basado en las calificaciones actuales.",curve_grade_for_assignment:"Aplique Curva para %{assignment.name}",labels:{assign_blanks:"Asignar cero a estudiantes que no han hecho envos"},out_of_points_possible:"de %{assignment.points_possible}"}}}})}),define("translations/gradebook2.gradebook_header_menu",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{gradebook2:{gradebook_header_menu:{assignment_details:"Detalles de la Tarea",curve_grades:"Aplicar Curva a Calificaciones",download_submissions:"Descargar Envios",message_students_who:"Enviar un Mensaje a Estudiantes que...",re_upload_submissions:"Re-Cargar Envios",set_default_grade:"Establecer Calificacin Predeterminada",speedgrader:"Calificador Rpido"}}}}})}),define("translations/re_upload_submissions_form",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{re_upload_submissions_form:{buttons:{upload:"Cargar Archivos"},reupload_submission_files:"Volver a Cargar Archivos de los Envos",upload_info:"Si hizo cambios a los archivos de envos de estudiantes que descarg anteriormente, slo comprmalos y cargue el archivo zip con el formulario a continuacin. Los estudiantes vern los archivos modificados en sus comentarios para el envo.",upload_warning:"Asegurese que no cambie los nombres de los archivos de envo para poder reconocerlos."}}}})}),define("translations/gradebook_uploads_form",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{gradebook_uploads_form:{buttons:{upload_data:"Cargar la Informacin"},example_csv_file:"Ejemplo de un archivo CSV",existing_assignment_example:"Tarea Existente (581)",explanation_of_required_columns:"Debe tener *todas* estas columnas, solo *necesita* uno por fila.",instructions:{csv_download_and_upload:"Si tiene duda, puede *descargar un CSV*, cambiar las calificaciones que desea y recargar el mismo archivo."},labels:{upload:"Escoger un archivo CSV para cargarlo:"},leaving_id_will_match_better_can_add_new_assignment:'Al dejar el ID intact (la parte "(581)" en este caso) ayudar a hacer el apareamiento ms fcil. Puede tambin agregar tareas nuevas que sern creadas rpidamente.',new_assignment_example:"Una Tarea Nueva",optional_ignored:"Opcional, ignorado.",titles:{upload_form:"Escoger un archivo CSV para cargar"},what_should_csv_look_like:"Cmo se debera ver el archivo CSV?"}}}})}),define("translations/gradebook2.section_to_show_menu",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("translations/gradebook2.column_header",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{}})}),define("vendor/jquery.ui.core-1.9",["jquery","jqueryui/core"],function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})}),define("vendor/jquery.ui.widget-1.9",["jquery","jqueryui/widget"],function(a,b){var c=Array.prototype.slice,d=a.cleanData;a.cleanData=function(b){for(var c=0,e;(e=b[c])!=null;c++)a(e).triggerHandler("remove");d(b)},a.widget=function(b,d,e){var f=b.split(".")[0],g;b=b.split(".")[1],g=f+"-"+b,e||(e=d,d=a.Widget),a.expr[":"][g]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=a.extend(function(c,d){if(!this._createWidget)return new a[f][b](c,d);arguments.length&&this._createWidget(c,d)},a[f][b],{version:e.version});var h=new d;h.options=a.widget.extend({},h.options),a.each(e,function(b,f){a.isFunction(f)&&(e[b]=function(){var a=function(a){return d.prototype[a].apply(this,c.call(arguments,1))},b=function(a,b){return d.prototype[a].apply(this,b)};return function(){var c=this._super,d=this._superApply,e;return this._super=a,this._superApply=b,e=f.apply(this,arguments),this._super=c,this._superApply=d,e}}())}),a[f][b].prototype=a.widget.extend(h,{namespace:f,widgetName:b,widgetEventPrefix:b,widgetBaseClass:g},e),a.widget.bridge(b,a[f][b])},a.widget.extend=function(d){var e=c.call(arguments,1),f=0,g=e.length,h,i;for(;f<g;f++)for(h in e[f])i=e[f][h],e[f].hasOwnProperty(h)&&i!==b&&(d[h]=a.isPlainObject(i)?a.widget.extend({},d[h],i):i);return d},a.widget.bridge=function(d,e){a.fn[d]=function(f){var g=typeof f=="string",h=c.call(arguments,1),i=this;return f=!g&&h.length?a.widget.extend.apply(null,[f].concat(h)):f,g?this.each(function(){var c=a.data(this,d);if(!c)return console.log("WARNING, this will break with new jqueryui: cannot call methods on "+d+" prior to initialization; "+"attempted to call method '"+f+"'");if(!a.isFunction(c[f])||f.charAt(0)==="_")return a.error("no such method '"+f+"' for "+d+" widget instance");var e=c[f].apply(c,h);if(e!==c&&e!==b)return i=e&&e.jquery?i.pushStack(e.get()):e,!1}):this.each(function(){var b=a.data(this,d);b?b.option(f||{})._init():e(f,this)}),i}},a.Widget=function(b,c){if(!this._createWidget)return new a[namespace][name](b,c);arguments.length&&this._createWidget(b,c)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,c){c=a(c||this.defaultElement||this)[0],this.element=a(c),this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),c!==this&&(a.data(c,this.widgetName,this),this._bind({remove:"destroy"})),this._create(),this._trigger("create"),this._init()},_getCreateOptions:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled"),this.bindings.unbind("."+this.widgetName),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e=c,f,g,h;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof c=="string"){e={},f=c.split("."),c=f.shift();if(f.length){g=e[c]=a.widget.extend({},this.options[c]);for(h=0;h<f.length-1;h++)g[f[h]]=g[f[h]]||{},g=g[f[h]];c=f.pop();if(d===b)return g[c]===b?null:g[c];g[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&(this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(b,c){c?(b=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element);var d=this;a.each(c,function(c,e){b.bind(c+"."+d.widgetName,function(){if(d.options.disabled===!0||a(this).hasClass("ui-state-disabled"))return;return(typeof e=="string"?d[e]:e).apply(d,arguments)})})},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._bind(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._bind(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e=this.options[b],f;c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),d=d||{};if(c.originalEvent)for(var g=a.event.props.length,h;g;)h=a.event.props[--g],c[h]=c.originalEvent[h];return this.element.trigger(c,d),f=a.isArray(d)?[c].concat(d):[c,d],!(a.isFunction(e)&&e.apply(this.element[0],f)===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){typeof e=="string"&&(e={effect:e});var g,h=e?e===!0||typeof e=="number"?c:e.effect||c:b;e=e||{},typeof e=="number"&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&(a.effects.effect[h]||a.uiBackCompat!==!1&&a.effects[h])?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.uiBackCompat!==!1&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})}),define("vendor/jquery.ui.menu-1.9",["jquery","jqueryui/autocomplete","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9"],function(a){var b=0;a.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:150,options:{position:{my:"left top",at:"right top"}},_create:function(){var c=this;this.activeMenu=this.element,this.menuId=this.element.attr("id")||"ui-menu-"+b++,this.element.find(".ui-icon").length&&this.element.addClass("ui-menu-icons"),this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"menu"}).bind("click.menu",function(b){var d=a(b.target).closest(".ui-menu-item:has(a)");if(c.options.disabled)return!1;if(!d.length)return;(!c.active||c.active[0]!==d[0])&&c.focus(b,d),c.select(b)}).bind("mouseover.menu",function(b){if(c.options.disabled)return;var d=a(b.target).closest(".ui-menu-item");d.length&&(d.siblings().children(".ui-state-active").removeClass("ui-state-active"),c.focus(b,d))}).bind("mouseout.menu",function(b){if(c.options.disabled)return;var d=a(b.target).closest(".ui-menu-item");d.length&&c.blur(b)}).bind("focus.menu",function(b){if(c.options.disabled)return;c.focus(b,a(b.target).children(".ui-menu-item:first"))}).bind("blur.menu",function(a){if(c.options.disabled)return;c.collapseAll(a)}),this.refresh(),this.element.attr("tabIndex",0).bind("keydown.menu",function(b){if(c.options.disabled)return;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:c.previousPage(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.PAGE_DOWN:c.nextPage(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.HOME:c._move("first","first",b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.END:c._move("last","last",b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.UP:c.previous(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.DOWN:c.next(b),b.preventDefault(),b.stopImmediatePropagation();break;case a.ui.keyCode.LEFT:c.collapse(b)&&b.stopImmediatePropagation(),b.preventDefault();break;case a.ui.keyCode.RIGHT:c.expand(b)&&b.stopImmediatePropagation(),b.preventDefault();break;case a.ui.keyCode.ENTER:c.active.children("a[aria-haspopup='true']").length?c.expand(b)&&b.stopImmediatePropagation():(c.select(b),b.stopImmediatePropagation()),b.preventDefault();break;case a.ui.keyCode.ESCAPE:c.collapse(b)&&b.stopImmediatePropagation(),b.preventDefault();break;default:b.stopPropagation(),clearTimeout(c.filterTimer);var d,e=c.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1;f==e?g=!0:f=e+f;function h(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}d=c.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+h(f),"i")).test(a(this).children("a").text())}),d=g&&d.index(c.active.next())!=-1?c.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),d=c.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+h(f),"i")).test(a(this).children("a").text())})),d.length?(c.focus(b,d),d.length>1?(c.previousFilter=f,c.filterTimer=setTimeout(function(){delete c.previousFilter},1e3)):delete c.previousFilter):delete c.previousFilter}}),this._bind(document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b)}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find("ul").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").show(),this.element.find(".ui-menu-item").unbind(".menu").removeClass("ui-menu-item").removeAttr("role").children("a").removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").removeAttr("id").children(".ui-icon").remove()},refresh:function(){var b=this,c=this.element.find("ul:not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr("role","menu").hide().attr("aria-hidden","true").attr("aria-expanded","false"),d=c.add(this.element).children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation");d.children("a").addClass("ui-corner-all").attr("tabIndex",-1).attr("role","menuitem").attr("id",function(a){return b.element.attr("id")+"-"+a}),c.each(function(){var b=a(this),c=b.prev("a");c.attr("aria-haspopup","true").prepend('<span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>'),b.attr("aria-labelledby",c.attr("id"))})},focus:function(b,c){var d,e=this;this.blur(b);if(this._hasScroll()){var f=parseFloat(a.curCSS(this.activeMenu[0],"borderTopWidth",!0))||0,g=parseFloat(a.curCSS(this.activeMenu[0],"paddingTop",!0))||0,h=c.offset().top-this.activeMenu.offset().top-f-g,i=this.activeMenu.scrollTop(),j=this.activeMenu.height(),k=c.height();h<0?this.activeMenu.scrollTop(i+h):h+k>j&&this.activeMenu.scrollTop(i+h-j+k)}this.active=c.first().children("a").addClass("ui-state-focus").end(),e.element.attr("aria-activedescendant",e.active.children("a").attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e.timer=setTimeout(function(){e._close()},e.delay),d=a(">ul",c),d.length&&/^mouse/.test(b.type)&&e._startOpening(d),this.activeMenu=c.parent(),this._trigger("focus",b,{item:c})},blur:function(a){if(!this.active)return;clearTimeout(this.timer),this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active})},_startOpening:function(a){clearTimeout(this.timer);if(a.attr("aria-hidden")!=="true")return;var b=this;b.timer=setTimeout(function(){b._close(),b._open(a)},b.delay)},_open:function(b){clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents()).hide().attr("aria-hidden","true");var c=a.extend({},{of:this.active},a.type(this.options.position)=="function"?this.options.position(this.active):this.options.position);b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(a){this.element.find("ul").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active"),this.blur(a),this.activeMenu=this.element},_close:function(){this.active.parent().find("ul").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parents("li:not(.ui-menubar-item)").first();if(b&&b.length)return this.active.parent().attr("aria-hidden","true").attr("aria-expanded","false").hide(),this.focus(a,b),!0},expand:function(a){var b=this,c=this.active&&this.active.children("ul").children("li").first();if(c&&c.length)return this._open(c.parent()),setTimeout(function(){b.focus(a,c)},20),!0},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){if(!this.active){this.focus(c,this.activeMenu.children(".ui-menu-item")[b]());return}var d;a==="first"||a==="last"?d=this.active[a==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):d=this.active[a+"All"](".ui-menu-item").eq(0),d.length?this.focus(c,d):this.focus(c,this.activeMenu.children(".ui-menu-item")[b]())},nextPage:function(b){if(this._hasScroll()){if(!this.active){this.focus(b,this.activeMenu.children(".ui-menu-item").first());return}if(this.last())return;var c=this.active.offset().top,d=this.element.height(),e;this.active.nextAll(".ui-menu-item").each(function(){return e=a(this),a(this).offset().top-c-d<0}),this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(b){if(this._hasScroll()){if(!this.active){this.focus(b,this.activeMenu.children(".ui-menu-item").first());return}if(this.first())return;var c=this.active.offset().top,d=this.element.height(),e;this.active.prevAll(".ui-menu-item").each(function(){return e=a(this),a(this).offset().top-c+d>0}),this.focus(b,e)}else this.focus(b,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.height()<this.element.prop("scrollHeight")},select:function(a){var b={item:this.active};this.collapseAll(a),this._trigger("select",a,b)}})}),define("jquery.ui.menu.inputmenu",["jquery","vendor/jquery.ui.menu-1.9"],function(a,b){var c=a.ui.menu.prototype,d=c.refresh;a.extend(c,{refresh:function(){d.call(this);var b=this,c=this.element.find("li.ui-menu-item"),e=!1;this.element.bind("click.menu",function(a){(new RegExp(/^a$/i)).test(a.target.tagName)||a.preventDefault()});var f=0;this.element.find("input[type='checkbox'], input[type='radio']").each(function(){var b=a(this).closest("label");b.length&&(a(this).insertBefore(b),a(this).attr("id")||a(this).attr("id","ui-input-"+f++),b.attr("for",a(this).attr("id")))}),c.children("a").each(function(b,c){var d=a(c),f=d.parent();d.children().is("input[type='checkbox'], input[type='radio']")&&(d.closest("ul").addClass("ui-menu-icons"),d.children("input[type='checkbox']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-check"></span>'),f.attr({role:"menuitemcheckbox","aria-checked":"true"})):d.children("input[type='radio']").is(":checked")?(d.prepend('<span class="ui-icon ui-icon-radio-on"></span>'),f.attr({role:"menuitemradio","aria-checked":"true"})):d.children("input[type='radio']").length?(d.prepend('<span class="ui-icon ui-icon-radio-off"></span>'),f.attr({role:"menuitemradio","aria-checked":"false"})):f.attr({role:"menuitemcheckbox","aria-checked":"false"}),d.children().is("input[type='radio']")&&f.attr("radio-group",d.children("input[type='radio']").attr("name")),f.prev().length&&!f.prev().children("a").length?(f.prev().addClass("ui-state-disabled").html("<span class='ui-menu-input-group'>"+f.prev().text()+"</span>").bind("click.menu",!1).after('<li class="ui-menu-item"><hr /></li>'),e=!0):f.prev().length&&!f.prev().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.before("<li><hr /></li>"),e&&f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")?(f.after("<li><hr /></li>"),e=!1):f.next().length&&!f.next().children("a").children().is("input[type='checkbox'], input[type='radio']")&&f.after("<li><hr /></li>"),d.children("input[type='checkbox'], input[type='radio']").hide())}),c.bind("keydown.menu",function(c){c.keyCode===a.ui.keyCode.SPACE&&(b.active.children("a").children().is("input[type='checkbox'], input[type='radio']")&&(b.select(c),c.stopImmediatePropagation()),c.preventDefault())})},select:function(b){var c={item:this.active};this.active.children("a").children().is("input[type='checkbox']")&&(this.active.attr("aria-checked")==="false"?(this.active.children("a").prepend('<span class="ui-icon ui-icon-check"></span>'),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='checkbox']").prop("checked","checked").trigger("change")):this.active.attr("aria-checked")==="true"&&(this.active.children("a").children("span.ui-icon-check").remove(),this.active.attr("aria-checked","false"),this.active.children("a").children("input[type='checkbox']").removeAttr("checked").trigger("change"))),this.active.children("a").children().is("input[type='radio']")&&this.active.attr("aria-checked")==="false"&&(this.active.children("a").children("span.ui-icon-radio-off").toggleClass("ui-icon-radio-on ui-icon-radio-off"),this.active.attr("aria-checked","true"),this.active.children("a").children("input[type='radio']").prop("checked","checked").trigger("change"),this.active.siblings("[radio-group="+a(this.active).attr("radio-group")+"]").each(function(){a(this).attr("aria-checked","false"),a(this).children("a").children("span.ui-icon-radio-on").toggleClass("ui-icon-radio-on ui-icon-radio-off"),a(this).children("a").children("input[type='radio']").removeAttr("checked")})),this.active.children("a").children().is("input[type='checkbox'], input[type='radio']")||this.collapseAll(),this._trigger("select",b,c)}})}),define("vendor/jquery.ui.position-1.9",["jquery"],function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e=/[+-]\d+%?/,f=/^\w+/,g=/%$/,h="center",i=a.fn.position;a.position={scrollbarWidth:function(){var b,c,d=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),e=d.children()[0];return a("body").append(d),b=e.offsetWidth,d.css("overflow","scroll"),c=e.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),b-c},getScrollInfo:function(b){var c=b[0],d=b.height()<c.scrollHeight,e=b.width()<c.scrollWidth,f=a.position.scrollbarWidth();return{height:d?f:0,width:e?f:0}}},a.fn.position=function(b){if(!b||!b.of)return i.apply(this,arguments);b=a.extend({},b);var j=a(b.of),k=a(b.within||window),l=j[0],m=(b.collision||"flip").split(" "),n={},o,p,q,r;return l.nodeType===9?(p=j.width(),q=j.height(),r={top:0,left:0}):a.isWindow(l)?(p=j.width(),q=j.height(),r={top:j.scrollTop(),left:j.scrollLeft()}):l.preventDefault?(b.at="left top",p=q=0,r={top:b.of.pageY,left:b.of.pageX}):(p=j.outerWidth(),q=j.outerHeight(),r=j.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" "),g,i;a.length===1&&(a=c.test(a[0])?a.concat([h]):d.test(a[0])?[h].concat(a):[h,h]),a[0]=c.test(a[0])?a[0]:h,a[1]=d.test(a[1])?a[1]:h,g=e.exec(a[0]),i=e.exec(a[1]),n[this]=[g?g[0]:0,i?i[0]:0],b[this]=[f.exec(a[0])[0],f.exec(a[1])[0]]}),m.length===1&&(m[1]=m[0]),b.at[0]==="right"?r.left+=p:b.at[0]===h&&(r.left+=p/2),b.at[1]==="bottom"?r.top+=q:b.at[1]===h&&(r.top+=q/2),o=[parseInt(n.at[0],10)*(g.test(n.at[0])?p/100:1),parseInt(n.at[1],10)*(g.test(n.at[1])?q/100:1)],r.left+=o[0],r.top+=o[1],this.each(function(){var c=a(this),d=c.outerWidth(),e=c.outerHeight(),f=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,j=a.position.getScrollInfo(k),l=d+f+(parseInt(a.curCSS(this,"marginRight",!0))||0)+j.width,s=e+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0)+j.height,t=a.extend({},r),u=[parseInt(n.my[0],10)*(g.test(n.my[0])?c.outerWidth()/100:1),parseInt(n.my[1],10)*(g.test(n.my[1])?c.outerHeight()/100:1)],v;b.my[0]==="right"?t.left-=d:b.my[0]===h&&(t.left-=d/2),b.my[1]==="bottom"?t.top-=e:b.my[1]===h&&(t.top-=e/2),t.left+=u[0],t.top+=u[1],t.left=Math.round(t.left),t.top=Math.round(t.top),v={left:t.left-f,top:t.top-i},a.each(["left","top"],function(f,g){a.ui.position[m[f]]&&a.ui.position[m[f]][g](t,{targetWidth:p,targetHeight:q,elemWidth:d,elemHeight:e,collisionPosition:v,collisionWidth:l,collisionHeight:s,offset:[o[0]+u[0],o[1]+u[1]],my:b.my,at:b.at,within:k,elem:c})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(t,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?e.scrollLeft():d.offset().left,h=f?e.width():d.outerWidth(),i=g-c.collisionPosition.left,j=c.collisionPosition.left+c.collisionWidth-h-g;c.collisionWidth>h||i>0?b.left+=i:j>0?b.left-=j:b.left=Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?e.scrollTop():d.offset().top,h=f?e.height():d.outerHeight(),i=g-c.collisionPosition.top,j=c.collisionPosition.top+c.collisionHeight-h-g;c.collisionHeight>h||i>0?b.top+=i:j>0?b.top-=j:b.top=Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===h)return;c.elem.removeClass("ui-flipped-left ui-flipped-right");var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?0:d.offset().left,i=f?d.width():d.outerWidth(),j=c.collisionPosition.left-g,k=c.collisionPosition.left+c.collisionWidth-i-g,l=c.my[0]==="left",m=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,n=c.at[0]==="left"?c.targetWidth:-c.targetWidth,o=-2*c.offset[0];if(j<0||k>0)c.elem.addClass("ui-flipped-"+(j<0?"right":"left")),b.left+=m+n+o},top:function(b,c){if(c.at[1]===h)return;c.elem.removeClass("ui-flipped-top ui-flipped-bottom");var d=c.within,e=a(window),f=a.isWindow(c.within[0]),g=f?0:d.offset().top,i=f?d.height():d.outerHeight(),j=c.collisionPosition.top-g,k=c.collisionPosition.top+c.collisionHeight-i-g,l=c.my[1]==="top",m=l?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,n=c.at[1]==="top"?c.targetHeight:-c.targetHeight,o=-2*c.offset[1];if(j<0||k>0)c.elem.addClass("ui-flipped-"+(j<0?"bottom":"top")),b.top+=m+n+o}}},a.uiBackCompat!==!1&&function(a){var c=a.fn.position;a.fn.position=function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");return e.length===1&&(e[1]=e[0]),/^\d/.test(e[0])&&(e[0]="+"+e[0]),/^\d/.test(e[1])&&(e[1]="+"+e[1]),f.length===1&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center")),c.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:b}))}}(a)}),define("vendor/jquery.ui.popup-1.9",["jquery","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9","vendor/jquery.ui.position-1.9"],function(a,b,c,d){var e=0;a.widget("ui.popup",{version:"@VERSION",options:{position:{my:"left top",at:"left bottom"}},_create:function(){this.options.trigger||(this.options.trigger=this.element.prev()),this.element.attr("id")||(this.element.attr("id","ui-popup-"+e++),this.generatedId=!0),this.element.attr("role")||(this.element.attr("role","dialog"),this.generatedRole=!0),this.options.trigger.attr("aria-haspopup","true").attr("aria-owns",this.element.attr("id")),this.element.addClass("ui-popup"),this.close(),this._bind(this.options.trigger,{keydown:function(b){this.options.trigger.is("a:ui-button")&&b.keyCode==a.ui.keyCode.SPACE&&b.preventDefault(),b.keyCode==a.ui.keyCode.SPACE&&this.options.trigger.is("a:not(:ui-button)")&&this.options.trigger.trigger("click",b),b.keyCode==a.ui.keyCode.DOWN&&(b.preventDefault(),this.options.trigger.trigger("click",b))},click:function(a){a.preventDefault();if(this.isOpen)return;var b=this;clearTimeout(this.closeTimer),setTimeout(function(){b.open(a)},1)}}),this.element.is(":ui-menu")||this._bind({keydown:function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this.element),d=c.first(),e=c.last();b.target===e[0]&&!b.shiftKey?(d.focus(1),b.preventDefault()):b.target===d[0]&&b.shiftKey&&(e.focus(1),b.preventDefault())}}),this._bind({focusout:function(a){var b=this;b.closeTimer=setTimeout(function(){b.close(a)},100)},focusin:function(a){clearTimeout(this.closeTimer)}}),this._bind({keyup:function(b){b.keyCode==a.ui.keyCode.ESCAPE&&this.element.is(":visible")&&(this.close(b),this.options.trigger.focus())}}),this._bind(document,{click:function(b){this.isOpen&&!a(b.target).closest(".ui-popup").length&&this.close(b)}})},_destroy:function(){this.element.show().removeClass("ui-popup").removeAttr("aria-hidden").removeAttr("aria-expanded").unbind("keypress.ui-popup"),this.options.trigger.removeAttr("aria-haspopup").removeAttr("aria-owns"),this.generatedId&&this.element.removeAttr("id"),this.generatedRole&&this.element.removeAttr("role")},open:function(b){var c=a.extend({},{of:this.options.trigger},this.options.position);this.element.show().attr("aria-hidden","false").attr("aria-expanded","true").position(c);if(this.element.is(":ui-menu"))this.element.menu("focus",b,this.element.children("li").first()),this.element.focus();else{var d=this.element.find(":tabbable");this.removeTabIndex=!1,d.length||(this.element.is(":tabbable")||(this.element.attr("tabindex","0"),this.removeTabIndex=!0),d=d.add(this.element[0])),d.first().focus(1)}this.options.trigger.attr("tabindex",-1),this.isOpen=!0,this._trigger("open",b)},close:function(a){this.element.hide().attr("aria-hidden","true").attr("aria-expanded","false"),this.options.trigger.attr("tabindex",0),this.removeTabIndex&&this.element.removeAttr("tabindex"),this.isOpen=!1,this._trigger("close",a)}})}),define("vendor/jquery.ui.button-1.9",["jquery","jqueryui/button","vendor/jquery.ui.core-1.9","vendor/jquery.ui.widget-1.9"],function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(d?e=a(d).find("[name='"+c+"']"):e=a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"@VERSION",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),typeof this.options.disabled!="boolean"&&(this.options.disabled=this.element.prop("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i=this.type==="checkbox"||this.type==="radio",l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";h.label===null&&(h.label=this.buttonElement.html()),this.element.is(":disabled")&&(h.disabled=!0),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){if(h.disabled)return;a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(h.disabled)return;a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){if(f)return;b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(h.disabled)return;f=!1,d=a.pageX,e=a.pageY}).bind("mouseup.button",function(a){if(h.disabled)return;if(d!==a.pageX||e!==a.pageY)f=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var a=this.element.parents().last(),b="label[for="+this.element.attr("id")+"]";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super("_setOption",a,b);if(a==="disabled"){b?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var b=this.buttonElement.removeClass(i),c=a("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.ui.button.version="@VERSION",a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){a==="disabled"&&this.buttons.button("option",a,b),this._super("_setOption",a,b)},refresh:function(){var b=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(b?"ui-corner-right":"ui-corner-left").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/jquery.kylemenu",["jquery","jquery.ui.menu.inputmenu","vendor/jquery.ui.popup-1.9","vendor/jquery.ui.button-1.9"],function(b,c,d,e){var f;return f=function(){function c(d,e){this.keepButtonActive=a(this.keepButtonActive,this),this.onClose=a(this.onClose,this),this.close=a(this.close,this),this.onOpen=a(this.onOpen,this);var f,g,h,i=this;this.$trigger=b(d).data("kyleMenu",this),this.opts=b.extend(!0,{},c.defaults,e),this.opts.noButton||(this.$trigger.button(this.opts.buttonOpts),this.$trigger.bind("mouseleave.button",this.keepButtonActive)),this.$menu=this.$trigger.next().menu(this.opts.menuOpts).popup(this.opts.popupOpts).addClass("ui-kyle-menu use-css-transitions-for-show-hide"),this.opts.appendMenuTo&&(f=this.$menu.data("popup"),h=f.open,g=this,f.open=function(){return g.$menu.appendTo(g.opts.appendMenuTo),h.apply(this,arguments)},this.$placeholder=b('<span style="display:none;">').insertAfter(this.$menu),this.$menu.bind("click",function(){var a;return(a=i.$placeholder).trigger.apply(a,arguments)})),this.$menu.bind({menuselect:this.close,popupopen:this.onOpen,popupclose:this.onClose})}return c.name="KyleMenu",c.prototype.onOpen=function(a){return this.adjustCarat(a),this.$menu.addClass("ui-state-open")},c.prototype.open=function(){return this.$menu.popup("open")},c.prototype.close=function(){return this.$menu.popup("close").removeClass("ui-state-open")},c.prototype.onClose=function(){return this.opts.appendMenuTo&&this.$menu.insertBefore(this.$placeholder),this.$trigger.removeClass("ui-state-active"),this.$menu.removeClass("ui-state-open")},c.prototype.keepButtonActive=function(){if(this.$menu.is(".ui-state-open"))return this.$trigger.addClass("ui-state-active")},c.prototype.adjustCarat=function(a){var c,d,e,f,g;return(g=this.$carat)!=null&&g.remove(),this.$trigger.addClass("ui-state-active"),f=this.$trigger.outerWidth(),e=this.$trigger.offset().left-this.$menu.offset().left,c=a.pageX-this.$trigger.offset().left,d=Math.min(Math.max(6,c),f-6)+e,this.$carat=b('<span class="ui-menu-carat"><span /></span>').css("left",d).prependTo(this.$menu),this.$menu.css("-webkit-transform-origin-x",d+"px")},c.defaults={popupOpts:{position:{my:"center top",at:"center bottom",offset:"0 10px",within:"#main",collision:"fit"}},buttonOpts:{icons:{primary:"ui-icon-home",secondary:"ui-icon-droparrow"}}},c}(),b.fn.kyleMenu=function(a){return this.each(function(){if(!b(this).data().kyleMenu)return new f(this,a)})},b(document).delegate(".al-trigger","click",function(a){var c,d,e;c=b(this),d={buttonOpts:{icons:{primary:null,secondary:null}}};if(!c.data("kyleMenu"))return a.preventDefault(),e=b.extend(d,c.data("kyleMenuOptions")),(new f(c,e)).open()}),f})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function e(){this.constructor=b}for(var d in c)a.call(c,d)&&(b[d]=c[d]);return e.prototype=c.prototype,b.prototype=new e,b.__super__=c.prototype,b};define("compiled/gradebook2/SubmissionCell",["compiled/gradebook2/GRADEBOOK_TRANSLATIONS","jquery","jquery.ajaxJSON"],function(a,c){var d;return d=function(){function b(a){this.opts=a,this.init()}return b.name="SubmissionCell",b.prototype.init=function(){var a;return a=this.opts.item[this.opts.column.field],this.$wrapper=c(this.cellWrapper('<input class="grade"/>')).appendTo(this.opts.container),this.$input=this.$wrapper.find("input").focus().select()},b.prototype.destroy=function(){return this.$input.remove()},b.prototype.focus=function(){return this.$input.focus()},b.prototype.loadValue=function(){return this.val=this.opts.item[this.opts.column.field].grade||"",this.$input.val(this.val),this.$input[0].defaultValue=this.val,this.$input.select()},b.prototype.serializeValue=function(){return this.$input.val()},b.prototype.applyValue=function(a,b){var c;return a[this.opts.column.field].grade=b,(c=this.wrapper)!=null&&c.remove(),this.postValue(a,b)},b.prototype.postValue=function(a,b){var d,e,f=this;return d=a[this.opts.column.field],e=this.opts.grid.getOptions().change_grade_url,e=e.replace(":assignment",d.assignment_id).replace(":submission",d.user_id),c.ajaxJSON(e,"PUT",{"submission[posted_grade]":b},function(a){return c.publish("submissions_updated",[[a]])})},b.prototype.isValueChanged=function(){return this.val!==this.$input.val()},b.prototype.validate=function(){return{valid:!0,msg:null}},b.formatter=function(a,b,c,d){return this.prototype.cellWrapper(c.grade,{submission:c,assignment:d,editable:!1})},b.prototype.cellWrapper=function(d,e){var f,g,h,i;return e==null&&(e={}),f=c.extend({},{innerContents:"",classes:"",editable:!0},e),f.submission||(f.submission=this.opts.item[this.opts.column.field]),f.assignment||(f.assignment=this.opts.column.object),g=b.classesBasedOnSubmission(f.submission,f.assignment),h=c.map(g,function(b){return a["submission_tooltip_"+b]}).join(", "),f.submission.grade||(f.classes+=" no_grade_yet "),d==null&&(d=((i=f.submission)!=null?i.submission_type:void 0)?'<span class="submission_type_icon" />':"-"),""+(h?'<div class="gradebook-tooltip">'+h+"</div>":"")+'\n<div class="gradebook-cell '+(f.editable?"gradebook-cell-editable focus":"")+" "+f.classes+" "+g.join(" ")+'">\n  <a href="#" data-user-id='+f.submission.user_id+" data-assignment-id="+f.assignment.id+' class="gradebook-cell-comment"><span class="gradebook-cell-comment-label">submission comments</span></a>\n  '+d+"\n</div>"},b.classesBasedOnSubmission=function(a,b){var c;return a==null&&(a={}),b==null&&(b={}),c=[],a.grade_matches_current_submission===!1&&c.push("resubmitted"),b.due_at&&a.submitted_at&&a.submitted_at.timestamp>b.due_at.timestamp&&c.push("late"),a.drop&&c.push("dropped"),""+b.submission_types=="not_graded"&&c.push("ungraded"),b.muted&&c.push("muted"),a.submission_type&&c.push(a.submission_type),c},b}(),d.out_of=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return b(d,a),d.name="out_of",d.prototype.init=function(){var a;return a=this.opts.item[this.opts.column.field],this.$wrapper=c(this.cellWrapper('<div class="overflow-wrapper">\n  <div class="grade-and-outof-wrapper">\n    <input type="number" class="grade"/><span class="outof"><span class="divider">/</span>'+this.opts.column.object.points_possible+"</span>\n  </div>\n</div>",{classes:"gradebook-cell-out-of-formatter"})).appendTo(this.opts.container),this.$input=this.$wrapper.find("input").focus().select()},d}(d),d.letter_grade=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="letter_grade",c.formatter=function(a,b,c,e){var f;return f=c.score?""+c.grade+"<span class='letter-grade-points'>"+c.score+"</span>":c.grade,d.prototype.cellWrapper(f,{submission:c,assignment:e,editable:!1})},c}(d),d.pass_fail=function(a){function g(){return g.__super__.constructor.apply(this,arguments)}var e,f;return b(g,a),g.name="pass_fail",f=["pass","fail",""],e=function(a){return{pass:"pass",complete:"pass",fail:"fail",incomplete:"fail"}[a.grade]||""},g.prototype.htmlFromSubmission=function(a){var b;return a==null&&(a={}),b=e(a.submission),d.prototype.cellWrapper('<a data-value="'+b+'" class="gradebook-checkbox gradebook-checkbox-'+b+" "+(a.editable?"editable":void 0)+'" href="#">'+b+"</a>",a)},g.formatter=function(a,b,c,e){return c.grade==null?d.formatter.apply(this,arguments):g.prototype.htmlFromSubmission({submission:c,assignment:e,editable:!1})},g.prototype.init=function(){var a=this;return this.$wrapper=c(this.cellWrapper()),this.$wrapper=c(this.htmlFromSubmission({submission:this.opts.item[this.opts.column.field],assignment:this.opts.column.object,editable:!0})).appendTo(this.opts.container),this.$input=this.$wrapper.find(".gradebook-checkbox").bind("click keypress",function(b){var c,d;return b.preventDefault(),c=a.$input.data("value"),c==="pass"?d="fail":c==="fail"?d="":d="pass",a.transitionValue(d)}).focus()},g.prototype.destroy=function(){return this.$wrapper.remove()},g.prototype.transitionValue=function(a){return this.$input.removeClass("gradebook-checkbox-pass gradebook-checkbox-fail").addClass("gradebook-checkbox-"+e({grade:a})).data("value",a)},g.prototype.loadValue=function(){return this.val=this.opts.item[this.opts.column.field].grade||""},g.prototype.serializeValue=function(){return this.$input.data("value")},g.prototype.isValueChanged=function(){return this.val!==this.$input.data("value")},g}(d),d.points=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.name="points",c}(d),d})}.call(this),define("jst/SubmissionDetailsDialog",["compiled/handlebars_helpers","i18n!submission_details_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.SubmissionDetailsDialog=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+='\n          <label for="submission_to_view">',e="Submitted multiple times, choose which to view:",f="this_was_submitted_multiple_times_choose_a_submission_to_view",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='</label>\n          <select id="submission_to_view">\n            ',e=c.submission_history||a.submission_history,f=c.each,k=l.program(2,r,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n          </select>\n        ",d}function r(a,b){var d="",e,f;d+="\n              <option>",e=c.submitted_at||a.submitted_at,f=c.datetimeFormatted||a.datetimeFormatted,typeof f===m?e=f.call(a,e,{hash:{}}):f===o?e=n.call(a,"datetimeFormatted",e,{hash:{}}):e=f,d+=p(e)+" ",e=c.submissionWasLate||a.submissionWasLate,f=c["if"],k=l.program(3,s,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="</option>\n            ",d}function s(a,b){var d="",e,f,g,h;d+=" ",e="LATE",f="late",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+=" ",d}function t(a,b){var d="",e,f;d+="\n          ",e=c.submitted_at||a.submitted_at,f=c["if"],k=l.program(6,u,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n        ",d}function u(a,b){var d="",e,f,g,h;d+="\n            <strong>",e="Submitted:",f="submitted",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+=" ",e=c.submitted_at||a.submitted_at,f=c.datetimeFormatted||a.datetimeFormatted,typeof f===m?e=f.call(a,e,{hash:{}}):f===o?e=n.call(a,"datetimeFormatted",e,{hash:{}}):e=f,d+=p(e)+" ",e=c.submissionWasLate||a.submissionWasLate,f=c["if"],k=l.program(7,v,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="</strong>\n          ",d}function v(a,b){var d="",e,f,g,h;d+=" ",e="LATE",f="late",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+=" ",d}function w(a,b){var e="",f;e+="\n        ",f=a,f=l.invokePartial(d.submission_detail,"submission_detail",f,c,d);if(f||f===0)e+=f;return e+="\n      ",e}function x(a,b){var d="",e,f,g,h;d+='\n        <div class="rubric-link"><a class="rubric" href="',e=c.speedGraderUrl||a.speedGraderUrl,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"speedGraderUrl",{hash:{}})),d+=p(e)+'">',e="View Rubric Assessment in the SpeedGrader",f="view_rubric_assessment_in_the_speedgrader",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</a></div>\n      ",d}function y(a,b){var d="",e,f,g,h;d+="\n      <h1>",e="Loading comments...",f="loading_comments",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</h1>\n    ",d}function z(a,b){var d="",e,f;d+="\n      ",e=c.submission_comments||a.submission_comments,f=c["if"],k=l.program(16,A,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n    ",d}function A(a,b){var d="",e,f,g,h;d+="\n        <h1>",e="Comments",f="comments",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='</h1>\n        <div class="submission_details_comments">\n          ',e=c.submission_comments||a.submission_comments,f=c.each,k=l.program(17,B,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n        </div>\n      ",d}function B(a,b){var d="",e,f,g;d+='\n            <article class="comment clearfix">\n              ',e=c.created_at||a.created_at,f={},g=!0,f.pubdate=g,g=c.friendlyDatetime||a.friendlyDatetime,k={},k.hash=f,typeof g===m?e=g.call(a,e,k):g===o?e=n.call(a,"friendlyDatetime",e,k):e=g,d+=p(e)+'\n              <img class="photo" src="',e=c.image_url||a.image_url,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"image_url",{hash:{}})),d+=p(e)+'" />\n              <div class="middle">\n                <address class="vcard">\n                  <a class="fn url" href="',e=c.url||a.url,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"url",{hash:{}})),d+=p(e)+'">',e=c.author_name||a.author_name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"author_name",{hash:{}})),d+=p(e)+"</a>\n                </address>\n                <div>\n                  ",e=c.comment||a.comment,f=c.newlinesToBreak||a.newlinesToBreak,typeof f===m?e=f.call(a,e,{hash:{}}):f===o?e=n.call(a,"newlinesToBreak",e,{hash:{}}):e=f,d+=p(e)+"\n                </div>\n                ",e=c.media_comment||a.media_comment,f=c["if"],k=l.program(18,C,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;d+='\n                <div class="comment_attachments">\n                  ',e=c.attachments||a.attachments,f=c.each,k=l.program(20,D,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+="\n                </div>\n              </div>\n            </article>\n          ",d}function C(a,b){var d="",e,f,g,h;d+='\n                  <a data-media_comment_id="',e=c.media_comment||a.media_comment,e=e===null||e===undefined||e===!1?e:e.media_id,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"media_comment.media_id",{hash:{}})),d+=p(e)+'" data-media_comment_type="',e=c.media_comment||a.media_comment,e=e===null||e===undefined||e===!1?e:e.media_type,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"media_comment.media_type",{hash:{}})),d+=p(e)+'" href="',e=c.media_comment||a.media_comment,e=e===null||e===undefined||e===!1?e:e.url,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"media_comment.url",{hash:{}})),d+=p(e)+'" class="play_comment_link media-comment instructure_inline_media_comment" >',e="click here to view",f="links.click_to_view",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</a>\n                ",d}function D(a,b){var d="",e,f;return d+='\n                    <div><a href="',e=c.url||a.url,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"url",{hash:{}})),d+=p(e)+'" class="',e=c["content-type"]||a["content-type"],f=c.mimeClass||a.mimeClass,typeof f===m?e=f.call(a,e,{hash:{}}):f===o?e=n.call(a,"mimeClass",e,{hash:{}}):e=f,d+=p(e)+'" title="',e=c.filename||a.filename,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"filename",{hash:{}})),d+=p(e)+'">',e=c.display_name||a.display_name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"display_name",{hash:{}})),d+=p(e)+"</a></div>\n                  ",d}function E(a,b){var d="",e,f,g,h;d+='\n    <span id="group-comment-container">\n      <input type="checkbox" id="group_comment" name="comment[group_comment]" />\n      <label for="group_comment">',e="Send Comment to the Whole Group",f="labels.group_comment",g={},h="SubmissionDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="</label>\n    </span>\n    ",d}c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<div class="submission_details_dialog">\n  <h1 class="assignment-name">',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.name,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignment.name",{hash:{}})),f+=p(g)+'</h1>\n  <section class="submission-details">\n    <a class="more-details-link" target="_blank" href="',g=c.speedGraderUrl||b.speedGraderUrl,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"speedGraderUrl",{hash:{}})),f+=p(g)+'">',g="More details in the SpeedGrader",h="more_details_in_the_speedgrader",i={},j="SubmissionDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</a>\n    <div>\n      <h2>\n        ",g=c.moreThanOneSubmission||b.moreThanOneSubmission,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.program(5,t,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n      </h2>\n      ",g=c.submission_history||b.submission_history,h=c.each,k=l.program(9,w,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n      ",g=c.rubric_assessment||b.rubric_assessment,h=c["if"],k=l.program(11,x,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+="\n    </div>\n  </section>\n  <section>\n    ",g=c.loading||b.loading,h=c["if"],k=l.program(13,y,e),k.hash={},k.fn=k,k.inverse=l.program(15,z,e),g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n  </section>\n  <form class="submission_details_add_comment_form clearfix">\n    <label for="add_a_comment">',g="Add a comment",h="add_a_comment",i={},j="SubmissionDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n    <textarea id="add_a_comment" name="comment[text_comment]"></textarea>\n    ',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.group_category_id,h=c["if"],k=l.program(22,E,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n    <button class="button" type="submit">',g="Post Comment",h="post_comment",i={},j="SubmissionDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n  </form>\n</div>\n",f}),c.SubmissionDetailsDialog}),define("jst/_submission_detail",["compiled/handlebars_helpers","i18n!submission_detail"],function(a){var b=a.template,c=a.templates=a.templates||{};return c._submission_detail=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+="\n    ",e=c.url||a.url,f=c["if"],i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="\n    ",e=c.attachments||a.attachments,f=c["if"],i=j.program(4,q,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+="\n    ",e=c.submission_type_is_online_text_entry||a.submission_type_is_online_text_entry,f=c["if"],i=j.program(9,u,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n  ",d}function p(a,b){var d="",e,f,g,h;d+='\n      Submission URL: <a href="',e=c.url||a.url,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"url",{hash:{}})),d+=n(e)+'" title="',e="Go to submission URL",f="go_to_submission_url",g={},h="submission_detail",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+='" target="_blank">',e=c.url||a.url,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"url",{hash:{}})),d+=n(e)+"</a>\n    ",d}function q(a,b){var d="",e,f,g,h;d+="\n      <label>",e="Submitted files:",f="submitted_files",g={},h="submission_detail",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+="</label>\n      <div>\n        ",e=c.attachments||a.attachments,f=c.each,i=j.program(5,r,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n      </div>\n    ",d}function r(a,b){var d="",e,f;d+='\n          <div class="submisison-attachment">\n            ',e=c.turnitin_data||a.turnitin_data,e=e===null||e===undefined||e===!1?e:e.reportUrl,f=c["if"],i=j.program(6,s,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+='\n            <a href="',e=c.url||a.url,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"url",{hash:{}})),d+=n(e)+'" class="',e=c["content-type"]||a["content-type"],f=c.mimeClass||a.mimeClass,typeof f===k?e=f.call(a,e,{hash:{}}):f===m?e=l.call(a,"mimeClass",e,{hash:{}}):e=f,d+=n(e)+'" title="',e=c.filename||a.filename,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"filename",{hash:{}})),d+=n(e)+'">',e=c.display_name||a.display_name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"display_name",{hash:{}})),d+=n(e)+"</a>\n          </div>\n        ",d}function s(a,b){var d="",e,f;d+="\n              ",e=c.turnitin_data||a.turnitin_data,f=c["with"],i=j.program(7,t,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+="\n            ",d}function t(a,b){var e="",f;e+='\n                <span class="turnitin_score_container">',f=a,f=j.invokePartial(d.turnitinScore,"turnitinScore",f,c,d);if(f||f===0)e+=f;return e+="</span>\n              ",e}function u(a,b){var d="",e,f,g,h;d+="\n      ",e="Online Text Entry, *see details in the SpeedGrader*.",f="online_text_entry_see_details_in_the_speedgrader.",g={},h="submission_detail",g.scope=h,h='<a href="%{speedGraderUrl}">$1</a>',g.w0=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="\n    ",d}function v(a,b){var d="",e,f,g,h;d+="\n    ",e="No submission",f="no_submission",g={},h="submission_detail",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="\n  ",d}c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;f+='<div class="submission_detail">\n  ',g=c.submission_type||b.submission_type,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.program(11,v,e),g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n</div>\n",f}),a.registerPartial("submission_detail",c._submission_detail),c._submission_detail}),define("jst/_turnitinScore",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c._turnitinScore=b(function(a,b,c,d,e){function o(a,b){var d="",e;return d+='\n    <img src="',e=c.icon||a.icon,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"icon",{hash:{}})),d+=n(e)+'"></img>\n  ',d}function p(a,b){var d="",e;return d+="\n    ",e=c.score||a.score,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"score",{hash:{}})),d+=n(e)+"\n  ",d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;f+='<span class="turnitin_score_container_caret ',g=c.state||b.state,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"state",{hash:{}})),f+=n(g)+'"></span>\n<a class="turnitin_similarity_score ',g=c.state||b.state,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"state",{hash:{}})),f+=n(g)+'" href="',g=c.reportUrl||b.reportUrl,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"reportUrl",{hash:{}})),f+=n(g)+'" title="',g=c.tooltip||b.tooltip,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"tooltip",{hash:{}})),f+=n(g)+'" target="_blank">\n  ',g=c.icon||b.icon,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.program(3,p,e),g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n</a>\n",f}),a.registerPartial("turnitinScore",c._turnitinScore),c._turnitinScore}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/SubmissionDetailsDialog",["i18n!submission_details_dialog","jquery","jst/SubmissionDetailsDialog","jst/_submission_detail","jst/_turnitinScore","jquery.ajaxJSON","jquery.disableWhileLoading","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","vendor/jquery.scrollTo"],function(b,c,d){var e;return e=function(){function e(b,e,f){var g,h=this;this.assignment=b,this.student=e,this.options=f,this.update=a(this.update,this),this.scrollCommentsToBottom=a(this.scrollCommentsToBottom,this),this.open=a(this.open,this),this.url=this.options.change_grade_url.replace(":assignment",this.assignment.id).replace(":submission",this.student.id),this.submission=c.extend({},this.student["assignment_"+this.assignment.id],{assignment:this.assignment,speedGraderUrl:""+this.options.context_url+"/gradebook/speed_grader?assignment_id="+this.assignment.id+"#%7B%22student_id%22%3A"+this.student.id+"%7D",loading:!0}),this.dialog=c('<div class="use-css-transitions-for-show-hide" style="padding:0;"/>'),this.dialog.html(d(this.submission)).dialog({title:this.student.name,width:600,resizable:!1,open:this.scrollCommentsToBottom}).delegate("select","change",function(a){return h.dialog.find(".submission_detail").each(function(b){return c(this).showIf(b===a.currentTarget.selectedIndex)})}).delegate(".submission_details_add_comment_form","submit",function(a){return a.preventDefault(),c(a.currentTarget).disableWhileLoading(c.ajaxJSON(h.url,"PUT",c(a.currentTarget).getFormData(),function(a){return h.update(a),setTimeout(function(){return h.dialog.dialog("close")},500)}))}),g=c.ajaxJSON(this.url+"?include[]=submission_history&include[]=submission_comments&include[]=rubric_assessment","GET",{},this.update),this.dialog.find(".submission_details_comments").disableWhileLoading(g)}return e.name="SubmissionDetailsDialog",e.prototype.open=function(){return this.dialog.dialog("open")},e.prototype.scrollCommentsToBottom=function(){return this.dialog.find(".submission_details_comments").scrollTop(999999)},e.prototype.update=function(a){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;c.extend(this.submission,a),this.submission.submission_history[0]=this.submission,this.submission.moreThanOneSubmission=this.submission.submission_history.length>1,this.submission.loading=!1,p=this.submission.submission_history;for(j=0,m=p.length;j<m;j++){g=p[j],g["submission_type_is"+g.submission_type]=!0,g.submissionWasLate=this.assignment.due_at&&new Date(this.assignment.due_at)>new Date(g.submitted_at),q=g.submission_comments||[];for(k=0,n=q.length;k<n;k++)f=q[k],f.url=""+this.options.context_url+"/users/"+f.author_id,i=""+location.protocol+"//"+location.host,f.image_url=""+i+"/images/users/"+f.author_id+"?fallback="+encodeURIComponent(i+"/images/messages/avatar-50.png");r=g.attachments||[];for(l=0,o=r.length;l<o;l++)e=r[l],(h=(s=g.turnitin_data)!=null?s["attachment_"+e.id]:void 0)&&h.similarity_score&&(e.turnitin_data=h,e.turnitin_data.state=""+(h.state||"no")+"_score",e.turnitin_data.score=""+h.similarity_score+"%",e.turnitin_data.reportUrl=""+this.options.context_url+"/assignments/"+this.assignment.id+"/submissions/"+this.student.id+"/turnitin/attachment_"+e.id,e.turnitin_data.tooltip=b.t("turnitin.tooltip.score","Turnitin Similarity Score - See detailed report"))}return this.dialog.html(d(this.submission)),this.dialog.find("select").trigger("change"),this.scrollCommentsToBottom()},e.cachedDialogs={},e.open=function(a,b,c){var d,f;return((d=e.cachedDialogs)[f=""+a.id+"-"+b.id]||(d[f]=new e(a,b,c))).open()},e}()})}.call(this),define("jst/AssignmentGroupWeightsDialog",["compiled/handlebars_helpers","i18n!assignment_group_weights_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.AssignmentGroupWeightsDialog=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<div title="',g="Manage assignment group weighting",h="titles.assignment_group_weights",i={},j="AssignmentGroupWeightsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='" style="display:none;" id="assignment_group_weights_dialog">\n  <p style="margin-top: 8px;">\n    <input type="checkbox" id="group_weighting_scheme" name="group_weighting_scheme"/>\n    <label for="group_weighting_scheme">',g="Weight final grade based on groups",h="weight_final",i={},j="AssignmentGroupWeightsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n  </p>\n  <table>\n    <tbody class="groups_holder">\n      <tr style="display:none;" class="assignment_group_row blank">\n        <th scope="row"><label></label></th>\n        <td><input type="number" min="0" max="100" class="group_weight"/>%</td>\n      </tr>\n    </tbody>\n    <tfoot>\n      <tr>\n        <th>',g="Total",h="titles.total",i={},j="AssignmentGroupWeightsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</th>\n        <td>&nbsp;<span class="total_weight"></span>%</td>\n      </tr>\n    </tfoot>\n  </table>\n  <button class="button" type="submit">',g="Save",h="buttons.save",i={},j="AssignmentGroupWeightsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n</div>\n",f}),c.AssignmentGroupWeightsDialog}),define("jst/AssignmentDetailsDialog",["compiled/handlebars_helpers","i18n!assignment_details_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.AssignmentDetailsDialog=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+='\n    <div class="distribution" style="display: block; ">\n      <div class="bar-left"></div>\n      <div class="none-left" title="',e="No one scored lower than %{min}",f="no_one_scored_lower",g={},h="AssignmentDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='" style="width: ',e=c.noneLeftWidth||a.noneLeftWidth,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"noneLeftWidth",{hash:{}})),d+=p(e)+"%; left: ",e=c.noneLeftLeft||a.noneLeftLeft,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"noneLeftLeft",{hash:{}})),d+=p(e)+'%; "></div>\n      <div class="some-left" title="',e="Scores lower than the average of %{average}",f="scores_lower_than_the_average",g={},h="AssignmentDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='" style="width: ',e=c.someLeftWidth||a.someLeftWidth,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"someLeftWidth",{hash:{}})),d+=p(e)+"%; left: ",e=c.someLeftLeft||a.someLeftLeft,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"someLeftLeft",{hash:{}})),d+=p(e)+'%; "></div>\n      <div class="some-right" title="',e="Scores higher than the average of %{average}",f="scores_higher_than_the_average",g={},h="AssignmentDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;d+='" style="width: ',e=c.someRightWidth||a.someRightWidth,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"someRightWidth",{hash:{}})),d+=p(e)+"%; left: ",e=c.someRightLeft||a.someRightLeft,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"someRightLeft",{hash:{}})),d+=p(e)+'%; "></div>\n      <div class="none-right" title="',e="No one scored higher than %{max}",f="no_one_scored_higher",g={},h="AssignmentDetailsDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+='" style="width: ',e=c.noneRightWidth||a.noneRightWidth,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"noneRightWidth",{hash:{}})),d+=p(e)+"%; left: ",e=c.noneRightLeft||a.noneRightLeft,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"noneRightLeft",{hash:{}})),d+=p(e)+'%; "></div>\n      <div class="bar-right"></div>\n    </div>\n  ',d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<div id="assignment-details-dialog" title="',g="Grade statistics for: %{assignment.name}",h="grading_statistics_for_assignment",i={},j="AssignmentDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">\n  ',g=c.showDistribution||b.showDistribution,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n  <table id="assignment-details-dialog-stats-table">\n    <tr>\n      <th scope="row">',g="Average Score:",h="average_score",i={},j="AssignmentDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</th>\n      <td>",g=c.average||b.average,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"average",{hash:{}})),f+=p(g)+'</td>\n    </tr>\n    <tr>\n      <th scope="row">',g="High Score:",h="high_score",i={},j="AssignmentDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</th>\n      <td>",g=c.max||b.max,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"max",{hash:{}})),f+=p(g)+'</td>\n    </tr>\n    <tr>\n      <th scope="row">',g="Low Score:",h="low_score",i={},j="AssignmentDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</th>\n      <td>",g=c.min||b.min,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"min",{hash:{}})),f+=p(g)+'</td>\n    </tr>\n    <tr>\n      <th scope="row">',g="Total Submitted:",h="total_submitted",i={},j="AssignmentDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</th>\n      <td>",g="%{cnt} submissions",h="count_of_submissions",i={},j="AssignmentDetailsDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</td>\n    </tr>\n  </table>\n</div>",f}),c.AssignmentDetailsDialog}),function(){var a={}.hasOwnProperty;define("compiled/AssignmentDetailsDialog",["jquery","jst/AssignmentDetailsDialog","jqueryui/dialog"],function(b,c){var d;return d=function(){function d(d,e){var f,g,h,i,j,k,l;this.assignment=d,this.gradebook=e,h=function(){var b,c,d;b=this.gradebook.students,d=[];for(f in b){if(!a.call(b,f))continue;i=b[f],((c=i["assignment_"+this.assignment.id])!=null?c.score:void 0)!=null&&d.push(i["assignment_"+this.assignment.id].score)}return d}.call(this),g={assignment:this.assignment,cnt:h.length,max:Math.max.apply(Math,h),min:Math.min.apply(Math,h),average:function(a){var b,c,d,e;c=0;for(d=0,e=a.length;d<e;d++)b=a[d],c+=b;return Math.round(c/a.length)}(h)},j=0,l=0,k=100,b.extend(g,{showDistribution:g.average&&this.assignment.points_possible,noneLeftWidth:l=k*(g.min/this.assignment.points_possible),noneLeftLeft:(j+=l)-l,someLeftWidth:l=k*((g.average-g.min)/this.assignment.points_possible),someLeftLeft:(j+=l)-l,someRightWidth:l=k*((g.max-g.average)/this.assignment.points_possible),someRightLeft:(j+=l)-l,noneRightWidth:l=k*((this.assignment.points_possible-g.max)/this.assignment.points_possible),noneRightLeft:(j+=l)-l}),b(c(g)).dialog({width:375,close:function(){return b(this).remove()}})}return d.name="AssignmentDetailsDialog",d}()})}.call(this),define("jst/mute_dialog",["compiled/handlebars_helpers","i18n!mute_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.mute_dialog=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<div title="',g="Mute Assignment",h="mute_assignment",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">\n  <p>\n    ',g="Are you sure you want to mute this assignment? While this assignment is muted, students will not receive new notifications about or be able to see:",h="sure_you_want_to_mute",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n  </p>\n  <ul>\n    <li>",g="Their grade for the assignment",h="see_grade",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</li>\n    <li>",g="Grade change notifications",h="grade_change_notifications",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</li>\n    <li>",g="Submission comments",h="submission_comments",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</li>\n    <li>",g="Curving assignments",h="curving_assignments",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</li>\n    <li>",g="Score change notifications",h="score_change_notifications",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</li>\n  </ul>\n  <p>\n    ",g="Students will be able to see that this assignment is muted.",h="students_will_see",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n  </p>\n  <p>\n    ",g='Once you have muted this assignment, you can begin sending notifications again by clicking the "Unmute Assignment" link.',h="how_to_unmute",i={},j="mute_dialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="\n  </p>\n</div>\n",f}),c.mute_dialog}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/AssignmentMuter",["i18n!assignment_muter","jquery","jst/mute_dialog","jquery.ajaxJSON","jquery.disableWhileLoading","jqueryui/dialog","vendor/jquery.ba-tinypubsub"],function(b,c,d){var e;return e=function(){function e(b,d,e){var f=this;this.$link=b,this.assignment=d,this.url=e,this.confirmUnmute=a(this.confirmUnmute,this),this.afterUpdate=a(this.afterUpdate,this),this.showDialog=a(this.showDialog,this),this.updateLink=a(this.updateLink,this),this.$link=c(this.$link),this.updateLink(),this.$link.click(function(a){return a.preventDefault(),f.assignment.muted?f.confirmUnmute():f.showDialog()})}return e.name="AssignmentMuter",e.prototype.updateLink=function(){return this.$link.text(this.assignment.muted?b.t("unmute_assignment","Unmute Assignment"):b.t("mute_assignment","Mute Assignment"))},e.prototype.showDialog=function(){var a=this;return this.$dialog=c(d()).dialog({buttons:[{text:b.t("mute_assignment","Mute Assignment"),"data-text-while-loading":b.t("muting_assignment","Muting Assignment..."),click:function(){return a.$dialog.disableWhileLoading(c.ajaxJSON(a.url,"put",{status:!0},a.afterUpdate))}}],close:function(){return a.$dialog.remove()},resizable:!1,width:400})},e.prototype.afterUpdate=function(a){return this.assignment.muted=a.assignment.muted,this.updateLink(),this.$dialog.dialog("close"),c.publish("assignment_muting_toggled",[this.assignment])},e.prototype.confirmUnmute=function(){var a=this;return this.$dialog=c("<div />").text(b.t("unmute_dialog","This assignment is currently muted. That means students can't see their grades and feedback. Would you like to unmute now?")).dialog({buttons:[{text:b.t("unmute_button","Unmute Assignment"),"data-text-while-loading":b.t("unmuting_assignment","Unmuting Assignment..."),click:function(){return a.$dialog.disableWhileLoading(c.ajaxJSON(a.url,"put",{status:!1},a.afterUpdate))}}],close:function(){return a.$dialog.remove()},resizable:!1,title:b.t("unmute_assignment","Unmute Assignment"),width:400})},e}()})}.call(this),define("jst/SetDefaultGradeDialog",["compiled/handlebars_helpers","i18n!set_default_grade_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.SetDefaultGradeDialog=b(function(a,b,c,d,e){c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<form action="',g=c.url||b.url,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"url",{hash:{}})),f+=p(g)+'" method="POST" title="',g="Default grade for %{assignment.name}",h="dialog_title",i={},j="SetDefaultGradeDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">\n  <input type="hidden" name="assignment_id" class="assignment_id" value="',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.id,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignment.id",{hash:{}})),f+=p(g)+'"/> \n  <div>\n    ',g="Give all students the same grade for *%{assignment.name}* by entering and submitting a grade value below:",h="default_grades",i={},j="SetDefaultGradeDialog",i.scope=j,j="<b>$1</b>",i.w0=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='\n  </div> \n  <p style="text-align: center;" class="grading_box_holder">\n    ',g=b,g=l.invokePartial(d.grading_box,"grading_box",g,c,d);if(g||g===0)f+=g;f+='\n  </p>\n  <div>\n    <input type="checkbox" name="overwrite_existing_grades" id="overwrite_existing_grades_for_',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.id,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignment.id",{hash:{}})),f+=p(g)+'"/>\n    <label for="overwrite_existing_grades_for_',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.id,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignment.id",{hash:{}})),f+=p(g)+'">',g="Overwrite already-entered grades",h="overwrite",i={},j="SetDefaultGradeDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n  </div>\n  <button type="submit" class="button" data-text-while-loading="',g="Setting Grades...",h="set_grades_button_loading",i={},j="SetDefaultGradeDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">',g="Set Default Grade",h="set_grades_button",i={},j="SetDefaultGradeDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n</form>\n",f}),c.SetDefaultGradeDialog}),define("jst/_grading_box",["compiled/handlebars_helpers","i18n!grading_box"],function(a){var b=a.template,c=a.templates=a.templates||{};return c._grading_box=b(function(a,b,c,d,e){function o(a,b){var d="",e;return d+='\n  <input name="default_grade" type="number" value="',e=c.submission||a.submission,e=e===null||e===undefined||e===!1?e:e.grade,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"submission.grade",{hash:{}})),d+=n(e)+'" class="grading_value grading_box" id="student_grading_',e=c.assignment||a.assignment,e=e===null||e===undefined||e===!1?e:e.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"assignment.id",{hash:{}})),d+=n(e)+' %>" style="text-align: center; width: 50px;"/>\n',d}function p(a,b){var d="",e;return d+='\n  <span name="default_grade" class="grading_box" id="student_grading_',e=c.assignment||a.assignment,e=e===null||e===undefined||e===!1?e:e.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"assignment.id",{hash:{}})),d+=n(e)+'">\n    <input type="number" value="',e=c.submission||a.submission,e=e===null||e===undefined||e===!1?e:e.grade,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"submission.grade",{hash:{}})),d+=n(e)+'" class="grading_value" style="text-align: center; width: 50px;"/>\n    <span style="display: none;">%</span>\n  </span>\n',d}function q(a,b){var d="",e;return d+='\n  <input name="default_grade" type="text" value="',e=c.submission||a.submission,e=e===null||e===undefined||e===!1?e:e.score,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"submission.score",{hash:{}})),d+=n(e)+'" class="grading_value grading_box score_value" id="student_grading_',e=c.assignment||a.assignment,e=e===null||e===undefined||e===!1?e:e.id,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"assignment.id",{hash:{}})),d+=n(e)+'" style="text-align: center; width: 50px;"/>\n',d}function r(a,b){var d="",e,f,g,h;d+='\n  <select name="default_grade" class="grading_value grading_box pass_fail" id="student_grading_<%= assignment.id %>">\n    <option value="">---</option>\n    <option value="complete">',e="Complete",f="gradebooks.grades.complete",g={},h="grading_box",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;d+='</option>\n    <option value="incomplete">',e="Incomplete",f="gradebooks.grades.incomplete",g={},h="grading_box",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="</option>\n  </select>\n",d}function s(a,b){var d="",e,f,g,h;d+='\n  <span style="font-size: 0.9em;" >\n    ',e="out of %{assignment.points_possible}",f="out_of_points_possible",g={},h="grading_box",g.scope=h,h=c.t||a.t,i={},i.hash=g,typeof h===k?e=h.call(a,f,e,i):h===m?e=l.call(a,"t",f,e,i):e=h;if(e||e===0)d+=e;return d+="\n  </span>\n",d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;g=c.assignment_grading_type_is_points||b.assignment_grading_type_is_points,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;f+="\n",g=c.assignment_grading_type_is_percent||b.assignment_grading_type_is_percent,h=c["if"],i=j.program(3,p,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;f+="\n",g=c.assignment_grading_type_is_letter_grade||b.assignment_grading_type_is_letter_grade,h=c["if"],i=j.program(5,q,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;f+="\n",g=c.assignment_grading_type_is_pass_fail||b.assignment_grading_type_is_pass_fail,h=c["if"],i=j.program(7,r,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;f+="\n",g=c.showPointsPossible||b.showPointsPossible,h=c["if"],i=j.program(9,s,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n",f}),a.registerPartial("grading_box",c._grading_box),c._grading_box}),define("jst/CurveGradesDialog",["compiled/handlebars_helpers","i18n!curve_grades_dialog"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.CurveGradesDialog=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+="\n      ",e="out of %{assignment.points_possible}",f="out_of_points_possible",g={},h="CurveGradesDialog",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<form action="',g=c.action||b.action,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"action",{hash:{}})),f+=p(g)+'" id="curve_grade_dialog" style="display: none;" title="',g="Curve Grade for %{assignment.name}",h="curve_grade_for_assignment",i={},j="CurveGradesDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">\n  <input type="hidden" name="_method" value="POST"/>\n  <input type="hidden" name="assignment_id" class="assignment_id" value="',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.id,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignment.id",{hash:{}})),f+=p(g)+'" />\n  <p>\n    ',g="Enter an average grade for the curve for *%{assignment.name}*. The chart shows a best attempt at curving the grades based on current student scores.",h="curve_average",i={},j="CurveGradesDialog",i.scope=j,j="<b>$1</b>",i.w0=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='\n  </p>\n  <div style="min-height: 100px;">\n    <table cellpadding="0" cellspacing="0">\n      <tr id="results_list"></tr>\n      <tr id="results_values"></tr>\n    </table>\n  </div>\n  <p style="text-align: center;">\n    ',g="Average Score",h="average_score",i={},j="CurveGradesDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='\n    <input type="number" min="0" name="middle_score" id="middle_score" style="width: 45px;" value="',g=c.middleScore||b.middleScore,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"middleScore",{hash:{}})),f+=p(g)+'"/>\n    ',g=c.showOutOf||b.showOutOf,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='\n  </p>\n  <p>\n    <input type="checkbox" name="assign_blanks" id="assign_blanks"/>\n    <label for="assign_blanks">',g="Assign zeroes to unsubmitted students",h="labels.assign_blanks",i={},j="CurveGradesDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n  </p>\n  <button data-text-while-loading="',g="Curving Grades...",h="buttons.curving_grades",i={},j="CurveGradesDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='" type="submit" class="button">\n    ',g="Curve Grades",h="buttons.curve_grades",i={},j="CurveGradesDialog",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="\n  </button>\n</form>\n",f}),c.CurveGradesDialog}),define("jst/gradebook2/GradebookHeaderMenu",["compiled/handlebars_helpers","i18n!gradebook2.gradebook_header_menu"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["gradebook2/GradebookHeaderMenu"]=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<ul class="gradebook-header-menu">\n  <li><a data-action="showAssignmentDetails" href="',g=c.assignmentUrl||b.assignmentUrl,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignmentUrl",{hash:{}})),f+=p(g)+'">',g="Assignment Details",h="assignment_details",i={},j="gradebook2.GradebookHeaderMenu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></li>\n  <li><a href="',g=c.speedGraderUrl||b.speedGraderUrl,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"speedGraderUrl",{hash:{}})),f+=p(g)+'">',g="SpeedGrader",h="speedgrader",i={},j="gradebook2.GradebookHeaderMenu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></li>\n  <li><a data-action="messageStudentsWho" href="#">',g="Message Students Who...",h="message_students_who",i={},j="gradebook2.GradebookHeaderMenu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></li>\n  <li><a data-action="setDefaultGrade" href="#">',g="Set Default Grade",h="set_default_grade",i={},j="gradebook2.GradebookHeaderMenu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></li>\n  <li><a data-action="curveGrades" href="#">',g="Curve Grades",h="curve_grades",i={},j="gradebook2.GradebookHeaderMenu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></li>\n  <li><a data-action="downloadSubmissions" href="#">',g="Download Submissions",h="download_submissions",i={},j="gradebook2.GradebookHeaderMenu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></li>\n  <li><a data-action="reuploadSubmissions" href="#">',g="Re-Upload Submissions",h="re_upload_submissions",i={},j="gradebook2.GradebookHeaderMenu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+='</a></li>\n  <li><a data-action="toggleMuting" href="#"></a></li>\n</ul>\n',f}),c["gradebook2/GradebookHeaderMenu"]}),define("jst/re_upload_submissions_form",["compiled/handlebars_helpers","i18n!re_upload_submissions_form"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.re_upload_submissions_form=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0;f+='<form action="." enctype="multipart/form-data" id="re_upload_submissions_form" method="post" style="display: none;" title="',g="Re-Upload Submission Files",h="reupload_submission_files",i={},j="re_upload_submissions_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">\n  <p>\n    ',g="If you made changes to the student submission files you downloaded before, just zip them back up and upload the zip with the form below. Students will see the modified files in their comments for the submission.",h="upload_info",i={},j="re_upload_submissions_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n  </p>\n  <p>\n    <i>",g="Make sure you don't change the names of the submission files so we can recognize them.",h="upload_warning",i={},j="re_upload_submissions_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</i>\n  </p>\n  <input type="file" name="submissions_zip"/>\n  <button type="submit" class="button">',g="Upload Files",h="buttons.upload",i={},j="re_upload_submissions_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n</form>\n",f}),c.re_upload_submissions_form}),define("jst/gradebook_uploads_form",["compiled/handlebars_helpers","i18n!gradebook_uploads_form"],function(a){var b=a.template,c=a.templates=a.templates||{};return c.gradebook_uploads_form=b(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<form action="',g=c.action||b.action,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"action",{hash:{}})),f+=p(g)+'" enctype="multipart/form-data" id="upload_modal" method="post" title="',g="Choose a CSV file to upload",h="titles.upload_form",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='">\n  <input type="hidden" name=\'authenticity_token\' value="',g=c.authenticityToken||b.authenticityToken,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"authenticityToken",{hash:{}})),f+=p(g)+'">\n  <style>\n    #gradebook-upload-help {\n      display: none;\n      border: 1px solid #ccc;\n      border-radius: 10px;\n      padding: 10px;\n      margin-bottom: 1.4em;\n      background-color: rgba(0,0,0,0.02);\n    }\n    tr.table-callout-notes td div {\n      padding: 6px;\n      border-radius: 10px;\n      font-weight: bold;\n    }\n    tr.table-callout-notes-spacer td, tr.table-callout-notes td{\n      padding: 0 10px;\n      border: none;\n      background-color: transparent !important;\n      text-align: center;\n      vertical-align: bottom;\n    }\n    .table-callout-notes-spacer span {\n      width: 0;\n      border-style: solid;\n      border-color: #FBD850 transparent;\n      border-width: 15px 15px 0px ;\n      margin: 0 auto;\n      display: block;\n    }\n  </style>\n  <p><a class="help" id="gradebook-upload-help-trigger" href="#">',g="What should the CSV file look like?",h="what_should_csv_look_like",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</a></p>\n  <div id="gradebook-upload-help">\n    <h3 style="margin:0">',g="Example CSV file",h="example_csv_file",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</h3>\n    <table class="stylized striped bordered">\n      <thead>\n        <tr class="table-callout-notes">\n          <td colspan="4"><div class="ui-state-active">',g="You Must have *all* of these columns, you only *need* one per row.",h="explanation_of_required_columns",i={},j="gradebook_uploads_form",i.scope=j,j="<em>$1</em>",i.w0=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</div></td>\n          <td><div class="ui-state-active">',g="Optional, ignored.",h="optional_ignored",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</div></td>\n          <td colspan="2"><div class="ui-state-active">',g='Leaving the ID intact (the "(581)" part in this case) will help match better. You can also add new assignments that will be created on the fly.',h="leaving_id_will_match_better_can_add_new_assignment",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</div></td>\n          <td colspan="2"><div class="ui-state-active">',g="Optional, ignored.",h="optional_ignored",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</div></td>\n        </tr>\n        <tr class="table-callout-notes-spacer">\n          <td colspan="4"><span /></td>\n          <td><span /></td>\n          <td colspan="2"><span /></td>\n          <td colspan="2"><span /></td>\n        </tr>\n        <tr>\n          <th>Student</th>\n          <th>ID</th>\n          <th>SIS User ID</th>\n          <th>SIS Login ID</th>\n          <th>Section</th>\n          <th>',g="Existing Assignment (581)",h="existing_assignment_example",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</th>\n          <th>",g="A New Assignment",h="new_assignment_example",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</th>\n          <th>Current Score</th>\n          <th>Final Score</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td colspan="2">Points Possible</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>50</td>\n          <td>10</td>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td>Smith, John</td>\n          <td>12345</td>\n          <td>2122</td>\n          <td>12321</td>\n          <td>night</td>\n          <td>46</td>\n          <td>8</td>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td>King, Ben</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>34</td>\n          <td>60</td>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td></td>\n          <td>12347</td>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>38</td>\n          <td>3</td>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td></td>\n          <td></td>\n          <td>123</td>\n          <td></td>\n          <td></td>\n          <td>40</td>\n          <td></td>\n          <td></td>\n          <td></td>\n        </tr>\n        <tr>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td>3232</td>\n          <td></td>\n          <td>44</td>\n          <td>7</td>\n          <td></td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>',g="If in doubt, you can always *download a CSV*, change the grades you want and re-upload the same file.",h="instructions.csv_download_and_upload",i={},j="gradebook_uploads_form",i.scope=j,j='<a href="%{download_gradebook_csv_url}">$1</a>',i.w0=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</p>\n  </div>\n\n  <p style="font-size: 1.2em;">\n    <label for="gradebook_upload_uploaded_data">',g="Choose a CSV file to upload:",h="labels.upload",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+='</label>\n    <input id="gradebook_upload_uploaded_data" name="gradebook_upload[uploaded_data]" type="file" />\n  </p>\n  \n  <button class="button" type="submit">',g="Upload Data",h="buttons.upload_data",i={},j="gradebook_uploads_form",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;return f+="</button>\n</form>\n",f}),c.gradebook_uploads_form}),define("jst/gradebook2/section_to_show_menu",["compiled/handlebars_helpers","i18n!gradebook2.section_to_show_menu"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["gradebook2/section_to_show_menu"]=b(function(a,b,c,d,e){function q(a,b){return' class="scrolling" '}function r(a,b){var d="",e,f;d+='\n    <li>\n      <a href="#">\n        <label for="section_option_',e=c.id||a.id,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"id",{hash:{}})),d+=p(e)+'">',e=c.name||a.name,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"name",{hash:{}}));if(e||e===0)d+=e;d+='</label>\n        <input id="section_option_',e=c.id||a.id,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"id",{hash:{}})),d+=p(e)+'" type="radio" value="',e=c.id||a.id,typeof e===m?e=e.call(a,{hash:{}}):e===o&&(e=n.call(a,"id",{hash:{}})),d+=p(e)+'" name="section_to_show_radio" ',e=c.checked||a.checked,f=c["if"],k=l.program(4,s,b),k.hash={},k.fn=k,k.inverse=l.noop,e=f.call(a,e,k);if(e||e===0)d+=e;return d+=" />\n      </a>\n    </li>\n  ",d}function s(a,b){return" checked "}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+='<ul id="section-to-show-menu" ',g=c.scrolling||b.scrolling,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=" >\n  <li>",g="Choose a section to show",h="choose_a_section_to_show",i={},j="gradebook2.section_to_show_menu",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="</li>\n  ",g=c.sections||b.sections,h=c.each,k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n</ul>\n",f}),c["gradebook2/section_to_show_menu"]}),define("jst/gradebook2/column_header",["compiled/handlebars_helpers","i18n!gradebook2.column_header"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["gradebook2/column_header"]=b(function(a,b,c,d,e){function q(a,b){var d="",e,f,g,h;d+=' title="',e="This assignment is muted",f="this_assignment_is_muted",g={},h="gradebook2.column_header",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+='" ',d}function r(a,b){return"muted"}function s(a,b){var d="",e,f,g,h;d+="\n  <div class='assignment-points-possible'>\n    ",e="Out of %{assignment.points_possible}",f="points_out_of",g={},h="gradebook2.column_header",g.scope=h,h=c.t||a.t,k={},k.hash=g,typeof h===m?e=h.call(a,f,e,k):h===o?e=n.call(a,"t",f,e,k):e=h;if(e||e===0)d+=e;return d+="\n  </div>\n",d}c=c||a.helpers;var f="",g,h,i,j,k,l=this,m="function",n=c.helperMissing,o=void 0,p=this.escapeExpression;f+="<a ",g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.muted,h=c["if"],k=l.program(1,q,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+=' class="assignment-name ',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.muted,h=c["if"],k=l.program(3,r,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;f+='" href="',g=c.href||b.href,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"href",{hash:{}})),f+=p(g)+'">\n  ',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.name,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignment.name",{hash:{}}));if(g||g===0)f+=g;f+='\n</a>\n<a class="gradebook-header-drop" data-assignment-id="',g=c.assignment||b.assignment,g=g===null||g===undefined||g===!1?g:g.id,typeof g===m?g=g.call(b,{hash:{}}):g===o&&(g=n.call(b,"assignment.id",{hash:{}})),f+=p(g)+'" href="#" role="button">\n  ',g="Assignment Options",h="assignment_options",i={},j="gradebook2.column_header",i.scope=j,j=c.t||b.t,k={},k.hash=i,typeof j===m?g=j.call(b,h,g,k):j===o?g=n.call(b,"t",h,g,k):g=j;if(g||g===0)f+=g;f+="\n</a>\n",g=c.showPointsPossible||b.showPointsPossible,h=c["if"],k=l.program(5,s,e),k.hash={},k.fn=k,k.inverse=l.noop,g=h.call(b,g,k);if(g||g===0)f+=g;return f+="\n",f}),c["gradebook2/column_header"]}),define("jst/gradebook2/group_total_cell",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["gradebook2/group_total_cell"]=b(function(a,b,c,d,e){function o(a,b){var d="",e;return d+="\n      ",e=c.percentage||a.percentage,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"percentage",{hash:{}})),d+=n(e)+"%\n    ",d}function p(a,b){return"\n      -\n    "}function q(a,b){var d="",e;return d+="\n    <span class='letter-grade-points'>",e=c.letterGrade||a.letterGrade,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"letterGrade",{hash:{}})),d+=n(e)+"</span>\n  ",d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;f+='<div class="gradebook-cell">\n  <div class="gradebook-tooltip">',g=c.score||b.score,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"score",{hash:{}})),f+=n(g)+" / ",g=c.possible||b.possible,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"possible",{hash:{}})),f+=n(g)+'</div>\n  <span class="percentage">\n    ',g=c.possible||b.possible,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.program(3,p,e),g=h.call(b,g,i);if(g||g===0)f+=g;f+="\n  </span>\n   ",g=c.letterGrade||b.letterGrade,h=c["if"],i=j.program(5,q,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n</div>",f}),c["gradebook2/group_total_cell"]}),define("jst/gradebook2/row_student_name",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c["gradebook2/row_student_name"]=b(function(a,b,c,d,e){function o(a,b){var d="",e;d+="\n  <div class='student-section'>",e=c.sectionNames||a.sectionNames,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"sectionNames",{hash:{}}));if(e||e===0)d+=e;return d+="</div>\n",d}c=c||a.helpers,d=d||a.partials;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;g=b,g=j.invokePartial(d.avatar,"avatar",g,c,d);if(g||g===0)f+=g;f+="\n<div class='student-name'><a class='student-grades-link' href=\"",g=c.url||b.url,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"url",{hash:{}})),f+=n(g)+'">',g=c.display_name||b.display_name,typeof g===k?g=g.call(b,{hash:{}}):g===m&&(g=l.call(b,"display_name",{hash:{}}));if(g||g===0)f+=g;f+="</a></div>\n",g=c.sectionNames||b.sectionNames,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n",f}),c["gradebook2/row_student_name"]}),define("jst/_avatar",["compiled/handlebars_helpers"],function(a){var b=a.template,c=a.templates=a.templates||{};return c._avatar=b(function(a,b,c,d,e){function o(a,b){var d="",e,f;d+="\n  <a ",e=c.url||a.url,f=c["if"],i=j.program(2,p,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;d+=' class="avatar" ',e=c.display_name||a.display_name,f=c["if"],i=j.program(4,q,b),i.hash={},i.fn=i,i.inverse=j.noop,e=f.call(a,e,i);if(e||e===0)d+=e;return d+='><img src="',e=c.avatar_image_url||a.avatar_image_url,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"avatar_image_url",{hash:{}})),d+=n(e)+'" alt="',e=c.display_name||a.display_name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"display_name",{hash:{}})),d+=n(e)+'"></a>\n',d}function p(a,b){var d="",e;return d+=' href="',e=c.url||a.url,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"url",{hash:{}})),d+=n(e)+'" ',d}function q(a,b){var d="",e;return d+=' title="',e=c.display_name||a.display_name,typeof e===k?e=e.call(a,{hash:{}}):e===m&&(e=l.call(a,"display_name",{hash:{}})),d+=n(e)+'" ',d}c=c||a.helpers;var f="",g,h,i,j=this,k="function",l=c.helperMissing,m=void 0,n=this.escapeExpression;g=c.avatar_image_url||b.avatar_image_url,h=c["if"],i=j.program(1,o,e),i.hash={},i.fn=i,i.inverse=j.noop,g=h.call(b,g,i);if(g||g===0)f+=g;return f+="\n",f}),a.registerPartial("avatar",c._avatar),c._avatar}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/gradebook2/AssignmentGroupWeightsDialog",["jquery","jst/AssignmentGroupWeightsDialog","jquery.ajaxJSON","jquery.disableWhileLoading","jqueryui/dialog","jquery.instructure_misc_helpers","vendor/jquery.ba-tinypubsub"],function(b,c){var d;return d=function(){function d(d){this.afterSave=a(this.afterSave,this),this.save=a(this.save,this),this.calcTotal=a(this.calcTotal,this),this.update=a(this.update,this),this.render=a(this.render,this);var e=this;this.$dialog=b(c()),this.$dialog.dialog({autoOpen:!1,resizable:!1,width:350,buttons:[{text:this.$dialog.find("button[type=submit]").hide().text(),click:this.save}]}),this.$dialog.delegate("input","change keyup keydown input",this.calcTotal),this.$dialog.find("#group_weighting_scheme").change(function(a){var b;return b=!a.currentTarget.checked,e.$dialog.find("table").css("opacity",b?.5:1),e.$dialog.find(".assignment_group_row input").attr("disabled",b)}),this.$group_template=this.$dialog.find(".assignment_group_row.blank").removeClass("blank").detach().show(),this.$groups_holder=this.$dialog.find(".groups_holder"),this.update(d)}return d.name="AssignmentGroupWeightsDialog",d.prototype.render=function(){var a,b,c,d,e;this.$groups_holder.empty(),e=this.options.assignmentGroups;for(c=0,d=e.length;c<d;c++)a=e[c],b="assignment_group_"+a.id+"_weight",this.$group_template.clone().data("assignment_group",a).find("label").attr("for",b).text(a.name).end().find("input").attr("id",b).val(a.group_weight).end().appendTo(this.$groups_holder);return this.$dialog.find("#group_weighting_scheme").prop("checked",this.options.context.group_weighting_scheme==="percent").change(),this.calcTotal()},d.prototype.update=function(a){return this.options=a,this.render()},d.prototype.calcTotal=function(){var a;return a=0,this.$dialog.find(".assignment_group_row input").each(function(){return a+=Number(b(this).val())}),this.$dialog.find(".total_weight").text(a)},d.prototype.save=function(){var a,c,d,e,f=this;return a="/courses/"+this.options.context.context_id,e=[],c=this.$dialog.find("#group_weighting_scheme").is(":checked")?"percent":"equal",c!==this.options.context.group_weighting_scheme&&e.push(b.ajaxJSON(a,"PUT",{"course[group_weighting_scheme]":c},function(a){return f.options.context.group_weighting_scheme=a.course.group_weighting_scheme})),this.$dialog.find(".assignment_group_row").each(function(c,d){var f,g;f=b(d).data("assignment_group"),g=Number(b(d).find("input").val());if(g!==f.group_weight)return e.push(b.ajaxJSON(""+a+"/assignment_groups/"+f.id,"PUT",{"assignment_group[group_weight]":g},function(a){return b.extend(f,a.assignment_group)}))}),d=b.when.apply(b,e).done(this.afterSave),this.$dialog.disableWhileLoading(d,{buttons:[".ui-button-text"]})},d.prototype.afterSave=function(){return this.$dialog.dialog("close"),this.render(),b.publish("assignment_group_weights_changed",this.options)},d}()})}.call(this),define("message_students",["i18n!message_students","jquery","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins"],function(a,b){var c=b("#message_students_dialog"),d={};return window.messageStudents=function(e){d=e,c.find(".message_types").empty();for(var f in e.options){var g=b("<option/>"),h=e.options[f];g.val(f).text(h.text),c.find(".message_types").append(g)}var i=e.title,j=c.find("ul li.blank:first"),k=c.find("ul"),l={};c.find("ul li:not(.blank)").remove();for(var f in e.students){var m=j.clone(!0).removeClass("blank");m.find(".name").text(e.students[f].name),m.find(".score").text(e.students[f].score),m.data("id",e.students[f].id),m.user_data=e.students[f],k.append(m.show()),l[e.students[f].id]=m}k.show(),c.data("students_hash",l),c.find(".asset_title").text(i),c.find(".out_of").showIf(e.points_possible!=null),c.find(".send_button").text(a.t("send_message","Send Message")),c.find(".points_possible").text(e.points_possible),c.find("textarea").val(""),c.find("select")[0].selectedIndex=0,c.find("select").change(),c.dialog({width:600,modal:!0}).dialog("open").dialog("option","title",a.t("message_student","Message Students for %{course_name}",{course_name:i}))},b(document).ready(function(){c.find(".cutoff_score").bind("change blur keyup",function(){c.find("select").change()}),c.find(".cancel_button").click(function(){c.dialog("close")}),b("#message_assignment_recipients").formSubmit({processData:function(a){var c=[];return b(this).find(".student:visible").each(function(){c.push(b(this).data("id"))}),c.length==0?!1:(a.recipients=c.join(","),a)},beforeSubmit:function(c){b(this).find("button").attr("disabled",!0).filter(".send_button").text(a.t("buttons.sending_message","Sending Message..."))},success:function(c){b(this).find(".send_button").text("Message Sent!");var d=b(this);setTimeout(function(){d.find("button").attr("disabled",!1).filter(".send_button").text(a.t("buttons.send_message","Send Message")),b("#message_students_dialog").dialog("close")},2e3)},error:function(c){b(this).find("button").attr("disabled",!1).filter(".send_button").text(a.t("buttons.send_message_failed","Sending Message Failed, please try again"))}}),c.find("select").change(function(){var a=parseInt(b(this).val(),10)||0,e=d.options[a],f=c.data("students_hash"),g=parseFloat(c.find(".cutoff_score").val(),10);!g&&g!==0&&(g=null);var h=null,i=[];for(var a in f)i.push(f[a]);f&&(e&&e.callback?h=e.callback.call(window.messageStudents,g,i):d.callback&&(h=d.callback.call(window.messageStudents,e.text,g,i))),h=h||[],c.find(".cutoff_holder").showIf(e.cutoff),c.find(".student_list").toggleClass("show_score",e.cutoff||e.score),c.find("button").attr("disabled",h.length==0);var j={};for(var a in h)j[parseInt(h[a],10)||0]=!0;for(var a in f)f[a].showIf(j[a])})}),messageStudents}),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/gradebook2/SetDefaultGradeDialog",["i18n!gradebook2","jquery","jst/SetDefaultGradeDialog","underscore","jquery.disableWhileLoading","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","compiled/jquery/fixDialogButtons","jst/_grading_box"],function(b,c,d,e){var f;return f=function(){function f(b,c){this.assignment=b,this.gradebook=c,this.initDialog=a(this.initDialog,this),this.initDialog()}return f.name="SetDefaultGradeDialog",f.prototype.initDialog=function(){var a,f=this;return a={assignment:this.assignment,showPointsPossible:this.assignment.points_possible||this.assignment.points_possible==="0",url:"/courses/"+this.gradebook.options.context_id+"/gradebook/update_submission"},a["assignment_grading_type_is_"+this.assignment.grading_type]=!0,this.$dialog=c(d(a)),this.$dialog.dialog({resizable:!1,width:350,open:function(){return f.$dialog.find(".grading_box").focus()},close:function(){return f.$dialog.remove()}}).fixDialogButtons(),this.$dialog.formSubmit({disableWhileLoading:!0,processData:function(a){var c,d,g,h,i,j,k,l;j=0,d=function(a){return a["assignment_"+f.assignment.id].score==null},c=a.overwrite_existing_grades,h=function(a){return f.gradebook.sectionToShow?e.include(a.sections,f.gradebook.sectionToShow):!0},k=function(b,c){return j+=1,a["submissions[submission_"+b+"][assignment_id]"]=f.assignment.id,a["submissions[submission_"+b+"][user_id]"]=c.id,a["submissions[submission_"+b+"][grade]"]=a.default_grade},l=f.gradebook.students;for(g in l)i=l[g],(d(i)||c)&&h(i)&&k(g,i);return j===0?(alert(b.t("alerts.none_to_update","None to Update")),!1):a},success:function(a){var d,e;return e=function(){var b,c,e;e=[];for(b=0,c=a.length;b<c;b++)d=a[b],e.push(d.submission);return e}(),c.publish("submissions_updated",[e]),alert(b.t("alerts.scores_updated",{one:"1 Student score updated",other:"%{count} Student scores updated"},{count:a.length})),f.$dialog.remove()}})},f}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/gradebook2/CurveGradesDialog",["i18n!gradebook2","jquery","jst/CurveGradesDialog","jquery.disableWhileLoading","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","compiled/jquery/fixDialogButtons","vendor/jquery.ba-tinypubsub"],function(b,c,d){var e;return e=function(){function e(e,f){var g,h=this;this.assignment=e,this.gradebook=f,this.curve=a(this.curve,this),g={assignment:this.assignment,action:""+this.gradebook.options.context_url+"/gradebook/update_submission",middleScore:parseInt((this.assignment.points_possible||0)*.6),showOutOf:this.assignment.points_possible>=0},this.$dialog=c(d(g)),this.$dialog.formSubmit({disableWhileLoading:!0,processData:function(a){var c,d,e,f;c=0,d=h.curve();for(e in d)f="submissions[submission_"+e+"]",a[f+"[assignment_id]"]=a.assignment_id,a[f+"[user_id]"]=e,a[f+"[grade]"]=d[e],c++;return c===0?(h.$dialog.errorBox(b.t("errors.none_to_update","None to Update")),!1):a},success:function(a){var d,e;return h.$dialog.dialog("close"),e=function(){var b,c,e;e=[];for(b=0,c=a.length;b<c;b++)d=a[b],e.push(d.submission);return e}(),c.publish("submissions_updated",[e]),alert(b.t("alerts.scores_updated",{one:"1 Student score updated",other:"%{count} Student scores updated"},{count:a.length}))}}).dialog({width:350,modal:!0,resizable:!1,open:this.curve,close:function(){return h.$dialog.remove()}}).fixDialogButtons(),this.$dialog.find("#middle_score").bind("blur change keyup focus",this.curve),this.$dialog.find("#assign_blanks").change(this.curve)}return e.name="CurveGradesDialog",e.prototype.curve=function(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;l=0,t={},h=this.$dialog.getFormData(),z=[],s=0,p=parseInt(c("#middle_score").val(),10),p/=this.assignment.points_possible;if(isNaN(p))return;B=this.gradebook.students;for(l in B)v=B[l],r=v["assignment_"+this.assignment.id].score,r>this.assignment.points_possible&&(r=this.assignment.points_possible),r<0&&(r=0),z[parseInt(r,10)]=z[parseInt(r,10)]||[],z[parseInt(r,10)].push([l,r||0]),s++;d=[.006,.012,.028,.04,.068,.106,.159,.227,.309,.401,.5,.599,.691,.773,.841,.894,.933,.96,.977,.988,1],m=(1-p)/Math.floor(d.length/2),b=[],a=[],l=0;while(l<d.length)a.push(1-m*l),b.push(Math.round((1-m*l)*this.assignment.points_possible)),l++;w=0,j={},g=0,c("#results_list").empty(),c("#results_values").empty(),k=[],l=z.length-1;while(l>=0){y=z[l]||[],r=Math.round(b[g]);for(n in y)x=y[n],j[x[0]]=r,x[1]===0&&(j[x[0]]=0),i=j[x[0]],k[i]=k[i]||[],k[i].push(x[0]);w+=y.length;while(w>d[g]*s)g++;l--}o=0,l=k.length-1;while(l>=0)e=(k[l]||[]).length,e>o&&(o=e),l--;A=15,u=0,l=k.length-1;while(l>=0)y=k[l],q=0,e=0,y||u>this.assignment.points_possible/10?(y&&(q=y.length/o,e=y.length),f=l===0?"#ee8":"#cdf",c("#results_list").prepend("<td style='padding: 1px;'><div title='"+e+" student"+(e===1?"":"s")+" will get "+l+" points' style='border: 1px solid #888; background-color: "+f+"; width: "+A+"px; height: "+100*q+"px; margin-top: "+100*(1-q)+"px;'>&nbsp;</div></td>"),c("#results_values").prepend("<td style='text-align: center;'>"+l+"</td>"),u=0):u++,l--;return c("#results_list").prepend("<td><div style='height: 100px; position: relative; width: 30px; font-size: 0.8em;'><img src='/images/number_of_students.png' alt='# of students'/><div style='position: absolute; top: 0; right: 3px;'>"+o+"</div><div style='position: absolute; bottom: 0; right: 3px;'>0</div></div></td>"),c("#results_values").prepend("<td>&nbsp;</td>"),j},e}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define("compiled/gradebook2/GradebookHeaderMenu",["i18n!gradebook2","jquery","message_students","compiled/AssignmentDetailsDialog","compiled/AssignmentMuter","compiled/gradebook2/SetDefaultGradeDialog","compiled/gradebook2/CurveGradesDialog","jst/gradebook2/GradebookHeaderMenu","jst/re_upload_submissions_form","underscore","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","compiled/jquery.kylemenu"],function(b,c,d,e,f,g,h,i,j,k){var l;return l=function(){function d(b,d,e){var g,h=this;this.assignment=b,this.$trigger=d,this.gradebook=e,this.reuploadSubmissions=a(this.reuploadSubmissions,this),this.downloadSubmissions=a(this.downloadSubmissions,this),this.curveGrades=a(this.curveGrades,this),this.setDefaultGrade=a(this.setDefaultGrade,this),this.messageStudentsWho=a(this.messageStudentsWho,this),this.showAssignmentDetails=a(this.showAssignmentDetails,this),g={assignmentUrl:""+this.gradebook.options.context_url+"/assignments/"+this.assignment.id,speedGraderUrl:""+this.gradebook.options.context_url+"/gradebook/speed_grader?assignment_id="+this.assignment.id},this.$menu=c(i(g)).insertAfter(this.$trigger),this.$trigger.kyleMenu({noButton:!0}),this.$menu.appendTo("#gradebook_grid").delegate("a","click",function(a){var b;b=h[c(a.target).data("action")];if(b)return b(),!1}).bind("popupopen popupclose",function(a){return h.$trigger.toggleClass("ui-menu-trigger-menu-is-open",a.type==="popupopen")}).bind("popupopen",function(){var a,b,c,d;c={showAssignmentDetails:h.gradebook.allSubmissionsLoaded,messageStudentsWho:h.gradebook.allSubmissionsLoaded,setDefaultGrade:h.gradebook.allSubmissionsLoaded,curveGrades:h.gradebook.allSubmissionsLoaded&&h.assignment.grading_type!=="pass_fail"&&h.assignment.points_possible,downloadSubmissions:(""+h.assignment.submission_types).match(/(online_upload|online_text_entry|online_url)/),reuploadSubmissions:h.assignment.submissions_downloads>0},d=[];for(a in c)b=c[a],d.push(h.$menu.find("[data-action="+a+"]").showIf(b));return d}).popup("open"),new f(this.$menu.find("[data-action=toggleMuting]"),this.assignment,""+this.gradebook.options.context_url+"/assignments/"+this.assignment.id+"/mute")}return d.name="GradebookHeaderMenu",d.prototype.showAssignmentDetails=function(){return new e(this.assignment,this.gradebook)},d.prototype.messageStudentsWho=function(){var a,d,e,f,g,h;return g=function(){var a,b;a=this.gradebook.students,b=[];for(d in a)f=a[d],b.push(c.extend({id:f.id,name:f.name},f["assignment_"+this.assignment.id]));return b}.call(this),h=this.assignment.submission_types,a=!0,h.length===0?a=!1:h.length===1&&(a=!k.include(["none","on_paper"],h[0])),e=[{text:b.t("students_who.havent_submitted_yet","Haven't submitted yet")},{text:b.t("students_who.havent_been_graded","Haven't been graded")},{text:b.t("students_who.scored_less_than","Scored less than"),cutoff:!0},{text:b.t("students_who.scored_more_than","Scored more than"),cutoff:!0}],a||e.splice(0,1),window.messageStudents({options:e,title:this.assignment.name,points_possible:this.assignment.points_possible,students:g,callback:function(a,d,e){return e=c.grep(e,function(c,e){f=c.user_data;if(a===b.t("students_who.havent_submitted_yet","Haven't submitted yet"))return!f.submitted_at;if(a===b.t("students_who.havent_been_graded","Haven't been graded"))return f.score==null;if(a===b.t("students_who.scored_less_than","Scored less than"))return f.score!=null&&f.score!==""&&d!=null&&f.score<d;if(a===b.t("students_who.scored_more_than","Scored more than"))return f.score!=null&&f.score!==""&&d!=null&&f.score>d}),c.map(e,function(a){return a.user_data.id})}})},d.prototype.setDefaultGrade=function(){return new g(this.assignment,this.gradebook)},d.prototype.curveGrades=function(){return new h(this.assignment,this.gradebook)},d.prototype.downloadSubmissions=function(){var a,b,d;return a=c.replaceTags(this.gradebook.options.download_assignment_submissions_url,"assignment_id",this.assignment.id),INST.downloadSubmissions(a),this.assignment.submissions_downloads=((d=(b=this.assignment).submissions_downloads)!=null?d:b.submissions_downloads=0)+1},d.prototype.reuploadSubmissions=function(){var a;return this.$re_upload_submissions_form||(d.prototype.$re_upload_submissions_form=c(j()).dialog({width:400,modal:!0,resizable:!1,autoOpen:!1}).submit(function(){var a;a=c(this).getFormData();if(!a.submissions_zip)return!1;if(!a.submissions_zip.match(/\.zip$/))return c(this).formErrors({submissions_zip:b.t("errors.upload_as_zip","Please upload files as a .zip")}),!1})),a=c.replaceTags(this.gradebook.options.re_upload_submissions_url,"assignment_id",this.assignment.id),this.$re_upload_submissions_form.attr("action",a).dialog("open")},d}()})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define("compiled/gradebook2/Gradebook",["i18n!gradebook2","compiled/gradebook2/GRADEBOOK_TRANSLATIONS","jquery","underscore","compiled/grade_calculator","compiled/userSettings","vendor/spin","compiled/multi_grid","compiled/SubmissionDetailsDialog","compiled/gradebook2/AssignmentGroupWeightsDialog","compiled/gradebook2/SubmissionCell","compiled/gradebook2/GradebookHeaderMenu","str/htmlEscape","jst/gradebook_uploads_form","jst/gradebook2/section_to_show_menu","jst/gradebook2/column_header","jst/gradebook2/group_total_cell","jst/gradebook2/row_student_name","jst/_avatar","jquery.ajaxJSON","jquery.instructure_date_and_time","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","jqueryui/mouse","jqueryui/position","jqueryui/sortable","compiled/jquery.kylemenu","compiled/jquery/fixDialogButtons"],function(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u;return u=function(){function v(b){var c,d=this;this.options=b,this.initGrid=a(this.initGrid,this),this.initHeader=a(this.initHeader,this),this.hoverMinimizedCell=a(this.hoverMinimizedCell,this),this.unminimizeColumn=a(this.unminimizeColumn,this),this.minimizeColumn=a(this.minimizeColumn,this),this.fixColumnReordering=a(this.fixColumnReordering,this),this.unhighlightColumns=a(this.unhighlightColumns,this),this.highlightColumn=a(this.highlightColumn,this),this.calculateStudentGrade=a(this.calculateStudentGrade,this),this.groupTotalFormatter=a(this.groupTotalFormatter,this),this.staticCellFormatter=a(this.staticCellFormatter,this),this.cellFormatter=a(this.cellFormatter,this),this.updateSubmissionsFromExternal=a(this.updateSubmissionsFromExternal,this),this.updateSubmission=a(this.updateSubmission,this),this.gotSubmissionsChunk=a(this.gotSubmissionsChunk,this),this.getSubmissionsChunks=a(this.getSubmissionsChunks,this),this.buildRows=a(this.buildRows,this),this.handleAssignmentMutingChange=a(this.handleAssignmentMutingChange,this),this.rowFilter=a(this.rowFilter,this),this.columnSortFn=a(this.columnSortFn,this),this.arrangeColumnsBy=a(this.arrangeColumnsBy,this),this.gotChunkOfStudents=a(this.gotChunkOfStudents,this),this.gotSections=a(this.gotSections,this),this.gotAssignmentGroups=a(this.gotAssignmentGroups,this),this.chunk_start=0,this.students={},this.rows=[],this.studentsPage=1,this.sortFn=function(a){return a.sortable_name},this.assignmentsToHide=h.contextGet("hidden_columns")||[],this.sectionToShow=h.contextGet("grading_show_only_section"),this.show_attendance=h.contextGet("show_attendance"),this.include_ungraded_assignments=h.contextGet("include_ungraded_assignments"),e.subscribe("assignment_group_weights_changed",this.buildRows),e.subscribe("assignment_muting_toggled",this.handleAssignmentMutingChange),e.subscribe("submissions_updated",this.updateSubmissionsFromExternal),c=e.when(e.ajaxJSON(this.options.students_url,"GET"),e.ajaxJSON(this.options.assignment_groups_url,"GET",{},this.gotAssignmentGroups),e.ajaxJSON(this.options.sections_url,"GET",{},this.gotSections)).then(function(a){var b,c,e;return c=a[0],b=a[1],e=a[2],d.gotChunkOfStudents(c,e)}),this.spinner=new i,e(this.spinner.spin().el).css({opacity:.5,top:"50%",left:"50%"}).addClass("use-css-transitions-for-show-hide").appendTo("#main")}var u;return v.name="Gradebook",u={assignment:{min:10,max:200},assignmentGroup:{min:35,max:200},total:{min:85,max:100}},v.prototype.gotAssignmentGroups=function(a){var b,c,d,f,g;this.assignmentGroups={},this.assignments={},new l({context:this.options,assignmentGroups:a}),g=[];for(d=0,f=a.length;d<f;d++)c=a[d],o(c),this.assignmentGroups[c.id]=c,g.push(function(){var a,d,f,g;f=c.assignments,g=[];for(a=0,d=f.length;a<d;a++)b=f[a],o(b),b.assignment_group=c,b.due_at&&(b.due_at=e.parseFromISO(b.due_at)),g.push(this.assignments[b.id]=b);return g}.call(this));return g},v.prototype.gotSections=function(a){var b,c,d;this.sections={};for(c=0,d=a.length;c<d;c++)b=a[c],o(b),this.sections[b.id]=b;return this.sections_enabled=a.length>1},v.prototype.gotChunkOfStudents=function(a,b){var c,d,f,g,h,i,j,k;for(i=0,j=a.length;i<j;i++)f=a[i],d=f.user,d.enrollment=f,(g=this.students)[k=d.id]||(g[k]=o(d)),(h=this.students[d.id]).sections||(h.sections=[]),this.students[d.id].sections.push(f.course_section_id);return c=b.getResponseHeader("Link"),c&&c.match(/rel="next"/)?(this.studentsPage+=1,e.ajaxJSON(this.options.students_url,"GET",{page:this.studentsPage},this.gotChunkOfStudents)):this.gotAllStudents()},v.prototype.gotAllStudents=function(){var a,b,c,d,f,g,h,i;h=this.students;for(b in h){f=h[b],f.computed_current_score||(f.computed_current_score=0),f.computed_final_score||(f.computed_final_score=0),f.secondary_identifier=f.sis_login_id||f.login_id,this.sections_enabled&&(d=e.toSentence(function(){var a,b,d,e;d=f.sections,e=[];for(a=0,b=d.length;a<b;a++)c=d[a],e.push(this.sections[c].name);return e}.call(this).sort())),f.display_name=t({avatar_image_url:f.avatar_url,display_name:f.name,url:f.enrollment.grades.html_url,sectionNames:d}),i=this.assignments;for(b in i)a=i[b],f[g="assignment_"+b]||(f[g]={assignment_id:b,user_id:f.id});this.rows.push(f)}return this.initGrid(),this.buildRows(),this.getSubmissionsChunks(),this.initHeader()},v.prototype.arrangeColumnsBy=function(a){var b;return a&&a!==this._sortColumnsBy&&(this.$columnArrangementTogglers.each(function(){return e(this).closest("li").showIf(e(this).data("arrangeColumnsBy")!==a)}),this._sortColumnsBy=a,h[a==="due_date"?"contextSet":"contextRemove"]("sort_grade_colums_by",a),b=this.gradeGrid.getColumns(),b.sort(this.columnSortFn),this.gradeGrid.setColumns(b),this.fixColumnReordering(),this.buildRows()),this._sortColumnsBy||(this._sortColumnsBy=h.contextGet("sort_grade_colums_by")||"assignment_group")},v.prototype.columnSortFn=function(a,b){var c,d,e,f,g,h;if(b.type==="total_grade")return-1;if(a.type==="total_grade")return 1;if(b.type==="assignment_group"&&a.type!=="assignment_group")return-1;if(a.type==="assignment_group"&&b.type!=="assignment_group")return 1;if(a.type==="assignment_group"&&b.type==="assignment_group")return a.object.position-b.object.position;if(a.type==="assignment"&&b.type==="assignment")return this.arrangeColumnsBy()==="assignment_group"?(e=a.object.assignment_group.position-b.object.assignment_group.position,f=a.object.position-b.object.position,e*1e6+f):(c=((g=a.object.due_at)!=null?g.timestamp:void 0)||Number.MAX_VALUE,d=((h=b.object.due_at)!=null?h.timestamp:void 0)||Number.MAX_VALUE,c===d?a.object.name===b.object.name?0:a.object.name>b.object.name?1:-1:c-d);throw"unhandled column sort condition"},v.prototype.rowFilter=function(a){var c;return!this.sectionToShow||(c=this.sectionToShow,b.call(a.sections,c)>=0)},v.prototype.handleAssignmentMutingChange=function(a){var b,c;return c=this.gradeGrid.getColumnIndex("assignment_"+a.id),b=this.gradeGrid.getColumns()[c],b.name=this.assignmentHeaderHtml(a),this.gradeGrid.setColumns(this.gradeGrid.getColumns()),this.fixColumnReordering(),this.buildRows()},v.prototype.buildRows=function(){var a,b,c,d,e,f,g,h,i,j,k;this.rows.length=0,d={},h=this.gradeGrid.getColumns();for(c in h){a=h[c];if(""+((i=a.object)!=null?i.submission_types:void 0)!="attendance")continue;a.unselectable=!this.show_attendance,a.cssClass=this.show_attendance?"":"completely-hidden",this.$grid.find("[id*='"+a.id+"']").showIf(this.show_attendance)}j=this.students;for(c in j)e=j[c],e.row=-1,this.rowFilter(e)&&(this.rows.push(e),this.calculateStudentGrade(e),d[e.id]=this.sortFn(e));this.rows.sort(function(a,b){return d[a.id]<d[b.id]?-1:d[a.id]>d[b.id]?1:0}),k=this.rows;for(b=f=0,g=k.length;f<g;b=++f)e=k[b],e.row=b;return this.multiGrid.invalidate()},v.prototype.getSubmissionsChunks=function(){var a,b,c,d;d=[];for(;;){c=this.rows.slice(this.chunk_start,this.chunk_start+this.options.chunk_size);if(!c.length){this.allSubmissionsLoaded=!0;break}a={student_ids:function(){var a,d,e;e=[];for(a=0,d=c.length;a<d;a++)b=c[a],e.push(b.id);return e}(),response_fields:["user_id","url","score","grade","submission_type","submitted_at","assignment_id","grade_matches_current_submission"]},e.ajaxJSON(this.options.submissions_url,"GET",a,this.gotSubmissionsChunk),d.push(this.chunk_start+=this.options.chunk_size)}return d},v.prototype.gotSubmissionsChunk=function(a){var b,c,d,e,f,g,h,i;for(e=0,g=a.length;e<g;e++){b=a[e],c=this.students[b.user_id],i=b.submissions;for(f=0,h=i.length;f<h;f++)d=i[f],this.updateSubmission(d);c.loaded=!0,this.multiGrid.invalidateRow(c.row),this.calculateStudentGrade(c)}return this.multiGrid.render()},v.prototype.updateSubmission=function(a){var b;return b=this.students[a.user_id],a.submitted_at&&(a.submitted_at=e.parseFromISO(a.submitted_at)),b["assignment_"+a.assignment_id]=a},v.prototype.updateSubmissionsFromExternal=function(a){var b,c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],b=this.students[c.user_id],this.updateSubmission(c),this.multiGrid.invalidateRow(b.row),this.calculateStudentGrade(b);return this.multiGrid.render()},v.prototype.cellFormatter=function(a,b,c){var d;return this.rows[a].loaded?c==null?this.staticCellFormatter(a,b,"-"):(d=this.assignments[c.assignment_id],d==null?this.staticCellFormatter(a,b,""):d.grading_type==="points"&&d.points_possible?m.out_of.formatter(a,b,c,d):(m[d.grading_type]||m).formatter(a,b,c,d)):this.staticCellFormatter(a,b,"")},v.prototype.staticCellFormatter=function(a,b,c){return"<div class='cell-content gradebook-cell'>"+c+"</div>"},v.prototype.groupTotalFormatter=function(a,b,c,d,e){var f,h;return c==null?"":(h=Math.round(c.score/c.possible*1e3)/10,isNaN(h)&&(h=0),c.possible&&this.options.grading_standard&&d.type==="total_grade"&&(f=g.letter_grade(this.options.grading_standard,h)),s({score:c.score,possible:c.possible,letterGrade:f,percentage:h}))},v.prototype.calculateStudentGrade=function(a){var b,c,d,e,f,g,h,i,j;if(a.loaded){b=this.include_ungraded_assignments?"final":"current",f=function(){var b;b=[];for(d in a)g=a[d],d.match(/^assignment_(?!group)/)&&b.push(g);return b}(),e=INST.GradeCalculator.calculate(f,this.assignmentGroups,this.options.group_weighting_scheme),j=e.group_sums;for(h=0,i=j.length;h<i;h++)c=j[h],a["assignment_group_"+c.group.id]=c[b];return a.total_grade=e[b]}},v.prototype.highlightColumn=function(a){var b;return isNaN(a)&&(b=a.currentTarget.className.match(/c\d+/),b&&(a=b.toString().replace("c",""))),this.$grid.find(".slick-header-column:eq("+a+")").addClass("hovered-column")},v.prototype.unhighlightColumns=function(){return this.$grid.find(".hovered-column").removeClass("hovered-column")},v.prototype.fixColumnReordering=function(){var a,b,c,d,f,g,h,i=this;return a=e("#gradebook_grid").find(".slick-header-columns"),g=a.sortable("option","items"),f='> *:not([id*="assignment_group"]):not([id*="total_grade"])',(d=function(){var b;return a.sortable("option","items",f),b=e(g,a).not(e(f,a)),b.data("sortable-item",null)})(),(c=function(){return a.find(".gradebook-header-drop").click(function(a){var b;return b=e(a.target),b.data("gradebookHeaderMenu")||b.data("gradebookHeaderMenu",new n(i.assignments[b.data("assignmentId")],b,i)),!1})})(),h=a.sortable("option","stop"),(b=function(){return a.sortable("option","stop",function(e,f){var i;return a.sortable("option","items",g),i=h.apply(this,arguments),d(),c(),b(),i})})()},v.prototype.minimizeColumn=function(a){var b,c;return b=a.index(),c=this.gradeGrid.getColumns()[b],c.cssClass=(c.cssClass||"").replace(" minimized","")+" minimized",c.unselectable=!0,c.unminimizedName=c.name,c.name="",c.minimized=!0,this.$grid.find(".l"+b).add(a).addClass("minimized"),this.assignmentsToHide.push(c.id),h.contextSet("hidden_columns",f.uniq(this.assignmentsToHide))},v.prototype.unminimizeColumn=function(a){var b,c;return b=a.index(),c=this.gradeGrid.getColumns()[b],c.cssClass=(c.cssClass||"").replace(" minimized",""),c.unselectable=!1,c.name=c.unminimizedName,c.minimized=!1,this.$grid.find(".l"+b).add(a).removeClass("minimized"),a.find(".slick-column-name").html(c.name),this.assignmentsToHide=e.grep(this.assignmentsToHide,function(a){return a!==c.id}),h.contextSet("hidden_columns",f.uniq(this.assignmentsToHide))},v.prototype.hoverMinimizedCell=function(a){var b,f,g,h,i,j,k,l=this;return b=e(a.currentTarget).removeClass("hover"),g=this.gradeGrid.getColumns()[b.index()],f=g.object,i=b.offset(),h=[f.name],b.hasClass("slick-cell")?(j=this.rows[this.gradeGrid.getCellFromEvent(a).row][g.id],f.points_possible!=null?h.push(""+((k=j.score)!=null?k:"--")+" / "+f.points_possible):j.score!=null&&h.push(j.score),Array.prototype.push.apply(h,e.map(m.classesBasedOnSubmission(j,f),function(a){return d["#submission_tooltip_"+a]}))):f.points_possible!=null&&h.push(c.t("points_out_of","out of %{points_possible}",{points_possible:f.points_possible})),b.data("tooltip",e("<span />",{"class":"gradebook-tooltip",css:{left:i.left-15,top:i.top,zIndex:1e4,display:"block"},html:h.join("<br />")}).appendTo("body").css("top",function(a,b){return parseInt(b)-e(this).outerHeight()}))},v.prototype.unhoverMinimizedCell=function(a){var b;if(b=e(this).data("tooltip"))return a.toElement===b[0]?b.mouseleave(function(){return b.remove()}):b.remove()},v.prototype.fixMaxHeaderWidth=function(){return this.$grid.find(".slick-header-columns").width(1e6)},v.prototype.onGridInit=function(){var a,b,c=this;return this.fixColumnReordering(),b={},e(this.spinner.el).remove(),e("#gradebook_wrapper").show(),this.$grid=a=e("#gradebook_grid").fillWindowWithMe({alsoResize:"#gradebook_students_grid",onResize:function(){return c.multiGrid.resizeCanvas()}}).delegate(".slick-cell",{"mouseenter.gradebook focusin.gradebook":this.highlightColumn,"mouseleave.gradebook focusout.gradebook":this.unhighlightColumns,"mouseenter focusin":function(b){return a.find(".hover, .focus").removeClass("hover focus"),e(this).addClass(b.type==="mouseenter"?"hover":"focus")},"mouseleave focusout":function(){return e(this).removeClass("hover focus")}}).delegate(".gradebook-cell-comment","click.gradebook",function(a){var b;return a.preventDefault(),b=e(a.currentTarget).data(),k.open(c.assignments[b.assignmentId],c.students[b.userId],c.options)}).delegate(".minimized",{mouseenter:this.hoverMinimizedCell,mouseleave:this.unhoverMinimizedCell}),this.fixMaxHeaderWidth(),e("#gradebook_grid .slick-resizable-handle").live("drag",function(a,b){return c.$grid.find(".slick-header-column").each(function(a,b){var d,f;d=e(b),f=c.gradeGrid.getColumns()[a];if(d.outerWidth()>minimumAssignmentColumWidth){if(f.minimized)return c.unminimizeColumn(d)}else if(!f.minimized)return c.minimizeColumn(d)})}),e(document).trigger("gridready")},v.prototype.initHeader=function(){var a,b,d,g,i,j,k,l,m,n=this;if(this.sections_enabled){g=c.t("all_sections","All Sections"),k=[{name:g,checked:!this.sectionToShow}],m=this.sections;for(i in m)j=m[i],k.push({name:j.name,id:i,checked:this.sectionToShow===i});a=e(q({sections:k,scrolling:k.length>15})),(l=function(){return e("#section_being_shown").html(n.sectionToShow?n.sections[n.sectionToShow].name:g)})(),e("#section_to_show").after(a).show().kyleMenu({buttonOpts:{icons:{primary:"ui-icon-sections",secondary:"ui-icon-droparrow"}}}),a.bind("menuselect",function(b,c){return n.sectionToShow=Number(a.find('[aria-checked="true"] input[name="section_to_show_radio"]').val())||void 0,h[n.sectionToShow?"contextSet":"contextRemove"]("grading_show_only_section",n.sectionToShow),l(),n.buildRows()})}return b=e("#gradebook_settings").next(),e.each(["show_attendance","include_ungraded_assignments"],function(a,c){return b.find("#"+c).prop("checked",n[c]).change(function(a){return n[c]=e(a.target).is(":checked"),h.contextSet(c,n[c]),c==="show_attendance"&&n.gradeGrid.setColumns(n.getVisibleGradeGridColumns()),n.buildRows()})}),f.detect(this.gradeGrid.getColumns(),function(a){var b;return((b=a.object)!=null?b.submission_types:void 0)==="attendance"})||b.find("#show_attendance").hide(),this.$columnArrangementTogglers=e("#gradebook-toolbar [data-arrange-columns-by]").bind("click",function(a){var b;return a.preventDefault(),b=e(a.currentTarget).data("arrangeColumnsBy"),n.arrangeColumnsBy(b)}),this.arrangeColumnsBy("assignment_group"),e("#gradebook_settings").show().kyleMenu({buttonOpts:{icons:{primary:"ui-icon-cog",secondary:"ui-icon-droparrow"}}}),d=null,b.find(".gradebook_upload_link").click(function(a){var b;return a.preventDefault(),d||(b={download_gradebook_csv_url:""+n.options.context_url+"/gradebook.csv",action:""+n.options.context_url+"/gradebook_uploads",authenticityToken:e("#ajax_authenticity_token").text()},d=e(p(b)).dialog({bgiframe:!0,autoOpen:!1,modal:!0,width:720,resizable:!1}).fixDialogButtons().delegate("#gradebook-upload-help-trigger","click",function(){return e(this).hide(),e("#gradebook-upload-help").show()})),d.dialog("open")})},v.prototype.getVisibleGradeGridColumns=function(){var a,b,c,d,e,f;b=[],f=this.allAssignmentColumns;for(d=0,e=f.length;d<e;d++)a=f[d],c=""+a.object.submission_types,c==="not_graded"||c==="attendance"&&!this.show_attendance||b.push(a);return b.concat(this.aggregateColumns)},v.prototype.assignmentHeaderHtml=function(a){return r({assignment:a,href:a.html_url,showPointsPossible:a.points_possible!=null})},v.prototype.initGrid=function(){var a,d,f,g,h,i,k,l,n,o,p,q,r,s,t=this;return a=e('<span style="padding:10px" />').appendTo("#content"),s=function(b,c,d){var e;return e=Math.max(a.text(b).outerWidth(),c),Math.min(e,d)},this.parentColumns=[{id:"student",name:c.t("student_name","Student Name"),field:"display_name",width:150,cssClass:"meta-cell",resizable:!1,sortable:!0},{id:"secondary_identifier",name:c.t("secondary_id","Secondary ID"),field:"secondary_identifier",width:100,cssClass:"meta-cell secondary_identifier_cell",resizable:!1,sortable:!0}],this.allAssignmentColumns=function(){var a,c,h=this;a=this.assignments,c=[];for(l in a)d=a[l],p=d&&d.grading_type==="points"&&d.points_possible!=null&&m.out_of,n=p?70:90,g="assignment_"+l,f={id:g,field:g,name:this.assignmentHeaderHtml(d),object:d,formatter:this.cellFormatter,editor:p||m[d.grading_type]||m,minWidth:u.assignment.min,maxWidth:u.assignment.max,width:s(d.name,n,u.assignment.max),sortable:!0,toolTip:d.name,type:"assignment"},b.call(this.assignmentsToHide,g)>=0&&(f.width=10,function(a){return e(document).bind("gridready",function(){return h.minimizeColumn(h.$grid.find("[id*='"+a+"']"))}).unbind("gridready.render").bind("gridready.render",function(){return h.gradeGrid.invalidate()})}(g)),c.push(f);return c}.call(this),this.aggregateColumns=function(){var a,b;a=this.assignmentGroups,b=[];for(l in a)i=a[l],k=""+i.name,i.group_weight!=null&&(q=c.toPercentage(i.group_weight,{precision:0}),k+="<div class='assignment-points-possible'>\n  "+c.t("percent_of_grade","%{percentage} of grade",{percentage:q})+"\n</div>"),b.push({id:"assignment_group_"+l,field:"assignment_group_"+l,formatter:this.groupTotalFormatter,name:k,toolTip:i.name,object:i,minWidth:u.assignmentGroup.min,maxWidth:u.assignmentGroup.max,width:s(i.name,u.assignmentGroup.min,u.assignmentGroup.max),cssClass:"meta-cell assignment-group-cell",sortable:!0,type:"assignment_group"});return b}.call(this),this.aggregateColumns.push({id:"total_grade",field:"total_grade",formatter:this.groupTotalFormatter,name:"Total",minWidth:u.total.min,maxWidth:u.total.max,width:s("Total",u.total.min,u.total.max),cssClass:"total-cell",sortable:!0,type:"total_grade"}),a.remove(),o=e.extend({enableCellNavigation:!1,enableColumnReorder:!1,enableAsyncPostRender:!0,asyncPostRenderDelay:1,autoEdit:!0,rowHeight:35,headerHeight:38},this.options),h=[{selector:"#gradebook_students_grid",columns:this.parentColumns},{selector:"#gradebook_grid",columns:this.getVisibleGradeGridColumns(),options:{enableCellNavigation:!0,editable:!0,syncColumnCellResize:!0,enableColumnReorder:!0}}],this.multiGrid=new j(this.rows,o,h,1),this.gradeGrid=this.multiGrid.grids[1],this.gradeGrid.onCellChange.subscribe(function(a,b){return t.calculateStudentGrade(b.item),t.gradeGrid.invalidate()}),r=function(a){var b,c,d,e,f;t.rows.sort(a),f=t.rows;for(b=d=0,e=f.length;d<e;b=++d)c=f[b],c.row=b;return t.multiGrid.invalidate()},this.gradeGrid.onSort.subscribe(function(a,b){return r(function(a,c){var d,e,f,g;return d=(f=a[b.sortCol.field])!=null?f.score:void 0,e=(g=c[b.sortCol.field])!=null?g.score:void 0,!d&&d!==0&&(d=-99999999999),!e&&e!==0&&(e=-99999999999),b.sortAsc?e-d:d-e})}),this.multiGrid.grids[0].onSort.subscribe(function(a,b){var c;return c={display_name:"sortable_name",secondary_identifier:"secondary_identifier"}[b.sortCol.field],r(function(a,d){var e;return e=a[c]<d[c]?-1:a[c]>d[c]?1:0,b.sortAsc?e:0-e})}),this.multiGrid.parent_grid.onKeyDown.subscribe(function(){return!1}),this.onGridInit()},v}()})}.call(this),function(){require(["ENV","compiled/gradebook2/Gradebook"],function(a,b){return new b(a.GRADEBOOK_OPTIONS)})}.call(this),define("compiled/bundles/gradebook2",function(){})