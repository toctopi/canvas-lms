define("translations/full_assignment",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{full_assignment:{links:{hide_grading_options:"esconder las opciones de calificación",more_grading_options:"más opciones de calificación"},messages:{lock_after_due:"La tarea no debería ser bloqueada hasta después de la fecha límite",need_online_submission_type:"Escoja al menos un tipo de envío en línea",unlock_before_due:"La tarea debería ser desbloqueada antes de su fecha límite"},titles:{criterion_long_description:"Descripción Detallada del Criterio"}}}}})}),define("translations/grading_standards",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{grading_standards:{buttons:{save:"Guardar"},confirm:{delete_grading_scheme:"¿Seguro que quiere borrar este esquema de calificación?",unlink_grading_scheme:"¿Seguro que quiere desenlazar este esquema de calificación?"},errors:{cannot_delete_grading_scheme:"Hubo un problema borrando este esquema de calificación",cannot_load_grading_standards:"Falló la Carga de Estandares de Calificación. Intente de Nuevo.",cannot_remove_grading_scheme:"Hubo un problema removiendo este esquema de calificación. Por favor recargue la página e intente de nuevo.",save_failed:"Guardado Falló"},grading_scheme_currently_set:"Establecido Actualmente",grading_scheme_not_set:"No Establecido",no_grading_standards:"No se encontraron estandares de calificación",status:{loading_grading_standards:"Cargando los Estandares de Calificación...",saving:"Guardando..."},titles:{grading_scheme_info:"Ver/Editar Esquema de Calificación"}}}}})}),define("full_assignment",["INST","i18n!full_assignment","jquery","wikiSidebar","str/htmlEscape","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.keycodes","jquery.loadingImg","jquery.templateData","compiled/tinymce","tinymce.editor_box","vendor/date","vendor/jquery.scrollTo"],function(a,b,c,d,e){hideFullAssignmentForm=function(a){var b=c("#full_assignment"),e=c("#edit_assignment_form");e.hide(),d&&(d.hide(),c("#sidebar_content").show()),b.find(".description").show(),b.find(".edit_full_assignment_link").show()},c(function(){function f(a){c("#"+a).editorBox("focus")||setTimeout(function(){f(a)},500)}function g(){var a=c("#full_assignment"),b=c("#edit_assignment_form");if(b.css("display")==="none"){var e=a.getTemplateData({textValues:["title","due_date_string","due_time_string","points_possible","points_type"]});e.description=="No Content"&&(e.description=""),e.due_date=e.due_date_string,e.due_time=e.due_time_string;var g=Date.parse(c.trim(e.due_date+" "+e.due_time));e.due_at=g&&c.dateString(g)+" at "+c.timeString(g),b.find("select[name='points_type']").change(),b.fillFormData(e,{object_name:"assignment"}),a.find(".description, .edit_full_assignment_link").hide(),b.show(),ENV.HIDE_DESCRIPTION||(b.find("textarea:first").editorBox(),d&&(d.attachToEditor(b.find("textarea:first")),d.show(),c("#sidebar_content").hide())),b.find(".more_options_link").show(),b.find(".more_assignment_values").hide(),ENV.HIDE_DESCRIPTION||setTimeout(function(){f(b.find("textarea:first").attr("id"))},500),b.parents(".ui-dialog").length||c("html,body").scrollTo(b),setTimeout(function(){b.find(".assignment_type").change()},500)}}function h(){var a=i.find("#assignment_peer_reviews"),b=i.find(".assignment_type").val()==="discussion_topic"&&i.find("#assignment_group_assignment").prop("checked");b&&a.prop("checked",!1).change(),a.prop("disabled",b)}d&&d.init();var i=c("#edit_assignment_form");i.find(".more_options_link").click(function(a){c(this).focus(),a.preventDefault(),i.find(".more_options_link").hide(),i.find(".more_assignment_values").show(),i.find(".assignment_type").change()}),c(".edit_full_assignment_link").click(function(a){a.preventDefault(),g()}),i.find(".time_field").timepicker(),i.find(".date_field").datetime_field(),i.find(".assignment_type").change(function(a){var b=c(this).val();i.find(".assignment_content").showIf(b=="assignment"||b=="discussion_topic"||b=="external_tool"),i.find(".submission_content").showIf(b=="assignment"),i.find(".quiz_content").showIf(b=="quiz"),i.find(".discussion_topic_content").showIf(b=="discussion_topic"),i.find(".external_tool_content").showIf(b=="external_tool"),i.find(".not_graded_content").showIf(b=="not_graded"),i.find(".more_assignment_values.assignment_content").showIf((b=="assignment"||b=="discussion_topic")&&!i.find(".more_options_link:visible").length),b=="external_tool"&&c("#assignment_external_tool_tag_attributes_url").val()==""&&c("#edit_external_tool_url").click(),h()}).triggerHandler("change"),i.find(".points_possible").change(function(a){var b=parseFloat(c(this).val());if(isNaN(b)||!isFinite(b)){c(this).val("");return}var d=c("#edit_assignment_form"),e=d.getFormData({object_name:"assignment"}),f=c(this).data("old_value"),g={};g.points_possible=b;if(!e.mastery_score||f&&e.mastery_score==Math.round(f*.75*10)/10){var h=Math.round(b*.75*10)/10;g.mastery_score=h}if(!e.max_score||e.max_score==f)g.max_score=b;e.min_score||(g.min_score=0),d.fillFormData(g,{object_name:"assignment",call_change:!1}),c(this).data("old_value",b)}).change(),c(".more_grading_options_link").click(function(){var a=c(this).hasClass("hide_options");return c(this).toggleClass("hide_options").text(a?b.t("links.more_grading_options","more grading options"):b.t("links.hide_grading_options","hide grading options")),c(".more_grading_options").showIf(!a),!1}),c(".switch_full_assignment_view").click(function(){return i.find("textarea:first").editorBox("toggle"),!1}),i.find(".submission_type_option").change(function(){i.find(".online_submission_types").showIf(c(this).val()=="online")}).change(),i.formSubmit({required:["title"],object_name:"assignment",property_validations:{unlock_at:function(a,c){var d=Date.parse(c.unlock_at),e=Date.parse(c.due_at);if(d&&e&&d>e)return b.t("messages.unlock_before_due","The assignment should be unlocked before it's due")},lock_at:function(a,c){var d=Date.parse(c.lock_at),e=Date.parse(c.due_at);if(d&&e&&d<e)return b.t("messages.lock_after_due","The assignment shouldn't be locked again until after the due date")},"=submission_type":function(a,c){if(a=="online"&&c.assignment_type=="assignment"&&!c.online_upload&&!c.online_text_entry&&!c.online_url&&!c.media_recording)return b.t("messages.need_online_submission_type","Please choose at least one type of online submission")},"external_tool_tag_attributes[url]":function(a,c){if(c.assignment_type=="external_tool"&&(a.length<3||a.indexOf(" ")>=0))return b.t("messages.need_url","Please specify a valid URL")}},onFormError:function(a){var d=[];c.each(a,function(a,b){b.object.is(":visible")||d.push(e(b.message))}),d.length&&c(this).find("a.more_options_link").errorBox(e(b.t("messages.hidden_errors","There were errors on one or more advanced options")))},processData:function(a){var b;return c(this).find(".more_grading_options").css("display")=="none"&&(delete a["assignment[min_score]"],delete a["assignment[max_score]"],delete a["assignment[mastery_score]"],delete a.never_drop),c("#assignment_group_assignment").prop("checked")||(a["assignment[group_category_id]"]=""),c.each(["unlock_at","lock_at","due_at"],function(c,d){if(d=="due_at"||a["assignment["+d+"]"])b=Date.parse(a["assignment["+d+"]"]),b&&(a["assignment["+d+"]"]=b.toString("yyyy-MM-ddTHH:mm:ss"))}),c.extend(a,{"assignment[submission_types]":a.submission_type,due_date:c.dateString(b),description:c(this).find("textarea:first").editorBox("get_code"),"assignment[description]":a.description}),a.submission_type=="online"&&(a["assignment[submission_types]"]=c.map(["online_upload","online_text_entry","online_url","media_recording"],function(b){return a[b]&&b}).join(",")||"none"),a.assignment_type=="quiz"&&(a["assignment[submission_types]"]="online_quiz"),a.assignment_type=="not_graded"&&(a["assignment[submission_types]"]="not_graded"),a.assignment_type=="discussion_topic"&&(a["assignment[submission_types]"]="discussion_topic"),a.assignment_type=="external_tool"&&(a["assignment[submission_types]"]="external_tool"),a},beforeSubmit:function(a){return hideFullAssignmentForm(),c("#full_assignment").fillTemplateData({data:c.extend(c(this).getFormData({object_name:"assignment"}),{description:c(this).find("textarea:first").editorBox("get_code"),due_date_string:a.due_date,due_time_string:a.due_time}),except:["description"]}).loadingImage()},success:function(a,b){var d=a.assignment,e=c.parseFromISO(d.due_at,"due_date"),b=c("#full_assignment");c.extend(d,{due_date:e.date_formatted,due_time:e.time_formatted,timestamp:e.timestamp,due_date_string:e.date_string,due_time_string:e.time_string,lock_at:c.parseFromISO(d.lock_at).datetime_formatted,unlock_at:c.parseFromISO(d.unlock_at).datetime_formatted}),b.find(".quiz_content").showIf(d.submission_types=="online_quiz"&&d.quiz),b.find(".discussion_topic_content").showIf(d.submission_types=="discussion_topic"&&d.discussion_topic),c("#turnitin_enabled").showIf(d.turnitin_enabled),c(".readable_submission_types").text(d.readable_submission_types||"").showIf(d.readable_submission_types),d.quiz&&c.extend(d,{quiz_id:d.quiz.id,quiz_title:d.quiz.title}),d.discussion_topic&&c.extend(d,{discussion_topic_id:d.discussion_topic.id,discussion_topic_title:d.discussion_topic.title}),c(this).find("textarea:first").editorBox("set_code",d.description),c(this).fillFormData(d,{object_name:"assignment"}),b.fillTemplateData({data:d,htmlValues:["description"]}),c("#full_assignment_holder").find(".points_text").showIf(d.points_possible||d.points_possible===0),b.find(".assignment_quiz_link").attr("href",c.replaceTags(b.find(".assignment_quiz_url").attr("href"),"quiz_id",d.quiz_id)),b.find(".assignment_topic_link").attr("href",c.replaceTags(b.find(".assignment_topic_url").attr("href"),"discussion_topic_id",d.discussion_topic_id)),b.loadingImage("remove"),c(this).triggerHandler("assignment_updated",a),c("#full_assignment_holder .redirect_on_finish_url").ifExists(function(){var a=c(this).attr("href");a.indexOf("#")>0&&(a=a.substr(0,a.indexOf("#"))),window.location.href=a+"#assignment_"+d.id})},error:function(a,b){g(),b.loadingImage("remove"),i.formErrors(a)}}),i.find(".cancel_button").click(function(){hideFullAssignmentForm(!0)}),i.find("select.grading_type").change(function(a){i.find(".edit_letter_grades_link").showIf(c(this).val()=="letter_grade")}),i.find("#auto_peer_reviews,#manual_peer_reviews").change(function(){i.find(".auto_peer_reviews").showIf(c("#auto_peer_reviews").attr("checked"))}).change(),c(".rubric .long_description_link").click(function(a){a.preventDefault();if(!c(this).parents(".rubric").hasClass("editing")){var d=c(this).parents(".criterion").getTemplateData({textValues:["long_description","description"]}),e=c(this).parents(".criterion").hasClass("learning_outcome_criterion"),f=c("#rubric_long_description_dialog");f.fillTemplateData({data:d,htmlValues:e?["long_description"]:[]}),f.find(".editing").hide(),f.find(".displaying").show(),f.dialog("close").dialog({autoOpen:!1,title:b.t("titles.criterion_long_description","Criterion Long Description"),width:400}).dialog("open")}}),c("#edit_external_tool_url, #assignment_external_tool_tag_attributes_url").click(function(d){d.preventDefault(),a.selectContentDialog({select_button_text:b.t("buttons.select_url","Select"),no_name_input:!0,submit:function(a){c("#assignment_external_tool_tag_attributes_url").val(a["item[url]"]),c("#assignment_external_tool_tag_attributes_new_tab").val(a["item[new_tab]"])}}),c("#external_tool_create_url").val(c("#assignment_external_tool_tag_attributes_url").val())}),i.find(":input").keycodes("esc",function(a){a.preventDefault(),c(this).parents("form").find(".cancel_button").click()});var j=i.find("#assignment_assignment_group_id");attachAddAssignmentGroup(j);if(editIfNoContent){var k=c.trim(c("#full_assignment").find(".description").text());(!k||k==""||k=="No Content")&&setTimeout(g,500)}c("#assignment_group_assignment").change(function(){c("#assignment_group_category").showIf(c(this).attr("checked")),c(this).attr("checked")||c("#assignment_group_category").val(""),h()}).change(),c("#assignment_turnitin_enabled").change(function(){c("#assignment_turnitin_settings").showIf(c(this).attr("checked"))}).change(),c("#assignment_peer_reviews").change(function(){c("#assignment_peer_reviews_options").showIf(c(this).attr("checked")),c(this).attr("checked")||c("#assignment_peer_reviews_options :text").val("")}).change(),c.scrollSidebar(),c("#assignment_group_category_select").change(function(){var a=c(this);c(this).val()=="new"&&addGroupCategory&&addGroupCategory(function(b){var d=b[0].group_category,e=c(document.createElement("option"));e.text(d.name).val(d.id),a.find("option:last").before(e),a.val(d.id)})}),c("#assignment_online_upload").change(function(){c("#restrict_file_extensions_options").showIf(c(this).attr("checked"))}).change(),c("#assignment_restrict_file_extensions").change(function(){var a=c("#allowed_extensions_options");c(this).attr("checked")?a.show():(a.hide(),c("#assignment_allowed_extensions").val(""))}).change(),setTimeout(function(){if(location.hash=="#add_rubric")c(".add_rubric_link:visible:first").click();else if(location.hash=="#edit_rubric"){var a=c(".edit_rubric_link:visible:first");c("html,body").scrollTo(a.closest(".rubric")),a.click()}else c("#full_assignment_holder").hasClass("editing")&&(c(".edit_full_assignment_link:first").click(),c("#full_assignment_holder .more_options_link:first").click())},500)})}),define("grading_standards",["i18n!grading_standards","jquery","jquery.ajaxJSON","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.rails_flash_notifications","jquery.templateData","vendor/jquery.scrollTo"],function(a,b){b(document).ready(function(){b(".add_standard_link").click(function(a){a.preventDefault();var c=b("#grading_standard_blank").clone(!0).attr("id","grading_standard_new");b("#standards").append(c.show()),c.find(".edit_grading_standard_link").click()}),b(".edit_letter_grades_link").click(function(c){c.preventDefault(),b("#edit_letter_grades_form").dialog("close").dialog({title:a.t("titles.grading_scheme_info","View/Edit Grading Scheme"),autoOpen:!1,width:600,height:310}).dialog("open")}),b(".grading_standard .delete_grading_standard_link").click(function(c){c.preventDefault();var d=b(this).parents(".grading_standard"),e=d.find(".update_grading_standard_url").attr("href");d.confirmDelete({url:e,message:a.t("confirm.delete_grading_scheme","Are you sure you want to delete this grading scheme?"),success:function(a){b(this).slideUp(function(){b(this).remove()})},error:function(){b.flashError(a.t("errors.cannot_delete_grading_scheme","There was a problem deleting this grading scheme"))}})}),b(".grading_standard .done_button").click(function(a){a.preventDefault(),b("#edit_letter_grades_form").dialog("close")}),b(".grading_standard .remove_grading_standard_link").click(function(c){function d(){b("#edit_assignment_form .grading_standard_id").val(""),b("#assignment_grading_type").val("points").change(),b("#course_grading_standard_enabled").attr("checked",!1).change(),b("#course_form .grading_scheme_set").text(a.t("grading_scheme_not_set","Not Set")),f.addClass("editing"),f.find(".update_grading_standard_url").attr("href",b("#update_grading_standard_url").attr("href"));var c=b.parseJSON(b("#default_grading_standard_data").val()),d={title:"",id:null,data:c};f.fillTemplateData({data:d,id:"grading_standard_blank",avoid:".find_grading_standard",hrefValues:["id"]}).find(".edit_grading_standard_link").removeClass("read_only"),f.triggerHandler("grading_standard_updated",d),b("#edit_letter_grades_form").dialog("close"),f.undim()}c.preventDefault();var e=confirm(a.t("confirm.unlink_grading_scheme","Are you sure you want to unlink this grading scheme?"));if(!e)return!1;var f=b(this).parents(".grading_standard");f.dim();var g={"assignment[grading_standard_id]":"","assignment[grading_type]":"points"},h=b("#edit_assignment_form").attr("action");b("#update_course_url").length?(g={"course[grading_standard_id]":""},h=b("#update_course_url").attr("href")):h&&h.match(/assignments$/)&&(h=null),h?b.ajaxJSON(h,"PUT",g,d,function(){b.flashError(a.t("errors.cannot_remove_grading_scheme","There was a problem removing this grading scheme.  Please reload the page and try again."))}):d()}),b(".grading_standard .edit_grading_standard_link").click(function(a){a.preventDefault();var c=b(this).parents(".grading_standard");c.addClass("editing"),b(this).hasClass("read_only")&&c.attr("id","grading_standard_blank"),c.find(".grading_standard_row").each(function(){var a=b(this).getTemplateData({textValues:["min_score","name"]});b(this).find(".standard_value").val(a.min_score).end().find(".standard_name").val(a.name)}),b("#standards").ifExists(function(){b("html,body").scrollTo(c)}),c.find(":text:first").blur().focus().select()}),b(".grading_standard .grading_standard_brief").find(".collapse_data_link,.expand_data_link").click(function(a){a.preventDefault();var c=b(this).parents(".grading_standard_brief");c.find(".collapse_data_link,.expand_data_link").toggle(),c.find(".details").slideToggle()}),b(".grading_standard_select").live("click",function(a){a.preventDefault();var c=b(this).getTemplateData({textValues:["id"]}).id;b(".grading_standard .grading_standards_select .grading_standard_select").removeClass("selected_side_tab"),b(this).addClass("selected_side_tab"),b(".grading_standard .grading_standards .grading_standard_brief").hide(),b("#grading_standard_brief_"+c).show()}),b(".grading_standard").find(".find_grading_standard_link,.cancel_find_grading_standard_link").click(function(c){c.preventDefault(),b(this).parents(".grading_standard").find(".display_grading_standard,.find_grading_standard").toggle();var d=b(this).parents(".grading_standard").find(".find_grading_standard:visible");if(d.length>0&&!d.hasClass("loaded")){d.find(".loading_message").text(a.t("status.loading_grading_standards","Loading Grading Standards..."));var e=d.find(".grading_standards_url").attr("href");b.ajaxJSON(e,"GET",{},function(b){if(b.length===0)d.find(".loading_message").text(a.t("no_grading_standards","No grading standards found"));else{d.find(".loading_message").remove();for(var c in b){var e=b[c].grading_standard;e.user_name=e.display_name;var f=d.find(".grading_standards_select .grading_standard_select.blank:first").clone(!0);f.fillTemplateData({data:e}).data("context_code",e.context_code).removeClass("blank"),d.find(".grading_standards_select").append(f.show());var g=d.find(".grading_standard_brief.blank:first").clone(!0);g.fillTemplateData({data:e,id:"grading_standard_brief_"+e.id}).data("context_code",e.context_code),g.removeClass("blank");for(var h=0;h<e.data.length;h++){var i=e.data[h],j={name:i[0],value:h==0?100:"< "+e.data[h-1][1]*100,next_value:i[1]*100},k=g.find(".details_row.blank:first").clone(!0);k.removeClass("blank"),k.fillTemplateData({data:j}),g.find(".details > table").append(k.show())}d.find(".grading_standards").append(g)}d.find(".grading_standards_select .grading_standard_select:visible:first a:first").click()}d.addClass("loaded"),d.find(".grading_standards_holder").slideDown()},function(b){d.find(".loading_message").text(a.t("errors.cannot_load_grading_standards","Loading Grading Standards Failed.  Please Try Again"))})}}),b(".grading_standard .grading_standard_brief .select_grading_standard_link").click(function(a){a.preventDefault();var c=b(this).parents(".grading_standard_brief"),d=c.getTemplateData({textValues:["id","title"],dataValues:["context_code"]}),e=d.id,f=d.title,g=[];b(this).parents(".grading_standard_brief").find(".details_row:not(.blank)").each(function(){var a=b(this).find(".name").text(),c=parseFloat(b(this).find(".next_value").text())/100;isNaN(c)&&(c=""),g.push([a,c])}),b(this).parents(".grading_standard").triggerHandler("grading_standard_updated",{id:e,data:g,title:f});var h=b("#edit_letter_grades_form").data().context_code;b(this).parents(".grading_standard").find(".edit_grading_standard_link").toggleClass("read_only",h!=d.context_code),b(this).parents(".find_grading_standard").find(".cancel_find_grading_standard_link").click()}),b(".grading_standard .cancel_button").click(function(a){b(this).parents(".grading_standard").removeClass("editing").find(".insert_grading_standard").hide();var c=b(this).parents(".grading_standard");c.find(".to_add").remove(),c.find(".to_delete").removeClass("to_delete").show(),c.attr("id")=="grading_standard_new"&&c.remove()}),b(".grading_standard").bind("grading_standard_updated",function(c,d){var e=b(this);e.addClass("editing"),e.find(".update_grading_standard_url").attr("href",b("#update_grading_standard_url").attr("href")),e.fillTemplateData({data:d,id:"grading_standard_"+(d.id||"blank"),avoid:".find_grading_standard",hrefValues:["id"]}).fillFormData(d,{object_name:"grading_standard"});var f=e.find(".insert_grading_standard:first").clone(!0),g=e.find(".grading_standard_row:first").clone(!0).removeClass("blank"),h=e.find(".grading_standard_data");h.empty(),h.append(f.clone(!0).show());for(var i in d.data){var j=g.clone(!0),k=d.data[i];j.removeClass("to_delete").removeClass("to_add"),j.find(".standard_name").val(k[0]).attr("name","grading_standard[standard_data][scheme_"+i+"][name]").end().find(".standard_value").val(k[1]*100).attr("name","grading_standard[standard_data][scheme_"+i+"][value]"),h.append(j.show()),h.append(f.clone(!0).show())}h.find(":text:first").blur(),h.append(g.hide()),h.append(f.hide()),e.find(".grading_standard_row").each(function(){b(this).find(".name").text(b(this).find(".standard_name").val()).end().find(".min_score").text(b(this).find(".standard_value").val()).end().find(".max_score").text(b(this).find(".edit_max_score").text())}),e.removeClass("editing"),e.find(".insert_grading_standard").hide();if(d.id){e.find(".remove_grading_standard_link").removeClass("read_only");var l={"assignment[grading_standard_id]":d.id,"assignment[grading_type]":"letter_grade"},m=b("#edit_assignment_form").attr("action");b("#edit_assignment_form .grading_standard_id").val(d.id),b("#update_course_url").length?(l={"course[grading_standard_id]":d.id},m=b("#update_course_url").attr("href")):m&&m.match(/assignments$/)&&(m=null),m&&b.ajaxJSON(m,"PUT",l,function(c){b("#course_form .grading_scheme_set").text(c&&c.course&&c.course.grading_standard_title||a.t("grading_scheme_currently_set","Currently Set"))},function(){})}else e.find(".remove_grading_standard_link").addClass("read_only")}),b(".grading_standard .save_button").click(function(c){var d=b(this).parents(".grading_standard"),e=b("#edit_letter_grades_form .create_grading_standard_url,#create_grading_standard_url").attr("href"),f="POST";d.attr("id")!="grading_standard_blank"&&d.attr("id")!="grading_standard_new"&&(e=b(this).parents(".grading_standard").find(".update_grading_standard_url").attr("href"),f="PUT");var g=d.find(".standard_title,.grading_standard_row:visible").getFormData();d.find("button").attr("disabled",!0).filter(".save_button").text(a.t("status.saving","Saving...")),b.ajaxJSON(e,f,g,function(b){var c=b.grading_standard;d.find("button").attr("disabled",!1).filter(".save_button").text(a.t("buttons.save","Save")),d.triggerHandler("grading_standard_updated",c)},function(){d.find("button").attr("disabled",!1).filter(".save_button").text(a.t("errors.save_failed","Save Failed"))})}),b(".grading_standard thead").mouseover(function(a){if(!b(this).parents(".grading_standard").hasClass("editing"))return;b(this).parents(".grading_standard").find(".insert_grading_standard").hide(),b(this).parents(".grading_standard").find(".insert_grading_standard:first").show()}),b(".grading_standard .grading_standard_row").mouseover(function(a){if(!b(this).parents(".grading_standard").hasClass("editing"))return;b(this).parents(".grading_standard").find(".insert_grading_standard").hide();var c=a.pageY,d=b(this).offset(),e=b(this).height();c>d.top+e/2?b(this).next(".insert_grading_standard").show():b(this).prev(".insert_grading_standard").show()}),b(".grading_standard .insert_grading_standard_link").click(function(a){a.preventDefault();if(b(this).parents(".grading_standard").find(".grading_standard_row").length>40)return;var c=b(this).parents(".grading_standard"),d=c.find(".grading_standard_row:first").clone(!0).removeClass("blank"),e=c.find(".insert_grading_standard:first").clone(!0),f=null;while(!f||b(".standard_name[name='grading_standard[standard_data][scheme_"+f+"][name]']").length>0)f=Math.round(Math.random()*1e4);d.find(".standard_name").val("-").attr("name","grading_standard[standard_data][scheme_"+f+"][name]"),d.find(".standard_value").attr("name","grading_standard[standard_data][scheme_"+f+"][value]"),b(this).parents(".insert_grading_standard").after(d.show()),d.after(e),c.find(":text:first").blur(),d.find(":text:first").focus().select(),d.addClass("to_add")}),b(".grading_standard .delete_row_link").click(function(a){a.preventDefault();if(b(this).parents(".grading_standard").find(".grading_standard_row:visible").length<2)return;var c=b(this).parents(".grading_standard_row");c.prev(".insert_grading_standard").length>0?c.prev(".insert_grading_standard").remove():c.next(".insert_grading_standard").remove(),c.fadeOut(function(){b(this).addClass("to_delete"),b(".grading_standard input[type='text']:first").triggerHandler("change")})}),b(".grading_standard input[type='text']").bind("blur change",function(){var a=b(this).parents(".grading_standard"),c=parseFloat(b(this).parents(".grading_standard_row").find(".standard_value").val());c=Math.round(c*10)/10,b(this).parents(".grading_standard_row").find(".standard_value").val(c),isNaN(c)&&(c=null);var d=c||100,e=c||0,f=a.find(".grading_standard_row:not(.blank,.to_delete)");for(var g=f.index(b(this).parents(".grading_standard_row"))+1;g<f.length;g++){var h=f.eq(g),i=parseFloat(h.find(".standard_value").val());isNaN(i)&&(i=null);if(g==f.length-1)i=0;else if(!i||i>d-.1)i=parseInt(d)-1;h.find(".standard_value").val(i),d=i}for(var g=f.index(b(this).parents(".grading_standard_row"))-1;g>=0;g--){var h=f.eq(g),i=parseFloat(h.find(".standard_value").val());isNaN(i)&&(i=null);if(g==f.length-1)i=0;else if(!i||i<e+.1)i=parseInt(e)+1;e=i,h.find(".standard_value").val(i)}d=100,f.each(function(a){var c=parseFloat(b(this).find(".standard_value").val()),a=f.index(this);isNaN(c)&&(c=null);if(a==f.length-1)c=0;else if(!c||c>d-.1)c=parseInt(d)-1;b(this).find(".standard_value").val(c),d=c}),e=0;for(var g=f.length-1;g>=0;g--){var h=f.eq(g),i=parseFloat(h.find(".standard_value").val());isNaN(i)&&(i=null);if(g==f.length-1)i=0;else if(!i||i<e+.1)i=parseInt(e)+1;e=i,h.find(".standard_value").val(i)}f.each(function(a){var c=f.eq(a-1),d=0;c&&c.length>0&&(d=parseFloat(c.find(".standard_value").val()),isNaN(d)&&(d=0),b(this).find(".edit_max_score").text("< "+d))}),f.filter(":first").find(".edit_max_score").text(100)})})}),function(){require(["full_assignment","grading_standards"])}.call(this),define("compiled/bundles/full_assignment",function(){})