define("translations/quizzes.timing",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{quizzes:{timing:{labels:{time_elapsed:"Tiempo Transcurrido",time_remaining:"Tiempo Restante"}}}}}})}),define("quiz_timing",["i18n!quizzes.timing","jquery","vendor/date"],function(a,b){var c={initialTime:new Date,initTimes:function(){if(c.timesReady)return c.clientServerDiff;var a=Date.parse(b(".now").text())||c.initialTime||new Date,d=c.initialTime||new Date;c.clientServerDiff=a.getTime()-d.getTime(),c.timesReady=!0},setReferenceDate:function(d,e,f){c.timesReady||c.initTimes();var g={};return g.referenceDate=Date.parse(e),g.isDeadline=!0,b(".time_header").text(a.beforeLabel("time_remaining","Time Remaining")),g.referenceDate||(g.isDeadline=!1,b(".time_header").text(a.beforeLabel("time_elapsed","Time Elapsed")),g.referenceDate=Date.parse(d)),g.clientServerDiff=c.clientServerDiff,g}};return c}),function(){define("compiled/behaviors/autoBlurActiveInput",[],function(){var a,b;return a=!1,b=!1,function(c){c==null&&(c=!0),a=c;if(b)return;return b=!0,$(window).bind({blur:function(b){if(a&&document.activeElement&&window===b.target)return $(document.activeElement).filter(":input").change().triggerHandler("blur")},focus:function(b){if(a&&document.activeElement&&window===b.target)return $(document.activeElement).filter(":input").triggerHandler("focus")}})}})}.call(this),define("translations/quizzes.take_quiz",["i18nObj","jquery"],function(a,b){b.extend(!0,a,{translations:{es:{quizzes:{take_quiz:{confirms:{navigate_away:"Está a punto de navegar hacia otra página. ¿Desea Continuar?",unanswered_questions:{one:"Tiene 1 pregunta sin contestar (vea la barra a la derecha para los detalles). ¿Desea enviar?",other:"Tiene %{count} preguntas sin contestar (vea la barra a la derecha para los detalles). ¿Desea enviar?"},unfinished_quiz:"Está a punto de dejar la evaluación incompleta. ¿Desea Continuar?"},days_count:{one:"1 Día",other:"%{count} Días"},errors:{connection_lost:"Se perdió la conexión a %{host} . Asegúrese que está conectado al internet antes de continuar.",only_numerical_values:"Sólo se aceptan valores numéricos"},hide_time_link:"Esconder",hours_count:{one:"1 Hora",other:"%{count} Horas"},minutes_count:{one:"1 Minuto",other:"%{count} Minutos"},months_count:{one:"1 Mes",other:"%{count} Meses"},notices:{extra_time:"Ha recibido tiempo extra en este intento",five_minutes_left:"Cinco Minutos Restantes",one_minute_left:"Un Minuto Restante",thirty_minutes_left:"Treinta Minutos Restantes",twelve_hours_left:"Doce Horas Restantes"},seconds_count:{one:"1 Segundo",other:"%{count} Segundos"},show_time_link:"Mostrar",titles:{answered:"Contestado",come_back_later:"Marcó esta pregunta para regresar a ella",not_answered:"Aún no ha Contestado",times_up:"¡Se acabó el tiempo!"},years_count:{one:"1 Año",other:"%{count} Años"}}}}}})}),define("vendor/ui.selectmenu",["jquery","vendor/jquery.scrollTo","jqueryui/widget"],function(a){a.widget("ui.selectmenu",{getter:"value",version:"1.9",eventPrefix:"selectmenu",options:{transferClasses:!0,appendTo:"body",typeAhead:1e3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var b=this,c=this.options,d=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(":","\\:");this.ids=[d,d+"-button",d+"-menu"],this._safemouseup=!0,this.isOpen=!1,this.newelement=a("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]}),this.newelementWrap=a("<span />").append(this.newelement).insertAfter(this.element);var e=this.element.attr("tabindex");e&&this.newelement.attr("tabindex",e),this.newelement.data("selectelement",this.element),this.selectmenuIcon=a('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement),this.newelement.prepend('<span class="'+b.widgetBaseClass+'-status" />'),this.element.bind({"click.selectmenu":function(a){b.newelement.focus(),a.preventDefault()}}),this.newelement.bind("mousedown.selectmenu",function(a){return b._toggle(a,!0),c.style=="popup"&&(b._safemouseup=!1,setTimeout(function(){b._safemouseup=!0},300)),!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(c){var d=!1;switch(c.keyCode){case a.ui.keyCode.ENTER:d=!0;break;case a.ui.keyCode.SPACE:b._toggle(c);break;case a.ui.keyCode.UP:c.altKey?b.open(c):b._moveSelection(-1);break;case a.ui.keyCode.DOWN:c.altKey?b.open(c):b._moveSelection(1);break;case a.ui.keyCode.LEFT:b._moveSelection(-1);break;case a.ui.keyCode.RIGHT:b._moveSelection(1);break;case a.ui.keyCode.TAB:d=!0;break;case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.HOME:b.index(0);break;case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.END:b.index(b._optionLis.length);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){return a.which>0&&b._typeAhead(a.which,"mouseup"),!0}).bind("mouseover.selectmenu",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){c.disabled||a(this).removeClass("ui-state-focus")}),a(document).bind("mousedown.selectmenu-"+this.ids[0],function(a){b.isOpen&&b.close(a)}),this.element.bind("click.selectmenu",function(){b._refreshValue()}).bind("focus.selectmenu",function(){b.newelement&&b.newelement[0].focus()}),c.width||(c.width=this.element.outerWidth()),this.newelement.width(c.width),this.element.hide(),this.list=a("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]}),this.listWrap=a("<div />",{"class":b.widgetBaseClass+"-menu"}).append(this.list).appendTo(c.appendTo),this.list.bind("keydown.selectmenu",function(c){var d=!1;switch(c.keyCode){case a.ui.keyCode.UP:c.altKey?b.close(c,!0):b._moveFocus(-1);break;case a.ui.keyCode.DOWN:c.altKey?b.close(c,!0):b._moveFocus(1);break;case a.ui.keyCode.LEFT:b._moveFocus(-1);break;case a.ui.keyCode.RIGHT:b._moveFocus(1);break;case a.ui.keyCode.HOME:b._moveFocus(":first");break;case a.ui.keyCode.PAGE_UP:b._scrollPage("up");break;case a.ui.keyCode.PAGE_DOWN:b._scrollPage("down");break;case a.ui.keyCode.END:b._moveFocus(":last");break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:b.close(c,!0),a(c.target).parents("li:eq(0)").trigger("mouseup");break;case a.ui.keyCode.TAB:d=!0,b.close(c,!0),a(c.target).parents("li:eq(0)").trigger("mouseup");break;case a.ui.keyCode.ESCAPE:b.close(c,!0);break;default:d=!0}return d}).bind("keypress.selectmenu",function(a){return a.which>0&&b._typeAhead(a.which,"focus"),!0}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1}),a(window).bind("resize.selectmenu-"+this.ids[0],a.proxy(b.close,this))},_init:function(){var b=this,c=this.options,d=[];this.element.find("option").each(function(){var e=a(this);d.push({value:e.attr("value"),text:b._formatText(e.text()),selected:e.attr("selected"),disabled:e.attr("disabled"),classes:e.attr("class"),typeahead:e.attr("typeahead"),parentOptGroup:e.parent("optgroup"),bgImage:c.bgImage.call(e)})});var e=b.options.style=="popup"?" ui-state-active":"";this.list.html("");if(d.length)for(var f=0;f<d.length;f++){var g={role:"presentation"};d[f].disabled&&(g["class"]=this.namespace+"-state-disabled");var h={html:d[f].text||"&nbsp;",href:"#nogo",tabindex:-1,role:"option","aria-selected":!1};d[f].disabled&&(h["aria-disabled"]=d[f].disabled),d[f].typeahead&&(h.typeahead=d[f].typeahead);var i=a("<a/>",h),j=a("<li/>",g).append(i).data("index",f).addClass(d[f].classes).data("optionClasses",d[f].classes||"").bind("mouseup.selectmenu",function(c){if(b._safemouseup&&!b._disabled(c.currentTarget)&&!b._disabled(a(c.currentTarget).parents("ul>li."+b.widgetBaseClass+"-group "))){var d=a(this).data("index")!=b._selectedIndex();b.index(a(this).data("index")),b.select(c),d&&b.change(c),b.close(c,!0)}return!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu focus.selectmenu",function(c){!a(c.currentTarget).hasClass(b.namespace+"-state-disabled")&&!a(c.currentTarget).parent("ul").parent("li").hasClass(b.namespace+"-state-disabled")&&(b._selectedOptionLi().addClass(e),b._focusedOptionLi().removeClass(b.widgetBaseClass+"-item-focus ui-state-hover"),a(this).removeClass("ui-state-active").addClass(b.widgetBaseClass+"-item-focus ui-state-hover"))}).bind("mouseout.selectmenu blur.selectmenu",function(){a(this).is(b._selectedOptionLi().selector)&&a(this).addClass(e),a(this).removeClass(b.widgetBaseClass+"-item-focus ui-state-hover")});if(d[f].parentOptGroup.length){var k=b.widgetBaseClass+"-group-"+this.element.find("optgroup").index(d[f].parentOptGroup);this.list.find("li."+k).length?this.list.find("li."+k+":last ul").append(j):a(' <li role="presentation" class="'+b.widgetBaseClass+"-group "+k+(d[f].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+b.widgetBaseClass+'-group-label">'+d[f].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(j)}else j.appendTo(this.list);if(c.icons)for(var l in c.icons)if(j.is(c.icons[l].find)){j.data("optionClasses",d[f].classes+" "+b.widgetBaseClass+"-hasIcon").addClass(b.widgetBaseClass+"-hasIcon");var m=c.icons[l].icon||"";j.find("a:eq(0)").prepend('<span class="'+b.widgetBaseClass+"-item-icon ui-icon "+m+'"></span>'),d[f].bgImage&&j.find("span").css("background-image",d[f].bgImage)}}else a('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);var n=c.style=="dropdown";this.newelement.toggleClass(b.widgetBaseClass+"-dropdown",n).toggleClass(b.widgetBaseClass+"-popup",!n),this.list.toggleClass(b.widgetBaseClass+"-menu-dropdown ui-corner-bottom",n).toggleClass(b.widgetBaseClass+"-menu-popup ui-corner-all",!n).find("li:first").toggleClass("ui-corner-top",!n).end().find("li:last").addClass("ui-corner-bottom"),this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",n).toggleClass("ui-icon-triangle-2-n-s",!n);if(c.transferClasses){var o=this.element.attr("class")||"";this.newelement.add(this.list).addClass(o)}c.style=="dropdown"?this.list.width(c.menuWidth?c.menuWidth:c.width):this.list.width(c.menuWidth?c.menuWidth:c.width-c.handleWidth),this.list.css("height","auto");var p=this.listWrap.height(),q=a(window).height(),r=c.maxHeight?Math.min(c.maxHeight,q):q/3;p>r&&this.list.height(r),this._optionLis=this.list.find("li:not(."+b.widgetBaseClass+"-group)"),this.element.attr("disabled")?this.disable():this.enable(),this.index(this._selectedIndex()),this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-focus"),clearTimeout(this.refreshTimeout),this.refreshTimeout=window.setTimeout(function(){b._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu"),a(window).unbind(".selectmenu-"+this.ids[0]),a(document).unbind(".selectmenu-"+this.ids[0]),this.newelementWrap.remove(),this.listWrap.remove(),this.element.unbind(".selectmenu").show(),a.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(a,b){var c=this,d=String.fromCharCode(a).toLowerCase(),e=null,f=null;c._typeAhead_timer&&(window.clearTimeout(c._typeAhead_timer),c._typeAhead_timer=undefined),c._typeAhead_chars=(c._typeAhead_chars===undefined?"":c._typeAhead_chars).concat(d),c._typeAhead_chars.length<2||c._typeAhead_chars.substr(-2,1)===d&&c._typeAhead_cycling?(c._typeAhead_cycling=!0,e=d):(c._typeAhead_cycling=!1,e=c._typeAhead_chars);var g=(b!=="focus"?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||0;for(var h=0;h<this._optionLis.length;h++){var i=this._optionLis.eq(h).text().substr(0,e.length).toLowerCase();if(i===e)if(c._typeAhead_cycling){f===null&&(f=h);if(h>g){f=h;break}}else f=h}f!==null&&this._optionLis.eq(f).find("a").trigger(b),c._typeAhead_timer=window.setTimeout(function(){c._typeAhead_timer=undefined,c._typeAhead_chars=undefined,c._typeAhead_cycling=undefined},c.options.typeAhead)},_uiHash:function(){var b=this.index();return{index:b,option:a("option",this.element).get(b),value:this.element[0].value}},open:function(a){var b=this,c=this.options;if(b.newelement.attr("aria-disabled")!="true"){b._closeOthers(a),b.newelement.addClass("ui-state-active"),b.listWrap.appendTo(c.appendTo),b.list.attr("aria-hidden",!1),b.listWrap.addClass(b.widgetBaseClass+"-open");var d=this._selectedOptionLi();c.style=="dropdown"?b.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5e3).scrollTop(this.list.scrollTop()+d.position().top-this.list.outerHeight()/2+d.outerHeight()/2).css("left","auto"),b._refreshPosition();var e=d.find("a");e.length&&e[0].focus(),b.isOpen=!0,b._trigger("open",a,b._uiHash())}},close:function(a,b){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),this.options.style=="dropdown"&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),b&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",a,this._uiHash()))},change:function(a){this.element.trigger("change"),this._trigger("change",a,this._uiHash())},select:function(a){if(this._disabled(a.currentTarget))return!1;this._trigger("select",a,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(b){a("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){a(this).data("selectelement").selectmenu("close",b)}),a("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(a,b){this.isOpen?this.close(a,b):this.open(a)},_formatText:function(b){return this.options.format?b=this.options.format(b):this.options.escapeHtml&&(b=a("<div />").text(b).html()),b},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a,b){if(!this.options.disabled){var c=parseInt(this._selectedOptionLi().data("index")||0,10),d=c+a;d<0&&(d=0),d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(a>0?++a:--a,this._moveSelection(a,d)):this._optionLis.eq(d).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(a,b){if(!isNaN(a))var c=parseInt(this._focusedOptionLi().data("index")||0,10),d=c+a;else var d=parseInt(this._optionLis.filter(a).data("index"),10);d<0&&(d=0),d>this._optionLis.size()-1&&(d=this._optionLis.size()-1);if(d===b)return!1;var e=this.widgetBaseClass+"-item-"+Math.round(Math.random()*1e3);this._focusedOptionLi().find("a:eq(0)").attr("id",""),this._optionLis.eq(d).hasClass(this.namespace+"-state-disabled")?(a>0?++a:--a,this._moveFocus(a,d)):this._optionLis.eq(d).find("a:eq(0)").attr("id",e).focus(),this.list.attr("aria-activedescendant",e)},_scrollPage:function(a){var b=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());b=a=="up"?-b:b,this._moveFocus(b)},_setOption:function(a,b){this.options[a]=b,a=="disabled"&&(b&&this.close(),this.element.add(this.newelement).add(this.list)[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").attr("aria-disabled",b))},disable:function(a,b){typeof a=="undefined"?this._setOption("disabled",!0):b=="optgroup"?this._disableOptgroup(a):this._disableOption(a)},enable:function(a,b){typeof a=="undefined"?this._setOption("disabled",!1):b=="optgroup"?this._enableOptgroup(a):this._enableOption(a)},_disabled:function(b){return a(b).hasClass(this.namespace+"-state-disabled")},_disableOption:function(a){var b=this._optionLis.eq(a);b&&(b.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(a).attr("disabled","disabled"))},_enableOption:function(a){var b=this._optionLis.eq(a);b&&(b.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(a).removeAttr("disabled"))},_disableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+a);b&&(b.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(a).attr("disabled","disabled"))},_enableOptgroup:function(a){var b=this.list.find("li."+this.widgetBaseClass+"-group-"+a);b&&(b.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(a).removeAttr("disabled"))},index:function(b){if(!arguments.length)return this._selectedIndex();if(!this._disabled(a(this._optionLis[b])))this.element[0].selectedIndex=b,this._refreshValue();else return!1},value:function(a){if(arguments.length)this.element[0].value=a,this._refreshValue();else return this.element[0].value},_refreshValue:function(){var a=this.options.style=="popup"?" ui-state-active":"",b=this.widgetBaseClass+"-item-"+Math.round(Math.random()*1e3);this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","false").attr("id",""),this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","true").attr("id",b);var c=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",d=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(c).data("optionClasses",d).addClass(d).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html()),this.list.attr("aria-activedescendant",b)},_refreshPosition:function(){var a=this.options;if(a.style=="popup"&&!a.positionOptions.offset)var b=this._selectedOptionLi(),c="0 "+(this.list.offset().top-b.offset().top-(this.newelement.outerHeight()+b.outerHeight())/2);this.listWrap.zIndex(this.element.zIndex()+1).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||c,collision:a.positionOptions.collision||a.style=="popup"?"fit":"flip"})}})}),function(){define("compiled/behaviors/quiz_selectmenu",["jquery","vendor/ui.selectmenu"],function(a){return a(function(){return a(".question select").css({"-webkit-appearance":"none","font-size":"100%","padding-right":"60px"}).selectmenu({escapeHtml:!0})})})}.call(this),define("take_quiz",["i18n!quizzes.take_quiz","jquery","quiz_timing","compiled/behaviors/autoBlurActiveInput","jquery.ajaxJSON","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.rails_flash_notifications","compiled/tinymce","tinymce.editor_box","vendor/jquery.scrollTo","compiled/behaviors/quiz_selectmenu"],function(a,b,c,d){var e=null,f=function(){var d=0,e=b(".started_at"),g=b(".end_at"),h=e.text(),i=g.text(),j=i&&new Date(i),k=b(".countdown_seconds"),l=b(".time_running,.time_remaining"),m=b("#last_saved_indicator");return{referenceDate:null,countDown:null,isDeadline:!0,fiveMinuteDeadline:!1,oneMinuteDeadline:!1,submitting:!1,dialogged:!1,contentBoxCounter:0,lastSubmissionUpdate:new Date,currentlyBackingUp:!1,started_at:e,end_at:g,time_limit:parseInt(b(".time_limit").text(),10)||null,updateSubmission:function(c){if(f.submitting&&!c)return;var d=new Date;if(d-f.lastSubmissionUpdate<1e3)return;if(f.currentlyBackingUp)return;f.currentlyBackingUp=!0,f.lastSubmissionUpdate=new Date;var e=b("#submit_quiz_form").getFormData();b(".question_holder .question.marked").each(function(){e[b(this).attr("id")+"_marked"]="1"}),m.text(a.t("saving","Saving...")),b.ajaxJSON(b(".backup_quiz_submission_url").attr("href"),"PUT",e,function(d){m.text(a.t("saved_at","Saved at %{t}",{t:b.friendlyDatetime(new Date)})),f.currentlyBackingUp=!1,c&&setTimeout(function(){f.updateSubmission(!0)},3e4);if(d&&d.end_at){var e=Date.parse(d.end_at),g=Date.parse(f.end_at.text()),h=e.getTime(),k=g.getTime();f.referenceDate=null,h!==k&&(h>k?b.flashMessage(a.t("notices.extra_time","You have been given extra time on this attempt")):b.flashMessage(a.t("notices.less_time","Your time for this quiz has been reduced.")),f.end_at.text(d.end_at),i=d.end_at,j=new Date(d.end_at))}},function(){var d=b("#identity .user_id").text()||"none";f.currentlyBackingUp=!1,b.ajaxJSON(location.protocol+"//"+location.host+"/simple_response.json?user_id="+d+"&rnd="+Math.round(Math.random()*9999999),"GET",{},function(){},function(){ajaxErrorFlash(a.t("errors.connection_lost","Connection to %{host} was lost.  Please make sure you're connected to the Internet before continuing.",{host:location.host}),request)},{skipDefaultError:!0}),c&&setTimeout(function(){f.updateSubmission(!0)},3e4)},{timeout:5e3})},updateTime:function(){var e=new Date,g=f.time_limit?i:null;d=(d+1)%120;if(d==0&&!g&&!f.twelveHourDeadline){f.referenceDate=null;var l=j;!f.time_limit&&l-e<432e5&&(g=i)}f.referenceDate||b.extend(f,c.setReferenceDate(h,g,e));if(f.countDown){var m=f.countDown.getTime()-e.getTime()-f.clientServerDiff;m<=0&&(m=0);var n=new Date(m);k.text(n.getUTCSeconds()),m<=0&&!f.submitting&&(f.submitting=!0,b("#submit_quiz_form").submit())}var m=f.referenceDate.getTime()-e.getTime()-f.clientServerDiff;f.isDeadline&&(m<1e3&&(m=0),m<1e3&&!f.dialogged?(f.dialogged=!0,f.countDown=new Date(e.getTime()+1e4),b("#times_up_dialog").show().dialog({title:a.t("titles.times_up","Time's Up!"),width:"auto",height:"auto",modal:!0,overlay:{backgroundColor:"#000",opacity:.7},close:function(){f.submitting||(f.submitting=!0,b("#submit_quiz_form").submit())}})):m>3e4&&m<6e4&&!f.oneMinuteDeadline?(f.oneMinuteDeadline=!0,b.flashMessage(a.t("notices.one_minute_left","One Minute Left"))):m>25e4&&m<3e5&&!f.fiveMinuteDeadline?(f.fiveMinuteDeadline=!0,b.flashMessage(a.t("notices.five_minutes_left","Five Minutes Left"))):m>18e5&&m<177e4&&!f.thirtyMinuteDeadline?(f.thirtyMinuteDeadline=!0,b.flashMessage(a.t("notices.thirty_minutes_left","Thirty Minutes Left"))):m>432e5&&m<4317e4&&!f.twelveHourDeadline&&(f.twelveHourDeadline=!0,b.flashMessage(a.t("notices.twelve_hours_left","Twelve Hours Left")))),f.updateTimeString(m)},updateTimeString:function(b){var c=new Date(Math.abs(b)),d=c.getUTCFullYear()-1970,e=c.getUTCMonth(),f=c.getUTCDate()-1,g=c.getUTCHours(),h=c.getUTCMinutes(),i=c.getUTCSeconds(),j=[];d&&j.push(a.t("years_count","Year",{count:d})),e&&j.push(a.t("months_count","Month",{count:e})),f&&j.push(a.t("days_count","Day",{count:f})),g&&j.push(a.t("hours_count","Hour",{count:g})),j.push(a.t("minutes_count","Minute",{count:h})),j.push(a.t("seconds_count","Second",{count:i})),l.text(j.join(", "))}}}();b(document).mousedown(function(a){e=b(a.target).parents(".answer")[0]}).keydown(function(){e=null}),b(function(){b.scrollSidebar(),d(),b("#preview_mode_link").length==0&&(window.onbeforeunload=function(){f.updateSubmission();if(!f.submitting&&!f.alreadyAcceptedNavigatingAway)return a.t("confirms.unfinished_quiz","You're about to leave the quiz unfinished.  Continue anyway?")},b(document).delegate("a","click",function(c){if(b(this).closest(".ui-dialog,.mceToolbar,.ui-selectmenu").length>0)return;if(!c.isDefaultPrevented()){var d=b(this).attr("href")||"",e=location.href;e.indexOf("#")&&(e=e.substring(0,e.indexOf("#")));if(d.indexOf("#")==0||d.indexOf(e+"#")==0)return;var g=confirm(a.t("confirms.navigate_away","You're about to navigate away from this page.  Continue anyway?"));g?f.alreadyAcceptedNavigatingAway=!0:c.preventDefault()}}));var c=b("#questions");b("#question_list").delegate(".jump_to_question_link","click",function(a){a.preventDefault();var c=b(b(this).attr("href"));b("html,body").scrollTo(c.parent()),c.find(":input:first").focus().select()}).find(".list_question").bind({mouseenter:function(c){var d=b(this),e=d.data(),f=a.t("titles.not_answered","Haven't Answered yet");d.hasClass("marked")?f=a.t("titles.come_back_later","You marked this question to come back to later"):d.hasClass("answered")&&(f=a.t("titles.answered","Answered")),d.attr("title",f),e.relatedQuestion||(e.relatedQuestion=b("#"+d.attr("id").substring(5))),e.relatedQuestion.addClass("related")},mouseleave:function(a){var c=b(this).data("relatedQuestion");c&&c.removeClass("related")}}),c.find(".group_top,.answer_select").bind({mouseenter:function(a){b(this).addClass("hover")},mouseleave:function(a){b(this).removeClass("hover")}}),c.delegate(":checkbox,:radio,label","change mouseup",function(a){var c=b(this).parents(".answer");e==c[0]&&(c.find(":checkbox,:radio").blur(),f.updateSubmission())}).delegate(":text,textarea,select","change",function(a,c){var d=b(this);if(d.hasClass("numerical_question_input")){var e=parseFloat(d.val());d.val(isNaN(e)?"":e.toFixed(4))}c!==!1&&f.updateSubmission()}).delegate(".numerical_question_input",{keyup:function(c){var d=b(this).val();d===""||!isNaN(parseFloat(d))?b(this).triggerHandler("focus"):b(this).errorBox(a.t("errors.only_numerical_values","only numerical values are accepted"))}}).delegate(".flag_question","click",function(){var a=b(this).parents(".question");a.toggleClass("marked"),b("#list_"+a.attr("id")).toggleClass("marked")}).delegate(".question_input","change",function(a,c,d){var e=b(this),f=this.tagName.toUpperCase(),g=e.parents(".question").attr("id"),h="";if(f=="A")return;if(d){if(d[g])return;d[g]=!0}if(f=="TEXTAREA")h=e.editorBox("get_code");else if(e.attr("type")=="text")h=e.val();else if(f=="SELECT"){var i=e.parents(".question").find("select.question_input");h=!i.filter(function(){return!b(this).val()}).length}else e.parents(".question").find(".question_input").each(function(){if(b(this).attr("checked")||b(this).attr("selected"))h=!0});b("#list_"+g)[h?"addClass":"removeClass"]("answered")}).find(".question_input").trigger("change",[!1,{}]),setInterval(function(){b("textarea.question_input").each(function(){b(this).triggerHandler("change",!1)})},2500),b(".hide_time_link").click(function(c){c.preventDefault(),b(".time_running").css("visibility")!="hidden"?(b(".time_running").css("visibility","hidden"),b(this).text(a.t("show_time_link","Show"))):(b(".time_running").css("visibility","visible"),b(this).text(a.t("hide_time_link","Hide")))}),setTimeout(function(){b("#question_list .list_question").each(function(){var a=b(this);a.find(".jump_to_question_link").text()=="Spacer"&&a.remove()})},1e3),b("#submit_quiz_form input[type=text]").keypress(function(a){if(a.keyCode==13)return!1}),b("#submit_quiz_form").submit(function(c){b(".question_holder textarea.question_input").each(function(){b(this).change()}),unanswered=b("#question_list .list_question:not(.answered)").length;if(unanswered&&!f.submitting){var d=confirm(a.t("confirms.unanswered_questions",{one:"You have 1 unanswered question (see the right sidebar for details).  Submit anyway?",other:"You have %{count} unanswered questions (see the right sidebar for details).  Submit anyway?"},{count:unanswered}));if(!d)return c.preventDefault(),c.stopPropagation(),!1}f.submitting=!0}),b(".submit_quiz_button").click(function(a){a.preventDefault(),b("#times_up_dialog").dialog("close")}),setTimeout(function(){b(".question_holder textarea.question_input").each(function(){b(this).attr("id","question_input_"+f.contentBoxCounter++),b(this).editorBox()})},2e3),setInterval(f.updateTime,400);var g=b("#identity .user_id").text()||"none";setInterval(function(){b.ajaxJSON(location.protocol+"//"+location.host+"/simple_response.json?user_id="+g+"&rnd="+Math.round(Math.random()*9999999),"GET",{},function(){},function(){ajaxErrorFlash(a.t("errors.connection_lost","Connection to %{host} was lost.  Please make sure you're connected to the Internet before continuing.",{host:location.host}),request)},{skipDefaultError:!0})},3e4),setTimeout(function(){f.updateSubmission(!0)},15e3)})}),function(){require(["quiz_timing","take_quiz"])}.call(this),define("compiled/bundles/take_quiz",function(){})