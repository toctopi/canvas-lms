(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};define(["i18n!gradebook2","compiled/gradebook2/GRADEBOOK_TRANSLATIONS","jquery","underscore","compiled/grade_calculator","compiled/userSettings","vendor/spin","compiled/multi_grid","compiled/SubmissionDetailsDialog","compiled/gradebook2/AssignmentGroupWeightsDialog","compiled/gradebook2/SubmissionCell","compiled/gradebook2/GradebookHeaderMenu","str/htmlEscape","jst/gradebook_uploads_form","jst/gradebook2/section_to_show_menu","jst/gradebook2/column_header","jst/gradebook2/group_total_cell","jst/gradebook2/row_student_name","jst/_avatar","jquery.ajaxJSON","jquery.instructure_date_and_time","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","jqueryui/mouse","jqueryui/position","jqueryui/sortable","compiled/jquery.kylemenu","compiled/jquery/fixDialogButtons"],function(c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u;return u=function(){function v(b){var c,d=this;this.options=b,this.initGrid=a(this.initGrid,this),this.initHeader=a(this.initHeader,this),this.hoverMinimizedCell=a(this.hoverMinimizedCell,this),this.unminimizeColumn=a(this.unminimizeColumn,this),this.minimizeColumn=a(this.minimizeColumn,this),this.fixColumnReordering=a(this.fixColumnReordering,this),this.unhighlightColumns=a(this.unhighlightColumns,this),this.highlightColumn=a(this.highlightColumn,this),this.calculateStudentGrade=a(this.calculateStudentGrade,this),this.groupTotalFormatter=a(this.groupTotalFormatter,this),this.staticCellFormatter=a(this.staticCellFormatter,this),this.cellFormatter=a(this.cellFormatter,this),this.updateSubmissionsFromExternal=a(this.updateSubmissionsFromExternal,this),this.updateSubmission=a(this.updateSubmission,this),this.gotSubmissionsChunk=a(this.gotSubmissionsChunk,this),this.getSubmissionsChunks=a(this.getSubmissionsChunks,this),this.buildRows=a(this.buildRows,this),this.handleAssignmentMutingChange=a(this.handleAssignmentMutingChange,this),this.rowFilter=a(this.rowFilter,this),this.columnSortFn=a(this.columnSortFn,this),this.arrangeColumnsBy=a(this.arrangeColumnsBy,this),this.gotChunkOfStudents=a(this.gotChunkOfStudents,this),this.gotSections=a(this.gotSections,this),this.gotAssignmentGroups=a(this.gotAssignmentGroups,this),this.chunk_start=0,this.students={},this.rows=[],this.studentsPage=1,this.sortFn=function(a){return a.sortable_name},this.assignmentsToHide=h.contextGet("hidden_columns")||[],this.sectionToShow=h.contextGet("grading_show_only_section"),this.show_attendance=h.contextGet("show_attendance"),this.include_ungraded_assignments=h.contextGet("include_ungraded_assignments"),e.subscribe("assignment_group_weights_changed",this.buildRows),e.subscribe("assignment_muting_toggled",this.handleAssignmentMutingChange),e.subscribe("submissions_updated",this.updateSubmissionsFromExternal),c=e.when(e.ajaxJSON(this.options.students_url,"GET"),e.ajaxJSON(this.options.assignment_groups_url,"GET",{},this.gotAssignmentGroups),e.ajaxJSON(this.options.sections_url,"GET",{},this.gotSections)).then(function(a){var b,c,e;return c=a[0],b=a[1],e=a[2],d.gotChunkOfStudents(c,e)}),this.spinner=new i,e(this.spinner.spin().el).css({opacity:.5,top:"50%",left:"50%"}).addClass("use-css-transitions-for-show-hide").appendTo("#main")}var u;return v.name="Gradebook",u={assignment:{min:10,max:200},assignmentGroup:{min:35,max:200},total:{min:85,max:100}},v.prototype.gotAssignmentGroups=function(a){var b,c,d,f,g;this.assignmentGroups={},this.assignments={},new l({context:this.options,assignmentGroups:a}),g=[];for(d=0,f=a.length;d<f;d++)c=a[d],o(c),this.assignmentGroups[c.id]=c,g.push(function(){var a,d,f,g;f=c.assignments,g=[];for(a=0,d=f.length;a<d;a++)b=f[a],o(b),b.assignment_group=c,b.due_at&&(b.due_at=e.parseFromISO(b.due_at)),g.push(this.assignments[b.id]=b);return g}.call(this));return g},v.prototype.gotSections=function(a){var b,c,d;this.sections={};for(c=0,d=a.length;c<d;c++)b=a[c],o(b),this.sections[b.id]=b;return this.sections_enabled=a.length>1},v.prototype.gotChunkOfStudents=function(a,b){var c,d,f,g,h,i,j,k;for(i=0,j=a.length;i<j;i++)f=a[i],d=f.user,d.enrollment=f,(g=this.students)[k=d.id]||(g[k]=o(d)),(h=this.students[d.id]).sections||(h.sections=[]),this.students[d.id].sections.push(f.course_section_id);return c=b.getResponseHeader("Link"),c&&c.match(/rel="next"/)?(this.studentsPage+=1,e.ajaxJSON(this.options.students_url,"GET",{page:this.studentsPage},this.gotChunkOfStudents)):this.gotAllStudents()},v.prototype.gotAllStudents=function(){var a,b,c,d,f,g,h,i;h=this.students;for(b in h){f=h[b],f.computed_current_score||(f.computed_current_score=0),f.computed_final_score||(f.computed_final_score=0),f.secondary_identifier=f.sis_login_id||f.login_id,this.sections_enabled&&(d=e.toSentence(function(){var a,b,d,e;d=f.sections,e=[];for(a=0,b=d.length;a<b;a++)c=d[a],e.push(this.sections[c].name);return e}.call(this).sort())),f.display_name=t({avatar_image_url:f.avatar_url,display_name:f.name,url:f.enrollment.grades.html_url,sectionNames:d}),i=this.assignments;for(b in i)a=i[b],f[g="assignment_"+b]||(f[g]={assignment_id:b,user_id:f.id});this.rows.push(f)}return this.initGrid(),this.buildRows(),this.getSubmissionsChunks(),this.initHeader()},v.prototype.arrangeColumnsBy=function(a){var b;return a&&a!==this._sortColumnsBy&&(this.$columnArrangementTogglers.each(function(){return e(this).closest("li").showIf(e(this).data("arrangeColumnsBy")!==a)}),this._sortColumnsBy=a,h[a==="due_date"?"contextSet":"contextRemove"]("sort_grade_colums_by",a),b=this.gradeGrid.getColumns(),b.sort(this.columnSortFn),this.gradeGrid.setColumns(b),this.fixColumnReordering(),this.buildRows()),this._sortColumnsBy||(this._sortColumnsBy=h.contextGet("sort_grade_colums_by")||"assignment_group")},v.prototype.columnSortFn=function(a,b){var c,d,e,f,g,h;if(b.type==="total_grade")return-1;if(a.type==="total_grade")return 1;if(b.type==="assignment_group"&&a.type!=="assignment_group")return-1;if(a.type==="assignment_group"&&b.type!=="assignment_group")return 1;if(a.type==="assignment_group"&&b.type==="assignment_group")return a.object.position-b.object.position;if(a.type==="assignment"&&b.type==="assignment")return this.arrangeColumnsBy()==="assignment_group"?(e=a.object.assignment_group.position-b.object.assignment_group.position,f=a.object.position-b.object.position,e*1e6+f):(c=((g=a.object.due_at)!=null?g.timestamp:void 0)||Number.MAX_VALUE,d=((h=b.object.due_at)!=null?h.timestamp:void 0)||Number.MAX_VALUE,c===d?a.object.name===b.object.name?0:a.object.name>b.object.name?1:-1:c-d);throw"unhandled column sort condition"},v.prototype.rowFilter=function(a){var c;return!this.sectionToShow||(c=this.sectionToShow,b.call(a.sections,c)>=0)},v.prototype.handleAssignmentMutingChange=function(a){var b,c;return c=this.gradeGrid.getColumnIndex("assignment_"+a.id),b=this.gradeGrid.getColumns()[c],b.name=this.assignmentHeaderHtml(a),this.gradeGrid.setColumns(this.gradeGrid.getColumns()),this.fixColumnReordering(),this.buildRows()},v.prototype.buildRows=function(){var a,b,c,d,e,f,g,h,i,j,k;this.rows.length=0,d={},h=this.gradeGrid.getColumns();for(c in h){a=h[c];if(""+((i=a.object)!=null?i.submission_types:void 0)!="attendance")continue;a.unselectable=!this.show_attendance,a.cssClass=this.show_attendance?"":"completely-hidden",this.$grid.find("[id*='"+a.id+"']").showIf(this.show_attendance)}j=this.students;for(c in j)e=j[c],e.row=-1,this.rowFilter(e)&&(this.rows.push(e),this.calculateStudentGrade(e),d[e.id]=this.sortFn(e));this.rows.sort(function(a,b){return d[a.id]<d[b.id]?-1:d[a.id]>d[b.id]?1:0}),k=this.rows;for(b=f=0,g=k.length;f<g;b=++f)e=k[b],e.row=b;return this.multiGrid.invalidate()},v.prototype.getSubmissionsChunks=function(){var a,b,c,d;d=[];for(;;){c=this.rows.slice(this.chunk_start,this.chunk_start+this.options.chunk_size);if(!c.length){this.allSubmissionsLoaded=!0;break}a={student_ids:function(){var a,d,e;e=[];for(a=0,d=c.length;a<d;a++)b=c[a],e.push(b.id);return e}(),response_fields:["user_id","url","score","grade","submission_type","submitted_at","assignment_id","grade_matches_current_submission"]},e.ajaxJSON(this.options.submissions_url,"GET",a,this.gotSubmissionsChunk),d.push(this.chunk_start+=this.options.chunk_size)}return d},v.prototype.gotSubmissionsChunk=function(a){var b,c,d,e,f,g,h,i;for(e=0,g=a.length;e<g;e++){b=a[e],c=this.students[b.user_id],i=b.submissions;for(f=0,h=i.length;f<h;f++)d=i[f],this.updateSubmission(d);c.loaded=!0,this.multiGrid.invalidateRow(c.row),this.calculateStudentGrade(c)}return this.multiGrid.render()},v.prototype.updateSubmission=function(a){var b;return b=this.students[a.user_id],a.submitted_at&&(a.submitted_at=e.parseFromISO(a.submitted_at)),b["assignment_"+a.assignment_id]=a},v.prototype.updateSubmissionsFromExternal=function(a){var b,c,d,e;for(d=0,e=a.length;d<e;d++)c=a[d],b=this.students[c.user_id],this.updateSubmission(c),this.multiGrid.invalidateRow(b.row),this.calculateStudentGrade(b);return this.multiGrid.render()},v.prototype.cellFormatter=function(a,b,c){var d;return this.rows[a].loaded?c==null?this.staticCellFormatter(a,b,"-"):(d=this.assignments[c.assignment_id],d==null?this.staticCellFormatter(a,b,""):d.grading_type==="points"&&d.points_possible?m.out_of.formatter(a,b,c,d):(m[d.grading_type]||m).formatter(a,b,c,d)):this.staticCellFormatter(a,b,"")},v.prototype.staticCellFormatter=function(a,b,c){return"<div class='cell-content gradebook-cell'>"+c+"</div>"},v.prototype.groupTotalFormatter=function(a,b,c,d,e){var f,h;return c==null?"":(h=Math.round(c.score/c.possible*1e3)/10,isNaN(h)&&(h=0),c.possible&&this.options.grading_standard&&d.type==="total_grade"&&(f=g.letter_grade(this.options.grading_standard,h)),s({score:c.score,possible:c.possible,letterGrade:f,percentage:h}))},v.prototype.calculateStudentGrade=function(a){var b,c,d,e,f,g,h,i,j;if(a.loaded){b=this.include_ungraded_assignments?"final":"current",f=function(){var b;b=[];for(d in a)g=a[d],d.match(/^assignment_(?!group)/)&&b.push(g);return b}(),e=INST.GradeCalculator.calculate(f,this.assignmentGroups,this.options.group_weighting_scheme),j=e.group_sums;for(h=0,i=j.length;h<i;h++)c=j[h],a["assignment_group_"+c.group.id]=c[b];return a.total_grade=e[b]}},v.prototype.highlightColumn=function(a){var b;return isNaN(a)&&(b=a.currentTarget.className.match(/c\d+/),b&&(a=b.toString().replace("c",""))),this.$grid.find(".slick-header-column:eq("+a+")").addClass("hovered-column")},v.prototype.unhighlightColumns=function(){return this.$grid.find(".hovered-column").removeClass("hovered-column")},v.prototype.fixColumnReordering=function(){var a,b,c,d,f,g,h,i=this;return a=e("#gradebook_grid").find(".slick-header-columns"),g=a.sortable("option","items"),f='> *:not([id*="assignment_group"]):not([id*="total_grade"])',(d=function(){var b;return a.sortable("option","items",f),b=e(g,a).not(e(f,a)),b.data("sortable-item",null)})(),(c=function(){return a.find(".gradebook-header-drop").click(function(a){var b;return b=e(a.target),b.data("gradebookHeaderMenu")||b.data("gradebookHeaderMenu",new n(i.assignments[b.data("assignmentId")],b,i)),!1})})(),h=a.sortable("option","stop"),(b=function(){return a.sortable("option","stop",function(e,f){var i;return a.sortable("option","items",g),i=h.apply(this,arguments),d(),c(),b(),i})})()},v.prototype.minimizeColumn=function(a){var b,c;return b=a.index(),c=this.gradeGrid.getColumns()[b],c.cssClass=(c.cssClass||"").replace(" minimized","")+" minimized",c.unselectable=!0,c.unminimizedName=c.name,c.name="",c.minimized=!0,this.$grid.find(".l"+b).add(a).addClass("minimized"),this.assignmentsToHide.push(c.id),h.contextSet("hidden_columns",f.uniq(this.assignmentsToHide))},v.prototype.unminimizeColumn=function(a){var b,c;return b=a.index(),c=this.gradeGrid.getColumns()[b],c.cssClass=(c.cssClass||"").replace(" minimized",""),c.unselectable=!1,c.name=c.unminimizedName,c.minimized=!1,this.$grid.find(".l"+b).add(a).removeClass("minimized"),a.find(".slick-column-name").html(c.name),this.assignmentsToHide=e.grep(this.assignmentsToHide,function(a){return a!==c.id}),h.contextSet("hidden_columns",f.uniq(this.assignmentsToHide))},v.prototype.hoverMinimizedCell=function(a){var b,f,g,h,i,j,k,l=this;return b=e(a.currentTarget).removeClass("hover"),g=this.gradeGrid.getColumns()[b.index()],f=g.object,i=b.offset(),h=[f.name],b.hasClass("slick-cell")?(j=this.rows[this.gradeGrid.getCellFromEvent(a).row][g.id],f.points_possible!=null?h.push(""+((k=j.score)!=null?k:"--")+" / "+f.points_possible):j.score!=null&&h.push(j.score),Array.prototype.push.apply(h,e.map(m.classesBasedOnSubmission(j,f),function(a){return d["#submission_tooltip_"+a]}))):f.points_possible!=null&&h.push(c.t("points_out_of","out of %{points_possible}",{points_possible:f.points_possible})),b.data("tooltip",e("<span />",{"class":"gradebook-tooltip",css:{left:i.left-15,top:i.top,zIndex:1e4,display:"block"},html:h.join("<br />")}).appendTo("body").css("top",function(a,b){return parseInt(b)-e(this).outerHeight()}))},v.prototype.unhoverMinimizedCell=function(a){var b;if(b=e(this).data("tooltip"))return a.toElement===b[0]?b.mouseleave(function(){return b.remove()}):b.remove()},v.prototype.fixMaxHeaderWidth=function(){return this.$grid.find(".slick-header-columns").width(1e6)},v.prototype.onGridInit=function(){var a,b,c=this;return this.fixColumnReordering(),b={},e(this.spinner.el).remove(),e("#gradebook_wrapper").show(),this.$grid=a=e("#gradebook_grid").fillWindowWithMe({alsoResize:"#gradebook_students_grid",onResize:function(){return c.multiGrid.resizeCanvas()}}).delegate(".slick-cell",{"mouseenter.gradebook focusin.gradebook":this.highlightColumn,"mouseleave.gradebook focusout.gradebook":this.unhighlightColumns,"mouseenter focusin":function(b){return a.find(".hover, .focus").removeClass("hover focus"),e(this).addClass(b.type==="mouseenter"?"hover":"focus")},"mouseleave focusout":function(){return e(this).removeClass("hover focus")}}).delegate(".gradebook-cell-comment","click.gradebook",function(a){var b;return a.preventDefault(),b=e(a.currentTarget).data(),k.open(c.assignments[b.assignmentId],c.students[b.userId],c.options)}).delegate(".minimized",{mouseenter:this.hoverMinimizedCell,mouseleave:this.unhoverMinimizedCell}),this.fixMaxHeaderWidth(),e("#gradebook_grid .slick-resizable-handle").live("drag",function(a,b){return c.$grid.find(".slick-header-column").each(function(a,b){var d,f;d=e(b),f=c.gradeGrid.getColumns()[a];if(d.outerWidth()>minimumAssignmentColumWidth){if(f.minimized)return c.unminimizeColumn(d)}else if(!f.minimized)return c.minimizeColumn(d)})}),e(document).trigger("gridready")},v.prototype.initHeader=function(){var a,b,d,g,i,j,k,l,m,n=this;if(this.sections_enabled){g=c.t("all_sections","All Sections"),k=[{name:g,checked:!this.sectionToShow}],m=this.sections;for(i in m)j=m[i],k.push({name:j.name,id:i,checked:this.sectionToShow===i});a=e(q({sections:k,scrolling:k.length>15})),(l=function(){return e("#section_being_shown").html(n.sectionToShow?n.sections[n.sectionToShow].name:g)})(),e("#section_to_show").after(a).show().kyleMenu({buttonOpts:{icons:{primary:"ui-icon-sections",secondary:"ui-icon-droparrow"}}}),a.bind("menuselect",function(b,c){return n.sectionToShow=Number(a.find('[aria-checked="true"] input[name="section_to_show_radio"]').val())||void 0,h[n.sectionToShow?"contextSet":"contextRemove"]("grading_show_only_section",n.sectionToShow),l(),n.buildRows()})}return b=e("#gradebook_settings").next(),e.each(["show_attendance","include_ungraded_assignments"],function(a,c){return b.find("#"+c).prop("checked",n[c]).change(function(a){return n[c]=e(a.target).is(":checked"),h.contextSet(c,n[c]),c==="show_attendance"&&n.gradeGrid.setColumns(n.getVisibleGradeGridColumns()),n.buildRows()})}),f.detect(this.gradeGrid.getColumns(),function(a){var b;return((b=a.object)!=null?b.submission_types:void 0)==="attendance"})||b.find("#show_attendance").hide(),this.$columnArrangementTogglers=e("#gradebook-toolbar [data-arrange-columns-by]").bind("click",function(a){var b;return a.preventDefault(),b=e(a.currentTarget).data("arrangeColumnsBy"),n.arrangeColumnsBy(b)}),this.arrangeColumnsBy("assignment_group"),e("#gradebook_settings").show().kyleMenu({buttonOpts:{icons:{primary:"ui-icon-cog",secondary:"ui-icon-droparrow"}}}),d=null,b.find(".gradebook_upload_link").click(function(a){var b;return a.preventDefault(),d||(b={download_gradebook_csv_url:""+n.options.context_url+"/gradebook.csv",action:""+n.options.context_url+"/gradebook_uploads",authenticityToken:e("#ajax_authenticity_token").text()},d=e(p(b)).dialog({bgiframe:!0,autoOpen:!1,modal:!0,width:720,resizable:!1}).fixDialogButtons().delegate("#gradebook-upload-help-trigger","click",function(){return e(this).hide(),e("#gradebook-upload-help").show()})),d.dialog("open")})},v.prototype.getVisibleGradeGridColumns=function(){var a,b,c,d,e,f;b=[],f=this.allAssignmentColumns;for(d=0,e=f.length;d<e;d++)a=f[d],c=""+a.object.submission_types,c==="not_graded"||c==="attendance"&&!this.show_attendance||b.push(a);return b.concat(this.aggregateColumns)},v.prototype.assignmentHeaderHtml=function(a){return r({assignment:a,href:a.html_url,showPointsPossible:a.points_possible!=null})},v.prototype.initGrid=function(){var a,d,f,g,h,i,k,l,n,o,p,q,r,s,t=this;return a=e('<span style="padding:10px" />').appendTo("#content"),s=function(b,c,d){var e;return e=Math.max(a.text(b).outerWidth(),c),Math.min(e,d)},this.parentColumns=[{id:"student",name:c.t("student_name","Student Name"),field:"display_name",width:150,cssClass:"meta-cell",resizable:!1,sortable:!0},{id:"secondary_identifier",name:c.t("secondary_id","Secondary ID"),field:"secondary_identifier",width:100,cssClass:"meta-cell secondary_identifier_cell",resizable:!1,sortable:!0}],this.allAssignmentColumns=function(){var a,c,h=this;a=this.assignments,c=[];for(l in a)d=a[l],p=d&&d.grading_type==="points"&&d.points_possible!=null&&m.out_of,n=p?70:90,g="assignment_"+l,f={id:g,field:g,name:this.assignmentHeaderHtml(d),object:d,formatter:this.cellFormatter,editor:p||m[d.grading_type]||m,minWidth:u.assignment.min,maxWidth:u.assignment.max,width:s(d.name,n,u.assignment.max),sortable:!0,toolTip:d.name,type:"assignment"},b.call(this.assignmentsToHide,g)>=0&&(f.width=10,function(a){return e(document).bind("gridready",function(){return h.minimizeColumn(h.$grid.find("[id*='"+a+"']"))}).unbind("gridready.render").bind("gridready.render",function(){return h.gradeGrid.invalidate()})}(g)),c.push(f);return c}.call(this),this.aggregateColumns=function(){var a,b;a=this.assignmentGroups,b=[];for(l in a)i=a[l],k=""+i.name,i.group_weight!=null&&(q=c.toPercentage(i.group_weight,{precision:0}),k+="<div class='assignment-points-possible'>\n  "+c.t("percent_of_grade","%{percentage} of grade",{percentage:q})+"\n</div>"),b.push({id:"assignment_group_"+l,field:"assignment_group_"+l,formatter:this.groupTotalFormatter,name:k,toolTip:i.name,object:i,minWidth:u.assignmentGroup.min,maxWidth:u.assignmentGroup.max,width:s(i.name,u.assignmentGroup.min,u.assignmentGroup.max),cssClass:"meta-cell assignment-group-cell",sortable:!0,type:"assignment_group"});return b}.call(this),this.aggregateColumns.push({id:"total_grade",field:"total_grade",formatter:this.groupTotalFormatter,name:"Total",minWidth:u.total.min,maxWidth:u.total.max,width:s("Total",u.total.min,u.total.max),cssClass:"total-cell",sortable:!0,type:"total_grade"}),a.remove(),o=e.extend({enableCellNavigation:!1,enableColumnReorder:!1,enableAsyncPostRender:!0,asyncPostRenderDelay:1,autoEdit:!0,rowHeight:35,headerHeight:38},this.options),h=[{selector:"#gradebook_students_grid",columns:this.parentColumns},{selector:"#gradebook_grid",columns:this.getVisibleGradeGridColumns(),options:{enableCellNavigation:!0,editable:!0,syncColumnCellResize:!0,enableColumnReorder:!0}}],this.multiGrid=new j(this.rows,o,h,1),this.gradeGrid=this.multiGrid.grids[1],this.gradeGrid.onCellChange.subscribe(function(a,b){return t.calculateStudentGrade(b.item),t.gradeGrid.invalidate()}),r=function(a){var b,c,d,e,f;t.rows.sort(a),f=t.rows;for(b=d=0,e=f.length;d<e;b=++d)c=f[b],c.row=b;return t.multiGrid.invalidate()},this.gradeGrid.onSort.subscribe(function(a,b){return r(function(a,c){var d,e,f,g;return d=(f=a[b.sortCol.field])!=null?f.score:void 0,e=(g=c[b.sortCol.field])!=null?g.score:void 0,!d&&d!==0&&(d=-99999999999),!e&&e!==0&&(e=-99999999999),b.sortAsc?e-d:d-e})}),this.multiGrid.grids[0].onSort.subscribe(function(a,b){var c;return c={display_name:"sortable_name",secondary_identifier:"secondary_identifier"}[b.sortCol.field],r(function(a,d){var e;return e=a[c]<d[c]?-1:a[c]>d[c]?1:0,b.sortAsc?e:0-e})}),this.multiGrid.parent_grid.onKeyDown.subscribe(function(){return!1}),this.onGridInit()},v}()})}).call(this)