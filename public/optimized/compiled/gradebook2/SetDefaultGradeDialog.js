(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};define(["i18n!gradebook2","jquery","jst/SetDefaultGradeDialog","underscore","jquery.disableWhileLoading","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","vendor/jquery.ba-tinypubsub","compiled/jquery/fixDialogButtons","jst/_grading_box"],function(b,c,d,e){var f;return f=function(){function f(b,c){this.assignment=b,this.gradebook=c,this.initDialog=a(this.initDialog,this),this.initDialog()}return f.name="SetDefaultGradeDialog",f.prototype.initDialog=function(){var a,f=this;return a={assignment:this.assignment,showPointsPossible:this.assignment.points_possible||this.assignment.points_possible==="0",url:"/courses/"+this.gradebook.options.context_id+"/gradebook/update_submission"},a["assignment_grading_type_is_"+this.assignment.grading_type]=!0,this.$dialog=c(d(a)),this.$dialog.dialog({resizable:!1,width:350,open:function(){return f.$dialog.find(".grading_box").focus()},close:function(){return f.$dialog.remove()}}).fixDialogButtons(),this.$dialog.formSubmit({disableWhileLoading:!0,processData:function(a){var c,d,g,h,i,j,k,l;j=0,d=function(a){return a["assignment_"+f.assignment.id].score==null},c=a.overwrite_existing_grades,h=function(a){return f.gradebook.sectionToShow?e.include(a.sections,f.gradebook.sectionToShow):!0},k=function(b,c){return j+=1,a["submissions[submission_"+b+"][assignment_id]"]=f.assignment.id,a["submissions[submission_"+b+"][user_id]"]=c.id,a["submissions[submission_"+b+"][grade]"]=a.default_grade},l=f.gradebook.students;for(g in l)i=l[g],(d(i)||c)&&h(i)&&k(g,i);return j===0?(alert(b.t("alerts.none_to_update","None to Update")),!1):a},success:function(a){var d,e;return e=function(){var b,c,e;e=[];for(b=0,c=a.length;b<c;b++)d=a[b],e.push(d.submission);return e}(),c.publish("submissions_updated",[e]),alert(b.t("alerts.scores_updated",{one:"1 Student score updated",other:"%{count} Student scores updated"},{count:a.length})),f.$dialog.remove()}})},f}()})}).call(this)