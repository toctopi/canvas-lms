(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function e(){this.constructor=a}for(var d in c)b.call(c,d)&&(a[d]=c[d]);return e.prototype=c.prototype,a.prototype=new e,a.__super__=c.prototype,a};define(["i18n!editor","jquery","compiled/editor/EditorToggle"],function(b,d,e){var f;return f=function(e){function f(b){this.view=b,this.onSaveError=a(this.onSaveError,this),this.onSaveSuccess=a(this.onSaveSuccess,this),f.__super__.constructor.call(this,this.view.$(".message:first")),this.cancelButton=this.createCancelButton(),this.done.addClass("small-button")}return c(f,e),f.name="EntryEditor",f.prototype.display=function(a){f.__super__.display.apply(this,arguments),this.cancelButton.detach();if((a!=null?a.cancel:void 0)!==!0)return this.view.model.save({messageNotification:b.t("saving","Saving..."),message:this.content},{success:this.onSaveSuccess,error:this.onSaveError})},f.prototype.createCancelButton=function(){var a=this;return d("<a/>").html(b.t("cancel","Cancel")).attr("href","javascript:").addClass("cancel_button").click(function(){return a.display({cancel:!0})})},f.prototype.edit=function(){return f.__super__.edit.apply(this,arguments),this.cancelButton.insertAfter(this.done)},f.prototype.getContent=function(){return this.view.model.get("message")},f.prototype.onSaveSuccess=function(){return this.view.model.set("messageNotification","")},f.prototype.onSaveError=function(){return this.view.model.set({messageNotification:b.t("save_failed","Failed to save, please try again later")}),this.edit()},f}(e)})}).call(this)