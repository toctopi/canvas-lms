(function(){define(["i18n!slideshow","jquery","str/htmlEscape","jqueryui/dialog","jquery.instructure_misc_helpers"],function(a,b,c){var d,e;return d=function(){function a(a,d){var e,f;this.title=a,this.slideshow=d,this.body=b("<li/>").addClass("slide"),this.slideshow.slides.append(this.body),this.prevSlide=this.slideshow.slideObjects[this.slideshow.slideObjects.length-1],(f=this.prevSlide)!=null&&(f.nextSlide=this),this.nextSlide=null,this.indicator=b("<a/>").addClass("slide").attr("href","#").attr("title",c(this.title)).html("&nbsp;"),this.indicator.data("slide",this),this.slideshow.navigation.append(this.indicator),e=this,this.indicator.click(function(){return d.showSlide(e),!1}),this.hide()}return a.name="Slide",a.prototype.addParagraph=function(a,d){var e;return e=b("<p/>"),d!=null&&e.addClass(d),e.html(c(a)),this.body.append(e)},a.prototype.addImage=function(a,c,d){var e,f;return e=b("<img/>").attr("src",a),c!=null&&e.addClass(c),d?(f=b("<a/>").attr("href",d).attr("target","_blank"),f.append(e),this.body.append(f)):this.body.append(e)},a.prototype.show=function(){return this.body.show(),this.indicator.addClass("current_slide")},a.prototype.hide=function(){return this.indicator.removeClass("current_slide"),this.body.hide()},a}(),e=function(){function e(d){var e;e=this,this.dom=b("<div/>").attr("id",d),this.slides=b("<ul/>").addClass("slides"),this.dom.append(this.slides),this.separator=b("<div/>").addClass("separator"),this.dom.append(this.separator),this.navigation=b("<div/>").addClass("navigation"),this.dom.append(this.navigation),this.backButton=b("<a/>").addClass("back").attr("href","#").attr("title",c(a.t("titles.back","Back"))).html("&nbsp;"),this.navigation.append(this.backButton),this.backButton.click(function(){return e.showPrevSlide(),!1}),this.forwardButton=b("<a/>").addClass("forward").attr("href","#").attr("title",c(a.t("titles.forward","Forward"))).html("&nbsp;"),this.navigation.append(this.forwardButton),this.forwardButton.click(function(){return e.showNextSlide(),!1}),this.closeButton=b("<a/>").addClass("close").attr("href","#").attr("title",c(a.t("titles.close","Close"))).html("&nbsp;"),this.navigation.append(this.closeButton),this.closeButton.click(function(){return e.close(),!1}),this.slideObjects=[],this.slideShown=null}return e.name="Slideshow",e.prototype.addSlide=function(a,b){var c;return c=new d(a,this),this.slideObjects.push(c),b(c)},e.prototype.start=function(){return this.showSlide(this.slideObjects[0]),this.dialog=this.dom.dialog({dialogClass:"slideshow_dialog",height:529,width:700,modal:!0,draggable:!1,resizable:!1})},e.prototype.showSlide=function(a){var b;if(a){if(!this.slideShown||a!==this.slideShown)(b=this.slideShown)!=null&&b.hide(),this.slideShown=a,this.slideShown.show();return this.slideShown.prevSlide?this.backButton.removeClass("inactive"):this.backButton.addClass("inactive"),this.slideShown.nextSlide?this.forwardButton.removeClass("inactive"):this.forwardButton.addClass("inactive")}},e.prototype.showPrevSlide=function(){var a;return this.showSlide((a=this.slideShown)!=null?a.prevSlide:void 0)},e.prototype.showNextSlide=function(){var a;return this.showSlide((a=this.slideShown)!=null?a.nextSlide:void 0)},e.prototype.close=function(){var a;return this.dom.dialog("close"),this.dom.hide(),(a=this.slideShown)!=null&&a.hide(),this.slideShown=null},e}(),e})}).call(this)