define(["jquery"],function(a){a.fn.loadingImg=function(b){if(!this||this.length===0)return this;var c=this.filter(":first"),d;if(b=="hide"||b=="remove"){c.children(".loading_image").remove(),d=c.data("loading_images")||[];for(var e in d)d[e]&&d[e].remove();return c.data("loading_images",null),this}if(b=="remove_once"){c.children(".loading_image").remove(),d=c.data("loading_images")||[];var f=d.pop();return f&&f.remove(),c.data("loading_images",d),this}b=="register_image"&&arguments.length==3&&(a.fn.loadingImg.image_files[arguments[1]]=arguments[2]),b=a.extend({},a.fn.loadingImg.defaults,b);var g=a.fn.loadingImg.image_files.normal;b.image_size&&a.fn.loadingImg.image_files[b.image_size]&&(g=a.fn.loadingImg.image_files[b.image_size]),b.paddingTop&&(b.vertical=b.paddingTop);var h=0;b.vertical&&b.vertical!="top"&&(b.vertical=="bottom"?h=c.outerHeight():b.vertical=="middle"?h=c.outerHeight()/2-g.height/2:(h=parseInt(b.vertical,10),isNaN(h)&&(h=0)));var i=0;b.horizontal&&b.horizontal!="left"&&(b.horizontal=="right"?i=c.outerWidth()-g.width:b.horizontal=="middle"?i=c.outerWidth()/2-g.width/2:(i=parseInt(b.horizontal,10),isNaN(i)&&(i=0)));var j=c.zIndex()+1,k=a(document.createElement("div")).addClass("loading_image_holder"),l=a(document.createElement("img")).attr("src",g.url);k.append(l),d=c.data("loading_images")||[],d.push(k),c.data("loading_images",d);if(!c.css("position")||c.css("position")=="static"){var m=c.offset(),n=m.top,o=m.left;b.vertical&&(n+=h),b.horizontal&&(o+=i),k.css({zIndex:j,position:"absolute",top:n,left:o}),a("body").append(k)}else k.css({zIndex:j,position:"absolute",top:h,left:i}),c.append(k);return a(this)},a.fn.loadingImg.defaults={paddingTop:0,image_size:"normal",vertical:0,horizontal:0},a.fn.loadingImg.image_files={normal:{url:"/images/ajax-loader.gif",width:32,height:32},small:{url:"/images/ajax-loader-small.gif",width:16,height:16}},a.fn.loadingImage=a.fn.loadingImg})